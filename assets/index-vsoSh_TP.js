var e=Object.create,t=Object.defineProperty,n=Object.getOwnPropertyDescriptor,r=Object.getOwnPropertyNames,i=Object.getPrototypeOf,a=Object.prototype.hasOwnProperty,o=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),s=(e,i,o,s)=>{if(i&&typeof i==`object`||typeof i==`function`)for(var c=r(i),l=0,u=c.length,d;l<u;l++)d=c[l],!a.call(e,d)&&d!==o&&t(e,d,{get:(e=>i[e]).bind(null,d),enumerable:!(s=n(i,d))||s.enumerable});return e},c=(n,r,a)=>(a=n==null?{}:e(i(n)),s(r||!n||!n.__esModule?t(a,`default`,{value:n,enumerable:!0}):a,n));(function(){let e=document.createElement(`link`).relList;if(e&&e.supports&&e.supports(`modulepreload`))return;for(let e of document.querySelectorAll(`link[rel="modulepreload"]`))n(e);new MutationObserver(e=>{for(let t of e)if(t.type===`childList`)for(let e of t.addedNodes)e.tagName===`LINK`&&e.rel===`modulepreload`&&n(e)}).observe(document,{childList:!0,subtree:!0});function t(e){let t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),e.crossOrigin===`use-credentials`?t.credentials=`include`:e.crossOrigin===`anonymous`?t.credentials=`omit`:t.credentials=`same-origin`,t}function n(e){if(e.ep)return;e.ep=!0;let n=t(e);fetch(e.href,n)}})();var l=o((e=>{var t=Symbol.for(`react.transitional.element`),n=Symbol.for(`react.portal`),r=Symbol.for(`react.fragment`),i=Symbol.for(`react.strict_mode`),a=Symbol.for(`react.profiler`),o=Symbol.for(`react.consumer`),s=Symbol.for(`react.context`),c=Symbol.for(`react.forward_ref`),l=Symbol.for(`react.suspense`),u=Symbol.for(`react.memo`),d=Symbol.for(`react.lazy`),f=Symbol.for(`react.activity`),p=Symbol.iterator;function m(e){return typeof e!=`object`||!e?null:(e=p&&e[p]||e[`@@iterator`],typeof e==`function`?e:null)}var h={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},g=Object.assign,_={};function v(e,t,n){this.props=e,this.context=t,this.refs=_,this.updater=n||h}v.prototype.isReactComponent={},v.prototype.setState=function(e,t){if(typeof e!=`object`&&typeof e!=`function`&&e!=null)throw Error(`takes an object of state variables to update or a function which returns an object of state variables.`);this.updater.enqueueSetState(this,e,t,`setState`)},v.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,`forceUpdate`)};function y(){}y.prototype=v.prototype;function b(e,t,n){this.props=e,this.context=t,this.refs=_,this.updater=n||h}var x=b.prototype=new y;x.constructor=b,g(x,v.prototype),x.isPureReactComponent=!0;var S=Array.isArray;function C(){}var w={H:null,A:null,T:null,S:null},T=Object.prototype.hasOwnProperty;function E(e,n,r){var i=r.ref;return{$$typeof:t,type:e,key:n,ref:i===void 0?null:i,props:r}}function D(e,t){return E(e.type,t,e.props)}function O(e){return typeof e==`object`&&!!e&&e.$$typeof===t}function k(e){var t={"=":`=0`,":":`=2`};return`$`+e.replace(/[=:]/g,function(e){return t[e]})}var A=/\/+/g;function ee(e,t){return typeof e==`object`&&e&&e.key!=null?k(``+e.key):t.toString(36)}function te(e){switch(e.status){case`fulfilled`:return e.value;case`rejected`:throw e.reason;default:switch(typeof e.status==`string`?e.then(C,C):(e.status=`pending`,e.then(function(t){e.status===`pending`&&(e.status=`fulfilled`,e.value=t)},function(t){e.status===`pending`&&(e.status=`rejected`,e.reason=t)})),e.status){case`fulfilled`:return e.value;case`rejected`:throw e.reason}}throw e}function j(e,r,i,a,o){var s=typeof e;(s===`undefined`||s===`boolean`)&&(e=null);var c=!1;if(e===null)c=!0;else switch(s){case`bigint`:case`string`:case`number`:c=!0;break;case`object`:switch(e.$$typeof){case t:case n:c=!0;break;case d:return c=e._init,j(c(e._payload),r,i,a,o)}}if(c)return o=o(e),c=a===``?`.`+ee(e,0):a,S(o)?(i=``,c!=null&&(i=c.replace(A,`$&/`)+`/`),j(o,r,i,``,function(e){return e})):o!=null&&(O(o)&&(o=D(o,i+(o.key==null||e&&e.key===o.key?``:(``+o.key).replace(A,`$&/`)+`/`)+c)),r.push(o)),1;c=0;var l=a===``?`.`:a+`:`;if(S(e))for(var u=0;u<e.length;u++)a=e[u],s=l+ee(a,u),c+=j(a,r,i,s,o);else if(u=m(e),typeof u==`function`)for(e=u.call(e),u=0;!(a=e.next()).done;)a=a.value,s=l+ee(a,u++),c+=j(a,r,i,s,o);else if(s===`object`){if(typeof e.then==`function`)return j(te(e),r,i,a,o);throw r=String(e),Error(`Objects are not valid as a React child (found: `+(r===`[object Object]`?`object with keys {`+Object.keys(e).join(`, `)+`}`:r)+`). If you meant to render a collection of children, use an array instead.`)}return c}function M(e,t,n){if(e==null)return e;var r=[],i=0;return j(e,r,``,``,function(e){return t.call(n,e,i++)}),r}function ne(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(t){(e._status===0||e._status===-1)&&(e._status=1,e._result=t)},function(t){(e._status===0||e._status===-1)&&(e._status=2,e._result=t)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var N=typeof reportError==`function`?reportError:function(e){if(typeof window==`object`&&typeof window.ErrorEvent==`function`){var t=new window.ErrorEvent(`error`,{bubbles:!0,cancelable:!0,message:typeof e==`object`&&e&&typeof e.message==`string`?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process==`object`&&typeof process.emit==`function`){process.emit(`uncaughtException`,e);return}console.error(e)},P={map:M,forEach:function(e,t,n){M(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return M(e,function(){t++}),t},toArray:function(e){return M(e,function(e){return e})||[]},only:function(e){if(!O(e))throw Error(`React.Children.only expected to receive a single React element child.`);return e}};e.Activity=f,e.Children=P,e.Component=v,e.Fragment=r,e.Profiler=a,e.PureComponent=b,e.StrictMode=i,e.Suspense=l,e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=w,e.__COMPILER_RUNTIME={__proto__:null,c:function(e){return w.H.useMemoCache(e)}},e.cache=function(e){return function(){return e.apply(null,arguments)}},e.cacheSignal=function(){return null},e.cloneElement=function(e,t,n){if(e==null)throw Error(`The argument must be a React element, but you passed `+e+`.`);var r=g({},e.props),i=e.key;if(t!=null)for(a in t.key!==void 0&&(i=``+t.key),t)!T.call(t,a)||a===`key`||a===`__self`||a===`__source`||a===`ref`&&t.ref===void 0||(r[a]=t[a]);var a=arguments.length-2;if(a===1)r.children=n;else if(1<a){for(var o=Array(a),s=0;s<a;s++)o[s]=arguments[s+2];r.children=o}return E(e.type,i,r)},e.createContext=function(e){return e={$$typeof:s,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null},e.Provider=e,e.Consumer={$$typeof:o,_context:e},e},e.createElement=function(e,t,n){var r,i={},a=null;if(t!=null)for(r in t.key!==void 0&&(a=``+t.key),t)T.call(t,r)&&r!==`key`&&r!==`__self`&&r!==`__source`&&(i[r]=t[r]);var o=arguments.length-2;if(o===1)i.children=n;else if(1<o){for(var s=Array(o),c=0;c<o;c++)s[c]=arguments[c+2];i.children=s}if(e&&e.defaultProps)for(r in o=e.defaultProps,o)i[r]===void 0&&(i[r]=o[r]);return E(e,a,i)},e.createRef=function(){return{current:null}},e.forwardRef=function(e){return{$$typeof:c,render:e}},e.isValidElement=O,e.lazy=function(e){return{$$typeof:d,_payload:{_status:-1,_result:e},_init:ne}},e.memo=function(e,t){return{$$typeof:u,type:e,compare:t===void 0?null:t}},e.startTransition=function(e){var t=w.T,n={};w.T=n;try{var r=e(),i=w.S;i!==null&&i(n,r),typeof r==`object`&&r&&typeof r.then==`function`&&r.then(C,N)}catch(e){N(e)}finally{t!==null&&n.types!==null&&(t.types=n.types),w.T=t}},e.unstable_useCacheRefresh=function(){return w.H.useCacheRefresh()},e.use=function(e){return w.H.use(e)},e.useActionState=function(e,t,n){return w.H.useActionState(e,t,n)},e.useCallback=function(e,t){return w.H.useCallback(e,t)},e.useContext=function(e){return w.H.useContext(e)},e.useDebugValue=function(){},e.useDeferredValue=function(e,t){return w.H.useDeferredValue(e,t)},e.useEffect=function(e,t){return w.H.useEffect(e,t)},e.useEffectEvent=function(e){return w.H.useEffectEvent(e)},e.useId=function(){return w.H.useId()},e.useImperativeHandle=function(e,t,n){return w.H.useImperativeHandle(e,t,n)},e.useInsertionEffect=function(e,t){return w.H.useInsertionEffect(e,t)},e.useLayoutEffect=function(e,t){return w.H.useLayoutEffect(e,t)},e.useMemo=function(e,t){return w.H.useMemo(e,t)},e.useOptimistic=function(e,t){return w.H.useOptimistic(e,t)},e.useReducer=function(e,t,n){return w.H.useReducer(e,t,n)},e.useRef=function(e){return w.H.useRef(e)},e.useState=function(e){return w.H.useState(e)},e.useSyncExternalStore=function(e,t,n){return w.H.useSyncExternalStore(e,t,n)},e.useTransition=function(){return w.H.useTransition()},e.version=`19.2.0`})),u=o(((e,t)=>{t.exports=l()})),d=o((e=>{function t(e,t){var n=e.length;e.push(t);a:for(;0<n;){var r=n-1>>>1,a=e[r];if(0<i(a,t))e[r]=t,e[n]=a,n=r;else break a}}function n(e){return e.length===0?null:e[0]}function r(e){if(e.length===0)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;a:for(var r=0,a=e.length,o=a>>>1;r<o;){var s=2*(r+1)-1,c=e[s],l=s+1,u=e[l];if(0>i(c,n))l<a&&0>i(u,c)?(e[r]=u,e[l]=n,r=l):(e[r]=c,e[s]=n,r=s);else if(l<a&&0>i(u,n))e[r]=u,e[l]=n,r=l;else break a}}return t}function i(e,t){var n=e.sortIndex-t.sortIndex;return n===0?e.id-t.id:n}if(e.unstable_now=void 0,typeof performance==`object`&&typeof performance.now==`function`){var a=performance;e.unstable_now=function(){return a.now()}}else{var o=Date,s=o.now();e.unstable_now=function(){return o.now()-s}}var c=[],l=[],u=1,d=null,f=3,p=!1,m=!1,h=!1,g=!1,_=typeof setTimeout==`function`?setTimeout:null,v=typeof clearTimeout==`function`?clearTimeout:null,y=typeof setImmediate<`u`?setImmediate:null;function b(e){for(var i=n(l);i!==null;){if(i.callback===null)r(l);else if(i.startTime<=e)r(l),i.sortIndex=i.expirationTime,t(c,i);else break;i=n(l)}}function x(e){if(h=!1,b(e),!m)if(n(c)!==null)m=!0,S||(S=!0,O());else{var t=n(l);t!==null&&ee(x,t.startTime-e)}}var S=!1,C=-1,w=5,T=-1;function E(){return g?!0:!(e.unstable_now()-T<w)}function D(){if(g=!1,S){var t=e.unstable_now();T=t;var i=!0;try{a:{m=!1,h&&(h=!1,v(C),C=-1),p=!0;var a=f;try{b:{for(b(t),d=n(c);d!==null&&!(d.expirationTime>t&&E());){var o=d.callback;if(typeof o==`function`){d.callback=null,f=d.priorityLevel;var s=o(d.expirationTime<=t);if(t=e.unstable_now(),typeof s==`function`){d.callback=s,b(t),i=!0;break b}d===n(c)&&r(c),b(t)}else r(c);d=n(c)}if(d!==null)i=!0;else{var u=n(l);u!==null&&ee(x,u.startTime-t),i=!1}}break a}finally{d=null,f=a,p=!1}i=void 0}}finally{i?O():S=!1}}}var O;if(typeof y==`function`)O=function(){y(D)};else if(typeof MessageChannel<`u`){var k=new MessageChannel,A=k.port2;k.port1.onmessage=D,O=function(){A.postMessage(null)}}else O=function(){_(D,0)};function ee(t,n){C=_(function(){t(e.unstable_now())},n)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(e){e.callback=null},e.unstable_forceFrameRate=function(e){0>e||125<e?console.error(`forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported`):w=0<e?Math.floor(1e3/e):5},e.unstable_getCurrentPriorityLevel=function(){return f},e.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},e.unstable_requestPaint=function(){g=!0},e.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},e.unstable_scheduleCallback=function(r,i,a){var o=e.unstable_now();switch(typeof a==`object`&&a?(a=a.delay,a=typeof a==`number`&&0<a?o+a:o):a=o,r){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return s=a+s,r={id:u++,callback:i,priorityLevel:r,startTime:a,expirationTime:s,sortIndex:-1},a>o?(r.sortIndex=a,t(l,r),n(c)===null&&r===n(l)&&(h?(v(C),C=-1):h=!0,ee(x,a-o))):(r.sortIndex=s,t(c,r),m||p||(m=!0,S||(S=!0,O()))),r},e.unstable_shouldYield=E,e.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}})),f=o(((e,t)=>{t.exports=d()})),p=o((e=>{var t=u();function n(e){var t=`https://react.dev/errors/`+e;if(1<arguments.length){t+=`?args[]=`+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+=`&args[]=`+encodeURIComponent(arguments[n])}return`Minified React error #`+e+`; visit `+t+` for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`}function r(){}var i={d:{f:r,r:function(){throw Error(n(522))},D:r,C:r,L:r,m:r,X:r,S:r,M:r},p:0,findDOMNode:null},a=Symbol.for(`react.portal`);function o(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:r==null?null:``+r,children:e,containerInfo:t,implementation:n}}var s=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(e,t){if(e===`font`)return``;if(typeof t==`string`)return t===`use-credentials`?t:``}e.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,e.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)throw Error(n(299));return o(e,t,null,r)},e.flushSync=function(e){var t=s.T,n=i.p;try{if(s.T=null,i.p=2,e)return e()}finally{s.T=t,i.p=n,i.d.f()}},e.preconnect=function(e,t){typeof e==`string`&&(t?(t=t.crossOrigin,t=typeof t==`string`?t===`use-credentials`?t:``:void 0):t=null,i.d.C(e,t))},e.prefetchDNS=function(e){typeof e==`string`&&i.d.D(e)},e.preinit=function(e,t){if(typeof e==`string`&&t&&typeof t.as==`string`){var n=t.as,r=c(n,t.crossOrigin),a=typeof t.integrity==`string`?t.integrity:void 0,o=typeof t.fetchPriority==`string`?t.fetchPriority:void 0;n===`style`?i.d.S(e,typeof t.precedence==`string`?t.precedence:void 0,{crossOrigin:r,integrity:a,fetchPriority:o}):n===`script`&&i.d.X(e,{crossOrigin:r,integrity:a,fetchPriority:o,nonce:typeof t.nonce==`string`?t.nonce:void 0})}},e.preinitModule=function(e,t){if(typeof e==`string`)if(typeof t==`object`&&t){if(t.as==null||t.as===`script`){var n=c(t.as,t.crossOrigin);i.d.M(e,{crossOrigin:n,integrity:typeof t.integrity==`string`?t.integrity:void 0,nonce:typeof t.nonce==`string`?t.nonce:void 0})}}else t??i.d.M(e)},e.preload=function(e,t){if(typeof e==`string`&&typeof t==`object`&&t&&typeof t.as==`string`){var n=t.as,r=c(n,t.crossOrigin);i.d.L(e,n,{crossOrigin:r,integrity:typeof t.integrity==`string`?t.integrity:void 0,nonce:typeof t.nonce==`string`?t.nonce:void 0,type:typeof t.type==`string`?t.type:void 0,fetchPriority:typeof t.fetchPriority==`string`?t.fetchPriority:void 0,referrerPolicy:typeof t.referrerPolicy==`string`?t.referrerPolicy:void 0,imageSrcSet:typeof t.imageSrcSet==`string`?t.imageSrcSet:void 0,imageSizes:typeof t.imageSizes==`string`?t.imageSizes:void 0,media:typeof t.media==`string`?t.media:void 0})}},e.preloadModule=function(e,t){if(typeof e==`string`)if(t){var n=c(t.as,t.crossOrigin);i.d.m(e,{as:typeof t.as==`string`&&t.as!==`script`?t.as:void 0,crossOrigin:n,integrity:typeof t.integrity==`string`?t.integrity:void 0})}else i.d.m(e)},e.requestFormReset=function(e){i.d.r(e)},e.unstable_batchedUpdates=function(e,t){return e(t)},e.useFormState=function(e,t,n){return s.H.useFormState(e,t,n)},e.useFormStatus=function(){return s.H.useHostTransitionStatus()},e.version=`19.2.0`})),m=o(((e,t)=>{function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>`u`||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!=`function`))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}n(),t.exports=p()})),h=o((e=>{var t=f(),n=u(),r=m();function i(e){var t=`https://react.dev/errors/`+e;if(1<arguments.length){t+=`?args[]=`+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+=`&args[]=`+encodeURIComponent(arguments[n])}return`Minified React error #`+e+`; visit `+t+` for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`}function a(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function o(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function s(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function c(e){if(e.tag===31){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function l(e){if(o(e)!==e)throw Error(i(188))}function d(e){var t=e.alternate;if(!t){if(t=o(e),t===null)throw Error(i(188));return t===e?e:null}for(var n=e,r=t;;){var a=n.return;if(a===null)break;var s=a.alternate;if(s===null){if(r=a.return,r!==null){n=r;continue}break}if(a.child===s.child){for(s=a.child;s;){if(s===n)return l(a),e;if(s===r)return l(a),t;s=s.sibling}throw Error(i(188))}if(n.return!==r.return)n=a,r=s;else{for(var c=!1,u=a.child;u;){if(u===n){c=!0,n=a,r=s;break}if(u===r){c=!0,r=a,n=s;break}u=u.sibling}if(!c){for(u=s.child;u;){if(u===n){c=!0,n=s,r=a;break}if(u===r){c=!0,r=s,n=a;break}u=u.sibling}if(!c)throw Error(i(189))}}if(n.alternate!==r)throw Error(i(190))}if(n.tag!==3)throw Error(i(188));return n.stateNode.current===n?e:t}function p(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=p(e),t!==null)return t;e=e.sibling}return null}var h=Object.assign,g=Symbol.for(`react.element`),_=Symbol.for(`react.transitional.element`),v=Symbol.for(`react.portal`),y=Symbol.for(`react.fragment`),b=Symbol.for(`react.strict_mode`),x=Symbol.for(`react.profiler`),S=Symbol.for(`react.consumer`),C=Symbol.for(`react.context`),w=Symbol.for(`react.forward_ref`),T=Symbol.for(`react.suspense`),E=Symbol.for(`react.suspense_list`),D=Symbol.for(`react.memo`),O=Symbol.for(`react.lazy`),k=Symbol.for(`react.activity`),A=Symbol.for(`react.memo_cache_sentinel`),ee=Symbol.iterator;function te(e){return typeof e!=`object`||!e?null:(e=ee&&e[ee]||e[`@@iterator`],typeof e==`function`?e:null)}var j=Symbol.for(`react.client.reference`);function M(e){if(e==null)return null;if(typeof e==`function`)return e.$$typeof===j?null:e.displayName||e.name||null;if(typeof e==`string`)return e;switch(e){case y:return`Fragment`;case x:return`Profiler`;case b:return`StrictMode`;case T:return`Suspense`;case E:return`SuspenseList`;case k:return`Activity`}if(typeof e==`object`)switch(e.$$typeof){case v:return`Portal`;case C:return e.displayName||`Context`;case S:return(e._context.displayName||`Context`)+`.Consumer`;case w:var t=e.render;return e=e.displayName,e||=(e=t.displayName||t.name||``,e===``?`ForwardRef`:`ForwardRef(`+e+`)`),e;case D:return t=e.displayName||null,t===null?M(e.type)||`Memo`:t;case O:t=e._payload,e=e._init;try{return M(e(t))}catch{}}return null}var ne=Array.isArray,N=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,P=r.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,re={pending:!1,data:null,method:null,action:null},ie=[],ae=-1;function oe(e){return{current:e}}function se(e){0>ae||(e.current=ie[ae],ie[ae]=null,ae--)}function ce(e,t){ae++,ie[ae]=e.current,e.current=t}var le=oe(null),ue=oe(null),de=oe(null),fe=oe(null);function pe(e,t){switch(ce(de,t),ce(ue,e),ce(le,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?Vd(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=Vd(t),e=Hd(t,e);else switch(e){case`svg`:e=1;break;case`math`:e=2;break;default:e=0}}se(le),ce(le,e)}function me(){se(le),se(ue),se(de)}function he(e){e.memoizedState!==null&&ce(fe,e);var t=le.current,n=Hd(t,e.type);t!==n&&(ce(ue,e),ce(le,n))}function ge(e){ue.current===e&&(se(le),se(ue)),fe.current===e&&(se(fe),Qf._currentValue=re)}var _e,ve;function ye(e){if(_e===void 0)try{throw Error()}catch(e){var t=e.stack.trim().match(/\n( *(at )?)/);_e=t&&t[1]||``,ve=-1<e.stack.indexOf(`
    at`)?` (<anonymous>)`:-1<e.stack.indexOf(`@`)?`@unknown:0:0`:``}return`
`+_e+e+ve}var be=!1;function xe(e,t){if(!e||be)return``;be=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var r={DetermineComponentFrameRoot:function(){try{if(t){var n=function(){throw Error()};if(Object.defineProperty(n.prototype,`props`,{set:function(){throw Error()}}),typeof Reflect==`object`&&Reflect.construct){try{Reflect.construct(n,[])}catch(e){var r=e}Reflect.construct(e,[],n)}else{try{n.call()}catch(e){r=e}e.call(n.prototype)}}else{try{throw Error()}catch(e){r=e}(n=e())&&typeof n.catch==`function`&&n.catch(function(){})}}catch(e){if(e&&r&&typeof e.stack==`string`)return[e.stack,r.stack]}return[null,null]}};r.DetermineComponentFrameRoot.displayName=`DetermineComponentFrameRoot`;var i=Object.getOwnPropertyDescriptor(r.DetermineComponentFrameRoot,`name`);i&&i.configurable&&Object.defineProperty(r.DetermineComponentFrameRoot,`name`,{value:`DetermineComponentFrameRoot`});var a=r.DetermineComponentFrameRoot(),o=a[0],s=a[1];if(o&&s){var c=o.split(`
`),l=s.split(`
`);for(i=r=0;r<c.length&&!c[r].includes(`DetermineComponentFrameRoot`);)r++;for(;i<l.length&&!l[i].includes(`DetermineComponentFrameRoot`);)i++;if(r===c.length||i===l.length)for(r=c.length-1,i=l.length-1;1<=r&&0<=i&&c[r]!==l[i];)i--;for(;1<=r&&0<=i;r--,i--)if(c[r]!==l[i]){if(r!==1||i!==1)do if(r--,i--,0>i||c[r]!==l[i]){var u=`
`+c[r].replace(` at new `,` at `);return e.displayName&&u.includes(`<anonymous>`)&&(u=u.replace(`<anonymous>`,e.displayName)),u}while(1<=r&&0<=i);break}}}finally{be=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:``)?ye(n):``}function Se(e,t){switch(e.tag){case 26:case 27:case 5:return ye(e.type);case 16:return ye(`Lazy`);case 13:return e.child!==t&&t!==null?ye(`Suspense Fallback`):ye(`Suspense`);case 19:return ye(`SuspenseList`);case 0:case 15:return xe(e.type,!1);case 11:return xe(e.type.render,!1);case 1:return xe(e.type,!0);case 31:return ye(`Activity`);default:return``}}function Ce(e){try{var t=``,n=null;do t+=Se(e,n),n=e,e=e.return;while(e);return t}catch(e){return`
Error generating stack: `+e.message+`
`+e.stack}}var we=Object.prototype.hasOwnProperty,Te=t.unstable_scheduleCallback,Ee=t.unstable_cancelCallback,De=t.unstable_shouldYield,Oe=t.unstable_requestPaint,ke=t.unstable_now,Ae=t.unstable_getCurrentPriorityLevel,je=t.unstable_ImmediatePriority,Me=t.unstable_UserBlockingPriority,Ne=t.unstable_NormalPriority,Pe=t.unstable_LowPriority,Fe=t.unstable_IdlePriority,Ie=t.log,Le=t.unstable_setDisableYieldValue,Re=null,ze=null;function Be(e){if(typeof Ie==`function`&&Le(e),ze&&typeof ze.setStrictMode==`function`)try{ze.setStrictMode(Re,e)}catch{}}var Ve=Math.clz32?Math.clz32:We,He=Math.log,Ue=Math.LN2;function We(e){return e>>>=0,e===0?32:31-(He(e)/Ue|0)|0}var Ge=256,Ke=262144,qe=4194304;function Je(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Ye(e,t,n){var r=e.pendingLanes;if(r===0)return 0;var i=0,a=e.suspendedLanes,o=e.pingedLanes;e=e.warmLanes;var s=r&134217727;return s===0?(s=r&~a,s===0?o===0?n||(n=r&~e,n!==0&&(i=Je(n))):i=Je(o):i=Je(s)):(r=s&~a,r===0?(o&=s,o===0?n||(n=s&~e,n!==0&&(i=Je(n))):i=Je(o)):i=Je(r)),i===0?0:t!==0&&t!==i&&(t&a)===0&&(a=i&-i,n=t&-t,a>=n||a===32&&n&4194048)?t:i}function Xe(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function Ze(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Qe(){var e=qe;return qe<<=1,!(qe&62914560)&&(qe=4194304),e}function $e(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function et(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function tt(e,t,n,r,i,a){var o=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var s=e.entanglements,c=e.expirationTimes,l=e.hiddenUpdates;for(n=o&~n;0<n;){var u=31-Ve(n),d=1<<u;s[u]=0,c[u]=-1;var f=l[u];if(f!==null)for(l[u]=null,u=0;u<f.length;u++){var p=f[u];p!==null&&(p.lane&=-536870913)}n&=~d}r!==0&&nt(e,r,0),a!==0&&i===0&&e.tag!==0&&(e.suspendedLanes|=a&~(o&~t))}function nt(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var r=31-Ve(t);e.entangledLanes|=t,e.entanglements[r]=e.entanglements[r]|1073741824|n&261930}function rt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-Ve(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}function it(e,t){var n=t&-t;return n=n&42?1:at(n),(n&(e.suspendedLanes|t))===0?n:0}function at(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function ot(e){return e&=-e,2<e?8<e?e&134217727?32:268435456:8:2}function st(){var e=P.p;return e===0?(e=window.event,e===void 0?32:mp(e.type)):e}function ct(e,t){var n=P.p;try{return P.p=e,t()}finally{P.p=n}}var lt=Math.random().toString(36).slice(2),ut=`__reactFiber$`+lt,dt=`__reactProps$`+lt,ft=`__reactContainer$`+lt,pt=`__reactEvents$`+lt,mt=`__reactListeners$`+lt,ht=`__reactHandles$`+lt,gt=`__reactResources$`+lt,_t=`__reactMarker$`+lt;function vt(e){delete e[ut],delete e[dt],delete e[pt],delete e[mt],delete e[ht]}function yt(e){var t=e[ut];if(t)return t;for(var n=e.parentNode;n;){if(t=n[ft]||n[ut]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=df(e);e!==null;){if(n=e[ut])return n;e=df(e)}return t}e=n,n=e.parentNode}return null}function bt(e){if(e=e[ut]||e[ft]){var t=e.tag;if(t===5||t===6||t===13||t===31||t===26||t===27||t===3)return e}return null}function xt(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(i(33))}function St(e){var t=e[gt];return t||=e[gt]={hoistableStyles:new Map,hoistableScripts:new Map},t}function Ct(e){e[_t]=!0}var wt=new Set,Tt={};function Et(e,t){Dt(e,t),Dt(e+`Capture`,t)}function Dt(e,t){for(Tt[e]=t,e=0;e<t.length;e++)wt.add(t[e])}var Ot=RegExp(`^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$`),kt={},At={};function jt(e){return we.call(At,e)?!0:we.call(kt,e)?!1:Ot.test(e)?At[e]=!0:(kt[e]=!0,!1)}function Mt(e,t,n){if(jt(t))if(n===null)e.removeAttribute(t);else{switch(typeof n){case`undefined`:case`function`:case`symbol`:e.removeAttribute(t);return;case`boolean`:var r=t.toLowerCase().slice(0,5);if(r!==`data-`&&r!==`aria-`){e.removeAttribute(t);return}}e.setAttribute(t,``+n)}}function Nt(e,t,n){if(n===null)e.removeAttribute(t);else{switch(typeof n){case`undefined`:case`function`:case`symbol`:case`boolean`:e.removeAttribute(t);return}e.setAttribute(t,``+n)}}function Pt(e,t,n,r){if(r===null)e.removeAttribute(n);else{switch(typeof r){case`undefined`:case`function`:case`symbol`:case`boolean`:e.removeAttribute(n);return}e.setAttributeNS(t,n,``+r)}}function Ft(e){switch(typeof e){case`bigint`:case`boolean`:case`number`:case`string`:case`undefined`:return e;case`object`:return e;default:return``}}function It(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()===`input`&&(t===`checkbox`||t===`radio`)}function Lt(e,t,n){var r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t);if(!e.hasOwnProperty(t)&&r!==void 0&&typeof r.get==`function`&&typeof r.set==`function`){var i=r.get,a=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){n=``+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(e){n=``+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Rt(e){if(!e._valueTracker){var t=It(e)?`checked`:`value`;e._valueTracker=Lt(e,t,``+e[t])}}function zt(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r=``;return e&&(r=It(e)?e.checked?`true`:`false`:e.value),e=r,e===n?!1:(t.setValue(e),!0)}function Bt(e){if(e||=typeof document<`u`?document:void 0,e===void 0)return null;try{return e.activeElement||e.body}catch{return e.body}}var Vt=/[\n"\\]/g;function Ht(e){return e.replace(Vt,function(e){return`\\`+e.charCodeAt(0).toString(16)+` `})}function Ut(e,t,n,r,i,a,o,s){e.name=``,o!=null&&typeof o!=`function`&&typeof o!=`symbol`&&typeof o!=`boolean`?e.type=o:e.removeAttribute(`type`),t==null?o!==`submit`&&o!==`reset`||e.removeAttribute(`value`):o===`number`?(t===0&&e.value===``||e.value!=t)&&(e.value=``+Ft(t)):e.value!==``+Ft(t)&&(e.value=``+Ft(t)),t==null?n==null?r!=null&&e.removeAttribute(`value`):Gt(e,o,Ft(n)):Gt(e,o,Ft(t)),i==null&&a!=null&&(e.defaultChecked=!!a),i!=null&&(e.checked=i&&typeof i!=`function`&&typeof i!=`symbol`),s!=null&&typeof s!=`function`&&typeof s!=`symbol`&&typeof s!=`boolean`?e.name=``+Ft(s):e.removeAttribute(`name`)}function Wt(e,t,n,r,i,a,o,s){if(a!=null&&typeof a!=`function`&&typeof a!=`symbol`&&typeof a!=`boolean`&&(e.type=a),t!=null||n!=null){if(!(a!==`submit`&&a!==`reset`||t!=null)){Rt(e);return}n=n==null?``:``+Ft(n),t=t==null?n:``+Ft(t),s||t===e.value||(e.value=t),e.defaultValue=t}r??=i,r=typeof r!=`function`&&typeof r!=`symbol`&&!!r,e.checked=s?e.checked:!!r,e.defaultChecked=!!r,o!=null&&typeof o!=`function`&&typeof o!=`symbol`&&typeof o!=`boolean`&&(e.name=o),Rt(e)}function Gt(e,t,n){t===`number`&&Bt(e.ownerDocument)===e||e.defaultValue===``+n||(e.defaultValue=``+n)}function Kt(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t[`$`+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty(`$`+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=``+Ft(n),t=null,i=0;i<e.length;i++){if(e[i].value===n){e[i].selected=!0,r&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function qt(e,t,n){if(t!=null&&(t=``+Ft(t),t!==e.value&&(e.value=t),n==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=n==null?``:``+Ft(n)}function Jt(e,t,n,r){if(t==null){if(r!=null){if(n!=null)throw Error(i(92));if(ne(r)){if(1<r.length)throw Error(i(93));r=r[0]}n=r}n??=``,t=n}n=Ft(t),e.defaultValue=n,r=e.textContent,r===n&&r!==``&&r!==null&&(e.value=r),Rt(e)}function Yt(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Xt=new Set(`animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp`.split(` `));function Zt(e,t,n){var r=t.indexOf(`--`)===0;n==null||typeof n==`boolean`||n===``?r?e.setProperty(t,``):t===`float`?e.cssFloat=``:e[t]=``:r?e.setProperty(t,n):typeof n!=`number`||n===0||Xt.has(t)?t===`float`?e.cssFloat=n:e[t]=(``+n).trim():e[t]=n+`px`}function Qt(e,t,n){if(t!=null&&typeof t!=`object`)throw Error(i(62));if(e=e.style,n!=null){for(var r in n)!n.hasOwnProperty(r)||t!=null&&t.hasOwnProperty(r)||(r.indexOf(`--`)===0?e.setProperty(r,``):r===`float`?e.cssFloat=``:e[r]=``);for(var a in t)r=t[a],t.hasOwnProperty(a)&&n[a]!==r&&Zt(e,a,r)}else for(var o in t)t.hasOwnProperty(o)&&Zt(e,o,t[o])}function $t(e){if(e.indexOf(`-`)===-1)return!1;switch(e){case`annotation-xml`:case`color-profile`:case`font-face`:case`font-face-src`:case`font-face-uri`:case`font-face-format`:case`font-face-name`:case`missing-glyph`:return!1;default:return!0}}var en=new Map([[`acceptCharset`,`accept-charset`],[`htmlFor`,`for`],[`httpEquiv`,`http-equiv`],[`crossOrigin`,`crossorigin`],[`accentHeight`,`accent-height`],[`alignmentBaseline`,`alignment-baseline`],[`arabicForm`,`arabic-form`],[`baselineShift`,`baseline-shift`],[`capHeight`,`cap-height`],[`clipPath`,`clip-path`],[`clipRule`,`clip-rule`],[`colorInterpolation`,`color-interpolation`],[`colorInterpolationFilters`,`color-interpolation-filters`],[`colorProfile`,`color-profile`],[`colorRendering`,`color-rendering`],[`dominantBaseline`,`dominant-baseline`],[`enableBackground`,`enable-background`],[`fillOpacity`,`fill-opacity`],[`fillRule`,`fill-rule`],[`floodColor`,`flood-color`],[`floodOpacity`,`flood-opacity`],[`fontFamily`,`font-family`],[`fontSize`,`font-size`],[`fontSizeAdjust`,`font-size-adjust`],[`fontStretch`,`font-stretch`],[`fontStyle`,`font-style`],[`fontVariant`,`font-variant`],[`fontWeight`,`font-weight`],[`glyphName`,`glyph-name`],[`glyphOrientationHorizontal`,`glyph-orientation-horizontal`],[`glyphOrientationVertical`,`glyph-orientation-vertical`],[`horizAdvX`,`horiz-adv-x`],[`horizOriginX`,`horiz-origin-x`],[`imageRendering`,`image-rendering`],[`letterSpacing`,`letter-spacing`],[`lightingColor`,`lighting-color`],[`markerEnd`,`marker-end`],[`markerMid`,`marker-mid`],[`markerStart`,`marker-start`],[`overlinePosition`,`overline-position`],[`overlineThickness`,`overline-thickness`],[`paintOrder`,`paint-order`],[`panose-1`,`panose-1`],[`pointerEvents`,`pointer-events`],[`renderingIntent`,`rendering-intent`],[`shapeRendering`,`shape-rendering`],[`stopColor`,`stop-color`],[`stopOpacity`,`stop-opacity`],[`strikethroughPosition`,`strikethrough-position`],[`strikethroughThickness`,`strikethrough-thickness`],[`strokeDasharray`,`stroke-dasharray`],[`strokeDashoffset`,`stroke-dashoffset`],[`strokeLinecap`,`stroke-linecap`],[`strokeLinejoin`,`stroke-linejoin`],[`strokeMiterlimit`,`stroke-miterlimit`],[`strokeOpacity`,`stroke-opacity`],[`strokeWidth`,`stroke-width`],[`textAnchor`,`text-anchor`],[`textDecoration`,`text-decoration`],[`textRendering`,`text-rendering`],[`transformOrigin`,`transform-origin`],[`underlinePosition`,`underline-position`],[`underlineThickness`,`underline-thickness`],[`unicodeBidi`,`unicode-bidi`],[`unicodeRange`,`unicode-range`],[`unitsPerEm`,`units-per-em`],[`vAlphabetic`,`v-alphabetic`],[`vHanging`,`v-hanging`],[`vIdeographic`,`v-ideographic`],[`vMathematical`,`v-mathematical`],[`vectorEffect`,`vector-effect`],[`vertAdvY`,`vert-adv-y`],[`vertOriginX`,`vert-origin-x`],[`vertOriginY`,`vert-origin-y`],[`wordSpacing`,`word-spacing`],[`writingMode`,`writing-mode`],[`xmlnsXlink`,`xmlns:xlink`],[`xHeight`,`x-height`]]),tn=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function nn(e){return tn.test(``+e)?`javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')`:e}function rn(){}var an=null;function on(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var sn=null,cn=null;function ln(e){var t=bt(e);if(t&&(e=t.stateNode)){var n=e[dt]||null;a:switch(e=t.stateNode,t.type){case`input`:if(Ut(e,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),t=n.name,n.type===`radio`&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll(`input[name="`+Ht(``+t)+`"][type="radio"]`),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var a=r[dt]||null;if(!a)throw Error(i(90));Ut(r,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name)}}for(t=0;t<n.length;t++)r=n[t],r.form===e.form&&zt(r)}break a;case`textarea`:qt(e,n.value,n.defaultValue);break a;case`select`:t=n.value,t!=null&&Kt(e,!!n.multiple,t,!1)}}}var un=!1;function dn(e,t,n){if(un)return e(t,n);un=!0;try{return e(t)}finally{if(un=!1,(sn!==null||cn!==null)&&(vu(),sn&&(t=sn,e=cn,cn=sn=null,ln(t),e)))for(t=0;t<e.length;t++)ln(e[t])}}function fn(e,t){var n=e.stateNode;if(n===null)return null;var r=n[dt]||null;if(r===null)return null;n=r[t];a:switch(t){case`onClick`:case`onClickCapture`:case`onDoubleClick`:case`onDoubleClickCapture`:case`onMouseDown`:case`onMouseDownCapture`:case`onMouseMove`:case`onMouseMoveCapture`:case`onMouseUp`:case`onMouseUpCapture`:case`onMouseEnter`:(r=!r.disabled)||(e=e.type,r=!(e===`button`||e===`input`||e===`select`||e===`textarea`)),e=!r;break a;default:e=!1}if(e)return null;if(n&&typeof n!=`function`)throw Error(i(231,t,typeof n));return n}var pn=!(typeof window>`u`||window.document===void 0||window.document.createElement===void 0),mn=!1;if(pn)try{var hn={};Object.defineProperty(hn,`passive`,{get:function(){mn=!0}}),window.addEventListener(`test`,hn,hn),window.removeEventListener(`test`,hn,hn)}catch{mn=!1}var gn=null,_n=null,vn=null;function yn(){if(vn)return vn;var e,t=_n,n=t.length,r,i=`value`in gn?gn.value:gn.textContent,a=i.length;for(e=0;e<n&&t[e]===i[e];e++);var o=n-e;for(r=1;r<=o&&t[n-r]===i[a-r];r++);return vn=i.slice(e,1<r?1-r:void 0)}function bn(e){var t=e.keyCode;return`charCode`in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function xn(){return!0}function Sn(){return!1}function Cn(e){function t(t,n,r,i,a){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(i.defaultPrevented==null?!1===i.returnValue:i.defaultPrevented)?xn:Sn,this.isPropagationStopped=Sn,this}return h(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():typeof e.returnValue!=`unknown`&&(e.returnValue=!1),this.isDefaultPrevented=xn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():typeof e.cancelBubble!=`unknown`&&(e.cancelBubble=!0),this.isPropagationStopped=xn)},persist:function(){},isPersistent:xn}),t}var wn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},F=Cn(wn),Tn=h({},wn,{view:0,detail:0}),En=Cn(Tn),Dn,On,kn,An=h({},Tn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Vn,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return`movementX`in e?e.movementX:(e!==kn&&(kn&&e.type===`mousemove`?(Dn=e.screenX-kn.screenX,On=e.screenY-kn.screenY):On=Dn=0,kn=e),Dn)},movementY:function(e){return`movementY`in e?e.movementY:On}}),jn=Cn(An),Mn=Cn(h({},An,{dataTransfer:0})),Nn=Cn(h({},Tn,{relatedTarget:0})),Pn=Cn(h({},wn,{animationName:0,elapsedTime:0,pseudoElement:0})),Fn=Cn(h({},wn,{clipboardData:function(e){return`clipboardData`in e?e.clipboardData:window.clipboardData}})),In=Cn(h({},wn,{data:0})),Ln={Esc:`Escape`,Spacebar:` `,Left:`ArrowLeft`,Up:`ArrowUp`,Right:`ArrowRight`,Down:`ArrowDown`,Del:`Delete`,Win:`OS`,Menu:`ContextMenu`,Apps:`ContextMenu`,Scroll:`ScrollLock`,MozPrintableKey:`Unidentified`},Rn={8:`Backspace`,9:`Tab`,12:`Clear`,13:`Enter`,16:`Shift`,17:`Control`,18:`Alt`,19:`Pause`,20:`CapsLock`,27:`Escape`,32:` `,33:`PageUp`,34:`PageDown`,35:`End`,36:`Home`,37:`ArrowLeft`,38:`ArrowUp`,39:`ArrowRight`,40:`ArrowDown`,45:`Insert`,46:`Delete`,112:`F1`,113:`F2`,114:`F3`,115:`F4`,116:`F5`,117:`F6`,118:`F7`,119:`F8`,120:`F9`,121:`F10`,122:`F11`,123:`F12`,144:`NumLock`,145:`ScrollLock`,224:`Meta`},zn={Alt:`altKey`,Control:`ctrlKey`,Meta:`metaKey`,Shift:`shiftKey`};function Bn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=zn[e])?!!t[e]:!1}function Vn(){return Bn}var Hn=Cn(h({},Tn,{key:function(e){if(e.key){var t=Ln[e.key]||e.key;if(t!==`Unidentified`)return t}return e.type===`keypress`?(e=bn(e),e===13?`Enter`:String.fromCharCode(e)):e.type===`keydown`||e.type===`keyup`?Rn[e.keyCode]||`Unidentified`:``},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Vn,charCode:function(e){return e.type===`keypress`?bn(e):0},keyCode:function(e){return e.type===`keydown`||e.type===`keyup`?e.keyCode:0},which:function(e){return e.type===`keypress`?bn(e):e.type===`keydown`||e.type===`keyup`?e.keyCode:0}})),Un=Cn(h({},An,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Wn=Cn(h({},Tn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Vn})),Gn=Cn(h({},wn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Kn=Cn(h({},An,{deltaX:function(e){return`deltaX`in e?e.deltaX:`wheelDeltaX`in e?-e.wheelDeltaX:0},deltaY:function(e){return`deltaY`in e?e.deltaY:`wheelDeltaY`in e?-e.wheelDeltaY:`wheelDelta`in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0})),qn=Cn(h({},wn,{newState:0,oldState:0})),Jn=[9,13,27,32],Yn=pn&&`CompositionEvent`in window,Xn=null;pn&&`documentMode`in document&&(Xn=document.documentMode);var Zn=pn&&`TextEvent`in window&&!Xn,Qn=pn&&(!Yn||Xn&&8<Xn&&11>=Xn),$n=` `,er=!1;function tr(e,t){switch(e){case`keyup`:return Jn.indexOf(t.keyCode)!==-1;case`keydown`:return t.keyCode!==229;case`keypress`:case`mousedown`:case`focusout`:return!0;default:return!1}}function nr(e){return e=e.detail,typeof e==`object`&&`data`in e?e.data:null}var rr=!1;function ir(e,t){switch(e){case`compositionend`:return nr(t);case`keypress`:return t.which===32?(er=!0,$n):null;case`textInput`:return e=t.data,e===$n&&er?null:e;default:return null}}function ar(e,t){if(rr)return e===`compositionend`||!Yn&&tr(e,t)?(e=yn(),vn=_n=gn=null,rr=!1,e):null;switch(e){case`paste`:return null;case`keypress`:if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case`compositionend`:return Qn&&t.locale!==`ko`?null:t.data;default:return null}}var or={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function sr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t===`input`?!!or[e.type]:t===`textarea`}function cr(e,t,n,r){sn?cn?cn.push(r):cn=[r]:sn=r,t=Td(t,`onChange`),0<t.length&&(n=new F(`onChange`,`change`,null,n,r),e.push({event:n,listeners:t}))}var lr=null,ur=null;function dr(e){vd(e,0)}function fr(e){if(zt(xt(e)))return e}function pr(e,t){if(e===`change`)return t}var mr=!1;if(pn){var hr;if(pn){var gr=`oninput`in document;if(!gr){var _r=document.createElement(`div`);_r.setAttribute(`oninput`,`return;`),gr=typeof _r.oninput==`function`}hr=gr}else hr=!1;mr=hr&&(!document.documentMode||9<document.documentMode)}function vr(){lr&&(lr.detachEvent(`onpropertychange`,yr),ur=lr=null)}function yr(e){if(e.propertyName===`value`&&fr(ur)){var t=[];cr(t,ur,e,on(e)),dn(dr,t)}}function br(e,t,n){e===`focusin`?(vr(),lr=t,ur=n,lr.attachEvent(`onpropertychange`,yr)):e===`focusout`&&vr()}function xr(e){if(e===`selectionchange`||e===`keyup`||e===`keydown`)return fr(ur)}function Sr(e,t){if(e===`click`)return fr(t)}function Cr(e,t){if(e===`input`||e===`change`)return fr(t)}function wr(e,t){return e===t&&(e!==0||1/e==1/t)||e!==e&&t!==t}var Tr=typeof Object.is==`function`?Object.is:wr;function Er(e,t){if(Tr(e,t))return!0;if(typeof e!=`object`||!e||typeof t!=`object`||!t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!we.call(t,i)||!Tr(e[i],t[i]))return!1}return!0}function Dr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Or(e,t){var n=Dr(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}a:{for(;n;){if(n.nextSibling){n=n.nextSibling;break a}n=n.parentNode}n=void 0}n=Dr(n)}}function kr(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?kr(e,t.parentNode):`contains`in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function I(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=Bt(e.document);t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href==`string`}catch{n=!1}if(n)e=t.contentWindow;else break;t=Bt(e.document)}return t}function L(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t===`input`&&(e.type===`text`||e.type===`search`||e.type===`tel`||e.type===`url`||e.type===`password`)||t===`textarea`||e.contentEditable===`true`)}var Ar=pn&&`documentMode`in document&&11>=document.documentMode,jr=null,Mr=null,Nr=null,Pr=!1;function Fr(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Pr||jr==null||jr!==Bt(r)||(r=jr,`selectionStart`in r&&L(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Nr&&Er(Nr,r)||(Nr=r,r=Td(Mr,`onSelect`),0<r.length&&(t=new F(`onSelect`,`select`,null,t,n),e.push({event:t,listeners:r}),t.target=jr)))}function Ir(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n[`Webkit`+e]=`webkit`+t,n[`Moz`+e]=`moz`+t,n}var Lr={animationend:Ir(`Animation`,`AnimationEnd`),animationiteration:Ir(`Animation`,`AnimationIteration`),animationstart:Ir(`Animation`,`AnimationStart`),transitionrun:Ir(`Transition`,`TransitionRun`),transitionstart:Ir(`Transition`,`TransitionStart`),transitioncancel:Ir(`Transition`,`TransitionCancel`),transitionend:Ir(`Transition`,`TransitionEnd`)},Rr={},zr={};pn&&(zr=document.createElement(`div`).style,`AnimationEvent`in window||(delete Lr.animationend.animation,delete Lr.animationiteration.animation,delete Lr.animationstart.animation),`TransitionEvent`in window||delete Lr.transitionend.transition);function Br(e){if(Rr[e])return Rr[e];if(!Lr[e])return e;var t=Lr[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in zr)return Rr[e]=t[n];return e}var Vr=Br(`animationend`),Hr=Br(`animationiteration`),Ur=Br(`animationstart`),R=Br(`transitionrun`),Wr=Br(`transitionstart`),z=Br(`transitioncancel`),Gr=Br(`transitionend`),Kr=new Map,qr=`abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel`.split(` `);qr.push(`scrollEnd`);function B(e,t){Kr.set(e,t),Et(t,[e])}var Jr=typeof reportError==`function`?reportError:function(e){if(typeof window==`object`&&typeof window.ErrorEvent==`function`){var t=new window.ErrorEvent(`error`,{bubbles:!0,cancelable:!0,message:typeof e==`object`&&e&&typeof e.message==`string`?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process==`object`&&typeof process.emit==`function`){process.emit(`uncaughtException`,e);return}console.error(e)},Yr=[],Xr=0,Zr=0;function Qr(){for(var e=Xr,t=Zr=Xr=0;t<e;){var n=Yr[t];Yr[t++]=null;var r=Yr[t];Yr[t++]=null;var i=Yr[t];Yr[t++]=null;var a=Yr[t];if(Yr[t++]=null,r!==null&&i!==null){var o=r.pending;o===null?i.next=i:(i.next=o.next,o.next=i),r.pending=i}a!==0&&ni(n,i,a)}}function $r(e,t,n,r){Yr[Xr++]=e,Yr[Xr++]=t,Yr[Xr++]=n,Yr[Xr++]=r,Zr|=r,e.lanes|=r,e=e.alternate,e!==null&&(e.lanes|=r)}function ei(e,t,n,r){return $r(e,t,n,r),ri(e)}function ti(e,t){return $r(e,null,null,t),ri(e)}function ni(e,t,n){e.lanes|=n;var r=e.alternate;r!==null&&(r.lanes|=n);for(var i=!1,a=e.return;a!==null;)a.childLanes|=n,r=a.alternate,r!==null&&(r.childLanes|=n),a.tag===22&&(e=a.stateNode,e===null||e._visibility&1||(i=!0)),e=a,a=a.return;return e.tag===3?(a=e.stateNode,i&&t!==null&&(i=31-Ve(n),e=a.hiddenUpdates,r=e[i],r===null?e[i]=[t]:r.push(t),t.lane=n|536870912),a):null}function ri(e){if(50<lu)throw lu=0,uu=null,Error(i(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var ii={};function ai(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function V(e,t,n,r){return new ai(e,t,n,r)}function oi(e){return e=e.prototype,!(!e||!e.isReactComponent)}function H(e,t){var n=e.alternate;return n===null?(n=V(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&65011712,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.refCleanup=e.refCleanup,n}function si(e,t){e.flags&=65011714;var n=e.alternate;return n===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function ci(e,t,n,r,a,o){var s=0;if(r=e,typeof e==`function`)oi(e)&&(s=1);else if(typeof e==`string`)s=Uf(e,n,le.current)?26:e===`html`||e===`head`||e===`body`?27:5;else a:switch(e){case k:return e=V(31,n,t,a),e.elementType=k,e.lanes=o,e;case y:return li(n.children,a,o,t);case b:s=8,a|=24;break;case x:return e=V(12,n,t,a|2),e.elementType=x,e.lanes=o,e;case T:return e=V(13,n,t,a),e.elementType=T,e.lanes=o,e;case E:return e=V(19,n,t,a),e.elementType=E,e.lanes=o,e;default:if(typeof e==`object`&&e)switch(e.$$typeof){case C:s=10;break a;case S:s=9;break a;case w:s=11;break a;case D:s=14;break a;case O:s=16,r=null;break a}s=29,n=Error(i(130,e===null?`null`:typeof e,``)),r=null}return t=V(s,n,t,a),t.elementType=e,t.type=r,t.lanes=o,t}function li(e,t,n,r){return e=V(7,e,r,t),e.lanes=n,e}function ui(e,t,n){return e=V(6,e,null,t),e.lanes=n,e}function di(e){var t=V(18,null,null,0);return t.stateNode=e,t}function fi(e,t,n){return t=V(4,e.children===null?[]:e.children,e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var pi=new WeakMap;function mi(e,t){if(typeof e==`object`&&e){var n=pi.get(e);return n===void 0?(t={value:e,source:t,stack:Ce(t)},pi.set(e,t),t):n}return{value:e,source:t,stack:Ce(t)}}var hi=[],gi=0,_i=null,vi=0,yi=[],bi=0,xi=null,Si=1,Ci=``;function wi(e,t){hi[gi++]=vi,hi[gi++]=_i,_i=e,vi=t}function Ti(e,t,n){yi[bi++]=Si,yi[bi++]=Ci,yi[bi++]=xi,xi=e;var r=Si;e=Ci;var i=32-Ve(r)-1;r&=~(1<<i),n+=1;var a=32-Ve(t)+i;if(30<a){var o=i-i%5;a=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Si=1<<32-Ve(t)+i|n<<i|r,Ci=a+e}else Si=1<<a|n<<i|r,Ci=e}function Ei(e){e.return!==null&&(wi(e,1),Ti(e,1,0))}function Di(e){for(;e===_i;)_i=hi[--gi],hi[gi]=null,vi=hi[--gi],hi[gi]=null;for(;e===xi;)xi=yi[--bi],yi[bi]=null,Ci=yi[--bi],yi[bi]=null,Si=yi[--bi],yi[bi]=null}function Oi(e,t){yi[bi++]=Si,yi[bi++]=Ci,yi[bi++]=xi,Si=t.id,Ci=t.overflow,xi=e}var ki=null,U=null,W=!1,Ai=null,ji=!1,Mi=Error(i(519));function Ni(e){throw zi(mi(Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?`text`:`HTML`,``)),e)),Mi}function Pi(e){var t=e.stateNode,n=e.type,r=e.memoizedProps;switch(t[ut]=e,t[dt]=r,n){case`dialog`:$(`cancel`,t),$(`close`,t);break;case`iframe`:case`object`:case`embed`:$(`load`,t);break;case`video`:case`audio`:for(n=0;n<gd.length;n++)$(gd[n],t);break;case`source`:$(`error`,t);break;case`img`:case`image`:case`link`:$(`error`,t),$(`load`,t);break;case`details`:$(`toggle`,t);break;case`input`:$(`invalid`,t),Wt(t,r.value,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name,!0);break;case`select`:$(`invalid`,t);break;case`textarea`:$(`invalid`,t),Jt(t,r.value,r.defaultValue,r.children)}n=r.children,typeof n!=`string`&&typeof n!=`number`&&typeof n!=`bigint`||t.textContent===``+n||!0===r.suppressHydrationWarning||jd(t.textContent,n)?(r.popover!=null&&($(`beforetoggle`,t),$(`toggle`,t)),r.onScroll!=null&&$(`scroll`,t),r.onScrollEnd!=null&&$(`scrollend`,t),r.onClick!=null&&(t.onclick=rn),t=!0):t=!1,t||Ni(e,!0)}function Fi(e){for(ki=e.return;ki;)switch(ki.tag){case 5:case 31:case 13:ji=!1;return;case 27:case 3:ji=!0;return;default:ki=ki.return}}function Ii(e){if(e!==ki)return!1;if(!W)return Fi(e),W=!0,!1;var t=e.tag,n;if((n=t!==3&&t!==27)&&((n=t===5)&&(n=e.type,n=!(n!==`form`&&n!==`button`)||Ud(e.type,e.memoizedProps)),n=!n),n&&U&&Ni(e),Fi(e),t===13){if(e=e.memoizedState,e=e===null?null:e.dehydrated,!e)throw Error(i(317));U=uf(e)}else if(t===31){if(e=e.memoizedState,e=e===null?null:e.dehydrated,!e)throw Error(i(317));U=uf(e)}else t===27?(t=U,Zd(e.type)?(e=lf,lf=null,U=e):U=t):U=ki?cf(e.stateNode.nextSibling):null;return!0}function Li(){U=ki=null,W=!1}function Ri(){var e=Ai;return e!==null&&(Yl===null?Yl=e:Yl.push.apply(Yl,e),Ai=null),e}function zi(e){Ai===null?Ai=[e]:Ai.push(e)}var Bi=oe(null),Vi=null,Hi=null;function Ui(e,t,n){ce(Bi,t._currentValue),t._currentValue=n}function Wi(e){e._currentValue=Bi.current,se(Bi)}function Gi(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)===t?r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t):(e.childLanes|=t,r!==null&&(r.childLanes|=t)),e===n)break;e=e.return}}function Ki(e,t,n,r){var a=e.child;for(a!==null&&(a.return=e);a!==null;){var o=a.dependencies;if(o!==null){var s=a.child;o=o.firstContext;a:for(;o!==null;){var c=o;o=a;for(var l=0;l<t.length;l++)if(c.context===t[l]){o.lanes|=n,c=o.alternate,c!==null&&(c.lanes|=n),Gi(o.return,n,e),r||(s=null);break a}o=c.next}}else if(a.tag===18){if(s=a.return,s===null)throw Error(i(341));s.lanes|=n,o=s.alternate,o!==null&&(o.lanes|=n),Gi(s,n,e),s=null}else s=a.child;if(s!==null)s.return=a;else for(s=a;s!==null;){if(s===e){s=null;break}if(a=s.sibling,a!==null){a.return=s.return,s=a;break}s=s.return}a=s}}function qi(e,t,n,r){e=null;for(var a=t,o=!1;a!==null;){if(!o){if(a.flags&524288)o=!0;else if(a.flags&262144)break}if(a.tag===10){var s=a.alternate;if(s===null)throw Error(i(387));if(s=s.memoizedProps,s!==null){var c=a.type;Tr(a.pendingProps.value,s.value)||(e===null?e=[c]:e.push(c))}}else if(a===fe.current){if(s=a.alternate,s===null)throw Error(i(387));s.memoizedState.memoizedState!==a.memoizedState.memoizedState&&(e===null?e=[Qf]:e.push(Qf))}a=a.return}e!==null&&Ki(t,e,n,r),t.flags|=262144}function Ji(e){for(e=e.firstContext;e!==null;){if(!Tr(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Yi(e){Vi=e,Hi=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function Xi(e){return Qi(Vi,e)}function Zi(e,t){return Vi===null&&Yi(e),Qi(e,t)}function Qi(e,t){var n=t._currentValue;if(t={context:t,memoizedValue:n,next:null},Hi===null){if(e===null)throw Error(i(308));Hi=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else Hi=Hi.next=t;return n}var $i=typeof AbortController<`u`?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(t,n){e.push(n)}};this.abort=function(){t.aborted=!0,e.forEach(function(e){return e()})}},ea=t.unstable_scheduleCallback,ta=t.unstable_NormalPriority,na={$$typeof:C,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function ra(){return{controller:new $i,data:new Map,refCount:0}}function ia(e){e.refCount--,e.refCount===0&&ea(ta,function(){e.controller.abort()})}var aa=null,oa=0,sa=0,ca=null;function la(e,t){if(aa===null){var n=aa=[];oa=0,sa=ud(),ca={status:`pending`,value:void 0,then:function(e){n.push(e)}}}return oa++,t.then(ua,ua),t}function ua(){if(--oa===0&&aa!==null){ca!==null&&(ca.status=`fulfilled`);var e=aa;aa=null,sa=0,ca=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function da(e,t){var n=[],r={status:`pending`,value:null,reason:null,then:function(e){n.push(e)}};return e.then(function(){r.status=`fulfilled`,r.value=t;for(var e=0;e<n.length;e++)(0,n[e])(t)},function(e){for(r.status=`rejected`,r.reason=e,e=0;e<n.length;e++)(0,n[e])(void 0)}),r}var fa=N.S;N.S=function(e,t){Ql=ke(),typeof t==`object`&&t&&typeof t.then==`function`&&la(e,t),fa!==null&&fa(e,t)};var pa=oe(null);function ma(){var e=pa.current;return e===null?Il.pooledCache:e}function ha(e,t){t===null?ce(pa,pa.current):ce(pa,t.pool)}function ga(){var e=ma();return e===null?null:{parent:na._currentValue,pool:e}}var _a=Error(i(460)),va=Error(i(474)),ya=Error(i(542)),ba={then:function(){}};function xa(e){return e=e.status,e===`fulfilled`||e===`rejected`}function Sa(e,t,n){switch(n=e[n],n===void 0?e.push(t):n!==t&&(t.then(rn,rn),t=n),t.status){case`fulfilled`:return t.value;case`rejected`:throw e=t.reason,Ea(e),e;default:if(typeof t.status==`string`)t.then(rn,rn);else{if(e=Il,e!==null&&100<e.shellSuspendCounter)throw Error(i(482));e=t,e.status=`pending`,e.then(function(e){if(t.status===`pending`){var n=t;n.status=`fulfilled`,n.value=e}},function(e){if(t.status===`pending`){var n=t;n.status=`rejected`,n.reason=e}})}switch(t.status){case`fulfilled`:return t.value;case`rejected`:throw e=t.reason,Ea(e),e}throw wa=t,_a}}function Ca(e){try{var t=e._init;return t(e._payload)}catch(e){throw typeof e==`object`&&e&&typeof e.then==`function`?(wa=e,_a):e}}var wa=null;function Ta(){if(wa===null)throw Error(i(459));var e=wa;return wa=null,e}function Ea(e){if(e===_a||e===ya)throw Error(i(483))}var Da=null,Oa=0;function ka(e){var t=Oa;return Oa+=1,Da===null&&(Da=[]),Sa(Da,e,t)}function Aa(e,t){t=t.props.ref,e.ref=t===void 0?null:t}function ja(e,t){throw t.$$typeof===g?Error(i(525)):(e=Object.prototype.toString.call(t),Error(i(31,e===`[object Object]`?`object with keys {`+Object.keys(t).join(`, `)+`}`:e)))}function Ma(e){function t(t,n){if(e){var r=t.deletions;r===null?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;r!==null;)t(n,r),r=r.sibling;return null}function r(e){for(var t=new Map;e!==null;)e.key===null?t.set(e.index,e):t.set(e.key,e),e=e.sibling;return t}function a(e,t){return e=H(e,t),e.index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?(r=t.alternate,r===null?(t.flags|=67108866,n):(r=r.index,r<n?(t.flags|=67108866,n):r)):(t.flags|=1048576,n)}function s(t){return e&&t.alternate===null&&(t.flags|=67108866),t}function c(e,t,n,r){return t===null||t.tag!==6?(t=ui(n,e.mode,r),t.return=e,t):(t=a(t,n),t.return=e,t)}function l(e,t,n,r){var i=n.type;return i===y?d(e,t,n.props.children,r,n.key):t!==null&&(t.elementType===i||typeof i==`object`&&i&&i.$$typeof===O&&Ca(i)===t.type)?(t=a(t,n.props),Aa(t,n),t.return=e,t):(t=ci(n.type,n.key,n.props,null,e.mode,r),Aa(t,n),t.return=e,t)}function u(e,t,n,r){return t===null||t.tag!==4||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?(t=fi(n,e.mode,r),t.return=e,t):(t=a(t,n.children||[]),t.return=e,t)}function d(e,t,n,r,i){return t===null||t.tag!==7?(t=li(n,e.mode,r,i),t.return=e,t):(t=a(t,n),t.return=e,t)}function f(e,t,n){if(typeof t==`string`&&t!==``||typeof t==`number`||typeof t==`bigint`)return t=ui(``+t,e.mode,n),t.return=e,t;if(typeof t==`object`&&t){switch(t.$$typeof){case _:return n=ci(t.type,t.key,t.props,null,e.mode,n),Aa(n,t),n.return=e,n;case v:return t=fi(t,e.mode,n),t.return=e,t;case O:return t=Ca(t),f(e,t,n)}if(ne(t)||te(t))return t=li(t,e.mode,n,null),t.return=e,t;if(typeof t.then==`function`)return f(e,ka(t),n);if(t.$$typeof===C)return f(e,Zi(e,t),n);ja(e,t)}return null}function p(e,t,n,r){var i=t===null?null:t.key;if(typeof n==`string`&&n!==``||typeof n==`number`||typeof n==`bigint`)return i===null?c(e,t,``+n,r):null;if(typeof n==`object`&&n){switch(n.$$typeof){case _:return n.key===i?l(e,t,n,r):null;case v:return n.key===i?u(e,t,n,r):null;case O:return n=Ca(n),p(e,t,n,r)}if(ne(n)||te(n))return i===null?d(e,t,n,r,null):null;if(typeof n.then==`function`)return p(e,t,ka(n),r);if(n.$$typeof===C)return p(e,t,Zi(e,n),r);ja(e,n)}return null}function m(e,t,n,r,i){if(typeof r==`string`&&r!==``||typeof r==`number`||typeof r==`bigint`)return e=e.get(n)||null,c(t,e,``+r,i);if(typeof r==`object`&&r){switch(r.$$typeof){case _:return e=e.get(r.key===null?n:r.key)||null,l(t,e,r,i);case v:return e=e.get(r.key===null?n:r.key)||null,u(t,e,r,i);case O:return r=Ca(r),m(e,t,n,r,i)}if(ne(r)||te(r))return e=e.get(n)||null,d(t,e,r,i,null);if(typeof r.then==`function`)return m(e,t,n,ka(r),i);if(r.$$typeof===C)return m(e,t,n,Zi(t,r),i);ja(t,r)}return null}function h(i,a,s,c){for(var l=null,u=null,d=a,h=a=0,g=null;d!==null&&h<s.length;h++){d.index>h?(g=d,d=null):g=d.sibling;var _=p(i,d,s[h],c);if(_===null){d===null&&(d=g);break}e&&d&&_.alternate===null&&t(i,d),a=o(_,a,h),u===null?l=_:u.sibling=_,u=_,d=g}if(h===s.length)return n(i,d),W&&wi(i,h),l;if(d===null){for(;h<s.length;h++)d=f(i,s[h],c),d!==null&&(a=o(d,a,h),u===null?l=d:u.sibling=d,u=d);return W&&wi(i,h),l}for(d=r(d);h<s.length;h++)g=m(d,i,h,s[h],c),g!==null&&(e&&g.alternate!==null&&d.delete(g.key===null?h:g.key),a=o(g,a,h),u===null?l=g:u.sibling=g,u=g);return e&&d.forEach(function(e){return t(i,e)}),W&&wi(i,h),l}function g(a,s,c,l){if(c==null)throw Error(i(151));for(var u=null,d=null,h=s,g=s=0,_=null,v=c.next();h!==null&&!v.done;g++,v=c.next()){h.index>g?(_=h,h=null):_=h.sibling;var y=p(a,h,v.value,l);if(y===null){h===null&&(h=_);break}e&&h&&y.alternate===null&&t(a,h),s=o(y,s,g),d===null?u=y:d.sibling=y,d=y,h=_}if(v.done)return n(a,h),W&&wi(a,g),u;if(h===null){for(;!v.done;g++,v=c.next())v=f(a,v.value,l),v!==null&&(s=o(v,s,g),d===null?u=v:d.sibling=v,d=v);return W&&wi(a,g),u}for(h=r(h);!v.done;g++,v=c.next())v=m(h,a,g,v.value,l),v!==null&&(e&&v.alternate!==null&&h.delete(v.key===null?g:v.key),s=o(v,s,g),d===null?u=v:d.sibling=v,d=v);return e&&h.forEach(function(e){return t(a,e)}),W&&wi(a,g),u}function b(e,r,o,c){if(typeof o==`object`&&o&&o.type===y&&o.key===null&&(o=o.props.children),typeof o==`object`&&o){switch(o.$$typeof){case _:a:{for(var l=o.key;r!==null;){if(r.key===l){if(l=o.type,l===y){if(r.tag===7){n(e,r.sibling),c=a(r,o.props.children),c.return=e,e=c;break a}}else if(r.elementType===l||typeof l==`object`&&l&&l.$$typeof===O&&Ca(l)===r.type){n(e,r.sibling),c=a(r,o.props),Aa(c,o),c.return=e,e=c;break a}n(e,r);break}else t(e,r);r=r.sibling}o.type===y?(c=li(o.props.children,e.mode,c,o.key),c.return=e,e=c):(c=ci(o.type,o.key,o.props,null,e.mode,c),Aa(c,o),c.return=e,e=c)}return s(e);case v:a:{for(l=o.key;r!==null;){if(r.key===l)if(r.tag===4&&r.stateNode.containerInfo===o.containerInfo&&r.stateNode.implementation===o.implementation){n(e,r.sibling),c=a(r,o.children||[]),c.return=e,e=c;break a}else{n(e,r);break}else t(e,r);r=r.sibling}c=fi(o,e.mode,c),c.return=e,e=c}return s(e);case O:return o=Ca(o),b(e,r,o,c)}if(ne(o))return h(e,r,o,c);if(te(o)){if(l=te(o),typeof l!=`function`)throw Error(i(150));return o=l.call(o),g(e,r,o,c)}if(typeof o.then==`function`)return b(e,r,ka(o),c);if(o.$$typeof===C)return b(e,r,Zi(e,o),c);ja(e,o)}return typeof o==`string`&&o!==``||typeof o==`number`||typeof o==`bigint`?(o=``+o,r!==null&&r.tag===6?(n(e,r.sibling),c=a(r,o),c.return=e,e=c):(n(e,r),c=ui(o,e.mode,c),c.return=e,e=c),s(e)):n(e,r)}return function(e,t,n,r){try{Oa=0;var i=b(e,t,n,r);return Da=null,i}catch(t){if(t===_a||t===ya)throw t;var a=V(29,t,null,e.mode);return a.lanes=r,a.return=e,a}}}var Na=Ma(!0),Pa=Ma(!1),Fa=!1;function Ia(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function La(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Ra(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function za(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,Y&2){var i=r.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),r.pending=t,t=ri(e),ni(e,null,n),t}return $r(e,r,t,n),ri(e)}function Ba(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,n&4194048)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,rt(e,n)}}function Va(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,a=null;if(n=n.firstBaseUpdate,n!==null){do{var o={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};a===null?i=a=o:a=a.next=o,n=n.next}while(n!==null);a===null?i=a=t:a=a.next=t}else i=a=t;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,callbacks:r.callbacks},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}var Ha=!1;function Ua(){if(Ha){var e=ca;if(e!==null)throw e}}function Wa(e,t,n,r){Ha=!1;var i=e.updateQueue;Fa=!1;var a=i.firstBaseUpdate,o=i.lastBaseUpdate,s=i.shared.pending;if(s!==null){i.shared.pending=null;var c=s,l=c.next;c.next=null,o===null?a=l:o.next=l,o=c;var u=e.alternate;u!==null&&(u=u.updateQueue,s=u.lastBaseUpdate,s!==o&&(s===null?u.firstBaseUpdate=l:s.next=l,u.lastBaseUpdate=c))}if(a!==null){var d=i.baseState;o=0,u=l=c=null,s=a;do{var f=s.lane&-536870913,p=f!==s.lane;if(p?(Z&f)===f:(r&f)===f){f!==0&&f===sa&&(Ha=!0),u!==null&&(u=u.next={lane:0,tag:s.tag,payload:s.payload,callback:null,next:null});a:{var m=e,g=s;f=t;var _=n;switch(g.tag){case 1:if(m=g.payload,typeof m==`function`){d=m.call(_,d,f);break a}d=m;break a;case 3:m.flags=m.flags&-65537|128;case 0:if(m=g.payload,f=typeof m==`function`?m.call(_,d,f):m,f==null)break a;d=h({},d,f);break a;case 2:Fa=!0}}f=s.callback,f!==null&&(e.flags|=64,p&&(e.flags|=8192),p=i.callbacks,p===null?i.callbacks=[f]:p.push(f))}else p={lane:f,tag:s.tag,payload:s.payload,callback:s.callback,next:null},u===null?(l=u=p,c=d):u=u.next=p,o|=f;if(s=s.next,s===null){if(s=i.shared.pending,s===null)break;p=s,s=p.next,p.next=null,i.lastBaseUpdate=p,i.shared.pending=null}}while(1);u===null&&(c=d),i.baseState=c,i.firstBaseUpdate=l,i.lastBaseUpdate=u,a===null&&(i.shared.lanes=0),Ul|=o,e.lanes=o,e.memoizedState=d}}function Ga(e,t){if(typeof e!=`function`)throw Error(i(191,e));e.call(t)}function Ka(e,t){var n=e.callbacks;if(n!==null)for(e.callbacks=null,e=0;e<n.length;e++)Ga(n[e],t)}var qa=oe(null),Ja=oe(0);function Ya(e,t){e=Vl,ce(Ja,e),ce(qa,t),Vl=e|t.baseLanes}function Xa(){ce(Ja,Vl),ce(qa,qa.current)}function Za(){Vl=Ja.current,se(qa),se(Ja)}var Qa=oe(null),$a=null;function eo(e){var t=e.alternate;ce(ao,ao.current&1),ce(Qa,e),$a===null&&(t===null||qa.current!==null||t.memoizedState!==null)&&($a=e)}function to(e){ce(ao,ao.current),ce(Qa,e),$a===null&&($a=e)}function no(e){e.tag===22?(ce(ao,ao.current),ce(Qa,e),$a===null&&($a=e)):ro(e)}function ro(){ce(ao,ao.current),ce(Qa,Qa.current)}function io(e){se(Qa),$a===e&&($a=null),se(ao)}var ao=oe(0);function oo(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||af(n)||of(n)))return t}else if(t.tag===19&&(t.memoizedProps.revealOrder===`forwards`||t.memoizedProps.revealOrder===`backwards`||t.memoizedProps.revealOrder===`unstable_legacy-backwards`||t.memoizedProps.revealOrder===`together`)){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var so=0,G=null,K=null,co=null,lo=!1,uo=!1,fo=!1,po=0,mo=0,ho=null,go=0;function _o(){throw Error(i(321))}function vo(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Tr(e[n],t[n]))return!1;return!0}function yo(e,t,n,r,i,a){return so=a,G=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,N.H=e===null||e.memoizedState===null?Is:Ls,fo=!1,a=n(r,i),fo=!1,uo&&(a=xo(t,n,r,i)),bo(e),a}function bo(e){N.H=Fs;var t=K!==null&&K.next!==null;if(so=0,co=K=G=null,lo=!1,mo=0,ho=null,t)throw Error(i(300));e===null||ec||(e=e.dependencies,e!==null&&Ji(e)&&(ec=!0))}function xo(e,t,n,r){G=e;var a=0;do{if(uo&&(ho=null),mo=0,uo=!1,25<=a)throw Error(i(301));if(a+=1,co=K=null,e.updateQueue!=null){var o=e.updateQueue;o.lastEffect=null,o.events=null,o.stores=null,o.memoCache!=null&&(o.memoCache.index=0)}N.H=Rs,o=t(n,r)}while(uo);return o}function So(){var e=N.H,t=e.useState()[0];return t=typeof t.then==`function`?ko(t):t,e=e.useState()[0],(K===null?null:K.memoizedState)!==e&&(G.flags|=1024),t}function Co(){var e=po!==0;return po=0,e}function wo(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function To(e){if(lo){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}lo=!1}so=0,co=K=G=null,uo=!1,mo=po=0,ho=null}function Eo(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return co===null?G.memoizedState=co=e:co=co.next=e,co}function Do(){if(K===null){var e=G.alternate;e=e===null?null:e.memoizedState}else e=K.next;var t=co===null?G.memoizedState:co.next;if(t!==null)co=t,K=e;else{if(e===null)throw G.alternate===null?Error(i(467)):Error(i(310));K=e,e={memoizedState:K.memoizedState,baseState:K.baseState,baseQueue:K.baseQueue,queue:K.queue,next:null},co===null?G.memoizedState=co=e:co=co.next=e}return co}function Oo(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function ko(e){var t=mo;return mo+=1,ho===null&&(ho=[]),e=Sa(ho,e,t),t=G,(co===null?t.memoizedState:co.next)===null&&(t=t.alternate,N.H=t===null||t.memoizedState===null?Is:Ls),e}function Ao(e){if(typeof e==`object`&&e){if(typeof e.then==`function`)return ko(e);if(e.$$typeof===C)return Xi(e)}throw Error(i(438,String(e)))}function jo(e){var t=null,n=G.updateQueue;if(n!==null&&(t=n.memoCache),t==null){var r=G.alternate;r!==null&&(r=r.updateQueue,r!==null&&(r=r.memoCache,r!=null&&(t={data:r.data.map(function(e){return e.slice()}),index:0})))}if(t??={data:[],index:0},n===null&&(n=Oo(),G.updateQueue=n),n.memoCache=t,n=t.data[t.index],n===void 0)for(n=t.data[t.index]=Array(e),r=0;r<e;r++)n[r]=A;return t.index++,n}function Mo(e,t){return typeof t==`function`?t(e):t}function No(e){return Po(Do(),K,e)}function Po(e,t,n){var r=e.queue;if(r===null)throw Error(i(311));r.lastRenderedReducer=n;var a=e.baseQueue,o=r.pending;if(o!==null){if(a!==null){var s=a.next;a.next=o.next,o.next=s}t.baseQueue=a=o,r.pending=null}if(o=e.baseState,a===null)e.memoizedState=o;else{t=a.next;var c=s=null,l=null,u=t,d=!1;do{var f=u.lane&-536870913;if(f===u.lane?(so&f)===f:(Z&f)===f){var p=u.revertLane;if(p===0)l!==null&&(l=l.next={lane:0,revertLane:0,gesture:null,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),f===sa&&(d=!0);else if((so&p)===p){u=u.next,p===sa&&(d=!0);continue}else f={lane:0,revertLane:u.revertLane,gesture:null,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},l===null?(c=l=f,s=o):l=l.next=f,G.lanes|=p,Ul|=p;f=u.action,fo&&n(o,f),o=u.hasEagerState?u.eagerState:n(o,f)}else p={lane:f,revertLane:u.revertLane,gesture:u.gesture,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},l===null?(c=l=p,s=o):l=l.next=p,G.lanes|=f,Ul|=f;u=u.next}while(u!==null&&u!==t);if(l===null?s=o:l.next=c,!Tr(o,e.memoizedState)&&(ec=!0,d&&(n=ca,n!==null)))throw n;e.memoizedState=o,e.baseState=s,e.baseQueue=l,r.lastRenderedState=o}return a===null&&(r.lanes=0),[e.memoizedState,r.dispatch]}function Fo(e){var t=Do(),n=t.queue;if(n===null)throw Error(i(311));n.lastRenderedReducer=e;var r=n.dispatch,a=n.pending,o=t.memoizedState;if(a!==null){n.pending=null;var s=a=a.next;do o=e(o,s.action),s=s.next;while(s!==a);Tr(o,t.memoizedState)||(ec=!0),t.memoizedState=o,t.baseQueue===null&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function Io(e,t,n){var r=G,a=Do(),o=W;if(o){if(n===void 0)throw Error(i(407));n=n()}else n=t();var s=!Tr((K||a).memoizedState,n);if(s&&(a.memoizedState=n,ec=!0),a=a.queue,ss(zo.bind(null,r,a,e),[e]),a.getSnapshot!==t||s||co!==null&&co.memoizedState.tag&1){if(r.flags|=2048,ns(9,{destroy:void 0},Ro.bind(null,r,a,n,t),null),Il===null)throw Error(i(349));o||so&127||Lo(r,t,n)}return n}function Lo(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=G.updateQueue,t===null?(t=Oo(),G.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function Ro(e,t,n,r){t.value=n,t.getSnapshot=r,Bo(t)&&Vo(e)}function zo(e,t,n){return n(function(){Bo(t)&&Vo(e)})}function Bo(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Tr(e,n)}catch{return!0}}function Vo(e){var t=ti(e,2);t!==null&&pu(t,e,2)}function Ho(e){var t=Eo();if(typeof e==`function`){var n=e;if(e=n(),fo){Be(!0);try{n()}finally{Be(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Mo,lastRenderedState:e},t}function Uo(e,t,n,r){return e.baseState=n,Po(e,K,typeof r==`function`?r:Mo)}function Wo(e,t,n,r,a){if(Ms(e))throw Error(i(485));if(e=t.action,e!==null){var o={payload:a,action:e,next:null,isTransition:!0,status:`pending`,value:null,reason:null,listeners:[],then:function(e){o.listeners.push(e)}};N.T===null?o.isTransition=!1:n(!0),r(o),n=t.pending,n===null?(o.next=t.pending=o,Go(t,o)):(o.next=n.next,t.pending=n.next=o)}}function Go(e,t){var n=t.action,r=t.payload,i=e.state;if(t.isTransition){var a=N.T,o={};N.T=o;try{var s=n(i,r),c=N.S;c!==null&&c(o,s),Ko(e,t,s)}catch(n){Jo(e,t,n)}finally{a!==null&&o.types!==null&&(a.types=o.types),N.T=a}}else try{a=n(i,r),Ko(e,t,a)}catch(n){Jo(e,t,n)}}function Ko(e,t,n){typeof n==`object`&&n&&typeof n.then==`function`?n.then(function(n){qo(e,t,n)},function(n){return Jo(e,t,n)}):qo(e,t,n)}function qo(e,t,n){t.status=`fulfilled`,t.value=n,Yo(t),e.state=n,t=e.pending,t!==null&&(n=t.next,n===t?e.pending=null:(n=n.next,t.next=n,Go(e,n)))}function Jo(e,t,n){var r=e.pending;if(e.pending=null,r!==null){r=r.next;do t.status=`rejected`,t.reason=n,Yo(t),t=t.next;while(t!==r)}e.action=null}function Yo(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function Xo(e,t){return t}function Zo(e,t){if(W){var n=Il.formState;if(n!==null){a:{var r=G;if(W){if(U){b:{for(var i=U,a=ji;i.nodeType!==8;){if(!a){i=null;break b}if(i=cf(i.nextSibling),i===null){i=null;break b}}a=i.data,i=a===`F!`||a===`F`?i:null}if(i){U=cf(i.nextSibling),r=i.data===`F!`;break a}}Ni(r)}r=!1}r&&(t=n[0])}}return n=Eo(),n.memoizedState=n.baseState=t,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Xo,lastRenderedState:t},n.queue=r,n=ks.bind(null,G,r),r.dispatch=n,r=Ho(!1),a=js.bind(null,G,!1,r.queue),r=Eo(),i={state:t,dispatch:null,action:e,pending:null},r.queue=i,n=Wo.bind(null,G,i,a,n),i.dispatch=n,r.memoizedState=e,[t,n,!1]}function Qo(e){return $o(Do(),K,e)}function $o(e,t,n){if(t=Po(e,t,Xo)[0],e=No(Mo)[0],typeof t==`object`&&t&&typeof t.then==`function`)try{var r=ko(t)}catch(e){throw e===_a?ya:e}else r=t;t=Do();var i=t.queue,a=i.dispatch;return n!==t.memoizedState&&(G.flags|=2048,ns(9,{destroy:void 0},es.bind(null,i,n),null)),[r,a,e]}function es(e,t){e.action=t}function ts(e){var t=Do(),n=K;if(n!==null)return $o(t,n,e);Do(),t=t.memoizedState,n=Do();var r=n.queue.dispatch;return n.memoizedState=e,[t,r,!1]}function ns(e,t,n,r){return e={tag:e,create:n,deps:r,inst:t,next:null},t=G.updateQueue,t===null&&(t=Oo(),G.updateQueue=t),n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function rs(){return Do().memoizedState}function is(e,t,n,r){var i=Eo();G.flags|=e,i.memoizedState=ns(1|t,{destroy:void 0},n,r===void 0?null:r)}function as(e,t,n,r){var i=Do();r=r===void 0?null:r;var a=i.memoizedState.inst;K!==null&&r!==null&&vo(r,K.memoizedState.deps)?i.memoizedState=ns(t,a,n,r):(G.flags|=e,i.memoizedState=ns(1|t,a,n,r))}function os(e,t){is(8390656,8,e,t)}function ss(e,t){as(2048,8,e,t)}function cs(e){G.flags|=4;var t=G.updateQueue;if(t===null)t=Oo(),G.updateQueue=t,t.events=[e];else{var n=t.events;n===null?t.events=[e]:n.push(e)}}function ls(e){var t=Do().memoizedState;return cs({ref:t,nextImpl:e}),function(){if(Y&2)throw Error(i(440));return t.impl.apply(void 0,arguments)}}function us(e,t){return as(4,2,e,t)}function ds(e,t){return as(4,4,e,t)}function fs(e,t){if(typeof t==`function`){e=e();var n=t(e);return function(){typeof n==`function`?n():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function ps(e,t,n){n=n==null?null:n.concat([e]),as(4,4,fs.bind(null,t,e),n)}function ms(){}function hs(e,t){var n=Do();t=t===void 0?null:t;var r=n.memoizedState;return t!==null&&vo(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function gs(e,t){var n=Do();t=t===void 0?null:t;var r=n.memoizedState;if(t!==null&&vo(t,r[1]))return r[0];if(r=e(),fo){Be(!0);try{e()}finally{Be(!1)}}return n.memoizedState=[r,t],r}function _s(e,t,n){return n===void 0||so&1073741824&&!(Z&261930)?e.memoizedState=t:(e.memoizedState=n,e=fu(),G.lanes|=e,Ul|=e,n)}function vs(e,t,n,r){return Tr(n,t)?n:qa.current===null?!(so&42)||so&1073741824&&!(Z&261930)?(ec=!0,e.memoizedState=n):(e=fu(),G.lanes|=e,Ul|=e,t):(e=_s(e,n,r),Tr(e,t)||(ec=!0),e)}function ys(e,t,n,r,i){var a=P.p;P.p=a!==0&&8>a?a:8;var o=N.T,s={};N.T=s,js(e,!1,t,n);try{var c=i(),l=N.S;l!==null&&l(s,c),typeof c==`object`&&c&&typeof c.then==`function`?As(e,t,da(c,r),du(e)):As(e,t,r,du(e))}catch(n){As(e,t,{then:function(){},status:`rejected`,reason:n},du())}finally{P.p=a,o!==null&&s.types!==null&&(o.types=s.types),N.T=o}}function bs(){}function xs(e,t,n,r){if(e.tag!==5)throw Error(i(476));var a=Ss(e).queue;ys(e,a,t,re,n===null?bs:function(){return Cs(e),n(r)})}function Ss(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:re,baseState:re,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Mo,lastRenderedState:re},next:null};var n={};return t.next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Mo,lastRenderedState:n},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function Cs(e){var t=Ss(e);t.next===null&&(t=e.alternate.memoizedState),As(e,t.next.queue,{},du())}function ws(){return Xi(Qf)}function Ts(){return Do().memoizedState}function Es(){return Do().memoizedState}function Ds(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var n=du();e=Ra(n);var r=za(t,e,n);r!==null&&(pu(r,t,n),Ba(r,t,n)),t={cache:ra()},e.payload=t;return}t=t.return}}function Os(e,t,n){var r=du();n={lane:r,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null},Ms(e)?Ns(t,n):(n=ei(e,t,n,r),n!==null&&(pu(n,e,r),Ps(n,t,r)))}function ks(e,t,n){As(e,t,n,du())}function As(e,t,n,r){var i={lane:r,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null};if(Ms(e))Ns(t,i);else{var a=e.alternate;if(e.lanes===0&&(a===null||a.lanes===0)&&(a=t.lastRenderedReducer,a!==null))try{var o=t.lastRenderedState,s=a(o,n);if(i.hasEagerState=!0,i.eagerState=s,Tr(s,o))return $r(e,t,i,0),Il===null&&Qr(),!1}catch{}if(n=ei(e,t,i,r),n!==null)return pu(n,e,r),Ps(n,t,r),!0}return!1}function js(e,t,n,r){if(r={lane:2,revertLane:ud(),gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null},Ms(e)){if(t)throw Error(i(479))}else t=ei(e,n,r,2),t!==null&&pu(t,e,2)}function Ms(e){var t=e.alternate;return e===G||t!==null&&t===G}function Ns(e,t){uo=lo=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Ps(e,t,n){if(n&4194048){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,rt(e,n)}}var Fs={readContext:Xi,use:Ao,useCallback:_o,useContext:_o,useEffect:_o,useImperativeHandle:_o,useLayoutEffect:_o,useInsertionEffect:_o,useMemo:_o,useReducer:_o,useRef:_o,useState:_o,useDebugValue:_o,useDeferredValue:_o,useTransition:_o,useSyncExternalStore:_o,useId:_o,useHostTransitionStatus:_o,useFormState:_o,useActionState:_o,useOptimistic:_o,useMemoCache:_o,useCacheRefresh:_o};Fs.useEffectEvent=_o;var Is={readContext:Xi,use:Ao,useCallback:function(e,t){return Eo().memoizedState=[e,t===void 0?null:t],e},useContext:Xi,useEffect:os,useImperativeHandle:function(e,t,n){n=n==null?null:n.concat([e]),is(4194308,4,fs.bind(null,t,e),n)},useLayoutEffect:function(e,t){return is(4194308,4,e,t)},useInsertionEffect:function(e,t){is(4,2,e,t)},useMemo:function(e,t){var n=Eo();t=t===void 0?null:t;var r=e();if(fo){Be(!0);try{e()}finally{Be(!1)}}return n.memoizedState=[r,t],r},useReducer:function(e,t,n){var r=Eo();if(n!==void 0){var i=n(t);if(fo){Be(!0);try{n(t)}finally{Be(!1)}}}else i=t;return r.memoizedState=r.baseState=i,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:i},r.queue=e,e=e.dispatch=Os.bind(null,G,e),[r.memoizedState,e]},useRef:function(e){var t=Eo();return e={current:e},t.memoizedState=e},useState:function(e){e=Ho(e);var t=e.queue,n=ks.bind(null,G,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:ms,useDeferredValue:function(e,t){return _s(Eo(),e,t)},useTransition:function(){var e=Ho(!1);return e=ys.bind(null,G,e.queue,!0,!1),Eo().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var r=G,a=Eo();if(W){if(n===void 0)throw Error(i(407));n=n()}else{if(n=t(),Il===null)throw Error(i(349));Z&127||Lo(r,t,n)}a.memoizedState=n;var o={value:n,getSnapshot:t};return a.queue=o,os(zo.bind(null,r,o,e),[e]),r.flags|=2048,ns(9,{destroy:void 0},Ro.bind(null,r,o,n,t),null),n},useId:function(){var e=Eo(),t=Il.identifierPrefix;if(W){var n=Ci,r=Si;n=(r&~(1<<32-Ve(r)-1)).toString(32)+n,t=`_`+t+`R_`+n,n=po++,0<n&&(t+=`H`+n.toString(32)),t+=`_`}else n=go++,t=`_`+t+`r_`+n.toString(32)+`_`;return e.memoizedState=t},useHostTransitionStatus:ws,useFormState:Zo,useActionState:Zo,useOptimistic:function(e){var t=Eo();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=js.bind(null,G,!0,n),n.dispatch=t,[e,t]},useMemoCache:jo,useCacheRefresh:function(){return Eo().memoizedState=Ds.bind(null,G)},useEffectEvent:function(e){var t=Eo(),n={impl:e};return t.memoizedState=n,function(){if(Y&2)throw Error(i(440));return n.impl.apply(void 0,arguments)}}},Ls={readContext:Xi,use:Ao,useCallback:hs,useContext:Xi,useEffect:ss,useImperativeHandle:ps,useInsertionEffect:us,useLayoutEffect:ds,useMemo:gs,useReducer:No,useRef:rs,useState:function(){return No(Mo)},useDebugValue:ms,useDeferredValue:function(e,t){return vs(Do(),K.memoizedState,e,t)},useTransition:function(){var e=No(Mo)[0],t=Do().memoizedState;return[typeof e==`boolean`?e:ko(e),t]},useSyncExternalStore:Io,useId:Ts,useHostTransitionStatus:ws,useFormState:Qo,useActionState:Qo,useOptimistic:function(e,t){return Uo(Do(),K,e,t)},useMemoCache:jo,useCacheRefresh:Es};Ls.useEffectEvent=ls;var Rs={readContext:Xi,use:Ao,useCallback:hs,useContext:Xi,useEffect:ss,useImperativeHandle:ps,useInsertionEffect:us,useLayoutEffect:ds,useMemo:gs,useReducer:Fo,useRef:rs,useState:function(){return Fo(Mo)},useDebugValue:ms,useDeferredValue:function(e,t){var n=Do();return K===null?_s(n,e,t):vs(n,K.memoizedState,e,t)},useTransition:function(){var e=Fo(Mo)[0],t=Do().memoizedState;return[typeof e==`boolean`?e:ko(e),t]},useSyncExternalStore:Io,useId:Ts,useHostTransitionStatus:ws,useFormState:ts,useActionState:ts,useOptimistic:function(e,t){var n=Do();return K===null?(n.baseState=e,[e,n.queue.dispatch]):Uo(n,K,e,t)},useMemoCache:jo,useCacheRefresh:Es};Rs.useEffectEvent=ls;function zs(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:h({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Bs={enqueueSetState:function(e,t,n){e=e._reactInternals;var r=du(),i=Ra(r);i.payload=t,n!=null&&(i.callback=n),t=za(e,i,r),t!==null&&(pu(t,e,r),Ba(t,e,r))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=du(),i=Ra(r);i.tag=1,i.payload=t,n!=null&&(i.callback=n),t=za(e,i,r),t!==null&&(pu(t,e,r),Ba(t,e,r))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=du(),r=Ra(n);r.tag=2,t!=null&&(r.callback=t),t=za(e,r,n),t!==null&&(pu(t,e,n),Ba(t,e,n))}};function Vs(e,t,n,r,i,a,o){return e=e.stateNode,typeof e.shouldComponentUpdate==`function`?e.shouldComponentUpdate(r,a,o):t.prototype&&t.prototype.isPureReactComponent?!Er(n,r)||!Er(i,a):!0}function Hs(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps==`function`&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps==`function`&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Bs.enqueueReplaceState(t,t.state,null)}function Us(e,t){var n=t;if(`ref`in t)for(var r in n={},t)r!==`ref`&&(n[r]=t[r]);if(e=e.defaultProps)for(var i in n===t&&(n=h({},n)),e)n[i]===void 0&&(n[i]=e[i]);return n}function Ws(e){Jr(e)}function Gs(e){console.error(e)}function Ks(e){Jr(e)}function qs(e,t){try{var n=e.onUncaughtError;n(t.value,{componentStack:t.stack})}catch(e){setTimeout(function(){throw e})}}function Js(e,t,n){try{var r=e.onCaughtError;r(n.value,{componentStack:n.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(e){setTimeout(function(){throw e})}}function Ys(e,t,n){return n=Ra(n),n.tag=3,n.payload={element:null},n.callback=function(){qs(e,t)},n}function Xs(e){return e=Ra(e),e.tag=3,e}function Zs(e,t,n,r){var i=n.type.getDerivedStateFromError;if(typeof i==`function`){var a=r.value;e.payload=function(){return i(a)},e.callback=function(){Js(t,n,r)}}var o=n.stateNode;o!==null&&typeof o.componentDidCatch==`function`&&(e.callback=function(){Js(t,n,r),typeof i!=`function`&&(tu===null?tu=new Set([this]):tu.add(this));var e=r.stack;this.componentDidCatch(r.value,{componentStack:e===null?``:e})})}function Qs(e,t,n,r,a){if(n.flags|=32768,typeof r==`object`&&r&&typeof r.then==`function`){if(t=n.alternate,t!==null&&qi(t,n,a,!0),n=Qa.current,n!==null){switch(n.tag){case 31:case 13:return $a===null?Tu():n.alternate===null&&Hl===0&&(Hl=3),n.flags&=-257,n.flags|=65536,n.lanes=a,r===ba?n.flags|=16384:(t=n.updateQueue,t===null?n.updateQueue=new Set([r]):t.add(r),Wu(e,r,a)),!1;case 22:return n.flags|=65536,r===ba?n.flags|=16384:(t=n.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([r])},n.updateQueue=t):(n=t.retryQueue,n===null?t.retryQueue=new Set([r]):n.add(r)),Wu(e,r,a)),!1}throw Error(i(435,n.tag))}return Wu(e,r,a),Tu(),!1}if(W)return t=Qa.current,t===null?(r!==Mi&&(t=Error(i(423),{cause:r}),zi(mi(t,n))),e=e.current.alternate,e.flags|=65536,a&=-a,e.lanes|=a,r=mi(r,n),a=Ys(e.stateNode,r,a),Va(e,a),Hl!==4&&(Hl=2)):(!(t.flags&65536)&&(t.flags|=256),t.flags|=65536,t.lanes=a,r!==Mi&&(e=Error(i(422),{cause:r}),zi(mi(e,n)))),!1;var o=Error(i(520),{cause:r});if(o=mi(o,n),Jl===null?Jl=[o]:Jl.push(o),Hl!==4&&(Hl=2),t===null)return!0;r=mi(r,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=a&-a,n.lanes|=e,e=Ys(n.stateNode,r,e),Va(n,e),!1;case 1:if(t=n.type,o=n.stateNode,!(n.flags&128)&&(typeof t.getDerivedStateFromError==`function`||o!==null&&typeof o.componentDidCatch==`function`&&(tu===null||!tu.has(o))))return n.flags|=65536,a&=-a,n.lanes|=a,a=Xs(a),Zs(a,e,n,r),Va(n,a),!1}n=n.return}while(n!==null);return!1}var $s=Error(i(461)),ec=!1;function tc(e,t,n,r){t.child=e===null?Pa(t,null,n,r):Na(t,e.child,n,r)}function nc(e,t,n,r,i){n=n.render;var a=t.ref;if(`ref`in r){var o={};for(var s in r)s!==`ref`&&(o[s]=r[s])}else o=r;return Yi(t),r=yo(e,t,n,o,a,i),s=Co(),e!==null&&!ec?(wo(e,t,i),Tc(e,t,i)):(W&&s&&Ei(t),t.flags|=1,tc(e,t,r,i),t.child)}function rc(e,t,n,r,i){if(e===null){var a=n.type;return typeof a==`function`&&!oi(a)&&a.defaultProps===void 0&&n.compare===null?(t.tag=15,t.type=a,ic(e,t,a,r,i)):(e=ci(n.type,null,r,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(a=e.child,!Ec(e,i)){var o=a.memoizedProps;if(n=n.compare,n=n===null?Er:n,n(o,r)&&e.ref===t.ref)return Tc(e,t,i)}return t.flags|=1,e=H(a,r),e.ref=t.ref,e.return=t,t.child=e}function ic(e,t,n,r,i){if(e!==null){var a=e.memoizedProps;if(Er(a,r)&&e.ref===t.ref)if(ec=!1,t.pendingProps=r=a,Ec(e,i))e.flags&131072&&(ec=!0);else return t.lanes=e.lanes,Tc(e,t,i)}return fc(e,t,n,r,i)}function ac(e,t,n,r){var i=r.children,a=e===null?null:e.memoizedState;if(e===null&&t.stateNode===null&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),r.mode===`hidden`){if(t.flags&128){if(a=a===null?n:a.baseLanes|n,e!==null){for(r=t.child=e.child,i=0;r!==null;)i=i|r.lanes|r.childLanes,r=r.sibling;r=i&~a}else r=0,t.child=null;return sc(e,t,a,n,r)}if(n&536870912)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&ha(t,a===null?null:a.cachePool),a===null?Xa():Ya(t,a),no(t);else return r=t.lanes=536870912,sc(e,t,a===null?n:a.baseLanes|n,n,r)}else a===null?(e!==null&&ha(t,null),Xa(),ro(t)):(ha(t,a.cachePool),Ya(t,a),ro(t),t.memoizedState=null);return tc(e,t,i,n),t.child}function oc(e,t){return e!==null&&e.tag===22||t.stateNode!==null||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function sc(e,t,n,r,i){var a=ma();return a=a===null?null:{parent:na._currentValue,pool:a},t.memoizedState={baseLanes:n,cachePool:a},e!==null&&ha(t,null),Xa(),no(t),e!==null&&qi(e,t,r,!0),t.childLanes=i,null}function cc(e,t){return t=xc({mode:t.mode,children:t.children},e.mode),t.ref=e.ref,e.child=t,t.return=e,t}function lc(e,t,n){return Na(t,e.child,null,n),e=cc(t,t.pendingProps),e.flags|=2,io(t),t.memoizedState=null,e}function uc(e,t,n){var r=t.pendingProps,a=(t.flags&128)!=0;if(t.flags&=-129,e===null){if(W){if(r.mode===`hidden`)return e=cc(t,r),t.lanes=536870912,oc(null,e);if(to(t),(e=U)?(e=rf(e,ji),e=e!==null&&e.data===`&`?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:xi===null?null:{id:Si,overflow:Ci},retryLane:536870912,hydrationErrors:null},n=di(e),n.return=t,t.child=n,ki=t,U=null)):e=null,e===null)throw Ni(t);return t.lanes=536870912,null}return cc(t,r)}var o=e.memoizedState;if(o!==null){var s=o.dehydrated;if(to(t),a)if(t.flags&256)t.flags&=-257,t=lc(e,t,n);else if(t.memoizedState!==null)t.child=e.child,t.flags|=128,t=null;else throw Error(i(558));else if(ec||qi(e,t,n,!1),a=(n&e.childLanes)!==0,ec||a){if(r=Il,r!==null&&(s=it(r,n),s!==0&&s!==o.retryLane))throw o.retryLane=s,ti(e,s),pu(r,e,s),$s;Tu(),t=lc(e,t,n)}else e=o.treeContext,U=cf(s.nextSibling),ki=t,W=!0,Ai=null,ji=!1,e!==null&&Oi(t,e),t=cc(t,r),t.flags|=4096;return t}return e=H(e.child,{mode:r.mode,children:r.children}),e.ref=t.ref,t.child=e,e.return=t,e}function dc(e,t){var n=t.ref;if(n===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof n!=`function`&&typeof n!=`object`)throw Error(i(284));(e===null||e.ref!==n)&&(t.flags|=4194816)}}function fc(e,t,n,r,i){return Yi(t),n=yo(e,t,n,r,void 0,i),r=Co(),e!==null&&!ec?(wo(e,t,i),Tc(e,t,i)):(W&&r&&Ei(t),t.flags|=1,tc(e,t,n,i),t.child)}function pc(e,t,n,r,i,a){return Yi(t),t.updateQueue=null,n=xo(t,r,n,i),bo(e),r=Co(),e!==null&&!ec?(wo(e,t,a),Tc(e,t,a)):(W&&r&&Ei(t),t.flags|=1,tc(e,t,n,a),t.child)}function mc(e,t,n,r,i){if(Yi(t),t.stateNode===null){var a=ii,o=n.contextType;typeof o==`object`&&o&&(a=Xi(o)),a=new n(r,a),t.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,a.updater=Bs,t.stateNode=a,a._reactInternals=t,a=t.stateNode,a.props=r,a.state=t.memoizedState,a.refs={},Ia(t),o=n.contextType,a.context=typeof o==`object`&&o?Xi(o):ii,a.state=t.memoizedState,o=n.getDerivedStateFromProps,typeof o==`function`&&(zs(t,n,o,r),a.state=t.memoizedState),typeof n.getDerivedStateFromProps==`function`||typeof a.getSnapshotBeforeUpdate==`function`||typeof a.UNSAFE_componentWillMount!=`function`&&typeof a.componentWillMount!=`function`||(o=a.state,typeof a.componentWillMount==`function`&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount==`function`&&a.UNSAFE_componentWillMount(),o!==a.state&&Bs.enqueueReplaceState(a,a.state,null),Wa(t,r,a,i),Ua(),a.state=t.memoizedState),typeof a.componentDidMount==`function`&&(t.flags|=4194308),r=!0}else if(e===null){a=t.stateNode;var s=t.memoizedProps,c=Us(n,s);a.props=c;var l=a.context,u=n.contextType;o=ii,typeof u==`object`&&u&&(o=Xi(u));var d=n.getDerivedStateFromProps;u=typeof d==`function`||typeof a.getSnapshotBeforeUpdate==`function`,s=t.pendingProps!==s,u||typeof a.UNSAFE_componentWillReceiveProps!=`function`&&typeof a.componentWillReceiveProps!=`function`||(s||l!==o)&&Hs(t,a,r,o),Fa=!1;var f=t.memoizedState;a.state=f,Wa(t,r,a,i),Ua(),l=t.memoizedState,s||f!==l||Fa?(typeof d==`function`&&(zs(t,n,d,r),l=t.memoizedState),(c=Fa||Vs(t,n,c,r,f,l,o))?(u||typeof a.UNSAFE_componentWillMount!=`function`&&typeof a.componentWillMount!=`function`||(typeof a.componentWillMount==`function`&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount==`function`&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount==`function`&&(t.flags|=4194308)):(typeof a.componentDidMount==`function`&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),a.props=r,a.state=l,a.context=o,r=c):(typeof a.componentDidMount==`function`&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,La(e,t),o=t.memoizedProps,u=Us(n,o),a.props=u,d=t.pendingProps,f=a.context,l=n.contextType,c=ii,typeof l==`object`&&l&&(c=Xi(l)),s=n.getDerivedStateFromProps,(l=typeof s==`function`||typeof a.getSnapshotBeforeUpdate==`function`)||typeof a.UNSAFE_componentWillReceiveProps!=`function`&&typeof a.componentWillReceiveProps!=`function`||(o!==d||f!==c)&&Hs(t,a,r,c),Fa=!1,f=t.memoizedState,a.state=f,Wa(t,r,a,i),Ua();var p=t.memoizedState;o!==d||f!==p||Fa||e!==null&&e.dependencies!==null&&Ji(e.dependencies)?(typeof s==`function`&&(zs(t,n,s,r),p=t.memoizedState),(u=Fa||Vs(t,n,u,r,f,p,c)||e!==null&&e.dependencies!==null&&Ji(e.dependencies))?(l||typeof a.UNSAFE_componentWillUpdate!=`function`&&typeof a.componentWillUpdate!=`function`||(typeof a.componentWillUpdate==`function`&&a.componentWillUpdate(r,p,c),typeof a.UNSAFE_componentWillUpdate==`function`&&a.UNSAFE_componentWillUpdate(r,p,c)),typeof a.componentDidUpdate==`function`&&(t.flags|=4),typeof a.getSnapshotBeforeUpdate==`function`&&(t.flags|=1024)):(typeof a.componentDidUpdate!=`function`||o===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!=`function`||o===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),a.props=r,a.state=p,a.context=c,r=u):(typeof a.componentDidUpdate!=`function`||o===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!=`function`||o===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),r=!1)}return a=r,dc(e,t),r=(t.flags&128)!=0,a||r?(a=t.stateNode,n=r&&typeof n.getDerivedStateFromError!=`function`?null:a.render(),t.flags|=1,e!==null&&r?(t.child=Na(t,e.child,null,i),t.child=Na(t,null,n,i)):tc(e,t,n,i),t.memoizedState=a.state,e=t.child):e=Tc(e,t,i),e}function hc(e,t,n,r){return Li(),t.flags|=256,tc(e,t,n,r),t.child}var gc={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function _c(e){return{baseLanes:e,cachePool:ga()}}function vc(e,t,n){return e=e===null?0:e.childLanes&~n,t&&(e|=Kl),e}function yc(e,t,n){var r=t.pendingProps,a=!1,o=(t.flags&128)!=0,s;if((s=o)||(s=e!==null&&e.memoizedState===null?!1:(ao.current&2)!=0),s&&(a=!0,t.flags&=-129),s=(t.flags&32)!=0,t.flags&=-33,e===null){if(W){if(a?eo(t):ro(t),(e=U)?(e=rf(e,ji),e=e!==null&&e.data!==`&`?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:xi===null?null:{id:Si,overflow:Ci},retryLane:536870912,hydrationErrors:null},n=di(e),n.return=t,t.child=n,ki=t,U=null)):e=null,e===null)throw Ni(t);return of(e)?t.lanes=32:t.lanes=536870912,null}var c=r.children;return r=r.fallback,a?(ro(t),a=t.mode,c=xc({mode:`hidden`,children:c},a),r=li(r,a,n,null),c.return=t,r.return=t,c.sibling=r,t.child=c,r=t.child,r.memoizedState=_c(n),r.childLanes=vc(e,s,n),t.memoizedState=gc,oc(null,r)):(eo(t),bc(t,c))}var l=e.memoizedState;if(l!==null&&(c=l.dehydrated,c!==null)){if(o)t.flags&256?(eo(t),t.flags&=-257,t=Sc(e,t,n)):t.memoizedState===null?(ro(t),c=r.fallback,a=t.mode,r=xc({mode:`visible`,children:r.children},a),c=li(c,a,n,null),c.flags|=2,r.return=t,c.return=t,r.sibling=c,t.child=r,Na(t,e.child,null,n),r=t.child,r.memoizedState=_c(n),r.childLanes=vc(e,s,n),t.memoizedState=gc,t=oc(null,r)):(ro(t),t.child=e.child,t.flags|=128,t=null);else if(eo(t),of(c)){if(s=c.nextSibling&&c.nextSibling.dataset,s)var u=s.dgst;s=u,r=Error(i(419)),r.stack=``,r.digest=s,zi({value:r,source:null,stack:null}),t=Sc(e,t,n)}else if(ec||qi(e,t,n,!1),s=(n&e.childLanes)!==0,ec||s){if(s=Il,s!==null&&(r=it(s,n),r!==0&&r!==l.retryLane))throw l.retryLane=r,ti(e,r),pu(s,e,r),$s;af(c)||Tu(),t=Sc(e,t,n)}else af(c)?(t.flags|=192,t.child=e.child,t=null):(e=l.treeContext,U=cf(c.nextSibling),ki=t,W=!0,Ai=null,ji=!1,e!==null&&Oi(t,e),t=bc(t,r.children),t.flags|=4096);return t}return a?(ro(t),c=r.fallback,a=t.mode,l=e.child,u=l.sibling,r=H(l,{mode:`hidden`,children:r.children}),r.subtreeFlags=l.subtreeFlags&65011712,u===null?(c=li(c,a,n,null),c.flags|=2):c=H(u,c),c.return=t,r.return=t,r.sibling=c,t.child=r,oc(null,r),r=t.child,c=e.child.memoizedState,c===null?c=_c(n):(a=c.cachePool,a===null?a=ga():(l=na._currentValue,a=a.parent===l?a:{parent:l,pool:l}),c={baseLanes:c.baseLanes|n,cachePool:a}),r.memoizedState=c,r.childLanes=vc(e,s,n),t.memoizedState=gc,oc(e.child,r)):(eo(t),n=e.child,e=n.sibling,n=H(n,{mode:`visible`,children:r.children}),n.return=t,n.sibling=null,e!==null&&(s=t.deletions,s===null?(t.deletions=[e],t.flags|=16):s.push(e)),t.child=n,t.memoizedState=null,n)}function bc(e,t){return t=xc({mode:`visible`,children:t},e.mode),t.return=e,e.child=t}function xc(e,t){return e=V(22,e,null,t),e.lanes=0,e}function Sc(e,t,n){return Na(t,e.child,null,n),e=bc(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function q(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),Gi(e.return,t,n)}function Cc(e,t,n,r,i,a){var o=e.memoizedState;o===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i,treeForkCount:a}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i,o.treeForkCount=a)}function wc(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;r=r.children;var o=ao.current,s=(o&2)!=0;if(s?(o=o&1|2,t.flags|=128):o&=1,ce(ao,o),tc(e,t,r,n),r=W?vi:0,!s&&e!==null&&e.flags&128)a:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&q(e,n,t);else if(e.tag===19)q(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break a;for(;e.sibling===null;){if(e.return===null||e.return===t)break a;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(i){case`forwards`:for(n=t.child,i=null;n!==null;)e=n.alternate,e!==null&&oo(e)===null&&(i=n),n=n.sibling;n=i,n===null?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Cc(t,!1,i,n,a,r);break;case`backwards`:case`unstable_legacy-backwards`:for(n=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&oo(e)===null){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Cc(t,!0,n,null,a,r);break;case`together`:Cc(t,!1,null,null,void 0,r);break;default:t.memoizedState=null}return t.child}function Tc(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Ul|=t.lanes,(n&t.childLanes)===0)if(e!==null){if(qi(e,t,n,!1),(n&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(i(153));if(t.child!==null){for(e=t.child,n=H(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=H(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function Ec(e,t){return(e.lanes&t)===0?(e=e.dependencies,!!(e!==null&&Ji(e))):!0}function Dc(e,t,n){switch(t.tag){case 3:pe(t,t.stateNode.containerInfo),Ui(t,na,e.memoizedState.cache),Li();break;case 27:case 5:he(t);break;case 4:pe(t,t.stateNode.containerInfo);break;case 10:Ui(t,t.type,t.memoizedProps.value);break;case 31:if(t.memoizedState!==null)return t.flags|=128,to(t),null;break;case 13:var r=t.memoizedState;if(r!==null)return r.dehydrated===null?(n&t.child.childLanes)===0?(eo(t),e=Tc(e,t,n),e===null?null:e.sibling):yc(e,t,n):(eo(t),t.flags|=128,null);eo(t);break;case 19:var i=(e.flags&128)!=0;if(r=(n&t.childLanes)!==0,r||=(qi(e,t,n,!1),(n&t.childLanes)!==0),i){if(r)return wc(e,t,n);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),ce(ao,ao.current),r)break;return null;case 22:return t.lanes=0,ac(e,t,n,t.pendingProps);case 24:Ui(t,na,e.memoizedState.cache)}return Tc(e,t,n)}function Oc(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps)ec=!0;else{if(!Ec(e,n)&&!(t.flags&128))return ec=!1,Dc(e,t,n);ec=!!(e.flags&131072)}else ec=!1,W&&t.flags&1048576&&Ti(t,vi,t.index);switch(t.lanes=0,t.tag){case 16:a:{var r=t.pendingProps;if(e=Ca(t.elementType),t.type=e,typeof e==`function`)oi(e)?(r=Us(e,r),t.tag=1,t=mc(null,t,e,r,n)):(t.tag=0,t=fc(null,t,e,r,n));else{if(e!=null){var a=e.$$typeof;if(a===w){t.tag=11,t=nc(null,t,e,r,n);break a}else if(a===D){t.tag=14,t=rc(null,t,e,r,n);break a}}throw t=M(e)||e,Error(i(306,t,``))}}return t;case 0:return fc(e,t,t.type,t.pendingProps,n);case 1:return r=t.type,a=Us(r,t.pendingProps),mc(e,t,r,a,n);case 3:a:{if(pe(t,t.stateNode.containerInfo),e===null)throw Error(i(387));r=t.pendingProps;var o=t.memoizedState;a=o.element,La(e,t),Wa(t,r,null,n);var s=t.memoizedState;if(r=s.cache,Ui(t,na,r),r!==o.cache&&Ki(t,[na],n,!0),Ua(),r=s.element,o.isDehydrated)if(o={element:r,isDehydrated:!1,cache:s.cache},t.updateQueue.baseState=o,t.memoizedState=o,t.flags&256){t=hc(e,t,r,n);break a}else if(r!==a){a=mi(Error(i(424)),t),zi(a),t=hc(e,t,r,n);break a}else{switch(e=t.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName===`HTML`?e.ownerDocument.body:e}for(U=cf(e.firstChild),ki=t,W=!0,Ai=null,ji=!0,n=Pa(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling}else{if(Li(),r===a){t=Tc(e,t,n);break a}tc(e,t,r,n)}t=t.child}return t;case 26:return dc(e,t),e===null?(n=kf(t.type,null,t.pendingProps,null))?t.memoizedState=n:W||(n=t.type,e=t.pendingProps,r=Bd(de.current).createElement(n),r[ut]=t,r[dt]=e,Pd(r,n,e),Ct(r),t.stateNode=r):t.memoizedState=kf(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return he(t),e===null&&W&&(r=t.stateNode=ff(t.type,t.pendingProps,de.current),ki=t,ji=!0,a=U,Zd(t.type)?(lf=a,U=cf(r.firstChild)):U=a),tc(e,t,t.pendingProps.children,n),dc(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&W&&((a=r=U)&&(r=tf(r,t.type,t.pendingProps,ji),r===null?a=!1:(t.stateNode=r,ki=t,U=cf(r.firstChild),ji=!1,a=!0)),a||Ni(t)),he(t),a=t.type,o=t.pendingProps,s=e===null?null:e.memoizedProps,r=o.children,Ud(a,o)?r=null:s!==null&&Ud(a,s)&&(t.flags|=32),t.memoizedState!==null&&(a=yo(e,t,So,null,null,n),Qf._currentValue=a),dc(e,t),tc(e,t,r,n),t.child;case 6:return e===null&&W&&((e=n=U)&&(n=nf(n,t.pendingProps,ji),n===null?e=!1:(t.stateNode=n,ki=t,U=null,e=!0)),e||Ni(t)),null;case 13:return yc(e,t,n);case 4:return pe(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=Na(t,null,r,n):tc(e,t,r,n),t.child;case 11:return nc(e,t,t.type,t.pendingProps,n);case 7:return tc(e,t,t.pendingProps,n),t.child;case 8:return tc(e,t,t.pendingProps.children,n),t.child;case 12:return tc(e,t,t.pendingProps.children,n),t.child;case 10:return r=t.pendingProps,Ui(t,t.type,r.value),tc(e,t,r.children,n),t.child;case 9:return a=t.type._context,r=t.pendingProps.children,Yi(t),a=Xi(a),r=r(a),t.flags|=1,tc(e,t,r,n),t.child;case 14:return rc(e,t,t.type,t.pendingProps,n);case 15:return ic(e,t,t.type,t.pendingProps,n);case 19:return wc(e,t,n);case 31:return uc(e,t,n);case 22:return ac(e,t,n,t.pendingProps);case 24:return Yi(t),r=Xi(na),e===null?(a=ma(),a===null&&(a=Il,o=ra(),a.pooledCache=o,o.refCount++,o!==null&&(a.pooledCacheLanes|=n),a=o),t.memoizedState={parent:r,cache:a},Ia(t),Ui(t,na,a)):((e.lanes&n)!==0&&(La(e,t),Wa(t,null,null,n),Ua()),a=e.memoizedState,o=t.memoizedState,a.parent===r?(r=o.cache,Ui(t,na,r),r!==a.cache&&Ki(t,[na],n,!0)):(a={parent:r,cache:r},t.memoizedState=a,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=a),Ui(t,na,r))),tc(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(i(156,t.tag))}function kc(e){e.flags|=4}function Ac(e,t,n,r,i){if((t=(e.mode&32)!=0)&&(t=!1),t){if(e.flags|=16777216,(i&335544128)===i)if(e.stateNode.complete)e.flags|=8192;else if(Su())e.flags|=8192;else throw wa=ba,va}else e.flags&=-16777217}function jc(e,t){if(t.type!==`stylesheet`||t.state.loading&4)e.flags&=-16777217;else if(e.flags|=16777216,!Wf(t))if(Su())e.flags|=8192;else throw wa=ba,va}function Mc(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag===22?536870912:Qe(),e.lanes|=t,ql|=t)}function Nc(e,t){if(!W)switch(e.tailMode){case`hidden`:t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case`collapsed`:n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Pc(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&65011712,r|=i.flags&65011712,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Fc(e,t,n){var r=t.pendingProps;switch(Di(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Pc(t),null;case 1:return Pc(t),null;case 3:return n=t.stateNode,r=null,e!==null&&(r=e.memoizedState.cache),t.memoizedState.cache!==r&&(t.flags|=2048),Wi(na),me(),n.pendingContext&&=(n.context=n.pendingContext,null),(e===null||e.child===null)&&(Ii(t)?kc(t):e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Ri())),Pc(t),null;case 26:var a=t.type,o=t.memoizedState;return e===null?(kc(t),o===null?(Pc(t),Ac(t,a,null,r,n)):(Pc(t),jc(t,o))):o?o===e.memoizedState?(Pc(t),t.flags&=-16777217):(kc(t),Pc(t),jc(t,o)):(e=e.memoizedProps,e!==r&&kc(t),Pc(t),Ac(t,a,e,r,n)),null;case 27:if(ge(t),n=de.current,a=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==r&&kc(t);else{if(!r){if(t.stateNode===null)throw Error(i(166));return Pc(t),null}e=le.current,Ii(t)?Pi(t,e):(e=ff(a,r,n),t.stateNode=e,kc(t))}return Pc(t),null;case 5:if(ge(t),a=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==r&&kc(t);else{if(!r){if(t.stateNode===null)throw Error(i(166));return Pc(t),null}if(o=le.current,Ii(t))Pi(t,o);else{var s=Bd(de.current);switch(o){case 1:o=s.createElementNS(`http://www.w3.org/2000/svg`,a);break;case 2:o=s.createElementNS(`http://www.w3.org/1998/Math/MathML`,a);break;default:switch(a){case`svg`:o=s.createElementNS(`http://www.w3.org/2000/svg`,a);break;case`math`:o=s.createElementNS(`http://www.w3.org/1998/Math/MathML`,a);break;case`script`:o=s.createElement(`div`),o.innerHTML=`<script><\/script>`,o=o.removeChild(o.firstChild);break;case`select`:o=typeof r.is==`string`?s.createElement(`select`,{is:r.is}):s.createElement(`select`),r.multiple?o.multiple=!0:r.size&&(o.size=r.size);break;default:o=typeof r.is==`string`?s.createElement(a,{is:r.is}):s.createElement(a)}}o[ut]=t,o[dt]=r;a:for(s=t.child;s!==null;){if(s.tag===5||s.tag===6)o.appendChild(s.stateNode);else if(s.tag!==4&&s.tag!==27&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break a;for(;s.sibling===null;){if(s.return===null||s.return===t)break a;s=s.return}s.sibling.return=s.return,s=s.sibling}t.stateNode=o;a:switch(Pd(o,a,r),a){case`button`:case`input`:case`select`:case`textarea`:r=!!r.autoFocus;break a;case`img`:r=!0;break a;default:r=!1}r&&kc(t)}}return Pc(t),Ac(t,t.type,e===null?null:e.memoizedProps,t.pendingProps,n),null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==r&&kc(t);else{if(typeof r!=`string`&&t.stateNode===null)throw Error(i(166));if(e=de.current,Ii(t)){if(e=t.stateNode,n=t.memoizedProps,r=null,a=ki,a!==null)switch(a.tag){case 27:case 5:r=a.memoizedProps}e[ut]=t,e=!!(e.nodeValue===n||r!==null&&!0===r.suppressHydrationWarning||jd(e.nodeValue,n)),e||Ni(t,!0)}else e=Bd(e).createTextNode(r),e[ut]=t,t.stateNode=e}return Pc(t),null;case 31:if(n=t.memoizedState,e===null||e.memoizedState!==null){if(r=Ii(t),n!==null){if(e===null){if(!r)throw Error(i(318));if(e=t.memoizedState,e=e===null?null:e.dehydrated,!e)throw Error(i(557));e[ut]=t}else Li(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Pc(t),e=!1}else n=Ri(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=n),e=!0;if(!e)return t.flags&256?(io(t),t):(io(t),null);if(t.flags&128)throw Error(i(558))}return Pc(t),null;case 13:if(r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(a=Ii(t),r!==null&&r.dehydrated!==null){if(e===null){if(!a)throw Error(i(318));if(a=t.memoizedState,a=a===null?null:a.dehydrated,!a)throw Error(i(317));a[ut]=t}else Li(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Pc(t),a=!1}else a=Ri(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=a),a=!0;if(!a)return t.flags&256?(io(t),t):(io(t),null)}return io(t),t.flags&128?(t.lanes=n,t):(n=r!==null,e=e!==null&&e.memoizedState!==null,n&&(r=t.child,a=null,r.alternate!==null&&r.alternate.memoizedState!==null&&r.alternate.memoizedState.cachePool!==null&&(a=r.alternate.memoizedState.cachePool.pool),o=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(o=r.memoizedState.cachePool.pool),o!==a&&(r.flags|=2048)),n!==e&&n&&(t.child.flags|=8192),Mc(t,t.updateQueue),Pc(t),null);case 4:return me(),e===null&&xd(t.stateNode.containerInfo),Pc(t),null;case 10:return Wi(t.type),Pc(t),null;case 19:if(se(ao),r=t.memoizedState,r===null)return Pc(t),null;if(a=(t.flags&128)!=0,o=r.rendering,o===null)if(a)Nc(r,!1);else{if(Hl!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=oo(e),o!==null){for(t.flags|=128,Nc(r,!1),e=o.updateQueue,t.updateQueue=e,Mc(t,e),t.subtreeFlags=0,e=n,n=t.child;n!==null;)si(n,e),n=n.sibling;return ce(ao,ao.current&1|2),W&&wi(t,r.treeForkCount),t.child}e=e.sibling}r.tail!==null&&ke()>$l&&(t.flags|=128,a=!0,Nc(r,!1),t.lanes=4194304)}else{if(!a)if(e=oo(o),e!==null){if(t.flags|=128,a=!0,e=e.updateQueue,t.updateQueue=e,Mc(t,e),Nc(r,!0),r.tail===null&&r.tailMode===`hidden`&&!o.alternate&&!W)return Pc(t),null}else 2*ke()-r.renderingStartTime>$l&&n!==536870912&&(t.flags|=128,a=!0,Nc(r,!1),t.lanes=4194304);r.isBackwards?(o.sibling=t.child,t.child=o):(e=r.last,e===null?t.child=o:e.sibling=o,r.last=o)}return r.tail===null?(Pc(t),null):(e=r.tail,r.rendering=e,r.tail=e.sibling,r.renderingStartTime=ke(),e.sibling=null,n=ao.current,ce(ao,a?n&1|2:n&1),W&&wi(t,r.treeForkCount),e);case 22:case 23:return io(t),Za(),r=t.memoizedState!==null,e===null?r&&(t.flags|=8192):e.memoizedState!==null!==r&&(t.flags|=8192),r?n&536870912&&!(t.flags&128)&&(Pc(t),t.subtreeFlags&6&&(t.flags|=8192)):Pc(t),n=t.updateQueue,n!==null&&Mc(t,n.retryQueue),n=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),r=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(r=t.memoizedState.cachePool.pool),r!==n&&(t.flags|=2048),e!==null&&se(pa),null;case 24:return n=null,e!==null&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),Wi(na),Pc(t),null;case 25:return null;case 30:return null}throw Error(i(156,t.tag))}function Ic(e,t){switch(Di(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Wi(na),me(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return ge(t),null;case 31:if(t.memoizedState!==null){if(io(t),t.alternate===null)throw Error(i(340));Li()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 13:if(io(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(i(340));Li()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return se(ao),null;case 4:return me(),null;case 10:return Wi(t.type),null;case 22:case 23:return io(t),Za(),e!==null&&se(pa),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return Wi(na),null;case 25:return null;default:return null}}function Lc(e,t){switch(Di(t),t.tag){case 3:Wi(na),me();break;case 26:case 27:case 5:ge(t);break;case 4:me();break;case 31:t.memoizedState!==null&&io(t);break;case 13:io(t);break;case 19:se(ao);break;case 10:Wi(t.type);break;case 22:case 23:io(t),Za(),e!==null&&se(pa);break;case 24:Wi(na)}}function Rc(e,t){try{var n=t.updateQueue,r=n===null?null:n.lastEffect;if(r!==null){var i=r.next;n=i;do{if((n.tag&e)===e){r=void 0;var a=n.create,o=n.inst;r=a(),o.destroy=r}n=n.next}while(n!==i)}}catch(e){Uu(t,t.return,e)}}function zc(e,t,n){try{var r=t.updateQueue,i=r===null?null:r.lastEffect;if(i!==null){var a=i.next;r=a;do{if((r.tag&e)===e){var o=r.inst,s=o.destroy;if(s!==void 0){o.destroy=void 0,i=t;var c=n,l=s;try{l()}catch(e){Uu(i,c,e)}}}r=r.next}while(r!==a)}}catch(e){Uu(t,t.return,e)}}function Bc(e){var t=e.updateQueue;if(t!==null){var n=e.stateNode;try{Ka(t,n)}catch(t){Uu(e,e.return,t)}}}function Vc(e,t,n){n.props=Us(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(n){Uu(e,t,n)}}function Hc(e,t){try{var n=e.ref;if(n!==null){switch(e.tag){case 26:case 27:case 5:var r=e.stateNode;break;case 30:r=e.stateNode;break;default:r=e.stateNode}typeof n==`function`?e.refCleanup=n(r):n.current=r}}catch(n){Uu(e,t,n)}}function Uc(e,t){var n=e.ref,r=e.refCleanup;if(n!==null)if(typeof r==`function`)try{r()}catch(n){Uu(e,t,n)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof n==`function`)try{n(null)}catch(n){Uu(e,t,n)}else n.current=null}function Wc(e){var t=e.type,n=e.memoizedProps,r=e.stateNode;try{a:switch(t){case`button`:case`input`:case`select`:case`textarea`:n.autoFocus&&r.focus();break a;case`img`:n.src?r.src=n.src:n.srcSet&&(r.srcset=n.srcSet)}}catch(t){Uu(e,e.return,t)}}function Gc(e,t,n){try{var r=e.stateNode;Fd(r,e.type,n,t),r[dt]=t}catch(t){Uu(e,e.return,t)}}function Kc(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&Zd(e.type)||e.tag===4}function qc(e){a:for(;;){for(;e.sibling===null;){if(e.return===null||Kc(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&Zd(e.type)||e.flags&2||e.child===null||e.tag===4)continue a;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Jc(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?(n.nodeType===9?n.body:n.nodeName===`HTML`?n.ownerDocument.body:n).insertBefore(e,t):(t=n.nodeType===9?n.body:n.nodeName===`HTML`?n.ownerDocument.body:n,t.appendChild(e),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=rn));else if(r!==4&&(r===27&&Zd(e.type)&&(n=e.stateNode,t=null),e=e.child,e!==null))for(Jc(e,t,n),e=e.sibling;e!==null;)Jc(e,t,n),e=e.sibling}function Yc(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(r===27&&Zd(e.type)&&(n=e.stateNode),e=e.child,e!==null))for(Yc(e,t,n),e=e.sibling;e!==null;)Yc(e,t,n),e=e.sibling}function Xc(e){var t=e.stateNode,n=e.memoizedProps;try{for(var r=e.type,i=t.attributes;i.length;)t.removeAttributeNode(i[0]);Pd(t,r,n),t[ut]=e,t[dt]=n}catch(t){Uu(e,e.return,t)}}var Zc=!1,Qc=!1,$c=!1,el=typeof WeakSet==`function`?WeakSet:Set,J=null;function tl(e,t){if(e=e.containerInfo,Rd=sp,e=I(e),L(e)){if(`selectionStart`in e)var n={start:e.selectionStart,end:e.selectionEnd};else a:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var a=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break a}var s=0,c=-1,l=-1,u=0,d=0,f=e,p=null;b:for(;;){for(var m;f!==n||a!==0&&f.nodeType!==3||(c=s+a),f!==o||r!==0&&f.nodeType!==3||(l=s+r),f.nodeType===3&&(s+=f.nodeValue.length),(m=f.firstChild)!==null;)p=f,f=m;for(;;){if(f===e)break b;if(p===n&&++u===a&&(c=s),p===o&&++d===r&&(l=s),(m=f.nextSibling)!==null)break;f=p,p=f.parentNode}f=m}n=c===-1||l===-1?null:{start:c,end:l}}else n=null}n||={start:0,end:0}}else n=null;for(zd={focusedElem:e,selectionRange:n},sp=!1,J=t;J!==null;)if(t=J,e=t.child,t.subtreeFlags&1028&&e!==null)e.return=t,J=e;else for(;J!==null;){switch(t=J,o=t.alternate,e=t.flags,t.tag){case 0:if(e&4&&(e=t.updateQueue,e=e===null?null:e.events,e!==null))for(n=0;n<e.length;n++)a=e[n],a.ref.impl=a.nextImpl;break;case 11:case 15:break;case 1:if(e&1024&&o!==null){e=void 0,n=t,a=o.memoizedProps,o=o.memoizedState,r=n.stateNode;try{var h=Us(n.type,a);e=r.getSnapshotBeforeUpdate(h,o),r.__reactInternalSnapshotBeforeUpdate=e}catch(e){Uu(n,n.return,e)}}break;case 3:if(e&1024){if(e=t.stateNode.containerInfo,n=e.nodeType,n===9)ef(e);else if(n===1)switch(e.nodeName){case`HEAD`:case`HTML`:case`BODY`:ef(e);break;default:e.textContent=``}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if(e&1024)throw Error(i(163))}if(e=t.sibling,e!==null){e.return=t.return,J=e;break}J=t.return}}function nl(e,t,n){var r=n.flags;switch(n.tag){case 0:case 11:case 15:_l(e,n),r&4&&Rc(5,n);break;case 1:if(_l(e,n),r&4)if(e=n.stateNode,t===null)try{e.componentDidMount()}catch(e){Uu(n,n.return,e)}else{var i=Us(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(i,t,e.__reactInternalSnapshotBeforeUpdate)}catch(e){Uu(n,n.return,e)}}r&64&&Bc(n),r&512&&Hc(n,n.return);break;case 3:if(_l(e,n),r&64&&(e=n.updateQueue,e!==null)){if(t=null,n.child!==null)switch(n.child.tag){case 27:case 5:t=n.child.stateNode;break;case 1:t=n.child.stateNode}try{Ka(e,t)}catch(e){Uu(n,n.return,e)}}break;case 27:t===null&&r&4&&Xc(n);case 26:case 5:_l(e,n),t===null&&r&4&&Wc(n),r&512&&Hc(n,n.return);break;case 12:_l(e,n);break;case 31:_l(e,n),r&4&&cl(e,n);break;case 13:_l(e,n),r&4&&ll(e,n),r&64&&(e=n.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(n=qu.bind(null,n),sf(e,n))));break;case 22:if(r=n.memoizedState!==null||Zc,!r){t=t!==null&&t.memoizedState!==null||Qc,i=Zc;var a=Qc;Zc=r,(Qc=t)&&!a?yl(e,n,(n.subtreeFlags&8772)!=0):_l(e,n),Zc=i,Qc=a}break;case 30:break;default:_l(e,n)}}function rl(e){var t=e.alternate;t!==null&&(e.alternate=null,rl(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&vt(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var il=null,al=!1;function ol(e,t,n){for(n=n.child;n!==null;)sl(e,t,n),n=n.sibling}function sl(e,t,n){if(ze&&typeof ze.onCommitFiberUnmount==`function`)try{ze.onCommitFiberUnmount(Re,n)}catch{}switch(n.tag){case 26:Qc||Uc(n,t),ol(e,t,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode,n.parentNode.removeChild(n));break;case 27:Qc||Uc(n,t);var r=il,i=al;Zd(n.type)&&(il=n.stateNode,al=!1),ol(e,t,n),pf(n.stateNode),il=r,al=i;break;case 5:Qc||Uc(n,t);case 6:if(r=il,i=al,il=null,ol(e,t,n),il=r,al=i,il!==null)if(al)try{(il.nodeType===9?il.body:il.nodeName===`HTML`?il.ownerDocument.body:il).removeChild(n.stateNode)}catch(e){Uu(n,t,e)}else try{il.removeChild(n.stateNode)}catch(e){Uu(n,t,e)}break;case 18:il!==null&&(al?(e=il,Qd(e.nodeType===9?e.body:e.nodeName===`HTML`?e.ownerDocument.body:e,n.stateNode),Np(e)):Qd(il,n.stateNode));break;case 4:r=il,i=al,il=n.stateNode.containerInfo,al=!0,ol(e,t,n),il=r,al=i;break;case 0:case 11:case 14:case 15:zc(2,n,t),Qc||zc(4,n,t),ol(e,t,n);break;case 1:Qc||(Uc(n,t),r=n.stateNode,typeof r.componentWillUnmount==`function`&&Vc(n,t,r)),ol(e,t,n);break;case 21:ol(e,t,n);break;case 22:Qc=(r=Qc)||n.memoizedState!==null,ol(e,t,n),Qc=r;break;default:ol(e,t,n)}}function cl(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{Np(e)}catch(e){Uu(t,t.return,e)}}}function ll(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{Np(e)}catch(e){Uu(t,t.return,e)}}function ul(e){switch(e.tag){case 31:case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new el),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new el),t;default:throw Error(i(435,e.tag))}}function dl(e,t){var n=ul(e);t.forEach(function(t){if(!n.has(t)){n.add(t);var r=Ju.bind(null,e,t);t.then(r,r)}})}function fl(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var a=n[r],o=e,s=t,c=s;a:for(;c!==null;){switch(c.tag){case 27:if(Zd(c.type)){il=c.stateNode,al=!1;break a}break;case 5:il=c.stateNode,al=!1;break a;case 3:case 4:il=c.stateNode.containerInfo,al=!0;break a}c=c.return}if(il===null)throw Error(i(160));sl(o,s,a),il=null,al=!1,o=a.alternate,o!==null&&(o.return=null),a.return=null}if(t.subtreeFlags&13886)for(t=t.child;t!==null;)ml(t,e),t=t.sibling}var pl=null;function ml(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:fl(t,e),hl(e),r&4&&(zc(3,e,e.return),Rc(3,e),zc(5,e,e.return));break;case 1:fl(t,e),hl(e),r&512&&(Qc||n===null||Uc(n,n.return)),r&64&&Zc&&(e=e.updateQueue,e!==null&&(r=e.callbacks,r!==null&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=n===null?r:n.concat(r))));break;case 26:var a=pl;if(fl(t,e),hl(e),r&512&&(Qc||n===null||Uc(n,n.return)),r&4){var o=n===null?null:n.memoizedState;if(r=e.memoizedState,n===null)if(r===null)if(e.stateNode===null){a:{r=e.type,n=e.memoizedProps,a=a.ownerDocument||a;b:switch(r){case`title`:o=a.getElementsByTagName(`title`)[0],(!o||o[_t]||o[ut]||o.namespaceURI===`http://www.w3.org/2000/svg`||o.hasAttribute(`itemprop`))&&(o=a.createElement(r),a.head.insertBefore(o,a.querySelector(`head > title`))),Pd(o,r,n),o[ut]=e,Ct(o),r=o;break a;case`link`:var s=Vf(`link`,`href`,a).get(r+(n.href||``));if(s){for(var c=0;c<s.length;c++)if(o=s[c],o.getAttribute(`href`)===(n.href==null||n.href===``?null:n.href)&&o.getAttribute(`rel`)===(n.rel==null?null:n.rel)&&o.getAttribute(`title`)===(n.title==null?null:n.title)&&o.getAttribute(`crossorigin`)===(n.crossOrigin==null?null:n.crossOrigin)){s.splice(c,1);break b}}o=a.createElement(r),Pd(o,r,n),a.head.appendChild(o);break;case`meta`:if(s=Vf(`meta`,`content`,a).get(r+(n.content||``))){for(c=0;c<s.length;c++)if(o=s[c],o.getAttribute(`content`)===(n.content==null?null:``+n.content)&&o.getAttribute(`name`)===(n.name==null?null:n.name)&&o.getAttribute(`property`)===(n.property==null?null:n.property)&&o.getAttribute(`http-equiv`)===(n.httpEquiv==null?null:n.httpEquiv)&&o.getAttribute(`charset`)===(n.charSet==null?null:n.charSet)){s.splice(c,1);break b}}o=a.createElement(r),Pd(o,r,n),a.head.appendChild(o);break;default:throw Error(i(468,r))}o[ut]=e,Ct(o),r=o}e.stateNode=r}else Hf(a,e.type,e.stateNode);else e.stateNode=If(a,r,e.memoizedProps);else o===r?r===null&&e.stateNode!==null&&Gc(e,e.memoizedProps,n.memoizedProps):(o===null?n.stateNode!==null&&(n=n.stateNode,n.parentNode.removeChild(n)):o.count--,r===null?Hf(a,e.type,e.stateNode):If(a,r,e.memoizedProps))}break;case 27:fl(t,e),hl(e),r&512&&(Qc||n===null||Uc(n,n.return)),n!==null&&r&4&&Gc(e,e.memoizedProps,n.memoizedProps);break;case 5:if(fl(t,e),hl(e),r&512&&(Qc||n===null||Uc(n,n.return)),e.flags&32){a=e.stateNode;try{Yt(a,``)}catch(t){Uu(e,e.return,t)}}r&4&&e.stateNode!=null&&(a=e.memoizedProps,Gc(e,a,n===null?a:n.memoizedProps)),r&1024&&($c=!0);break;case 6:if(fl(t,e),hl(e),r&4){if(e.stateNode===null)throw Error(i(162));r=e.memoizedProps,n=e.stateNode;try{n.nodeValue=r}catch(t){Uu(e,e.return,t)}}break;case 3:if(Bf=null,a=pl,pl=gf(t.containerInfo),fl(t,e),pl=a,hl(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Np(t.containerInfo)}catch(t){Uu(e,e.return,t)}$c&&($c=!1,gl(e));break;case 4:r=pl,pl=gf(e.stateNode.containerInfo),fl(t,e),hl(e),pl=r;break;case 12:fl(t,e),hl(e);break;case 31:fl(t,e),hl(e),r&4&&(r=e.updateQueue,r!==null&&(e.updateQueue=null,dl(e,r)));break;case 13:fl(t,e),hl(e),e.child.flags&8192&&e.memoizedState!==null!=(n!==null&&n.memoizedState!==null)&&(Zl=ke()),r&4&&(r=e.updateQueue,r!==null&&(e.updateQueue=null,dl(e,r)));break;case 22:a=e.memoizedState!==null;var l=n!==null&&n.memoizedState!==null,u=Zc,d=Qc;if(Zc=u||a,Qc=d||l,fl(t,e),Qc=d,Zc=u,hl(e),r&8192)a:for(t=e.stateNode,t._visibility=a?t._visibility&-2:t._visibility|1,a&&(n===null||l||Zc||Qc||vl(e)),n=null,t=e;;){if(t.tag===5||t.tag===26){if(n===null){l=n=t;try{if(o=l.stateNode,a)s=o.style,typeof s.setProperty==`function`?s.setProperty(`display`,`none`,`important`):s.display=`none`;else{c=l.stateNode;var f=l.memoizedProps.style,p=f!=null&&f.hasOwnProperty(`display`)?f.display:null;c.style.display=p==null||typeof p==`boolean`?``:(``+p).trim()}}catch(e){Uu(l,l.return,e)}}}else if(t.tag===6){if(n===null){l=t;try{l.stateNode.nodeValue=a?``:l.memoizedProps}catch(e){Uu(l,l.return,e)}}}else if(t.tag===18){if(n===null){l=t;try{var m=l.stateNode;a?$d(m,!0):$d(l.stateNode,!1)}catch(e){Uu(l,l.return,e)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break a;for(;t.sibling===null;){if(t.return===null||t.return===e)break a;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}r&4&&(r=e.updateQueue,r!==null&&(n=r.retryQueue,n!==null&&(r.retryQueue=null,dl(e,n))));break;case 19:fl(t,e),hl(e),r&4&&(r=e.updateQueue,r!==null&&(e.updateQueue=null,dl(e,r)));break;case 30:break;case 21:break;default:fl(t,e),hl(e)}}function hl(e){var t=e.flags;if(t&2){try{for(var n,r=e.return;r!==null;){if(Kc(r)){n=r;break}r=r.return}if(n==null)throw Error(i(160));switch(n.tag){case 27:var a=n.stateNode;Yc(e,qc(e),a);break;case 5:var o=n.stateNode;n.flags&32&&(Yt(o,``),n.flags&=-33),Yc(e,qc(e),o);break;case 3:case 4:var s=n.stateNode.containerInfo;Jc(e,qc(e),s);break;default:throw Error(i(161))}}catch(t){Uu(e,e.return,t)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function gl(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;gl(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function _l(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)nl(e,t.alternate,t),t=t.sibling}function vl(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:zc(4,t,t.return),vl(t);break;case 1:Uc(t,t.return);var n=t.stateNode;typeof n.componentWillUnmount==`function`&&Vc(t,t.return,n),vl(t);break;case 27:pf(t.stateNode);case 26:case 5:Uc(t,t.return),vl(t);break;case 22:t.memoizedState===null&&vl(t);break;case 30:vl(t);break;default:vl(t)}e=e.sibling}}function yl(e,t,n){for(n&&=(t.subtreeFlags&8772)!=0,t=t.child;t!==null;){var r=t.alternate,i=e,a=t,o=a.flags;switch(a.tag){case 0:case 11:case 15:yl(i,a,n),Rc(4,a);break;case 1:if(yl(i,a,n),r=a,i=r.stateNode,typeof i.componentDidMount==`function`)try{i.componentDidMount()}catch(e){Uu(r,r.return,e)}if(r=a,i=r.updateQueue,i!==null){var s=r.stateNode;try{var c=i.shared.hiddenCallbacks;if(c!==null)for(i.shared.hiddenCallbacks=null,i=0;i<c.length;i++)Ga(c[i],s)}catch(e){Uu(r,r.return,e)}}n&&o&64&&Bc(a),Hc(a,a.return);break;case 27:Xc(a);case 26:case 5:yl(i,a,n),n&&r===null&&o&4&&Wc(a),Hc(a,a.return);break;case 12:yl(i,a,n);break;case 31:yl(i,a,n),n&&o&4&&cl(i,a);break;case 13:yl(i,a,n),n&&o&4&&ll(i,a);break;case 22:a.memoizedState===null&&yl(i,a,n),Hc(a,a.return);break;case 30:break;default:yl(i,a,n)}t=t.sibling}}function bl(e,t){var n=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==n&&(e!=null&&e.refCount++,n!=null&&ia(n))}function xl(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&ia(e))}function Sl(e,t,n,r){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Cl(e,t,n,r),t=t.sibling}function Cl(e,t,n,r){var i=t.flags;switch(t.tag){case 0:case 11:case 15:Sl(e,t,n,r),i&2048&&Rc(9,t);break;case 1:Sl(e,t,n,r);break;case 3:Sl(e,t,n,r),i&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&ia(e)));break;case 12:if(i&2048){Sl(e,t,n,r),e=t.stateNode;try{var a=t.memoizedProps,o=a.id,s=a.onPostCommit;typeof s==`function`&&s(o,t.alternate===null?`mount`:`update`,e.passiveEffectDuration,-0)}catch(e){Uu(t,t.return,e)}}else Sl(e,t,n,r);break;case 31:Sl(e,t,n,r);break;case 13:Sl(e,t,n,r);break;case 23:break;case 22:a=t.stateNode,o=t.alternate,t.memoizedState===null?a._visibility&2?Sl(e,t,n,r):(a._visibility|=2,wl(e,t,n,r,(t.subtreeFlags&10256)!=0||!1)):a._visibility&2?Sl(e,t,n,r):Tl(e,t),i&2048&&bl(o,t);break;case 24:Sl(e,t,n,r),i&2048&&xl(t.alternate,t);break;default:Sl(e,t,n,r)}}function wl(e,t,n,r,i){for(i&&=(t.subtreeFlags&10256)!=0||!1,t=t.child;t!==null;){var a=e,o=t,s=n,c=r,l=o.flags;switch(o.tag){case 0:case 11:case 15:wl(a,o,s,c,i),Rc(8,o);break;case 23:break;case 22:var u=o.stateNode;o.memoizedState===null?(u._visibility|=2,wl(a,o,s,c,i)):u._visibility&2?wl(a,o,s,c,i):Tl(a,o),i&&l&2048&&bl(o.alternate,o);break;case 24:wl(a,o,s,c,i),i&&l&2048&&xl(o.alternate,o);break;default:wl(a,o,s,c,i)}t=t.sibling}}function Tl(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var n=e,r=t,i=r.flags;switch(r.tag){case 22:Tl(n,r),i&2048&&bl(r.alternate,r);break;case 24:Tl(n,r),i&2048&&xl(r.alternate,r);break;default:Tl(n,r)}t=t.sibling}}var El=8192;function Dl(e,t,n){if(e.subtreeFlags&El)for(e=e.child;e!==null;)Ol(e,t,n),e=e.sibling}function Ol(e,t,n){switch(e.tag){case 26:Dl(e,t,n),e.flags&El&&e.memoizedState!==null&&Gf(n,pl,e.memoizedState,e.memoizedProps);break;case 5:Dl(e,t,n);break;case 3:case 4:var r=pl;pl=gf(e.stateNode.containerInfo),Dl(e,t,n),pl=r;break;case 22:e.memoizedState===null&&(r=e.alternate,r!==null&&r.memoizedState!==null?(r=El,El=16777216,Dl(e,t,n),El=r):Dl(e,t,n));break;default:Dl(e,t,n)}}function kl(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function Al(e){var t=e.deletions;if(e.flags&16){if(t!==null)for(var n=0;n<t.length;n++){var r=t[n];J=r,Nl(r,e)}kl(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)jl(e),e=e.sibling}function jl(e){switch(e.tag){case 0:case 11:case 15:Al(e),e.flags&2048&&zc(9,e,e.return);break;case 3:Al(e);break;case 12:Al(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,Ml(e)):Al(e);break;default:Al(e)}}function Ml(e){var t=e.deletions;if(e.flags&16){if(t!==null)for(var n=0;n<t.length;n++){var r=t[n];J=r,Nl(r,e)}kl(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:zc(8,t,t.return),Ml(t);break;case 22:n=t.stateNode,n._visibility&2&&(n._visibility&=-3,Ml(t));break;default:Ml(t)}e=e.sibling}}function Nl(e,t){for(;J!==null;){var n=J;switch(n.tag){case 0:case 11:case 15:zc(8,n,t);break;case 23:case 22:if(n.memoizedState!==null&&n.memoizedState.cachePool!==null){var r=n.memoizedState.cachePool.pool;r!=null&&r.refCount++}break;case 24:ia(n.memoizedState.cache)}if(r=n.child,r!==null)r.return=n,J=r;else a:for(n=e;J!==null;){r=J;var i=r.sibling,a=r.return;if(rl(r),r===n){J=null;break a}if(i!==null){i.return=a,J=i;break a}J=a}}}var Pl={getCacheForType:function(e){var t=Xi(na),n=t.data.get(e);return n===void 0&&(n=e(),t.data.set(e,n)),n},cacheSignal:function(){return Xi(na).controller.signal}},Fl=typeof WeakMap==`function`?WeakMap:Map,Y=0,Il=null,X=null,Z=0,Q=0,Ll=null,Rl=!1,zl=!1,Bl=!1,Vl=0,Hl=0,Ul=0,Wl=0,Gl=0,Kl=0,ql=0,Jl=null,Yl=null,Xl=!1,Zl=0,Ql=0,$l=1/0,eu=null,tu=null,nu=0,ru=null,iu=null,au=0,ou=0,su=null,cu=null,lu=0,uu=null;function du(){return Y&2&&Z!==0?Z&-Z:N.T===null?st():ud()}function fu(){if(Kl===0)if(!(Z&536870912)||W){var e=Ke;Ke<<=1,!(Ke&3932160)&&(Ke=262144),Kl=e}else Kl=536870912;return e=Qa.current,e!==null&&(e.flags|=32),Kl}function pu(e,t,n){(e===Il&&(Q===2||Q===9)||e.cancelPendingCommit!==null)&&(bu(e,0),_u(e,Z,Kl,!1)),et(e,n),(!(Y&2)||e!==Il)&&(e===Il&&(!(Y&2)&&(Wl|=n),Hl===4&&_u(e,Z,Kl,!1)),nd(e))}function mu(e,t,n){if(Y&6)throw Error(i(327));var r=!n&&(t&127)==0&&(t&e.expiredLanes)===0||Xe(e,t),a=r?Ou(e,t):Eu(e,t,!0),o=r;do{if(a===0){zl&&!r&&_u(e,t,0,!1);break}else{if(n=e.current.alternate,o&&!gu(n)){a=Eu(e,t,!1),o=!1;continue}if(a===2){if(o=t,e.errorRecoveryDisabledLanes&o)var s=0;else s=e.pendingLanes&-536870913,s=s===0?s&536870912?536870912:0:s;if(s!==0){t=s;a:{var c=e;a=Jl;var l=c.current.memoizedState.isDehydrated;if(l&&(bu(c,s).flags|=256),s=Eu(c,s,!1),s!==2){if(Bl&&!l){c.errorRecoveryDisabledLanes|=o,Wl|=o,a=4;break a}o=Yl,Yl=a,o!==null&&(Yl===null?Yl=o:Yl.push.apply(Yl,o))}a=s}if(o=!1,a!==2)continue}}if(a===1){bu(e,0),_u(e,t,0,!0);break}a:{switch(r=e,o=a,o){case 0:case 1:throw Error(i(345));case 4:if((t&4194048)!==t)break;case 6:_u(r,t,Kl,!Rl);break a;case 2:Yl=null;break;case 3:case 5:break;default:throw Error(i(329))}if((t&62914560)===t&&(a=Zl+300-ke(),10<a)){if(_u(r,t,Kl,!Rl),Ye(r,0,!0)!==0)break a;au=t,r.timeoutHandle=Kd(hu.bind(null,r,n,Yl,eu,Xl,t,Kl,Wl,ql,Rl,o,`Throttled`,-0,0),a);break a}hu(r,n,Yl,eu,Xl,t,Kl,Wl,ql,Rl,o,null,-0,0)}}break}while(1);nd(e)}function hu(e,t,n,r,i,a,o,s,c,l,u,d,f,p){if(e.timeoutHandle=-1,d=t.subtreeFlags,d&8192||(d&16785408)==16785408){d={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:rn},Ol(t,a,d);var m=(a&62914560)===a?Zl-ke():(a&4194048)===a?Ql-ke():0;if(m=qf(d,m),m!==null){au=a,e.cancelPendingCommit=m(Fu.bind(null,e,t,a,n,r,i,o,s,c,u,d,null,f,p)),_u(e,a,o,!l);return}}Fu(e,t,a,n,r,i,o,s,c)}function gu(e){for(var t=e;;){var n=t.tag;if((n===0||n===11||n===15)&&t.flags&16384&&(n=t.updateQueue,n!==null&&(n=n.stores,n!==null)))for(var r=0;r<n.length;r++){var i=n[r],a=i.getSnapshot;i=i.value;try{if(!Tr(a(),i))return!1}catch{return!1}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function _u(e,t,n,r){t&=~Gl,t&=~Wl,e.suspendedLanes|=t,e.pingedLanes&=~t,r&&(e.warmLanes|=t),r=e.expirationTimes;for(var i=t;0<i;){var a=31-Ve(i),o=1<<a;r[a]=-1,i&=~o}n!==0&&nt(e,n,t)}function vu(){return Y&6?!0:(rd(0,!1),!1)}function yu(){if(X!==null){if(Q===0)var e=X.return;else e=X,Hi=Vi=null,To(e),Da=null,Oa=0,e=X;for(;e!==null;)Lc(e.alternate,e),e=e.return;X=null}}function bu(e,t){var n=e.timeoutHandle;n!==-1&&(e.timeoutHandle=-1,qd(n)),n=e.cancelPendingCommit,n!==null&&(e.cancelPendingCommit=null,n()),au=0,yu(),Il=e,X=n=H(e.current,null),Z=t,Q=0,Ll=null,Rl=!1,zl=Xe(e,t),Bl=!1,ql=Kl=Gl=Wl=Ul=Hl=0,Yl=Jl=null,Xl=!1,t&8&&(t|=t&32);var r=e.entangledLanes;if(r!==0)for(e=e.entanglements,r&=t;0<r;){var i=31-Ve(r),a=1<<i;t|=e[i],r&=~a}return Vl=t,Qr(),n}function xu(e,t){G=null,N.H=Fs,t===_a||t===ya?(t=Ta(),Q=3):t===va?(t=Ta(),Q=4):Q=t===$s?8:typeof t==`object`&&t&&typeof t.then==`function`?6:1,Ll=t,X===null&&(Hl=1,qs(e,mi(t,e.current)))}function Su(){var e=Qa.current;return e===null?!0:(Z&4194048)===Z?$a===null:(Z&62914560)===Z||Z&536870912?e===$a:!1}function Cu(){var e=N.H;return N.H=Fs,e===null?Fs:e}function wu(){var e=N.A;return N.A=Pl,e}function Tu(){Hl=4,Rl||(Z&4194048)!==Z&&Qa.current!==null||(zl=!0),!(Ul&134217727)&&!(Wl&134217727)||Il===null||_u(Il,Z,Kl,!1)}function Eu(e,t,n){var r=Y;Y|=2;var i=Cu(),a=wu();(Il!==e||Z!==t)&&(eu=null,bu(e,t)),t=!1;var o=Hl;a:do try{if(Q!==0&&X!==null){var s=X,c=Ll;switch(Q){case 8:yu(),o=6;break a;case 3:case 2:case 9:case 6:Qa.current===null&&(t=!0);var l=Q;if(Q=0,Ll=null,Mu(e,s,c,l),n&&zl){o=0;break a}break;default:l=Q,Q=0,Ll=null,Mu(e,s,c,l)}}Du(),o=Hl;break}catch(t){xu(e,t)}while(1);return t&&e.shellSuspendCounter++,Hi=Vi=null,Y=r,N.H=i,N.A=a,X===null&&(Il=null,Z=0,Qr()),o}function Du(){for(;X!==null;)Au(X)}function Ou(e,t){var n=Y;Y|=2;var r=Cu(),a=wu();Il!==e||Z!==t?(eu=null,$l=ke()+500,bu(e,t)):zl=Xe(e,t);a:do try{if(Q!==0&&X!==null){t=X;var o=Ll;b:switch(Q){case 1:Q=0,Ll=null,Mu(e,t,o,1);break;case 2:case 9:if(xa(o)){Q=0,Ll=null,ju(t);break}t=function(){Q!==2&&Q!==9||Il!==e||(Q=7),nd(e)},o.then(t,t);break a;case 3:Q=7;break a;case 4:Q=5;break a;case 7:xa(o)?(Q=0,Ll=null,ju(t)):(Q=0,Ll=null,Mu(e,t,o,7));break;case 5:var s=null;switch(X.tag){case 26:s=X.memoizedState;case 5:case 27:var c=X;if(s?Wf(s):c.stateNode.complete){Q=0,Ll=null;var l=c.sibling;if(l!==null)X=l;else{var u=c.return;u===null?X=null:(X=u,Nu(u))}break b}}Q=0,Ll=null,Mu(e,t,o,5);break;case 6:Q=0,Ll=null,Mu(e,t,o,6);break;case 8:yu(),Hl=6;break a;default:throw Error(i(462))}}ku();break}catch(t){xu(e,t)}while(1);return Hi=Vi=null,N.H=r,N.A=a,Y=n,X===null?(Il=null,Z=0,Qr(),Hl):0}function ku(){for(;X!==null&&!De();)Au(X)}function Au(e){var t=Oc(e.alternate,e,Vl);e.memoizedProps=e.pendingProps,t===null?Nu(e):X=t}function ju(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=pc(n,t,t.pendingProps,t.type,void 0,Z);break;case 11:t=pc(n,t,t.pendingProps,t.type.render,t.ref,Z);break;case 5:To(t);default:Lc(n,t),t=X=si(t,Vl),t=Oc(n,t,Vl)}e.memoizedProps=e.pendingProps,t===null?Nu(e):X=t}function Mu(e,t,n,r){Hi=Vi=null,To(t),Da=null,Oa=0;var i=t.return;try{if(Qs(e,i,t,n,Z)){Hl=1,qs(e,mi(n,e.current)),X=null;return}}catch(t){if(i!==null)throw X=i,t;Hl=1,qs(e,mi(n,e.current)),X=null;return}t.flags&32768?(W||r===1?e=!0:zl||Z&536870912?e=!1:(Rl=e=!0,(r===2||r===9||r===3||r===6)&&(r=Qa.current,r!==null&&r.tag===13&&(r.flags|=16384))),Pu(t,e)):Nu(t)}function Nu(e){var t=e;do{if(t.flags&32768){Pu(t,Rl);return}e=t.return;var n=Fc(t.alternate,t,Vl);if(n!==null){X=n;return}if(t=t.sibling,t!==null){X=t;return}X=t=e}while(t!==null);Hl===0&&(Hl=5)}function Pu(e,t){do{var n=Ic(e.alternate,e);if(n!==null){n.flags&=32767,X=n;return}if(n=e.return,n!==null&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&(e=e.sibling,e!==null)){X=e;return}X=e=n}while(e!==null);Hl=6,X=null}function Fu(e,t,n,r,a,o,s,c,l){e.cancelPendingCommit=null;do Bu();while(nu!==0);if(Y&6)throw Error(i(327));if(t!==null){if(t===e.current)throw Error(i(177));if(o=t.lanes|t.childLanes,o|=Zr,tt(e,n,o,s,c,l),e===Il&&(X=Il=null,Z=0),iu=t,ru=e,au=n,ou=o,su=a,cu=r,t.subtreeFlags&10256||t.flags&10256?(e.callbackNode=null,e.callbackPriority=0,Yu(Ne,function(){return Vu(),null})):(e.callbackNode=null,e.callbackPriority=0),r=(t.flags&13878)!=0,t.subtreeFlags&13878||r){r=N.T,N.T=null,a=P.p,P.p=2,s=Y,Y|=4;try{tl(e,t,n)}finally{Y=s,P.p=a,N.T=r}}nu=1,Iu(),Lu(),Ru()}}function Iu(){if(nu===1){nu=0;var e=ru,t=iu,n=(t.flags&13878)!=0;if(t.subtreeFlags&13878||n){n=N.T,N.T=null;var r=P.p;P.p=2;var i=Y;Y|=4;try{ml(t,e);var a=zd,o=I(e.containerInfo),s=a.focusedElem,c=a.selectionRange;if(o!==s&&s&&s.ownerDocument&&kr(s.ownerDocument.documentElement,s)){if(c!==null&&L(s)){var l=c.start,u=c.end;if(u===void 0&&(u=l),`selectionStart`in s)s.selectionStart=l,s.selectionEnd=Math.min(u,s.value.length);else{var d=s.ownerDocument||document,f=d&&d.defaultView||window;if(f.getSelection){var p=f.getSelection(),m=s.textContent.length,h=Math.min(c.start,m),g=c.end===void 0?h:Math.min(c.end,m);!p.extend&&h>g&&(o=g,g=h,h=o);var _=Or(s,h),v=Or(s,g);if(_&&v&&(p.rangeCount!==1||p.anchorNode!==_.node||p.anchorOffset!==_.offset||p.focusNode!==v.node||p.focusOffset!==v.offset)){var y=d.createRange();y.setStart(_.node,_.offset),p.removeAllRanges(),h>g?(p.addRange(y),p.extend(v.node,v.offset)):(y.setEnd(v.node,v.offset),p.addRange(y))}}}}for(d=[],p=s;p=p.parentNode;)p.nodeType===1&&d.push({element:p,left:p.scrollLeft,top:p.scrollTop});for(typeof s.focus==`function`&&s.focus(),s=0;s<d.length;s++){var b=d[s];b.element.scrollLeft=b.left,b.element.scrollTop=b.top}}sp=!!Rd,zd=Rd=null}finally{Y=i,P.p=r,N.T=n}}e.current=t,nu=2}}function Lu(){if(nu===2){nu=0;var e=ru,t=iu,n=(t.flags&8772)!=0;if(t.subtreeFlags&8772||n){n=N.T,N.T=null;var r=P.p;P.p=2;var i=Y;Y|=4;try{nl(e,t.alternate,t)}finally{Y=i,P.p=r,N.T=n}}nu=3}}function Ru(){if(nu===4||nu===3){nu=0,Oe();var e=ru,t=iu,n=au,r=cu;t.subtreeFlags&10256||t.flags&10256?nu=5:(nu=0,iu=ru=null,zu(e,e.pendingLanes));var i=e.pendingLanes;if(i===0&&(tu=null),ot(n),t=t.stateNode,ze&&typeof ze.onCommitFiberRoot==`function`)try{ze.onCommitFiberRoot(Re,t,void 0,(t.current.flags&128)==128)}catch{}if(r!==null){t=N.T,i=P.p,P.p=2,N.T=null;try{for(var a=e.onRecoverableError,o=0;o<r.length;o++){var s=r[o];a(s.value,{componentStack:s.stack})}}finally{N.T=t,P.p=i}}au&3&&Bu(),nd(e),i=e.pendingLanes,n&261930&&i&42?e===uu?lu++:(lu=0,uu=e):lu=0,rd(0,!1)}}function zu(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,ia(t)))}function Bu(){return Iu(),Lu(),Ru(),Vu()}function Vu(){if(nu!==5)return!1;var e=ru,t=ou;ou=0;var n=ot(au),r=N.T,a=P.p;try{P.p=32>n?32:n,N.T=null,n=su,su=null;var o=ru,s=au;if(nu=0,iu=ru=null,au=0,Y&6)throw Error(i(331));var c=Y;if(Y|=4,jl(o.current),Cl(o,o.current,s,n),Y=c,rd(0,!1),ze&&typeof ze.onPostCommitFiberRoot==`function`)try{ze.onPostCommitFiberRoot(Re,o)}catch{}return!0}finally{P.p=a,N.T=r,zu(e,t)}}function Hu(e,t,n){t=mi(n,t),t=Ys(e.stateNode,t,2),e=za(e,t,2),e!==null&&(et(e,2),nd(e))}function Uu(e,t,n){if(e.tag===3)Hu(e,e,n);else for(;t!==null;){if(t.tag===3){Hu(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError==`function`||typeof r.componentDidCatch==`function`&&(tu===null||!tu.has(r))){e=mi(n,e),n=Xs(2),r=za(t,n,2),r!==null&&(Zs(n,r,t,e),et(r,2),nd(r));break}}t=t.return}}function Wu(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new Fl;var i=new Set;r.set(t,i)}else i=r.get(t),i===void 0&&(i=new Set,r.set(t,i));i.has(n)||(Bl=!0,i.add(n),e=Gu.bind(null,e,t,n),t.then(e,e))}function Gu(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,Il===e&&(Z&n)===n&&(Hl===4||Hl===3&&(Z&62914560)===Z&&300>ke()-Zl?!(Y&2)&&bu(e,0):Gl|=n,ql===Z&&(ql=0)),nd(e)}function Ku(e,t){t===0&&(t=Qe()),e=ti(e,t),e!==null&&(et(e,t),nd(e))}function qu(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),Ku(e,n)}function Ju(e,t){var n=0;switch(e.tag){case 31:case 13:var r=e.stateNode,a=e.memoizedState;a!==null&&(n=a.retryLane);break;case 19:r=e.stateNode;break;case 22:r=e.stateNode._retryCache;break;default:throw Error(i(314))}r!==null&&r.delete(t),Ku(e,n)}function Yu(e,t){return Te(e,t)}var Xu=null,Zu=null,Qu=!1,$u=!1,ed=!1,td=0;function nd(e){e!==Zu&&e.next===null&&(Zu===null?Xu=Zu=e:Zu=Zu.next=e),$u=!0,Qu||(Qu=!0,ld())}function rd(e,t){if(!ed&&$u){ed=!0;do for(var n=!1,r=Xu;r!==null;){if(!t)if(e!==0){var i=r.pendingLanes;if(i===0)var a=0;else{var o=r.suspendedLanes,s=r.pingedLanes;a=(1<<31-Ve(42|e)+1)-1,a&=i&~(o&~s),a=a&201326741?a&201326741|1:a?a|2:0}a!==0&&(n=!0,cd(r,a))}else a=Z,a=Ye(r,r===Il?a:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),!(a&3)||Xe(r,a)||(n=!0,cd(r,a));r=r.next}while(n);ed=!1}}function id(){ad()}function ad(){$u=Qu=!1;var e=0;td!==0&&Gd()&&(e=td);for(var t=ke(),n=null,r=Xu;r!==null;){var i=r.next,a=od(r,t);a===0?(r.next=null,n===null?Xu=i:n.next=i,i===null&&(Zu=n)):(n=r,(e!==0||a&3)&&($u=!0)),r=i}nu!==0&&nu!==5||rd(e,!1),td!==0&&(td=0)}function od(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,a=e.pendingLanes&-62914561;0<a;){var o=31-Ve(a),s=1<<o,c=i[o];c===-1?((s&n)===0||(s&r)!==0)&&(i[o]=Ze(s,t)):c<=t&&(e.expiredLanes|=s),a&=~s}if(t=Il,n=Z,n=Ye(e,e===t?n:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),r=e.callbackNode,n===0||e===t&&(Q===2||Q===9)||e.cancelPendingCommit!==null)return r!==null&&r!==null&&Ee(r),e.callbackNode=null,e.callbackPriority=0;if(!(n&3)||Xe(e,n)){if(t=n&-n,t===e.callbackPriority)return t;switch(r!==null&&Ee(r),ot(n)){case 2:case 8:n=Me;break;case 32:n=Ne;break;case 268435456:n=Fe;break;default:n=Ne}return r=sd.bind(null,e),n=Te(n,r),e.callbackPriority=t,e.callbackNode=n,t}return r!==null&&r!==null&&Ee(r),e.callbackPriority=2,e.callbackNode=null,2}function sd(e,t){if(nu!==0&&nu!==5)return e.callbackNode=null,e.callbackPriority=0,null;var n=e.callbackNode;if(Bu()&&e.callbackNode!==n)return null;var r=Z;return r=Ye(e,e===Il?r:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),r===0?null:(mu(e,r,t),od(e,ke()),e.callbackNode!=null&&e.callbackNode===n?sd.bind(null,e):null)}function cd(e,t){if(Bu())return null;mu(e,t,!0)}function ld(){Yd(function(){Y&6?Te(je,id):ad()})}function ud(){if(td===0){var e=sa;e===0&&(e=Ge,Ge<<=1,!(Ge&261888)&&(Ge=256)),td=e}return td}function dd(e){return e==null||typeof e==`symbol`||typeof e==`boolean`?null:typeof e==`function`?e:nn(``+e)}function fd(e,t){var n=t.ownerDocument.createElement(`input`);return n.name=t.name,n.value=t.value,e.id&&n.setAttribute(`form`,e.id),t.parentNode.insertBefore(n,t),e=new FormData(e),n.parentNode.removeChild(n),e}function pd(e,t,n,r,i){if(t===`submit`&&n&&n.stateNode===i){var a=dd((i[dt]||null).action),o=r.submitter;o&&(t=(t=o[dt]||null)?dd(t.formAction):o.getAttribute(`formAction`),t!==null&&(a=t,o=null));var s=new F(`action`,`action`,null,r,i);e.push({event:s,listeners:[{instance:null,listener:function(){if(r.defaultPrevented){if(td!==0){var e=o?fd(i,o):new FormData(i);xs(n,{pending:!0,data:e,method:i.method,action:a},null,e)}}else typeof a==`function`&&(s.preventDefault(),e=o?fd(i,o):new FormData(i),xs(n,{pending:!0,data:e,method:i.method,action:a},a,e))},currentTarget:i}]})}}for(var md=0;md<qr.length;md++){var hd=qr[md];B(hd.toLowerCase(),`on`+(hd[0].toUpperCase()+hd.slice(1)))}B(Vr,`onAnimationEnd`),B(Hr,`onAnimationIteration`),B(Ur,`onAnimationStart`),B(`dblclick`,`onDoubleClick`),B(`focusin`,`onFocus`),B(`focusout`,`onBlur`),B(R,`onTransitionRun`),B(Wr,`onTransitionStart`),B(z,`onTransitionCancel`),B(Gr,`onTransitionEnd`),Dt(`onMouseEnter`,[`mouseout`,`mouseover`]),Dt(`onMouseLeave`,[`mouseout`,`mouseover`]),Dt(`onPointerEnter`,[`pointerout`,`pointerover`]),Dt(`onPointerLeave`,[`pointerout`,`pointerover`]),Et(`onChange`,`change click focusin focusout input keydown keyup selectionchange`.split(` `)),Et(`onSelect`,`focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange`.split(` `)),Et(`onBeforeInput`,[`compositionend`,`keypress`,`textInput`,`paste`]),Et(`onCompositionEnd`,`compositionend focusout keydown keypress keyup mousedown`.split(` `)),Et(`onCompositionStart`,`compositionstart focusout keydown keypress keyup mousedown`.split(` `)),Et(`onCompositionUpdate`,`compositionupdate focusout keydown keypress keyup mousedown`.split(` `));var gd=`abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting`.split(` `),_d=new Set(`beforetoggle cancel close invalid load scroll scrollend toggle`.split(` `).concat(gd));function vd(e,t){t=(t&4)!=0;for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;a:{var a=void 0;if(t)for(var o=r.length-1;0<=o;o--){var s=r[o],c=s.instance,l=s.currentTarget;if(s=s.listener,c!==a&&i.isPropagationStopped())break a;a=s,i.currentTarget=l;try{a(i)}catch(e){Jr(e)}i.currentTarget=null,a=c}else for(o=0;o<r.length;o++){if(s=r[o],c=s.instance,l=s.currentTarget,s=s.listener,c!==a&&i.isPropagationStopped())break a;a=s,i.currentTarget=l;try{a(i)}catch(e){Jr(e)}i.currentTarget=null,a=c}}}}function $(e,t){var n=t[pt];n===void 0&&(n=t[pt]=new Set);var r=e+`__bubble`;n.has(r)||(Sd(t,e,2,!1),n.add(r))}function yd(e,t,n){var r=0;t&&(r|=4),Sd(n,e,r,t)}var bd=`_reactListening`+Math.random().toString(36).slice(2);function xd(e){if(!e[bd]){e[bd]=!0,wt.forEach(function(t){t!==`selectionchange`&&(_d.has(t)||yd(t,!1,e),yd(t,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[bd]||(t[bd]=!0,yd(`selectionchange`,!1,t))}}function Sd(e,t,n,r){switch(mp(t)){case 2:var i=cp;break;case 8:i=lp;break;default:i=up}n=i.bind(null,t,n,e),i=void 0,!mn||t!==`touchstart`&&t!==`touchmove`&&t!==`wheel`||(i=!0),r?i===void 0?e.addEventListener(t,n,!0):e.addEventListener(t,n,{capture:!0,passive:i}):i===void 0?e.addEventListener(t,n,!1):e.addEventListener(t,n,{passive:i})}function Cd(e,t,n,r,i){var a=r;if(!(t&1)&&!(t&2)&&r!==null)a:for(;;){if(r===null)return;var s=r.tag;if(s===3||s===4){var c=r.stateNode.containerInfo;if(c===i)break;if(s===4)for(s=r.return;s!==null;){var l=s.tag;if((l===3||l===4)&&s.stateNode.containerInfo===i)return;s=s.return}for(;c!==null;){if(s=yt(c),s===null)return;if(l=s.tag,l===5||l===6||l===26||l===27){r=a=s;continue a}c=c.parentNode}}r=r.return}dn(function(){var r=a,i=on(n),s=[];a:{var c=Kr.get(e);if(c!==void 0){var l=F,u=e;switch(e){case`keypress`:if(bn(n)===0)break a;case`keydown`:case`keyup`:l=Hn;break;case`focusin`:u=`focus`,l=Nn;break;case`focusout`:u=`blur`,l=Nn;break;case`beforeblur`:case`afterblur`:l=Nn;break;case`click`:if(n.button===2)break a;case`auxclick`:case`dblclick`:case`mousedown`:case`mousemove`:case`mouseup`:case`mouseout`:case`mouseover`:case`contextmenu`:l=jn;break;case`drag`:case`dragend`:case`dragenter`:case`dragexit`:case`dragleave`:case`dragover`:case`dragstart`:case`drop`:l=Mn;break;case`touchcancel`:case`touchend`:case`touchmove`:case`touchstart`:l=Wn;break;case Vr:case Hr:case Ur:l=Pn;break;case Gr:l=Gn;break;case`scroll`:case`scrollend`:l=En;break;case`wheel`:l=Kn;break;case`copy`:case`cut`:case`paste`:l=Fn;break;case`gotpointercapture`:case`lostpointercapture`:case`pointercancel`:case`pointerdown`:case`pointermove`:case`pointerout`:case`pointerover`:case`pointerup`:l=Un;break;case`toggle`:case`beforetoggle`:l=qn}var d=(t&4)!=0,f=!d&&(e===`scroll`||e===`scrollend`),p=d?c===null?null:c+`Capture`:c;d=[];for(var m=r,h;m!==null;){var g=m;if(h=g.stateNode,g=g.tag,g!==5&&g!==26&&g!==27||h===null||p===null||(g=fn(m,p),g!=null&&d.push(wd(m,g,h))),f)break;m=m.return}0<d.length&&(c=new l(c,u,null,n,i),s.push({event:c,listeners:d}))}}if(!(t&7)){a:{if(c=e===`mouseover`||e===`pointerover`,l=e===`mouseout`||e===`pointerout`,c&&n!==an&&(u=n.relatedTarget||n.fromElement)&&(yt(u)||u[ft]))break a;if((l||c)&&(c=i.window===i?i:(c=i.ownerDocument)?c.defaultView||c.parentWindow:window,l?(u=n.relatedTarget||n.toElement,l=r,u=u?yt(u):null,u!==null&&(f=o(u),d=u.tag,u!==f||d!==5&&d!==27&&d!==6)&&(u=null)):(l=null,u=r),l!==u)){if(d=jn,g=`onMouseLeave`,p=`onMouseEnter`,m=`mouse`,(e===`pointerout`||e===`pointerover`)&&(d=Un,g=`onPointerLeave`,p=`onPointerEnter`,m=`pointer`),f=l==null?c:xt(l),h=u==null?c:xt(u),c=new d(g,m+`leave`,l,n,i),c.target=f,c.relatedTarget=h,g=null,yt(i)===r&&(d=new d(p,m+`enter`,u,n,i),d.target=h,d.relatedTarget=f,g=d),f=g,l&&u)b:{for(d=Ed,p=l,m=u,h=0,g=p;g;g=d(g))h++;g=0;for(var _=m;_;_=d(_))g++;for(;0<h-g;)p=d(p),h--;for(;0<g-h;)m=d(m),g--;for(;h--;){if(p===m||m!==null&&p===m.alternate){d=p;break b}p=d(p),m=d(m)}d=null}else d=null;l!==null&&Dd(s,c,l,d,!1),u!==null&&f!==null&&Dd(s,f,u,d,!0)}}a:{if(c=r?xt(r):window,l=c.nodeName&&c.nodeName.toLowerCase(),l===`select`||l===`input`&&c.type===`file`)var v=pr;else if(sr(c))if(mr)v=Cr;else{v=xr;var y=br}else l=c.nodeName,!l||l.toLowerCase()!==`input`||c.type!==`checkbox`&&c.type!==`radio`?r&&$t(r.elementType)&&(v=pr):v=Sr;if(v&&=v(e,r)){cr(s,v,n,i);break a}y&&y(e,c,r),e===`focusout`&&r&&c.type===`number`&&r.memoizedProps.value!=null&&Gt(c,`number`,c.value)}switch(y=r?xt(r):window,e){case`focusin`:(sr(y)||y.contentEditable===`true`)&&(jr=y,Mr=r,Nr=null);break;case`focusout`:Nr=Mr=jr=null;break;case`mousedown`:Pr=!0;break;case`contextmenu`:case`mouseup`:case`dragend`:Pr=!1,Fr(s,n,i);break;case`selectionchange`:if(Ar)break;case`keydown`:case`keyup`:Fr(s,n,i)}var b;if(Yn)b:{switch(e){case`compositionstart`:var x=`onCompositionStart`;break b;case`compositionend`:x=`onCompositionEnd`;break b;case`compositionupdate`:x=`onCompositionUpdate`;break b}x=void 0}else rr?tr(e,n)&&(x=`onCompositionEnd`):e===`keydown`&&n.keyCode===229&&(x=`onCompositionStart`);x&&(Qn&&n.locale!==`ko`&&(rr||x!==`onCompositionStart`?x===`onCompositionEnd`&&rr&&(b=yn()):(gn=i,_n=`value`in gn?gn.value:gn.textContent,rr=!0)),y=Td(r,x),0<y.length&&(x=new In(x,e,null,n,i),s.push({event:x,listeners:y}),b?x.data=b:(b=nr(n),b!==null&&(x.data=b)))),(b=Zn?ir(e,n):ar(e,n))&&(x=Td(r,`onBeforeInput`),0<x.length&&(y=new In(`onBeforeInput`,`beforeinput`,null,n,i),s.push({event:y,listeners:x}),y.data=b)),pd(s,e,r,n,i)}vd(s,t)})}function wd(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Td(e,t){for(var n=t+`Capture`,r=[];e!==null;){var i=e,a=i.stateNode;if(i=i.tag,i!==5&&i!==26&&i!==27||a===null||(i=fn(e,n),i!=null&&r.unshift(wd(e,i,a)),i=fn(e,t),i!=null&&r.push(wd(e,i,a))),e.tag===3)return r;e=e.return}return[]}function Ed(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function Dd(e,t,n,r,i){for(var a=t._reactName,o=[];n!==null&&n!==r;){var s=n,c=s.alternate,l=s.stateNode;if(s=s.tag,c!==null&&c===r)break;s!==5&&s!==26&&s!==27||l===null||(c=l,i?(l=fn(n,a),l!=null&&o.unshift(wd(n,l,c))):i||(l=fn(n,a),l!=null&&o.push(wd(n,l,c)))),n=n.return}o.length!==0&&e.push({event:t,listeners:o})}var Od=/\r\n?/g,kd=/\u0000|\uFFFD/g;function Ad(e){return(typeof e==`string`?e:``+e).replace(Od,`
`).replace(kd,``)}function jd(e,t){return t=Ad(t),Ad(e)===t}function Md(e,t,n,r,a,o){switch(n){case`children`:typeof r==`string`?t===`body`||t===`textarea`&&r===``||Yt(e,r):(typeof r==`number`||typeof r==`bigint`)&&t!==`body`&&Yt(e,``+r);break;case`className`:Nt(e,`class`,r);break;case`tabIndex`:Nt(e,`tabindex`,r);break;case`dir`:case`role`:case`viewBox`:case`width`:case`height`:Nt(e,n,r);break;case`style`:Qt(e,r,o);break;case`data`:if(t!==`object`){Nt(e,`data`,r);break}case`src`:case`href`:if(r===``&&(t!==`a`||n!==`href`)){e.removeAttribute(n);break}if(r==null||typeof r==`function`||typeof r==`symbol`||typeof r==`boolean`){e.removeAttribute(n);break}r=nn(``+r),e.setAttribute(n,r);break;case`action`:case`formAction`:if(typeof r==`function`){e.setAttribute(n,`javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')`);break}else typeof o==`function`&&(n===`formAction`?(t!==`input`&&Md(e,t,`name`,a.name,a,null),Md(e,t,`formEncType`,a.formEncType,a,null),Md(e,t,`formMethod`,a.formMethod,a,null),Md(e,t,`formTarget`,a.formTarget,a,null)):(Md(e,t,`encType`,a.encType,a,null),Md(e,t,`method`,a.method,a,null),Md(e,t,`target`,a.target,a,null)));if(r==null||typeof r==`symbol`||typeof r==`boolean`){e.removeAttribute(n);break}r=nn(``+r),e.setAttribute(n,r);break;case`onClick`:r!=null&&(e.onclick=rn);break;case`onScroll`:r!=null&&$(`scroll`,e);break;case`onScrollEnd`:r!=null&&$(`scrollend`,e);break;case`dangerouslySetInnerHTML`:if(r!=null){if(typeof r!=`object`||!(`__html`in r))throw Error(i(61));if(n=r.__html,n!=null){if(a.children!=null)throw Error(i(60));e.innerHTML=n}}break;case`multiple`:e.multiple=r&&typeof r!=`function`&&typeof r!=`symbol`;break;case`muted`:e.muted=r&&typeof r!=`function`&&typeof r!=`symbol`;break;case`suppressContentEditableWarning`:case`suppressHydrationWarning`:case`defaultValue`:case`defaultChecked`:case`innerHTML`:case`ref`:break;case`autoFocus`:break;case`xlinkHref`:if(r==null||typeof r==`function`||typeof r==`boolean`||typeof r==`symbol`){e.removeAttribute(`xlink:href`);break}n=nn(``+r),e.setAttributeNS(`http://www.w3.org/1999/xlink`,`xlink:href`,n);break;case`contentEditable`:case`spellCheck`:case`draggable`:case`value`:case`autoReverse`:case`externalResourcesRequired`:case`focusable`:case`preserveAlpha`:r!=null&&typeof r!=`function`&&typeof r!=`symbol`?e.setAttribute(n,``+r):e.removeAttribute(n);break;case`inert`:case`allowFullScreen`:case`async`:case`autoPlay`:case`controls`:case`default`:case`defer`:case`disabled`:case`disablePictureInPicture`:case`disableRemotePlayback`:case`formNoValidate`:case`hidden`:case`loop`:case`noModule`:case`noValidate`:case`open`:case`playsInline`:case`readOnly`:case`required`:case`reversed`:case`scoped`:case`seamless`:case`itemScope`:r&&typeof r!=`function`&&typeof r!=`symbol`?e.setAttribute(n,``):e.removeAttribute(n);break;case`capture`:case`download`:!0===r?e.setAttribute(n,``):!1!==r&&r!=null&&typeof r!=`function`&&typeof r!=`symbol`?e.setAttribute(n,r):e.removeAttribute(n);break;case`cols`:case`rows`:case`size`:case`span`:r!=null&&typeof r!=`function`&&typeof r!=`symbol`&&!isNaN(r)&&1<=r?e.setAttribute(n,r):e.removeAttribute(n);break;case`rowSpan`:case`start`:r==null||typeof r==`function`||typeof r==`symbol`||isNaN(r)?e.removeAttribute(n):e.setAttribute(n,r);break;case`popover`:$(`beforetoggle`,e),$(`toggle`,e),Mt(e,`popover`,r);break;case`xlinkActuate`:Pt(e,`http://www.w3.org/1999/xlink`,`xlink:actuate`,r);break;case`xlinkArcrole`:Pt(e,`http://www.w3.org/1999/xlink`,`xlink:arcrole`,r);break;case`xlinkRole`:Pt(e,`http://www.w3.org/1999/xlink`,`xlink:role`,r);break;case`xlinkShow`:Pt(e,`http://www.w3.org/1999/xlink`,`xlink:show`,r);break;case`xlinkTitle`:Pt(e,`http://www.w3.org/1999/xlink`,`xlink:title`,r);break;case`xlinkType`:Pt(e,`http://www.w3.org/1999/xlink`,`xlink:type`,r);break;case`xmlBase`:Pt(e,`http://www.w3.org/XML/1998/namespace`,`xml:base`,r);break;case`xmlLang`:Pt(e,`http://www.w3.org/XML/1998/namespace`,`xml:lang`,r);break;case`xmlSpace`:Pt(e,`http://www.w3.org/XML/1998/namespace`,`xml:space`,r);break;case`is`:Mt(e,`is`,r);break;case`innerText`:case`textContent`:break;default:(!(2<n.length)||n[0]!==`o`&&n[0]!==`O`||n[1]!==`n`&&n[1]!==`N`)&&(n=en.get(n)||n,Mt(e,n,r))}}function Nd(e,t,n,r,a,o){switch(n){case`style`:Qt(e,r,o);break;case`dangerouslySetInnerHTML`:if(r!=null){if(typeof r!=`object`||!(`__html`in r))throw Error(i(61));if(n=r.__html,n!=null){if(a.children!=null)throw Error(i(60));e.innerHTML=n}}break;case`children`:typeof r==`string`?Yt(e,r):(typeof r==`number`||typeof r==`bigint`)&&Yt(e,``+r);break;case`onScroll`:r!=null&&$(`scroll`,e);break;case`onScrollEnd`:r!=null&&$(`scrollend`,e);break;case`onClick`:r!=null&&(e.onclick=rn);break;case`suppressContentEditableWarning`:case`suppressHydrationWarning`:case`innerHTML`:case`ref`:break;case`innerText`:case`textContent`:break;default:if(!Tt.hasOwnProperty(n))a:{if(n[0]===`o`&&n[1]===`n`&&(a=n.endsWith(`Capture`),t=n.slice(2,a?n.length-7:void 0),o=e[dt]||null,o=o==null?null:o[n],typeof o==`function`&&e.removeEventListener(t,o,a),typeof r==`function`)){typeof o!=`function`&&o!==null&&(n in e?e[n]=null:e.hasAttribute(n)&&e.removeAttribute(n)),e.addEventListener(t,r,a);break a}n in e?e[n]=r:!0===r?e.setAttribute(n,``):Mt(e,n,r)}}}function Pd(e,t,n){switch(t){case`div`:case`span`:case`svg`:case`path`:case`a`:case`g`:case`p`:case`li`:break;case`img`:$(`error`,e),$(`load`,e);var r=!1,a=!1,o;for(o in n)if(n.hasOwnProperty(o)){var s=n[o];if(s!=null)switch(o){case`src`:r=!0;break;case`srcSet`:a=!0;break;case`children`:case`dangerouslySetInnerHTML`:throw Error(i(137,t));default:Md(e,t,o,s,n,null)}}a&&Md(e,t,`srcSet`,n.srcSet,n,null),r&&Md(e,t,`src`,n.src,n,null);return;case`input`:$(`invalid`,e);var c=o=s=a=null,l=null,u=null;for(r in n)if(n.hasOwnProperty(r)){var d=n[r];if(d!=null)switch(r){case`name`:a=d;break;case`type`:s=d;break;case`checked`:l=d;break;case`defaultChecked`:u=d;break;case`value`:o=d;break;case`defaultValue`:c=d;break;case`children`:case`dangerouslySetInnerHTML`:if(d!=null)throw Error(i(137,t));break;default:Md(e,t,r,d,n,null)}}Wt(e,o,c,l,u,s,a,!1);return;case`select`:for(a in $(`invalid`,e),r=s=o=null,n)if(n.hasOwnProperty(a)&&(c=n[a],c!=null))switch(a){case`value`:o=c;break;case`defaultValue`:s=c;break;case`multiple`:r=c;default:Md(e,t,a,c,n,null)}t=o,n=s,e.multiple=!!r,t==null?n!=null&&Kt(e,!!r,n,!0):Kt(e,!!r,t,!1);return;case`textarea`:for(s in $(`invalid`,e),o=a=r=null,n)if(n.hasOwnProperty(s)&&(c=n[s],c!=null))switch(s){case`value`:r=c;break;case`defaultValue`:a=c;break;case`children`:o=c;break;case`dangerouslySetInnerHTML`:if(c!=null)throw Error(i(91));break;default:Md(e,t,s,c,n,null)}Jt(e,r,a,o);return;case`option`:for(l in n)if(n.hasOwnProperty(l)&&(r=n[l],r!=null))switch(l){case`selected`:e.selected=r&&typeof r!=`function`&&typeof r!=`symbol`;break;default:Md(e,t,l,r,n,null)}return;case`dialog`:$(`beforetoggle`,e),$(`toggle`,e),$(`cancel`,e),$(`close`,e);break;case`iframe`:case`object`:$(`load`,e);break;case`video`:case`audio`:for(r=0;r<gd.length;r++)$(gd[r],e);break;case`image`:$(`error`,e),$(`load`,e);break;case`details`:$(`toggle`,e);break;case`embed`:case`source`:case`link`:$(`error`,e),$(`load`,e);case`area`:case`base`:case`br`:case`col`:case`hr`:case`keygen`:case`meta`:case`param`:case`track`:case`wbr`:case`menuitem`:for(u in n)if(n.hasOwnProperty(u)&&(r=n[u],r!=null))switch(u){case`children`:case`dangerouslySetInnerHTML`:throw Error(i(137,t));default:Md(e,t,u,r,n,null)}return;default:if($t(t)){for(d in n)n.hasOwnProperty(d)&&(r=n[d],r!==void 0&&Nd(e,t,d,r,n,void 0));return}}for(c in n)n.hasOwnProperty(c)&&(r=n[c],r!=null&&Md(e,t,c,r,n,null))}function Fd(e,t,n,r){switch(t){case`div`:case`span`:case`svg`:case`path`:case`a`:case`g`:case`p`:case`li`:break;case`input`:var a=null,o=null,s=null,c=null,l=null,u=null,d=null;for(m in n){var f=n[m];if(n.hasOwnProperty(m)&&f!=null)switch(m){case`checked`:break;case`value`:break;case`defaultValue`:l=f;default:r.hasOwnProperty(m)||Md(e,t,m,null,r,f)}}for(var p in r){var m=r[p];if(f=n[p],r.hasOwnProperty(p)&&(m!=null||f!=null))switch(p){case`type`:o=m;break;case`name`:a=m;break;case`checked`:u=m;break;case`defaultChecked`:d=m;break;case`value`:s=m;break;case`defaultValue`:c=m;break;case`children`:case`dangerouslySetInnerHTML`:if(m!=null)throw Error(i(137,t));break;default:m!==f&&Md(e,t,p,m,r,f)}}Ut(e,s,c,l,u,d,o,a);return;case`select`:for(o in m=s=c=p=null,n)if(l=n[o],n.hasOwnProperty(o)&&l!=null)switch(o){case`value`:break;case`multiple`:m=l;default:r.hasOwnProperty(o)||Md(e,t,o,null,r,l)}for(a in r)if(o=r[a],l=n[a],r.hasOwnProperty(a)&&(o!=null||l!=null))switch(a){case`value`:p=o;break;case`defaultValue`:c=o;break;case`multiple`:s=o;default:o!==l&&Md(e,t,a,o,r,l)}t=c,n=s,r=m,p==null?!!r!=!!n&&(t==null?Kt(e,!!n,n?[]:``,!1):Kt(e,!!n,t,!0)):Kt(e,!!n,p,!1);return;case`textarea`:for(c in m=p=null,n)if(a=n[c],n.hasOwnProperty(c)&&a!=null&&!r.hasOwnProperty(c))switch(c){case`value`:break;case`children`:break;default:Md(e,t,c,null,r,a)}for(s in r)if(a=r[s],o=n[s],r.hasOwnProperty(s)&&(a!=null||o!=null))switch(s){case`value`:p=a;break;case`defaultValue`:m=a;break;case`children`:break;case`dangerouslySetInnerHTML`:if(a!=null)throw Error(i(91));break;default:a!==o&&Md(e,t,s,a,r,o)}qt(e,p,m);return;case`option`:for(var h in n)if(p=n[h],n.hasOwnProperty(h)&&p!=null&&!r.hasOwnProperty(h))switch(h){case`selected`:e.selected=!1;break;default:Md(e,t,h,null,r,p)}for(l in r)if(p=r[l],m=n[l],r.hasOwnProperty(l)&&p!==m&&(p!=null||m!=null))switch(l){case`selected`:e.selected=p&&typeof p!=`function`&&typeof p!=`symbol`;break;default:Md(e,t,l,p,r,m)}return;case`img`:case`link`:case`area`:case`base`:case`br`:case`col`:case`embed`:case`hr`:case`keygen`:case`meta`:case`param`:case`source`:case`track`:case`wbr`:case`menuitem`:for(var g in n)p=n[g],n.hasOwnProperty(g)&&p!=null&&!r.hasOwnProperty(g)&&Md(e,t,g,null,r,p);for(u in r)if(p=r[u],m=n[u],r.hasOwnProperty(u)&&p!==m&&(p!=null||m!=null))switch(u){case`children`:case`dangerouslySetInnerHTML`:if(p!=null)throw Error(i(137,t));break;default:Md(e,t,u,p,r,m)}return;default:if($t(t)){for(var _ in n)p=n[_],n.hasOwnProperty(_)&&p!==void 0&&!r.hasOwnProperty(_)&&Nd(e,t,_,void 0,r,p);for(d in r)p=r[d],m=n[d],!r.hasOwnProperty(d)||p===m||p===void 0&&m===void 0||Nd(e,t,d,p,r,m);return}}for(var v in n)p=n[v],n.hasOwnProperty(v)&&p!=null&&!r.hasOwnProperty(v)&&Md(e,t,v,null,r,p);for(f in r)p=r[f],m=n[f],!r.hasOwnProperty(f)||p===m||p==null&&m==null||Md(e,t,f,p,r,m)}function Id(e){switch(e){case`css`:case`script`:case`font`:case`img`:case`image`:case`input`:case`link`:return!0;default:return!1}}function Ld(){if(typeof performance.getEntriesByType==`function`){for(var e=0,t=0,n=performance.getEntriesByType(`resource`),r=0;r<n.length;r++){var i=n[r],a=i.transferSize,o=i.initiatorType,s=i.duration;if(a&&s&&Id(o)){for(o=0,s=i.responseEnd,r+=1;r<n.length;r++){var c=n[r],l=c.startTime;if(l>s)break;var u=c.transferSize,d=c.initiatorType;u&&Id(d)&&(c=c.responseEnd,o+=u*(c<s?1:(s-l)/(c-l)))}if(--r,t+=8*(a+o)/(i.duration/1e3),e++,10<e)break}}if(0<e)return t/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e==`number`)?e:5}var Rd=null,zd=null;function Bd(e){return e.nodeType===9?e:e.ownerDocument}function Vd(e){switch(e){case`http://www.w3.org/2000/svg`:return 1;case`http://www.w3.org/1998/Math/MathML`:return 2;default:return 0}}function Hd(e,t){if(e===0)switch(t){case`svg`:return 1;case`math`:return 2;default:return 0}return e===1&&t===`foreignObject`?0:e}function Ud(e,t){return e===`textarea`||e===`noscript`||typeof t.children==`string`||typeof t.children==`number`||typeof t.children==`bigint`||typeof t.dangerouslySetInnerHTML==`object`&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Wd=null;function Gd(){var e=window.event;return e&&e.type===`popstate`?e===Wd?!1:(Wd=e,!0):(Wd=null,!1)}var Kd=typeof setTimeout==`function`?setTimeout:void 0,qd=typeof clearTimeout==`function`?clearTimeout:void 0,Jd=typeof Promise==`function`?Promise:void 0,Yd=typeof queueMicrotask==`function`?queueMicrotask:Jd===void 0?Kd:function(e){return Jd.resolve(null).then(e).catch(Xd)};function Xd(e){setTimeout(function(){throw e})}function Zd(e){return e===`head`}function Qd(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&i.nodeType===8)if(n=i.data,n===`/$`||n===`/&`){if(r===0){e.removeChild(i),Np(t);return}r--}else if(n===`$`||n===`$?`||n===`$~`||n===`$!`||n===`&`)r++;else if(n===`html`)pf(e.ownerDocument.documentElement);else if(n===`head`){n=e.ownerDocument.head,pf(n);for(var a=n.firstChild;a;){var o=a.nextSibling,s=a.nodeName;a[_t]||s===`SCRIPT`||s===`STYLE`||s===`LINK`&&a.rel.toLowerCase()===`stylesheet`||n.removeChild(a),a=o}}else n===`body`&&pf(e.ownerDocument.body);n=i}while(n);Np(t)}function $d(e,t){var n=e;e=0;do{var r=n.nextSibling;if(n.nodeType===1?t?(n._stashedDisplay=n.style.display,n.style.display=`none`):(n.style.display=n._stashedDisplay||``,n.getAttribute(`style`)===``&&n.removeAttribute(`style`)):n.nodeType===3&&(t?(n._stashedText=n.nodeValue,n.nodeValue=``):n.nodeValue=n._stashedText||``),r&&r.nodeType===8)if(n=r.data,n===`/$`){if(e===0)break;e--}else n!==`$`&&n!==`$?`&&n!==`$~`&&n!==`$!`||e++;n=r}while(n)}function ef(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var n=t;switch(t=t.nextSibling,n.nodeName){case`HTML`:case`HEAD`:case`BODY`:ef(n),vt(n);continue;case`SCRIPT`:case`STYLE`:continue;case`LINK`:if(n.rel.toLowerCase()===`stylesheet`)continue}e.removeChild(n)}}function tf(e,t,n,r){for(;e.nodeType===1;){var i=n;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!r&&(e.nodeName!==`INPUT`||e.type!==`hidden`))break}else if(r){if(!e[_t])switch(t){case`meta`:if(!e.hasAttribute(`itemprop`))break;return e;case`link`:if(a=e.getAttribute(`rel`),a===`stylesheet`&&e.hasAttribute(`data-precedence`)||a!==i.rel||e.getAttribute(`href`)!==(i.href==null||i.href===``?null:i.href)||e.getAttribute(`crossorigin`)!==(i.crossOrigin==null?null:i.crossOrigin)||e.getAttribute(`title`)!==(i.title==null?null:i.title))break;return e;case`style`:if(e.hasAttribute(`data-precedence`))break;return e;case`script`:if(a=e.getAttribute(`src`),(a!==(i.src==null?null:i.src)||e.getAttribute(`type`)!==(i.type==null?null:i.type)||e.getAttribute(`crossorigin`)!==(i.crossOrigin==null?null:i.crossOrigin))&&a&&e.hasAttribute(`async`)&&!e.hasAttribute(`itemprop`))break;return e;default:return e}}else if(t===`input`&&e.type===`hidden`){var a=i.name==null?null:``+i.name;if(i.type===`hidden`&&e.getAttribute(`name`)===a)return e}else return e;if(e=cf(e.nextSibling),e===null)break}return null}function nf(e,t,n){if(t===``)return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!==`INPUT`||e.type!==`hidden`)&&!n||(e=cf(e.nextSibling),e===null))return null;return e}function rf(e,t){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!==`INPUT`||e.type!==`hidden`)&&!t||(e=cf(e.nextSibling),e===null))return null;return e}function af(e){return e.data===`$?`||e.data===`$~`}function of(e){return e.data===`$!`||e.data===`$?`&&e.ownerDocument.readyState!==`loading`}function sf(e,t){var n=e.ownerDocument;if(e.data===`$~`)e._reactRetry=t;else if(e.data!==`$?`||n.readyState!==`loading`)t();else{var r=function(){t(),n.removeEventListener(`DOMContentLoaded`,r)};n.addEventListener(`DOMContentLoaded`,r),e._reactRetry=r}}function cf(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t===`$`||t===`$!`||t===`$?`||t===`$~`||t===`&`||t===`F!`||t===`F`)break;if(t===`/$`||t===`/&`)return null}}return e}var lf=null;function uf(e){e=e.nextSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n===`/$`||n===`/&`){if(t===0)return cf(e.nextSibling);t--}else n!==`$`&&n!==`$!`&&n!==`$?`&&n!==`$~`&&n!==`&`||t++}e=e.nextSibling}return null}function df(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n===`$`||n===`$!`||n===`$?`||n===`$~`||n===`&`){if(t===0)return e;t--}else n!==`/$`&&n!==`/&`||t++}e=e.previousSibling}return null}function ff(e,t,n){switch(t=Bd(n),e){case`html`:if(e=t.documentElement,!e)throw Error(i(452));return e;case`head`:if(e=t.head,!e)throw Error(i(453));return e;case`body`:if(e=t.body,!e)throw Error(i(454));return e;default:throw Error(i(451))}}function pf(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);vt(e)}var mf=new Map,hf=new Set;function gf(e){return typeof e.getRootNode==`function`?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var _f=P.d;P.d={f:vf,r:yf,D:Sf,C:Cf,L:wf,m:Tf,X:Df,S:Ef,M:Of};function vf(){var e=_f.f(),t=vu();return e||t}function yf(e){var t=bt(e);t!==null&&t.tag===5&&t.type===`form`?Cs(t):_f.r(e)}var bf=typeof document>`u`?null:document;function xf(e,t,n){var r=bf;if(r&&typeof t==`string`&&t){var i=Ht(t);i=`link[rel="`+e+`"][href="`+i+`"]`,typeof n==`string`&&(i+=`[crossorigin="`+n+`"]`),hf.has(i)||(hf.add(i),e={rel:e,crossOrigin:n,href:t},r.querySelector(i)===null&&(t=r.createElement(`link`),Pd(t,`link`,e),Ct(t),r.head.appendChild(t)))}}function Sf(e){_f.D(e),xf(`dns-prefetch`,e,null)}function Cf(e,t){_f.C(e,t),xf(`preconnect`,e,t)}function wf(e,t,n){_f.L(e,t,n);var r=bf;if(r&&e&&t){var i=`link[rel="preload"][as="`+Ht(t)+`"]`;t===`image`&&n&&n.imageSrcSet?(i+=`[imagesrcset="`+Ht(n.imageSrcSet)+`"]`,typeof n.imageSizes==`string`&&(i+=`[imagesizes="`+Ht(n.imageSizes)+`"]`)):i+=`[href="`+Ht(e)+`"]`;var a=i;switch(t){case`style`:a=Af(e);break;case`script`:a=Pf(e)}mf.has(a)||(e=h({rel:`preload`,href:t===`image`&&n&&n.imageSrcSet?void 0:e,as:t},n),mf.set(a,e),r.querySelector(i)!==null||t===`style`&&r.querySelector(jf(a))||t===`script`&&r.querySelector(Ff(a))||(t=r.createElement(`link`),Pd(t,`link`,e),Ct(t),r.head.appendChild(t)))}}function Tf(e,t){_f.m(e,t);var n=bf;if(n&&e){var r=t&&typeof t.as==`string`?t.as:`script`,i=`link[rel="modulepreload"][as="`+Ht(r)+`"][href="`+Ht(e)+`"]`,a=i;switch(r){case`audioworklet`:case`paintworklet`:case`serviceworker`:case`sharedworker`:case`worker`:case`script`:a=Pf(e)}if(!mf.has(a)&&(e=h({rel:`modulepreload`,href:e},t),mf.set(a,e),n.querySelector(i)===null)){switch(r){case`audioworklet`:case`paintworklet`:case`serviceworker`:case`sharedworker`:case`worker`:case`script`:if(n.querySelector(Ff(a)))return}r=n.createElement(`link`),Pd(r,`link`,e),Ct(r),n.head.appendChild(r)}}}function Ef(e,t,n){_f.S(e,t,n);var r=bf;if(r&&e){var i=St(r).hoistableStyles,a=Af(e);t||=`default`;var o=i.get(a);if(!o){var s={loading:0,preload:null};if(o=r.querySelector(jf(a)))s.loading=5;else{e=h({rel:`stylesheet`,href:e,"data-precedence":t},n),(n=mf.get(a))&&Rf(e,n);var c=o=r.createElement(`link`);Ct(c),Pd(c,`link`,e),c._p=new Promise(function(e,t){c.onload=e,c.onerror=t}),c.addEventListener(`load`,function(){s.loading|=1}),c.addEventListener(`error`,function(){s.loading|=2}),s.loading|=4,Lf(o,t,r)}o={type:`stylesheet`,instance:o,count:1,state:s},i.set(a,o)}}}function Df(e,t){_f.X(e,t);var n=bf;if(n&&e){var r=St(n).hoistableScripts,i=Pf(e),a=r.get(i);a||(a=n.querySelector(Ff(i)),a||(e=h({src:e,async:!0},t),(t=mf.get(i))&&zf(e,t),a=n.createElement(`script`),Ct(a),Pd(a,`link`,e),n.head.appendChild(a)),a={type:`script`,instance:a,count:1,state:null},r.set(i,a))}}function Of(e,t){_f.M(e,t);var n=bf;if(n&&e){var r=St(n).hoistableScripts,i=Pf(e),a=r.get(i);a||(a=n.querySelector(Ff(i)),a||(e=h({src:e,async:!0,type:`module`},t),(t=mf.get(i))&&zf(e,t),a=n.createElement(`script`),Ct(a),Pd(a,`link`,e),n.head.appendChild(a)),a={type:`script`,instance:a,count:1,state:null},r.set(i,a))}}function kf(e,t,n,r){var a=(a=de.current)?gf(a):null;if(!a)throw Error(i(446));switch(e){case`meta`:case`title`:return null;case`style`:return typeof n.precedence==`string`&&typeof n.href==`string`?(t=Af(n.href),n=St(a).hoistableStyles,r=n.get(t),r||(r={type:`style`,instance:null,count:0,state:null},n.set(t,r)),r):{type:`void`,instance:null,count:0,state:null};case`link`:if(n.rel===`stylesheet`&&typeof n.href==`string`&&typeof n.precedence==`string`){e=Af(n.href);var o=St(a).hoistableStyles,s=o.get(e);if(s||(a=a.ownerDocument||a,s={type:`stylesheet`,instance:null,count:0,state:{loading:0,preload:null}},o.set(e,s),(o=a.querySelector(jf(e)))&&!o._p&&(s.instance=o,s.state.loading=5),mf.has(e)||(n={rel:`preload`,as:`style`,href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},mf.set(e,n),o||Nf(a,e,n,s.state))),t&&r===null)throw Error(i(528,``));return s}if(t&&r!==null)throw Error(i(529,``));return null;case`script`:return t=n.async,n=n.src,typeof n==`string`&&t&&typeof t!=`function`&&typeof t!=`symbol`?(t=Pf(n),n=St(a).hoistableScripts,r=n.get(t),r||(r={type:`script`,instance:null,count:0,state:null},n.set(t,r)),r):{type:`void`,instance:null,count:0,state:null};default:throw Error(i(444,e))}}function Af(e){return`href="`+Ht(e)+`"`}function jf(e){return`link[rel="stylesheet"][`+e+`]`}function Mf(e){return h({},e,{"data-precedence":e.precedence,precedence:null})}function Nf(e,t,n,r){e.querySelector(`link[rel="preload"][as="style"][`+t+`]`)?r.loading=1:(t=e.createElement(`link`),r.preload=t,t.addEventListener(`load`,function(){return r.loading|=1}),t.addEventListener(`error`,function(){return r.loading|=2}),Pd(t,`link`,n),Ct(t),e.head.appendChild(t))}function Pf(e){return`[src="`+Ht(e)+`"]`}function Ff(e){return`script[async]`+e}function If(e,t,n){if(t.count++,t.instance===null)switch(t.type){case`style`:var r=e.querySelector(`style[data-href~="`+Ht(n.href)+`"]`);if(r)return t.instance=r,Ct(r),r;var a=h({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return r=(e.ownerDocument||e).createElement(`style`),Ct(r),Pd(r,`style`,a),Lf(r,n.precedence,e),t.instance=r;case`stylesheet`:a=Af(n.href);var o=e.querySelector(jf(a));if(o)return t.state.loading|=4,t.instance=o,Ct(o),o;r=Mf(n),(a=mf.get(a))&&Rf(r,a),o=(e.ownerDocument||e).createElement(`link`),Ct(o);var s=o;return s._p=new Promise(function(e,t){s.onload=e,s.onerror=t}),Pd(o,`link`,r),t.state.loading|=4,Lf(o,n.precedence,e),t.instance=o;case`script`:return o=Pf(n.src),(a=e.querySelector(Ff(o)))?(t.instance=a,Ct(a),a):(r=n,(a=mf.get(o))&&(r=h({},n),zf(r,a)),e=e.ownerDocument||e,a=e.createElement(`script`),Ct(a),Pd(a,`link`,r),e.head.appendChild(a),t.instance=a);case`void`:return null;default:throw Error(i(443,t.type))}else t.type===`stylesheet`&&!(t.state.loading&4)&&(r=t.instance,t.state.loading|=4,Lf(r,n.precedence,e));return t.instance}function Lf(e,t,n){for(var r=n.querySelectorAll(`link[rel="stylesheet"][data-precedence],style[data-precedence]`),i=r.length?r[r.length-1]:null,a=i,o=0;o<r.length;o++){var s=r[o];if(s.dataset.precedence===t)a=s;else if(a!==i)break}a?a.parentNode.insertBefore(e,a.nextSibling):(t=n.nodeType===9?n.head:n,t.insertBefore(e,t.firstChild))}function Rf(e,t){e.crossOrigin??=t.crossOrigin,e.referrerPolicy??=t.referrerPolicy,e.title??=t.title}function zf(e,t){e.crossOrigin??=t.crossOrigin,e.referrerPolicy??=t.referrerPolicy,e.integrity??=t.integrity}var Bf=null;function Vf(e,t,n){if(Bf===null){var r=new Map,i=Bf=new Map;i.set(n,r)}else i=Bf,r=i.get(n),r||(r=new Map,i.set(n,r));if(r.has(e))return r;for(r.set(e,null),n=n.getElementsByTagName(e),i=0;i<n.length;i++){var a=n[i];if(!(a[_t]||a[ut]||e===`link`&&a.getAttribute(`rel`)===`stylesheet`)&&a.namespaceURI!==`http://www.w3.org/2000/svg`){var o=a.getAttribute(t)||``;o=e+o;var s=r.get(o);s?s.push(a):r.set(o,[a])}}return r}function Hf(e,t,n){e=e.ownerDocument||e,e.head.insertBefore(n,t===`title`?e.querySelector(`head > title`):null)}function Uf(e,t,n){if(n===1||t.itemProp!=null)return!1;switch(e){case`meta`:case`title`:return!0;case`style`:if(typeof t.precedence!=`string`||typeof t.href!=`string`||t.href===``)break;return!0;case`link`:if(typeof t.rel!=`string`||typeof t.href!=`string`||t.href===``||t.onLoad||t.onError)break;switch(t.rel){case`stylesheet`:return e=t.disabled,typeof t.precedence==`string`&&e==null;default:return!0}case`script`:if(t.async&&typeof t.async!=`function`&&typeof t.async!=`symbol`&&!t.onLoad&&!t.onError&&t.src&&typeof t.src==`string`)return!0}return!1}function Wf(e){return!(e.type===`stylesheet`&&!(e.state.loading&3))}function Gf(e,t,n,r){if(n.type===`stylesheet`&&(typeof r.media!=`string`||!1!==matchMedia(r.media).matches)&&!(n.state.loading&4)){if(n.instance===null){var i=Af(r.href),a=t.querySelector(jf(i));if(a){t=a._p,typeof t==`object`&&t&&typeof t.then==`function`&&(e.count++,e=Jf.bind(e),t.then(e,e)),n.state.loading|=4,n.instance=a,Ct(a);return}a=t.ownerDocument||t,r=Mf(r),(i=mf.get(i))&&Rf(r,i),a=a.createElement(`link`),Ct(a);var o=a;o._p=new Promise(function(e,t){o.onload=e,o.onerror=t}),Pd(a,`link`,r),n.instance=a}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(n,t),(t=n.state.preload)&&!(n.state.loading&3)&&(e.count++,n=Jf.bind(e),t.addEventListener(`load`,n),t.addEventListener(`error`,n))}}var Kf=0;function qf(e,t){return e.stylesheets&&e.count===0&&Xf(e,e.stylesheets),0<e.count||0<e.imgCount?function(n){var r=setTimeout(function(){if(e.stylesheets&&Xf(e,e.stylesheets),e.unsuspend){var t=e.unsuspend;e.unsuspend=null,t()}},6e4+t);0<e.imgBytes&&Kf===0&&(Kf=62500*Ld());var i=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&Xf(e,e.stylesheets),e.unsuspend)){var t=e.unsuspend;e.unsuspend=null,t()}},(e.imgBytes>Kf?50:800)+t);return e.unsuspend=n,function(){e.unsuspend=null,clearTimeout(r),clearTimeout(i)}}:null}function Jf(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Xf(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Yf=null;function Xf(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Yf=new Map,t.forEach(Zf,e),Yf=null,Jf.call(e))}function Zf(e,t){if(!(t.state.loading&4)){var n=Yf.get(e);if(n)var r=n.get(null);else{n=new Map,Yf.set(e,n);for(var i=e.querySelectorAll(`link[data-precedence],style[data-precedence]`),a=0;a<i.length;a++){var o=i[a];(o.nodeName===`LINK`||o.getAttribute(`media`)!==`not all`)&&(n.set(o.dataset.precedence,o),r=o)}r&&n.set(null,r)}i=t.instance,o=i.getAttribute(`data-precedence`),a=n.get(o)||r,a===r&&n.set(null,i),n.set(o,i),this.count++,r=Jf.bind(this),i.addEventListener(`load`,r),i.addEventListener(`error`,r),a?a.parentNode.insertBefore(i,a.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(i,e.firstChild)),t.state.loading|=4}}var Qf={$$typeof:C,Provider:null,Consumer:null,_currentValue:re,_currentValue2:re,_threadCount:0};function $f(e,t,n,r,i,a,o,s,c){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=$e(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=$e(0),this.hiddenUpdates=$e(null),this.identifierPrefix=r,this.onUncaughtError=i,this.onCaughtError=a,this.onRecoverableError=o,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=c,this.incompleteTransitions=new Map}function ep(e,t,n,r,i,a,o,s,c,l,u,d){return e=new $f(e,t,n,o,c,l,u,d,s),t=1,!0===a&&(t|=24),a=V(3,null,null,t),e.current=a,a.stateNode=e,t=ra(),t.refCount++,e.pooledCache=t,t.refCount++,a.memoizedState={element:r,isDehydrated:n,cache:t},Ia(a),e}function tp(e){return e?(e=ii,e):ii}function np(e,t,n,r,i,a){i=tp(i),r.context===null?r.context=i:r.pendingContext=i,r=Ra(t),r.payload={element:n},a=a===void 0?null:a,a!==null&&(r.callback=a),n=za(e,r,t),n!==null&&(pu(n,e,t),Ba(n,e,t))}function rp(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function ip(e,t){rp(e,t),(e=e.alternate)&&rp(e,t)}function ap(e){if(e.tag===13||e.tag===31){var t=ti(e,67108864);t!==null&&pu(t,e,67108864),ip(e,67108864)}}function op(e){if(e.tag===13||e.tag===31){var t=du();t=at(t);var n=ti(e,t);n!==null&&pu(n,e,t),ip(e,t)}}var sp=!0;function cp(e,t,n,r){var i=N.T;N.T=null;var a=P.p;try{P.p=2,up(e,t,n,r)}finally{P.p=a,N.T=i}}function lp(e,t,n,r){var i=N.T;N.T=null;var a=P.p;try{P.p=8,up(e,t,n,r)}finally{P.p=a,N.T=i}}function up(e,t,n,r){if(sp){var i=dp(r);if(i===null)Cd(e,t,r,fp,n),Cp(e,r);else if(Tp(i,e,t,n,r))r.stopPropagation();else if(Cp(e,r),t&4&&-1<Sp.indexOf(e)){for(;i!==null;){var a=bt(i);if(a!==null)switch(a.tag){case 3:if(a=a.stateNode,a.current.memoizedState.isDehydrated){var o=Je(a.pendingLanes);if(o!==0){var s=a;for(s.pendingLanes|=2,s.entangledLanes|=2;o;){var c=1<<31-Ve(o);s.entanglements[1]|=c,o&=~c}nd(a),!(Y&6)&&($l=ke()+500,rd(0,!1))}}break;case 31:case 13:s=ti(a,2),s!==null&&pu(s,a,2),vu(),ip(a,2)}if(a=dp(r),a===null&&Cd(e,t,r,fp,n),a===i)break;i=a}i!==null&&r.stopPropagation()}else Cd(e,t,r,null,n)}}function dp(e){return e=on(e),pp(e)}var fp=null;function pp(e){if(fp=null,e=yt(e),e!==null){var t=o(e);if(t===null)e=null;else{var n=t.tag;if(n===13){if(e=s(t),e!==null)return e;e=null}else if(n===31){if(e=c(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return fp=e,null}function mp(e){switch(e){case`beforetoggle`:case`cancel`:case`click`:case`close`:case`contextmenu`:case`copy`:case`cut`:case`auxclick`:case`dblclick`:case`dragend`:case`dragstart`:case`drop`:case`focusin`:case`focusout`:case`input`:case`invalid`:case`keydown`:case`keypress`:case`keyup`:case`mousedown`:case`mouseup`:case`paste`:case`pause`:case`play`:case`pointercancel`:case`pointerdown`:case`pointerup`:case`ratechange`:case`reset`:case`resize`:case`seeked`:case`submit`:case`toggle`:case`touchcancel`:case`touchend`:case`touchstart`:case`volumechange`:case`change`:case`selectionchange`:case`textInput`:case`compositionstart`:case`compositionend`:case`compositionupdate`:case`beforeblur`:case`afterblur`:case`beforeinput`:case`blur`:case`fullscreenchange`:case`focus`:case`hashchange`:case`popstate`:case`select`:case`selectstart`:return 2;case`drag`:case`dragenter`:case`dragexit`:case`dragleave`:case`dragover`:case`mousemove`:case`mouseout`:case`mouseover`:case`pointermove`:case`pointerout`:case`pointerover`:case`scroll`:case`touchmove`:case`wheel`:case`mouseenter`:case`mouseleave`:case`pointerenter`:case`pointerleave`:return 8;case`message`:switch(Ae()){case je:return 2;case Me:return 8;case Ne:case Pe:return 32;case Fe:return 268435456;default:return 32}default:return 32}}var hp=!1,gp=null,_p=null,vp=null,yp=new Map,bp=new Map,xp=[],Sp=`mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset`.split(` `);function Cp(e,t){switch(e){case`focusin`:case`focusout`:gp=null;break;case`dragenter`:case`dragleave`:_p=null;break;case`mouseover`:case`mouseout`:vp=null;break;case`pointerover`:case`pointerout`:yp.delete(t.pointerId);break;case`gotpointercapture`:case`lostpointercapture`:bp.delete(t.pointerId)}}function wp(e,t,n,r,i,a){return e===null||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[i]},t!==null&&(t=bt(t),t!==null&&ap(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function Tp(e,t,n,r,i){switch(t){case`focusin`:return gp=wp(gp,e,t,n,r,i),!0;case`dragenter`:return _p=wp(_p,e,t,n,r,i),!0;case`mouseover`:return vp=wp(vp,e,t,n,r,i),!0;case`pointerover`:var a=i.pointerId;return yp.set(a,wp(yp.get(a)||null,e,t,n,r,i)),!0;case`gotpointercapture`:return a=i.pointerId,bp.set(a,wp(bp.get(a)||null,e,t,n,r,i)),!0}return!1}function Ep(e){var t=yt(e.target);if(t!==null){var n=o(t);if(n!==null){if(t=n.tag,t===13){if(t=s(n),t!==null){e.blockedOn=t,ct(e.priority,function(){op(n)});return}}else if(t===31){if(t=c(n),t!==null){e.blockedOn=t,ct(e.priority,function(){op(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Dp(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=dp(e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);an=r,n.target.dispatchEvent(r),an=null}else return t=bt(n),t!==null&&ap(t),e.blockedOn=n,!1;t.shift()}return!0}function Op(e,t,n){Dp(e)&&n.delete(t)}function kp(){hp=!1,gp!==null&&Dp(gp)&&(gp=null),_p!==null&&Dp(_p)&&(_p=null),vp!==null&&Dp(vp)&&(vp=null),yp.forEach(Op),bp.forEach(Op)}function Ap(e,n){e.blockedOn===n&&(e.blockedOn=null,hp||(hp=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,kp)))}var jp=null;function Mp(e){jp!==e&&(jp=e,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){jp===e&&(jp=null);for(var t=0;t<e.length;t+=3){var n=e[t],r=e[t+1],i=e[t+2];if(typeof r!=`function`){if(pp(r||n)===null)continue;break}var a=bt(n);a!==null&&(e.splice(t,3),t-=3,xs(a,{pending:!0,data:i,method:n.method,action:r},r,i))}}))}function Np(e){function t(t){return Ap(t,e)}gp!==null&&Ap(gp,e),_p!==null&&Ap(_p,e),vp!==null&&Ap(vp,e),yp.forEach(t),bp.forEach(t);for(var n=0;n<xp.length;n++){var r=xp[n];r.blockedOn===e&&(r.blockedOn=null)}for(;0<xp.length&&(n=xp[0],n.blockedOn===null);)Ep(n),n.blockedOn===null&&xp.shift();if(n=(e.ownerDocument||e).$$reactFormReplay,n!=null)for(r=0;r<n.length;r+=3){var i=n[r],a=n[r+1],o=i[dt]||null;if(typeof a==`function`)o||Mp(n);else if(o){var s=null;if(a&&a.hasAttribute(`formAction`)){if(i=a,o=a[dt]||null)s=o.formAction;else if(pp(i)!==null)continue}else s=o.action;typeof s==`function`?n[r+1]=s:(n.splice(r,3),r-=3),Mp(n)}}}function Pp(){function e(e){e.canIntercept&&e.info===`react-transition`&&e.intercept({handler:function(){return new Promise(function(e){return i=e})},focusReset:`manual`,scroll:`manual`})}function t(){i!==null&&(i(),i=null),r||setTimeout(n,20)}function n(){if(!r&&!navigation.transition){var e=navigation.currentEntry;e&&e.url!=null&&navigation.navigate(e.url,{state:e.getState(),info:`react-transition`,history:`replace`})}}if(typeof navigation==`object`){var r=!1,i=null;return navigation.addEventListener(`navigate`,e),navigation.addEventListener(`navigatesuccess`,t),navigation.addEventListener(`navigateerror`,t),setTimeout(n,100),function(){r=!0,navigation.removeEventListener(`navigate`,e),navigation.removeEventListener(`navigatesuccess`,t),navigation.removeEventListener(`navigateerror`,t),i!==null&&(i(),i=null)}}}function Fp(e){this._internalRoot=e}Ip.prototype.render=Fp.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(i(409));var n=t.current;np(n,du(),e,t,null,null)},Ip.prototype.unmount=Fp.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;np(e.current,2,null,e,null,null),vu(),t[ft]=null}};function Ip(e){this._internalRoot=e}Ip.prototype.unstable_scheduleHydration=function(e){if(e){var t=st();e={blockedOn:null,target:e,priority:t};for(var n=0;n<xp.length&&t!==0&&t<xp[n].priority;n++);xp.splice(n,0,e),n===0&&Ep(e)}};var Lp=n.version;if(Lp!==`19.2.0`)throw Error(i(527,Lp,`19.2.0`));P.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render==`function`?Error(i(188)):(e=Object.keys(e).join(`,`),Error(i(268,e)));return e=d(t),e=e===null?null:p(e),e=e===null?null:e.stateNode,e};var Rp={bundleType:0,version:`19.2.0`,rendererPackageName:`react-dom`,currentDispatcherRef:N,reconcilerVersion:`19.2.0`};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<`u`){var zp=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!zp.isDisabled&&zp.supportsFiber)try{Re=zp.inject(Rp),ze=zp}catch{}}e.createRoot=function(e,t){if(!a(e))throw Error(i(299));var n=!1,r=``,o=Ws,s=Gs,c=Ks;return t!=null&&(!0===t.unstable_strictMode&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onUncaughtError!==void 0&&(o=t.onUncaughtError),t.onCaughtError!==void 0&&(s=t.onCaughtError),t.onRecoverableError!==void 0&&(c=t.onRecoverableError)),t=ep(e,1,!1,null,null,n,r,null,o,s,c,Pp),e[ft]=t.current,xd(e),new Fp(t)}})),g=c(o(((e,t)=>{function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>`u`||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!=`function`))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}n(),t.exports=h()}))(),1),_=c(u(),1),v=`modulepreload`,y=function(e){return`/TTP_IML_1/`+e},b={};const x=function(e,t,n){let r=Promise.resolve();if(t&&t.length>0){let e=document.getElementsByTagName(`link`),i=document.querySelector(`meta[property=csp-nonce]`),a=i?.nonce||i?.getAttribute(`nonce`);function o(e){return Promise.all(e.map(e=>Promise.resolve(e).then(e=>({status:`fulfilled`,value:e}),e=>({status:`rejected`,reason:e}))))}r=o(t.map(t=>{if(t=y(t,n),t in b)return;b[t]=!0;let r=t.endsWith(`.css`),i=r?`[rel="stylesheet"]`:``;if(n)for(let n=e.length-1;n>=0;n--){let i=e[n];if(i.href===t&&(!r||i.rel===`stylesheet`))return}else if(document.querySelector(`link[href="${t}"]${i}`))return;let o=document.createElement(`link`);if(o.rel=r?`stylesheet`:v,r||(o.as=`script`),o.crossOrigin=``,o.href=t,a&&o.setAttribute(`nonce`,a),document.head.appendChild(o),r)return new Promise((e,n)=>{o.addEventListener(`load`,e),o.addEventListener(`error`,()=>n(Error(`Unable to preload CSS for ${t}`)))})}))}function i(e){let t=new Event(`vite:preloadError`,{cancelable:!0});if(t.payload=e,window.dispatchEvent(t),!t.defaultPrevented)throw e}return r.then(t=>{for(let e of t||[])e.status===`rejected`&&i(e.reason);return e().catch(i)})};var S=`popstate`;function C(e={}){function t(e,t){let{pathname:n,search:r,hash:i}=e.location;return O(``,{pathname:n,search:r,hash:i},t.state&&t.state.usr||null,t.state&&t.state.key||`default`)}function n(e,t){return typeof t==`string`?t:k(t)}return ee(t,n,null,e)}function w(e,t){if(e===!1||e==null)throw Error(t)}function T(e,t){if(!e){typeof console<`u`&&console.warn(t);try{throw Error(t)}catch{}}}function E(){return Math.random().toString(36).substring(2,10)}function D(e,t){return{usr:e.state,key:e.key,idx:t}}function O(e,t,n=null,r){return{pathname:typeof e==`string`?e:e.pathname,search:``,hash:``,...typeof t==`string`?A(t):t,state:n,key:t&&t.key||r||E()}}function k({pathname:e=`/`,search:t=``,hash:n=``}){return t&&t!==`?`&&(e+=t.charAt(0)===`?`?t:`?`+t),n&&n!==`#`&&(e+=n.charAt(0)===`#`?n:`#`+n),e}function A(e){let t={};if(e){let n=e.indexOf(`#`);n>=0&&(t.hash=e.substring(n),e=e.substring(0,n));let r=e.indexOf(`?`);r>=0&&(t.search=e.substring(r),e=e.substring(0,r)),e&&(t.pathname=e)}return t}function ee(e,t,n,r={}){let{window:i=document.defaultView,v5Compat:a=!1}=r,o=i.history,s=`POP`,c=null,l=u();l??(l=0,o.replaceState({...o.state,idx:l},``));function u(){return(o.state||{idx:null}).idx}function d(){s=`POP`;let e=u(),t=e==null?null:e-l;l=e,c&&c({action:s,location:h.location,delta:t})}function f(e,t){s=`PUSH`;let r=O(h.location,e,t);n&&n(r,e),l=u()+1;let d=D(r,l),f=h.createHref(r);try{o.pushState(d,``,f)}catch(e){if(e instanceof DOMException&&e.name===`DataCloneError`)throw e;i.location.assign(f)}a&&c&&c({action:s,location:h.location,delta:1})}function p(e,t){s=`REPLACE`;let r=O(h.location,e,t);n&&n(r,e),l=u();let i=D(r,l),d=h.createHref(r);o.replaceState(i,``,d),a&&c&&c({action:s,location:h.location,delta:0})}function m(e){return te(e)}let h={get action(){return s},get location(){return e(i,o)},listen(e){if(c)throw Error(`A history only accepts one active listener`);return i.addEventListener(S,d),c=e,()=>{i.removeEventListener(S,d),c=null}},createHref(e){return t(i,e)},createURL:m,encodeLocation(e){let t=m(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:f,replace:p,go(e){return o.go(e)}};return h}function te(e,t=!1){let n=`http://localhost`;typeof window<`u`&&(n=window.location.origin===`null`?window.location.href:window.location.origin),w(n,`No window.location.(origin|href) available to create URL`);let r=typeof e==`string`?e:k(e);return r=r.replace(/ $/,`%20`),!t&&r.startsWith(`//`)&&(r=n+r),new URL(r,n)}function j(e,t,n=`/`){return M(e,t,n,!1)}function M(e,t,n,r){let i=_e((typeof t==`string`?A(t):t).pathname||`/`,n);if(i==null)return null;let a=N(e);re(a);let o=null;for(let e=0;o==null&&e<a.length;++e){let t=ge(i);o=pe(a[e],t,r)}return o}function ne(e,t){let{route:n,pathname:r,params:i}=e;return{id:n.id,pathname:r,params:i,data:t[n.id],loaderData:t[n.id],handle:n.handle}}function N(e,t=[],n=[],r=``,i=!1){let a=(e,a,o=i,s)=>{let c={relativePath:s===void 0?e.path||``:s,caseSensitive:e.caseSensitive===!0,childrenIndex:a,route:e};if(c.relativePath.startsWith(`/`)){if(!c.relativePath.startsWith(r)&&o)return;w(c.relativePath.startsWith(r),`Absolute route path "${c.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),c.relativePath=c.relativePath.slice(r.length)}let l=Ee([r,c.relativePath]),u=n.concat(c);e.children&&e.children.length>0&&(w(e.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${l}".`),N(e.children,t,u,l,o)),!(e.path==null&&!e.index)&&t.push({path:l,score:de(l,e.index),routesMeta:u})};return e.forEach((e,t)=>{if(e.path===``||!e.path?.includes(`?`))a(e,t);else for(let n of P(e.path))a(e,t,!0,n)}),t}function P(e){let t=e.split(`/`);if(t.length===0)return[];let[n,...r]=t,i=n.endsWith(`?`),a=n.replace(/\?$/,``);if(r.length===0)return i?[a,``]:[a];let o=P(r.join(`/`)),s=[];return s.push(...o.map(e=>e===``?a:[a,e].join(`/`))),i&&s.push(...o),s.map(t=>e.startsWith(`/`)&&t===``?`/`:t)}function re(e){e.sort((e,t)=>e.score===t.score?fe(e.routesMeta.map(e=>e.childrenIndex),t.routesMeta.map(e=>e.childrenIndex)):t.score-e.score)}var ie=/^:[\w-]+$/,ae=3,oe=2,se=1,ce=10,le=-2,ue=e=>e===`*`;function de(e,t){let n=e.split(`/`),r=n.length;return n.some(ue)&&(r+=le),t&&(r+=oe),n.filter(e=>!ue(e)).reduce((e,t)=>e+(ie.test(t)?ae:t===``?se:ce),r)}function fe(e,t){return e.length===t.length&&e.slice(0,-1).every((e,n)=>e===t[n])?e[e.length-1]-t[t.length-1]:0}function pe(e,t,n=!1){let{routesMeta:r}=e,i={},a=`/`,o=[];for(let e=0;e<r.length;++e){let s=r[e],c=e===r.length-1,l=a===`/`?t:t.slice(a.length)||`/`,u=me({path:s.relativePath,caseSensitive:s.caseSensitive,end:c},l),d=s.route;if(!u&&c&&n&&!r[r.length-1].route.index&&(u=me({path:s.relativePath,caseSensitive:s.caseSensitive,end:!1},l)),!u)return null;Object.assign(i,u.params),o.push({params:i,pathname:Ee([a,u.pathname]),pathnameBase:De(Ee([a,u.pathnameBase])),route:d}),u.pathnameBase!==`/`&&(a=Ee([a,u.pathnameBase]))}return o}function me(e,t){typeof e==`string`&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=he(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let a=i[0],o=a.replace(/(.)\/+$/,`$1`),s=i.slice(1);return{params:r.reduce((e,{paramName:t,isOptional:n},r)=>{if(t===`*`){let e=s[r]||``;o=a.slice(0,a.length-e.length).replace(/(.)\/+$/,`$1`)}let i=s[r];return n&&!i?e[t]=void 0:e[t]=(i||``).replace(/%2F/g,`/`),e},{}),pathname:a,pathnameBase:o,pattern:e}}function he(e,t=!1,n=!0){T(e===`*`||!e.endsWith(`*`)||e.endsWith(`/*`),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,`/*`)}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,`/*`)}".`);let r=[],i=`^`+e.replace(/\/*\*?$/,``).replace(/^\/*/,`/`).replace(/[\\.*+^${}|()[\]]/g,`\\$&`).replace(/\/:([\w-]+)(\?)?/g,(e,t,n)=>(r.push({paramName:t,isOptional:n!=null}),n?`/?([^\\/]+)?`:`/([^\\/]+)`)).replace(/\/([\w-]+)\?(\/|$)/g,`(/$1)?$2`);return e.endsWith(`*`)?(r.push({paramName:`*`}),i+=e===`*`||e===`/*`?`(.*)$`:`(?:\\/(.+)|\\/*)$`):n?i+=`\\/*$`:e!==``&&e!==`/`&&(i+=`(?:(?=\\/|$))`),[new RegExp(i,t?void 0:`i`),r]}function ge(e){try{return e.split(`/`).map(e=>decodeURIComponent(e).replace(/\//g,`%2F`)).join(`/`)}catch(t){return T(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function _e(e,t){if(t===`/`)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith(`/`)?t.length-1:t.length,r=e.charAt(n);return r&&r!==`/`?null:e.slice(n)||`/`}var ve=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ye=e=>ve.test(e);function be(e,t=`/`){let{pathname:n,search:r=``,hash:i=``}=typeof e==`string`?A(e):e,a;if(n)if(ye(n))a=n;else{if(n.includes(`//`)){let e=n;n=n.replace(/\/\/+/g,`/`),T(!1,`Pathnames cannot have embedded double slashes - normalizing ${e} -> ${n}`)}a=n.startsWith(`/`)?xe(n.substring(1),`/`):xe(n,t)}else a=t;return{pathname:a,search:Oe(r),hash:ke(i)}}function xe(e,t){let n=t.replace(/\/+$/,``).split(`/`);return e.split(`/`).forEach(e=>{e===`..`?n.length>1&&n.pop():e!==`.`&&n.push(e)}),n.length>1?n.join(`/`):`/`}function Se(e,t,n,r){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function Ce(e){return e.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function we(e){let t=Ce(e);return t.map((e,n)=>n===t.length-1?e.pathname:e.pathnameBase)}function Te(e,t,n,r=!1){let i;typeof e==`string`?i=A(e):(i={...e},w(!i.pathname||!i.pathname.includes(`?`),Se(`?`,`pathname`,`search`,i)),w(!i.pathname||!i.pathname.includes(`#`),Se(`#`,`pathname`,`hash`,i)),w(!i.search||!i.search.includes(`#`),Se(`#`,`search`,`hash`,i)));let a=e===``||i.pathname===``,o=a?`/`:i.pathname,s;if(o==null)s=n;else{let e=t.length-1;if(!r&&o.startsWith(`..`)){let t=o.split(`/`);for(;t[0]===`..`;)t.shift(),--e;i.pathname=t.join(`/`)}s=e>=0?t[e]:`/`}let c=be(i,s),l=o&&o!==`/`&&o.endsWith(`/`),u=(a||o===`.`)&&n.endsWith(`/`);return!c.pathname.endsWith(`/`)&&(l||u)&&(c.pathname+=`/`),c}var Ee=e=>e.join(`/`).replace(/\/\/+/g,`/`),De=e=>e.replace(/\/+$/,``).replace(/^\/*/,`/`),Oe=e=>!e||e===`?`?``:e.startsWith(`?`)?e:`?`+e,ke=e=>!e||e===`#`?``:e.startsWith(`#`)?e:`#`+e;function Ae(e){return e!=null&&typeof e.status==`number`&&typeof e.statusText==`string`&&typeof e.internal==`boolean`&&`data`in e}Object.getOwnPropertyNames(Object.prototype).sort().join(`\0`);var je=_.createContext(null);je.displayName=`DataRouter`;var Me=_.createContext(null);Me.displayName=`DataRouterState`,_.createContext(!1);var Ne=_.createContext({isTransitioning:!1});Ne.displayName=`ViewTransition`;var Pe=_.createContext(new Map);Pe.displayName=`Fetchers`;var Fe=_.createContext(null);Fe.displayName=`Await`;var Ie=_.createContext(null);Ie.displayName=`Navigation`;var Le=_.createContext(null);Le.displayName=`Location`;var Re=_.createContext({outlet:null,matches:[],isDataRoute:!1});Re.displayName=`Route`;var ze=_.createContext(null);ze.displayName=`RouteError`;function Be(e,{relative:t}={}){w(Ve(),`useHref() may be used only in the context of a <Router> component.`);let{basename:n,navigator:r}=_.useContext(Ie),{hash:i,pathname:a,search:o}=Ye(e,{relative:t}),s=a;return n!==`/`&&(s=a===`/`?n:Ee([n,a])),r.createHref({pathname:s,search:o,hash:i})}function Ve(){return _.useContext(Le)!=null}function He(){return w(Ve(),`useLocation() may be used only in the context of a <Router> component.`),_.useContext(Le).location}var Ue=`You should call navigate() in a React.useEffect(), not when your component is first rendered.`;function We(e){_.useContext(Ie).static||_.useLayoutEffect(e)}function Ge(){let{isDataRoute:e}=_.useContext(Re);return e?ft():Ke()}function Ke(){w(Ve(),`useNavigate() may be used only in the context of a <Router> component.`);let e=_.useContext(je),{basename:t,navigator:n}=_.useContext(Ie),{matches:r}=_.useContext(Re),{pathname:i}=He(),a=JSON.stringify(we(r)),o=_.useRef(!1);return We(()=>{o.current=!0}),_.useCallback((r,s={})=>{if(T(o.current,Ue),!o.current)return;if(typeof r==`number`){n.go(r);return}let c=Te(r,JSON.parse(a),i,s.relative===`path`);e==null&&t!==`/`&&(c.pathname=c.pathname===`/`?t:Ee([t,c.pathname])),(s.replace?n.replace:n.push)(c,s.state,s)},[t,n,a,i,e])}var qe=_.createContext(null);function Je(e){let t=_.useContext(Re).outlet;return _.useMemo(()=>t&&_.createElement(qe.Provider,{value:e},t),[t,e])}function Ye(e,{relative:t}={}){let{matches:n}=_.useContext(Re),{pathname:r}=He(),i=JSON.stringify(we(n));return _.useMemo(()=>Te(e,JSON.parse(i),r,t===`path`),[e,i,r,t])}function Xe(e,t){return Ze(e,t)}function Ze(e,t,n,r,i){w(Ve(),`useRoutes() may be used only in the context of a <Router> component.`);let{navigator:a}=_.useContext(Ie),{matches:o}=_.useContext(Re),s=o[o.length-1],c=s?s.params:{},l=s?s.pathname:`/`,u=s?s.pathnameBase:`/`,d=s&&s.route;{let e=d&&d.path||``;mt(l,!d||e.endsWith(`*`)||e.endsWith(`*?`),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${l}" (under <Route path="${e}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${e}"> to <Route path="${e===`/`?`*`:`${e}/*`}">.`)}let f=He(),p;if(t){let e=typeof t==`string`?A(t):t;w(u===`/`||e.pathname?.startsWith(u),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${u}" but pathname "${e.pathname}" was given in the \`location\` prop.`),p=e}else p=f;let m=p.pathname||`/`,h=m;if(u!==`/`){let e=u.replace(/^\//,``).split(`/`);h=`/`+m.replace(/^\//,``).split(`/`).slice(e.length).join(`/`)}let g=j(e,{pathname:h});T(d||g!=null,`No routes matched location "${p.pathname}${p.search}${p.hash}" `),T(g==null||g[g.length-1].route.element!==void 0||g[g.length-1].route.Component!==void 0||g[g.length-1].route.lazy!==void 0,`Matched leaf route at location "${p.pathname}${p.search}${p.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let v=nt(g&&g.map(e=>Object.assign({},e,{params:Object.assign({},c,e.params),pathname:Ee([u,a.encodeLocation?a.encodeLocation(e.pathname.replace(/\?/g,`%3F`).replace(/#/g,`%23`)).pathname:e.pathname]),pathnameBase:e.pathnameBase===`/`?u:Ee([u,a.encodeLocation?a.encodeLocation(e.pathnameBase.replace(/\?/g,`%3F`).replace(/#/g,`%23`)).pathname:e.pathnameBase])})),o,n,r,i);return t&&v?_.createElement(Le.Provider,{value:{location:{pathname:`/`,search:``,hash:``,state:null,key:`default`,...p},navigationType:`POP`}},v):v}function Qe(){let e=dt(),t=Ae(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,r=`rgba(200,200,200, 0.5)`,i={padding:`0.5rem`,backgroundColor:r},a={padding:`2px 4px`,backgroundColor:r},o=null;return console.error(`Error handled by React Router default ErrorBoundary:`,e),o=_.createElement(_.Fragment,null,_.createElement(`p`,null,` Hey developer `),_.createElement(`p`,null,`You can provide a way better UX than this when your app throws errors by providing your own `,_.createElement(`code`,{style:a},`ErrorBoundary`),` or`,` `,_.createElement(`code`,{style:a},`errorElement`),` prop on your route.`)),_.createElement(_.Fragment,null,_.createElement(`h2`,null,`Unexpected Application Error!`),_.createElement(`h3`,{style:{fontStyle:`italic`}},t),n?_.createElement(`pre`,{style:i},n):null,o)}var $e=_.createElement(Qe,null),et=class extends _.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!==`idle`&&e.revalidation===`idle`?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error===void 0?t.error:e.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){this.props.onError?this.props.onError(e,t):console.error(`React Router caught the following error during render`,e)}render(){return this.state.error===void 0?this.props.children:_.createElement(Re.Provider,{value:this.props.routeContext},_.createElement(ze.Provider,{value:this.state.error,children:this.props.component}))}};function tt({routeContext:e,match:t,children:n}){let r=_.useContext(je);return r&&r.static&&r.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=t.route.id),_.createElement(Re.Provider,{value:e},n)}function nt(e,t=[],n=null,r=null,i=null){if(e==null){if(!n)return null;if(n.errors)e=n.matches;else if(t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let a=e,o=n?.errors;if(o!=null){let e=a.findIndex(e=>e.route.id&&o?.[e.route.id]!==void 0);w(e>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(`,`)}`),a=a.slice(0,Math.min(a.length,e+1))}let s=!1,c=-1;if(n)for(let e=0;e<a.length;e++){let t=a[e];if((t.route.HydrateFallback||t.route.hydrateFallbackElement)&&(c=e),t.route.id){let{loaderData:e,errors:r}=n,i=t.route.loader&&!e.hasOwnProperty(t.route.id)&&(!r||r[t.route.id]===void 0);if(t.route.lazy||i){s=!0,a=c>=0?a.slice(0,c+1):[a[0]];break}}}let l=n&&r?(e,t)=>{r(e,{location:n.location,params:n.matches?.[0]?.params??{},errorInfo:t})}:void 0;return a.reduceRight((e,r,i)=>{let u,d=!1,f=null,p=null;n&&(u=o&&r.route.id?o[r.route.id]:void 0,f=r.route.errorElement||$e,s&&(c<0&&i===0?(mt(`route-fallback`,!1,"No `HydrateFallback` element provided to render during initial hydration"),d=!0,p=null):c===i&&(d=!0,p=r.route.hydrateFallbackElement||null)));let m=t.concat(a.slice(0,i+1)),h=()=>{let t;return t=u?f:d?p:r.route.Component?_.createElement(r.route.Component,null):r.route.element?r.route.element:e,_.createElement(tt,{match:r,routeContext:{outlet:e,matches:m,isDataRoute:n!=null},children:t})};return n&&(r.route.ErrorBoundary||r.route.errorElement||i===0)?_.createElement(et,{location:n.location,revalidation:n.revalidation,component:f,error:u,children:h(),routeContext:{outlet:null,matches:m,isDataRoute:!0},onError:l}):h()},null)}function rt(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function it(e){let t=_.useContext(je);return w(t,rt(e)),t}function at(e){let t=_.useContext(Me);return w(t,rt(e)),t}function ot(e){let t=_.useContext(Re);return w(t,rt(e)),t}function st(e){let t=ot(e),n=t.matches[t.matches.length-1];return w(n.route.id,`${e} can only be used on routes that contain a unique "id"`),n.route.id}function ct(){return st(`useRouteId`)}function lt(){return at(`useNavigation`).navigation}function ut(){let{matches:e,loaderData:t}=at(`useMatches`);return _.useMemo(()=>e.map(e=>ne(e,t)),[e,t])}function dt(){let e=_.useContext(ze),t=at(`useRouteError`),n=st(`useRouteError`);return e===void 0?t.errors?.[n]:e}function ft(){let{router:e}=it(`useNavigate`),t=st(`useNavigate`),n=_.useRef(!1);return We(()=>{n.current=!0}),_.useCallback(async(r,i={})=>{T(n.current,Ue),n.current&&(typeof r==`number`?e.navigate(r):await e.navigate(r,{fromRouteId:t,...i}))},[e,t])}var pt={};function mt(e,t,n){!t&&!pt[e]&&(pt[e]=!0,T(!1,n))}_.memo(ht);function ht({routes:e,future:t,state:n,unstable_onError:r}){return Ze(e,void 0,n,r,t)}function gt(e){return Je(e.context)}function _t(e){w(!1,`A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.`)}function vt({basename:e=`/`,children:t=null,location:n,navigationType:r=`POP`,navigator:i,static:a=!1}){w(!Ve(),`You cannot render a <Router> inside another <Router>. You should never have more than one in your app.`);let o=e.replace(/^\/*/,`/`),s=_.useMemo(()=>({basename:o,navigator:i,static:a,future:{}}),[o,i,a]);typeof n==`string`&&(n=A(n));let{pathname:c=`/`,search:l=``,hash:u=``,state:d=null,key:f=`default`}=n,p=_.useMemo(()=>{let e=_e(c,o);return e==null?null:{location:{pathname:e,search:l,hash:u,state:d,key:f},navigationType:r}},[o,c,l,u,d,f,r]);return T(p!=null,`<Router basename="${o}"> is not able to match the URL "${c}${l}${u}" because it does not start with the basename, so the <Router> won't render anything.`),p==null?null:_.createElement(Ie.Provider,{value:s},_.createElement(Le.Provider,{children:t,value:p}))}function yt({children:e,location:t}){return Xe(bt(e),t)}function bt(e,t=[]){let n=[];return _.Children.forEach(e,(e,r)=>{if(!_.isValidElement(e))return;let i=[...t,r];if(e.type===_.Fragment){n.push.apply(n,bt(e.props.children,i));return}w(e.type===_t,`[${typeof e.type==`string`?e.type:e.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),w(!e.props.index||!e.props.children,`An index route cannot have child routes.`);let a={id:e.props.id||i.join(`-`),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,middleware:e.props.middleware,loader:e.props.loader,action:e.props.action,hydrateFallbackElement:e.props.hydrateFallbackElement,HydrateFallback:e.props.HydrateFallback,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:e.props.hasErrorBoundary===!0||e.props.ErrorBoundary!=null||e.props.errorElement!=null,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(a.children=bt(e.props.children,i)),n.push(a)}),n}var xt=`get`,St=`application/x-www-form-urlencoded`;function Ct(e){return e!=null&&typeof e.tagName==`string`}function wt(e){return Ct(e)&&e.tagName.toLowerCase()===`button`}function Tt(e){return Ct(e)&&e.tagName.toLowerCase()===`form`}function Et(e){return Ct(e)&&e.tagName.toLowerCase()===`input`}function Dt(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function Ot(e,t){return e.button===0&&(!t||t===`_self`)&&!Dt(e)}var kt=null;function At(){if(kt===null)try{new FormData(document.createElement(`form`),0),kt=!1}catch{kt=!0}return kt}var jt=new Set([`application/x-www-form-urlencoded`,`multipart/form-data`,`text/plain`]);function Mt(e){return e!=null&&!jt.has(e)?(T(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${St}"`),null):e}function Nt(e,t){let n,r,i,a,o;if(Tt(e)){let o=e.getAttribute(`action`);r=o?_e(o,t):null,n=e.getAttribute(`method`)||xt,i=Mt(e.getAttribute(`enctype`))||St,a=new FormData(e)}else if(wt(e)||Et(e)&&(e.type===`submit`||e.type===`image`)){let o=e.form;if(o==null)throw Error(`Cannot submit a <button> or <input type="submit"> without a <form>`);let s=e.getAttribute(`formaction`)||o.getAttribute(`action`);if(r=s?_e(s,t):null,n=e.getAttribute(`formmethod`)||o.getAttribute(`method`)||xt,i=Mt(e.getAttribute(`formenctype`))||Mt(o.getAttribute(`enctype`))||St,a=new FormData(o,e),!At()){let{name:t,type:n,value:r}=e;if(n===`image`){let e=t?`${t}.`:``;a.append(`${e}x`,`0`),a.append(`${e}y`,`0`)}else t&&a.append(t,r)}}else if(Ct(e))throw Error(`Cannot submit element that is not <form>, <button>, or <input type="submit|image">`);else n=xt,r=null,i=St,o=e;return a&&i===`text/plain`&&(o=a,a=void 0),{action:r,method:n.toLowerCase(),encType:i,formData:a,body:o}}Object.getOwnPropertyNames(Object.prototype).sort().join(`\0`);function Pt(e,t){if(e===!1||e==null)throw Error(t)}function Ft(e,t,n){let r=typeof e==`string`?new URL(e,typeof window>`u`?`server://singlefetch/`:window.location.origin):e;return r.pathname===`/`?r.pathname=`_root.${n}`:t&&_e(r.pathname,t)===`/`?r.pathname=`${t.replace(/\/$/,``)}/_root.${n}`:r.pathname=`${r.pathname.replace(/\/$/,``)}.${n}`,r}async function It(e,t){if(e.id in t)return t[e.id];try{let n=await x(()=>import(e.module),[]);return t[e.id]=n,n}catch(t){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function Lt(e){return e!=null&&typeof e.page==`string`}function Rt(e){return e==null?!1:e.href==null?e.rel===`preload`&&typeof e.imageSrcSet==`string`&&typeof e.imageSizes==`string`:typeof e.rel==`string`&&typeof e.href==`string`}async function zt(e,t,n){return Wt((await Promise.all(e.map(async e=>{let r=t.routes[e.route.id];if(r){let e=await It(r,n);return e.links?e.links():[]}return[]}))).flat(1).filter(Rt).filter(e=>e.rel===`stylesheet`||e.rel===`preload`).map(e=>e.rel===`stylesheet`?{...e,rel:`prefetch`,as:`style`}:{...e,rel:`prefetch`}))}function Bt(e,t,n,r,i,a){let o=(e,t)=>n[t]?e.route.id!==n[t].route.id:!0,s=(e,t)=>n[t].pathname!==e.pathname||n[t].route.path?.endsWith(`*`)&&n[t].params[`*`]!==e.params[`*`];return a===`assets`?t.filter((e,t)=>o(e,t)||s(e,t)):a===`data`?t.filter((t,a)=>{let c=r.routes[t.route.id];if(!c||!c.hasLoader)return!1;if(o(t,a)||s(t,a))return!0;if(t.route.shouldRevalidate){let r=t.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:n[0]?.params||{},nextUrl:new URL(e,window.origin),nextParams:t.params,defaultShouldRevalidate:!0});if(typeof r==`boolean`)return r}return!0}):[]}function Vt(e,t,{includeHydrateFallback:n}={}){return Ht(e.map(e=>{let r=t.routes[e.route.id];if(!r)return[];let i=[r.module];return r.clientActionModule&&(i=i.concat(r.clientActionModule)),r.clientLoaderModule&&(i=i.concat(r.clientLoaderModule)),n&&r.hydrateFallbackModule&&(i=i.concat(r.hydrateFallbackModule)),r.imports&&(i=i.concat(r.imports)),i}).flat(1))}function Ht(e){return[...new Set(e)]}function Ut(e){let t={},n=Object.keys(e).sort();for(let r of n)t[r]=e[r];return t}function Wt(e,t){let n=new Set,r=new Set(t);return e.reduce((e,i)=>{if(t&&!Lt(i)&&i.as===`script`&&i.href&&r.has(i.href))return e;let a=JSON.stringify(Ut(i));return n.has(a)||(n.add(a),e.push({key:a,link:i})),e},[])}function Gt(){let e=_.useContext(je);return Pt(e,`You must render this element inside a <DataRouterContext.Provider> element`),e}function Kt(){let e=_.useContext(Me);return Pt(e,`You must render this element inside a <DataRouterStateContext.Provider> element`),e}var qt=_.createContext(void 0);qt.displayName=`FrameworkContext`;function Jt(){let e=_.useContext(qt);return Pt(e,`You must render this element inside a <HydratedRouter> element`),e}function Yt(e,t){let n=_.useContext(qt),[r,i]=_.useState(!1),[a,o]=_.useState(!1),{onFocus:s,onBlur:c,onMouseEnter:l,onMouseLeave:u,onTouchStart:d}=t,f=_.useRef(null);_.useEffect(()=>{if(e===`render`&&o(!0),e===`viewport`){let e=new IntersectionObserver(e=>{e.forEach(e=>{o(e.isIntersecting)})},{threshold:.5});return f.current&&e.observe(f.current),()=>{e.disconnect()}}},[e]),_.useEffect(()=>{if(r){let e=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(e)}}},[r]);let p=()=>{i(!0)},m=()=>{i(!1),o(!1)};return n?e===`intent`?[a,f,{onFocus:Xt(s,p),onBlur:Xt(c,m),onMouseEnter:Xt(l,p),onMouseLeave:Xt(u,m),onTouchStart:Xt(d,p)}]:[a,f,{}]:[!1,f,{}]}function Xt(e,t){return n=>{e&&e(n),n.defaultPrevented||t(n)}}function Zt({page:e,...t}){let{router:n}=Gt(),r=_.useMemo(()=>j(n.routes,e,n.basename),[n.routes,e,n.basename]);return r?_.createElement($t,{page:e,matches:r,...t}):null}function Qt(e){let{manifest:t,routeModules:n}=Jt(),[r,i]=_.useState([]);return _.useEffect(()=>{let r=!1;return zt(e,t,n).then(e=>{r||i(e)}),()=>{r=!0}},[e,t,n]),r}function $t({page:e,matches:t,...n}){let r=He(),{manifest:i,routeModules:a}=Jt(),{basename:o}=Gt(),{loaderData:s,matches:c}=Kt(),l=_.useMemo(()=>Bt(e,t,c,i,r,`data`),[e,t,c,i,r]),u=_.useMemo(()=>Bt(e,t,c,i,r,`assets`),[e,t,c,i,r]),d=_.useMemo(()=>{if(e===r.pathname+r.search+r.hash)return[];let n=new Set,c=!1;if(t.forEach(e=>{let t=i.routes[e.route.id];!t||!t.hasLoader||(!l.some(t=>t.route.id===e.route.id)&&e.route.id in s&&a[e.route.id]?.shouldRevalidate||t.hasClientLoader?c=!0:n.add(e.route.id))}),n.size===0)return[];let u=Ft(e,o,`data`);return c&&n.size>0&&u.searchParams.set(`_routes`,t.filter(e=>n.has(e.route.id)).map(e=>e.route.id).join(`,`)),[u.pathname+u.search]},[o,s,r,i,l,t,e,a]),f=_.useMemo(()=>Vt(u,i),[u,i]),p=Qt(u);return _.createElement(_.Fragment,null,d.map(e=>_.createElement(`link`,{key:e,rel:`prefetch`,as:`fetch`,href:e,...n})),f.map(e=>_.createElement(`link`,{key:e,rel:`modulepreload`,href:e,...n})),p.map(({key:e,link:t})=>_.createElement(`link`,{key:e,nonce:n.nonce,...t})))}function en(...e){return t=>{e.forEach(e=>{typeof e==`function`?e(t):e!=null&&(e.current=t)})}}var tn=typeof window<`u`&&window.document!==void 0&&window.document.createElement!==void 0;try{tn&&(window.__reactRouterVersion=`7.9.6`)}catch{}function nn({basename:e,children:t,window:n}){let r=_.useRef();r.current??=C({window:n,v5Compat:!0});let i=r.current,[a,o]=_.useState({action:i.action,location:i.location}),s=_.useCallback(e=>{_.startTransition(()=>o(e))},[o]);return _.useLayoutEffect(()=>i.listen(s),[i,s]),_.createElement(vt,{basename:e,children:t,location:a.location,navigationType:a.action,navigator:i})}function rn({basename:e,children:t,history:n}){let[r,i]=_.useState({action:n.action,location:n.location}),a=_.useCallback(e=>{_.startTransition(()=>i(e))},[i]);return _.useLayoutEffect(()=>n.listen(a),[n,a]),_.createElement(vt,{basename:e,children:t,location:r.location,navigationType:r.action,navigator:n})}rn.displayName=`unstable_HistoryRouter`;var an=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,on=_.forwardRef(function({onClick:e,discover:t=`render`,prefetch:n=`none`,relative:r,reloadDocument:i,replace:a,state:o,target:s,to:c,preventScrollReset:l,viewTransition:u,...d},f){let{basename:p}=_.useContext(Ie),m=typeof c==`string`&&an.test(c),h,g=!1;if(typeof c==`string`&&m&&(h=c,tn))try{let e=new URL(window.location.href),t=c.startsWith(`//`)?new URL(e.protocol+c):new URL(c),n=_e(t.pathname,p);t.origin===e.origin&&n!=null?c=n+t.search+t.hash:g=!0}catch{T(!1,`<Link to="${c}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let v=Be(c,{relative:r}),[y,b,x]=Yt(n,d),S=pn(c,{replace:a,state:o,target:s,preventScrollReset:l,relative:r,viewTransition:u});function C(t){e&&e(t),t.defaultPrevented||S(t)}let w=_.createElement(`a`,{...d,...x,href:h||v,onClick:g||i?e:C,ref:en(f,b),target:s,"data-discover":!m&&t===`render`?`true`:void 0});return y&&!m?_.createElement(_.Fragment,null,w,_.createElement(Zt,{page:v})):w});on.displayName=`Link`;var sn=_.forwardRef(function({"aria-current":e=`page`,caseSensitive:t=!1,className:n=``,end:r=!1,style:i,to:a,viewTransition:o,children:s,...c},l){let u=Ye(a,{relative:c.relative}),d=He(),f=_.useContext(Me),{navigator:p,basename:m}=_.useContext(Ie),h=f!=null&&Cn(u)&&o===!0,g=p.encodeLocation?p.encodeLocation(u).pathname:u.pathname,v=d.pathname,y=f&&f.navigation&&f.navigation.location?f.navigation.location.pathname:null;t||(v=v.toLowerCase(),y=y?y.toLowerCase():null,g=g.toLowerCase()),y&&m&&(y=_e(y,m)||y);let b=g!==`/`&&g.endsWith(`/`)?g.length-1:g.length,x=v===g||!r&&v.startsWith(g)&&v.charAt(b)===`/`,S=y!=null&&(y===g||!r&&y.startsWith(g)&&y.charAt(g.length)===`/`),C={isActive:x,isPending:S,isTransitioning:h},w=x?e:void 0,T;T=typeof n==`function`?n(C):[n,x?`active`:null,S?`pending`:null,h?`transitioning`:null].filter(Boolean).join(` `);let E=typeof i==`function`?i(C):i;return _.createElement(on,{...c,"aria-current":w,className:T,ref:l,style:E,to:a,viewTransition:o},typeof s==`function`?s(C):s)});sn.displayName=`NavLink`;var cn=_.forwardRef(({discover:e=`render`,fetcherKey:t,navigate:n,reloadDocument:r,replace:i,state:a,method:o=xt,action:s,onSubmit:c,relative:l,preventScrollReset:u,viewTransition:d,...f},p)=>{let m=gn(),h=_n(s,{relative:l}),g=o.toLowerCase()===`get`?`get`:`post`,v=typeof s==`string`&&an.test(s);return _.createElement(`form`,{ref:p,method:g,action:h,onSubmit:r?c:e=>{if(c&&c(e),e.defaultPrevented)return;e.preventDefault();let r=e.nativeEvent.submitter,s=r?.getAttribute(`formmethod`)||o;m(r||e.currentTarget,{fetcherKey:t,method:s,navigate:n,replace:i,state:a,relative:l,preventScrollReset:u,viewTransition:d})},...f,"data-discover":!v&&e===`render`?`true`:void 0})});cn.displayName=`Form`;function ln({getKey:e,storageKey:t,...n}){let r=_.useContext(qt),{basename:i}=_.useContext(Ie),a=He(),o=ut();xn({getKey:e,storageKey:t});let s=_.useMemo(()=>{if(!r||!e)return null;let t=bn(a,o,i,e);return t===a.key?null:t},[]);if(!r||r.isSpaMode)return null;let c=((e,t)=>{if(!window.history.state||!window.history.state.key){let e=Math.random().toString(32).slice(2);window.history.replaceState({key:e},``)}try{let n=JSON.parse(sessionStorage.getItem(e)||`{}`)[t||window.history.state.key];typeof n==`number`&&window.scrollTo(0,n)}catch(t){console.error(t),sessionStorage.removeItem(e)}}).toString();return _.createElement(`script`,{...n,suppressHydrationWarning:!0,dangerouslySetInnerHTML:{__html:`(${c})(${JSON.stringify(t||vn)}, ${JSON.stringify(s)})`}})}ln.displayName=`ScrollRestoration`;function un(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function dn(e){let t=_.useContext(je);return w(t,un(e)),t}function fn(e){let t=_.useContext(Me);return w(t,un(e)),t}function pn(e,{target:t,replace:n,state:r,preventScrollReset:i,relative:a,viewTransition:o}={}){let s=Ge(),c=He(),l=Ye(e,{relative:a});return _.useCallback(u=>{Ot(u,t)&&(u.preventDefault(),s(e,{replace:n===void 0?k(c)===k(l):n,state:r,preventScrollReset:i,relative:a,viewTransition:o}))},[c,s,l,n,r,t,e,i,a,o])}var mn=0,hn=()=>`__${String(++mn)}__`;function gn(){let{router:e}=dn(`useSubmit`),{basename:t}=_.useContext(Ie),n=ct();return _.useCallback(async(r,i={})=>{let{action:a,method:o,encType:s,formData:c,body:l}=Nt(r,t);if(i.navigate===!1){let t=i.fetcherKey||hn();await e.fetch(t,n,i.action||a,{preventScrollReset:i.preventScrollReset,formData:c,body:l,formMethod:i.method||o,formEncType:i.encType||s,flushSync:i.flushSync})}else await e.navigate(i.action||a,{preventScrollReset:i.preventScrollReset,formData:c,body:l,formMethod:i.method||o,formEncType:i.encType||s,replace:i.replace,state:i.state,fromRouteId:n,flushSync:i.flushSync,viewTransition:i.viewTransition})},[e,t,n])}function _n(e,{relative:t}={}){let{basename:n}=_.useContext(Ie),r=_.useContext(Re);w(r,`useFormAction must be used inside a RouteContext`);let[i]=r.matches.slice(-1),a={...Ye(e||`.`,{relative:t})},o=He();if(e==null){a.search=o.search;let e=new URLSearchParams(a.search),t=e.getAll(`index`);if(t.some(e=>e===``)){e.delete(`index`),t.filter(e=>e).forEach(t=>e.append(`index`,t));let n=e.toString();a.search=n?`?${n}`:``}}return(!e||e===`.`)&&i.route.index&&(a.search=a.search?a.search.replace(/^\?/,`?index&`):`?index`),n!==`/`&&(a.pathname=a.pathname===`/`?n:Ee([n,a.pathname])),k(a)}var vn=`react-router-scroll-positions`,yn={};function bn(e,t,n,r){let i=null;return r&&(i=r(n===`/`?e:{...e,pathname:_e(e.pathname,n)||e.pathname},t)),i??=e.key,i}function xn({getKey:e,storageKey:t}={}){let{router:n}=dn(`useScrollRestoration`),{restoreScrollPosition:r,preventScrollReset:i}=fn(`useScrollRestoration`),{basename:a}=_.useContext(Ie),o=He(),s=ut(),c=lt();_.useEffect(()=>(window.history.scrollRestoration=`manual`,()=>{window.history.scrollRestoration=`auto`}),[]),Sn(_.useCallback(()=>{if(c.state===`idle`){let t=bn(o,s,a,e);yn[t]=window.scrollY}try{sessionStorage.setItem(t||vn,JSON.stringify(yn))}catch(e){T(!1,`Failed to save scroll positions in sessionStorage, <ScrollRestoration /> will not work properly (${e}).`)}window.history.scrollRestoration=`auto`},[c.state,e,a,o,s,t])),typeof document<`u`&&(_.useLayoutEffect(()=>{try{let e=sessionStorage.getItem(t||vn);e&&(yn=JSON.parse(e))}catch{}},[t]),_.useLayoutEffect(()=>{let t=n?.enableScrollRestoration(yn,()=>window.scrollY,e?(t,n)=>bn(t,n,a,e):void 0);return()=>t&&t()},[n,a,e]),_.useLayoutEffect(()=>{if(r!==!1){if(typeof r==`number`){window.scrollTo(0,r);return}try{if(o.hash){let e=document.getElementById(decodeURIComponent(o.hash.slice(1)));if(e){e.scrollIntoView();return}}}catch{T(!1,`"${o.hash.slice(1)}" is not a decodable element ID. The view will not scroll to it.`)}i!==!0&&window.scrollTo(0,0)}},[o,r,i]))}function Sn(e,t){let{capture:n}=t||{};_.useEffect(()=>{let t=n==null?void 0:{capture:n};return window.addEventListener(`pagehide`,e,t),()=>{window.removeEventListener(`pagehide`,e,t)}},[e,n])}function Cn(e,{relative:t}={}){let n=_.useContext(Ne);w(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=dn(`useViewTransitionState`),i=Ye(e,{relative:t});if(!n.isTransitioning)return!1;let a=_e(n.currentLocation.pathname,r)||n.currentLocation.pathname,o=_e(n.nextLocation.pathname,r)||n.nextLocation.pathname;return me(i.pathname,o)!=null||me(i.pathname,a)!=null}var wn=o((e=>{var t=Symbol.for(`react.transitional.element`),n=Symbol.for(`react.fragment`);function r(e,n,r){var i=null;if(r!==void 0&&(i=``+r),n.key!==void 0&&(i=``+n.key),`key`in n)for(var a in r={},n)a!==`key`&&(r[a]=n[a]);else r=n;return n=r.ref,{$$typeof:t,type:e,key:i,ref:n===void 0?null:n,props:r}}e.Fragment=n,e.jsx=r,e.jsxs=r})),F=o(((e,t)=>{t.exports=wn()}))();const Tn=({className:e})=>(0,F.jsxs)(`svg`,{viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,strokeWidth:`2`,className:e,children:[(0,F.jsx)(`rect`,{x:`3`,y:`3`,width:`7`,height:`7`}),(0,F.jsx)(`rect`,{x:`14`,y:`3`,width:`7`,height:`7`}),(0,F.jsx)(`rect`,{x:`14`,y:`14`,width:`7`,height:`7`}),(0,F.jsx)(`rect`,{x:`3`,y:`14`,width:`7`,height:`7`})]}),En=({className:e})=>(0,F.jsxs)(`svg`,{viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,strokeWidth:`2`,strokeLinecap:`round`,strokeLinejoin:`round`,className:e,children:[(0,F.jsx)(`circle`,{cx:`9`,cy:`21`,r:`1`}),(0,F.jsx)(`circle`,{cx:`20`,cy:`21`,r:`1`}),(0,F.jsx)(`path`,{d:`M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6`})]}),Dn=({className:e})=>(0,F.jsxs)(`svg`,{viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,strokeWidth:`2`,strokeLinecap:`round`,strokeLinejoin:`round`,className:e,children:[(0,F.jsx)(`path`,{d:`M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z`}),(0,F.jsx)(`polyline`,{points:`14 2 14 8 20 8`}),(0,F.jsx)(`line`,{x1:`12`,y1:`18`,x2:`12`,y2:`12`}),(0,F.jsx)(`line`,{x1:`9`,y1:`15`,x2:`15`,y2:`15`})]}),On=({className:e})=>(0,F.jsxs)(`svg`,{viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,strokeWidth:`2`,strokeLinecap:`round`,strokeLinejoin:`round`,className:e,children:[(0,F.jsx)(`path`,{d:`M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z`}),(0,F.jsx)(`polyline`,{points:`3.27 6.96 12 12.01 20.73 6.96`}),(0,F.jsx)(`line`,{x1:`12`,y1:`22.08`,x2:`12`,y2:`12`})]}),kn=({className:e})=>(0,F.jsx)(`svg`,{viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,strokeWidth:`2`,strokeLinecap:`round`,strokeLinejoin:`round`,className:e,children:(0,F.jsx)(`polyline`,{points:`6 9 12 15 18 9`})}),An=({className:e})=>(0,F.jsxs)(`svg`,{viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,strokeWidth:`2`,strokeLinecap:`round`,strokeLinejoin:`round`,className:e,children:[(0,F.jsx)(`circle`,{cx:`11`,cy:`11`,r:`8`}),(0,F.jsx)(`line`,{x1:`21`,y1:`21`,x2:`16.65`,y2:`16.65`})]}),jn=({className:e})=>(0,F.jsxs)(`svg`,{viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,strokeWidth:`2`,strokeLinecap:`round`,strokeLinejoin:`round`,className:e,children:[(0,F.jsx)(`path`,{d:`M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9`}),(0,F.jsx)(`path`,{d:`M13.73 21a2 2 0 0 1-3.46 0`})]}),Mn=({className:e})=>(0,F.jsxs)(`svg`,{viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,strokeWidth:`2`,strokeLinecap:`round`,strokeLinejoin:`round`,className:e,children:[(0,F.jsx)(`circle`,{cx:`12`,cy:`12`,r:`3`}),(0,F.jsx)(`path`,{d:`M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z`})]}),Nn=({className:e})=>(0,F.jsxs)(`svg`,{viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,strokeWidth:`2`,strokeLinecap:`round`,strokeLinejoin:`round`,className:e,children:[(0,F.jsx)(`line`,{x1:`4`,y1:`21`,x2:`4`,y2:`14`}),(0,F.jsx)(`line`,{x1:`4`,y1:`10`,x2:`4`,y2:`3`}),(0,F.jsx)(`line`,{x1:`12`,y1:`21`,x2:`12`,y2:`12`}),(0,F.jsx)(`line`,{x1:`12`,y1:`8`,x2:`12`,y2:`3`}),(0,F.jsx)(`line`,{x1:`20`,y1:`21`,x2:`20`,y2:`16`}),(0,F.jsx)(`line`,{x1:`20`,y1:`12`,x2:`20`,y2:`3`}),(0,F.jsx)(`line`,{x1:`1`,y1:`14`,x2:`7`,y2:`14`}),(0,F.jsx)(`line`,{x1:`9`,y1:`8`,x2:`15`,y2:`8`}),(0,F.jsx)(`line`,{x1:`17`,y1:`16`,x2:`23`,y2:`16`})]}),Pn=({className:e})=>(0,F.jsxs)(`svg`,{viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,strokeWidth:`2`,strokeLinecap:`round`,strokeLinejoin:`round`,className:e,children:[(0,F.jsx)(`path`,{d:`M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4`}),(0,F.jsx)(`polyline`,{points:`16 17 21 12 16 7`}),(0,F.jsx)(`line`,{x1:`21`,y1:`12`,x2:`9`,y2:`12`})]}),Fn=({className:e})=>(0,F.jsxs)(`svg`,{viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,strokeWidth:`2`,strokeLinecap:`round`,strokeLinejoin:`round`,className:e,children:[(0,F.jsx)(`line`,{x1:`18`,y1:`20`,x2:`18`,y2:`10`}),(0,F.jsx)(`line`,{x1:`12`,y1:`20`,x2:`12`,y2:`4`}),(0,F.jsx)(`line`,{x1:`6`,y1:`20`,x2:`6`,y2:`14`})]}),In=({className:e})=>(0,F.jsxs)(`svg`,{viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,strokeWidth:`1.5`,strokeLinecap:`round`,strokeLinejoin:`round`,className:e,children:[(0,F.jsx)(`path`,{d:`M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2`}),(0,F.jsx)(`circle`,{cx:`12`,cy:`7`,r:`4`})]}),Ln=({className:e})=>(0,F.jsx)(`svg`,{viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,strokeWidth:`1.5`,strokeLinecap:`round`,strokeLinejoin:`round`,className:e,children:(0,F.jsx)(`path`,{d:`M21 2l-2 2m-7.61 7.61a5.5 5.5 0 1 1-7.778 7.778 5.5 5.5 0 0 1 7.777-7.777zm0 0L15.5 7.5m0 0l3 3L22 7l-3-3m-3.5 3.5L19 4`})}),Rn=({className:e})=>(0,F.jsxs)(`svg`,{viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,strokeWidth:`1.5`,strokeLinecap:`round`,strokeLinejoin:`round`,className:e,children:[(0,F.jsx)(`path`,{d:`M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z`}),(0,F.jsx)(`circle`,{cx:`12`,cy:`12`,r:`3`})]}),zn=({className:e})=>(0,F.jsxs)(`svg`,{viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,strokeWidth:`1.5`,strokeLinecap:`round`,strokeLinejoin:`round`,className:e,children:[(0,F.jsx)(`path`,{d:`M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24`}),(0,F.jsx)(`line`,{x1:`1`,y1:`1`,x2:`23`,y2:`23`})]});var Bn=`/TTP_IML_1/assets/TerraTechPacks-D61LrZcf.png`,Vn=({isOpen:e,children:t})=>{let n=(0,_.useRef)(null),[r,i]=(0,_.useState)(`0px`);return(0,_.useEffect)(()=>{if(e){let e=setTimeout(()=>{n.current&&i(`${n.current.scrollHeight}px`)},50);return()=>clearTimeout(e)}else i(`0px`)},[e]),(0,F.jsx)(`div`,{ref:n,style:{height:r,overflow:`hidden`},className:`transition-all duration-300 ease-in-out`,children:(0,F.jsx)(`div`,{className:`py-[0.15vw] space-y-[0.2vw]`,children:t})})},Hn=({icon:e,text:t,isActive:n,hasSub:r,onClick:i})=>(0,F.jsx)(`div`,{className:`
                flex items-center gap-[0.7vw] w-full px-[1.2vw] py-[0.8vw] rounded-[0.4vw] cursor-pointer transition-all 
                ${n?`bg-[#22d3ee] shadow-lg text-white font-medium`:`hover:bg-white/10 text-white/90`}
            `,onClick:i,children:(0,F.jsxs)(`div`,{className:`flex items-center justify-between w-full`,children:[(0,F.jsxs)(`div`,{className:`flex items-center gap-[0.7vw]`,children:[(0,F.jsx)(e,{className:`w-[1.2vw] h-[1.2vw] min-w-[1.2vw]`}),(0,F.jsx)(`span`,{className:`text-[.85vw]`,children:t})]}),r&&(0,F.jsx)(kn,{className:`w-[0.9vw] h-[0.9vw] transition-transform ${n?`rotate-180`:``}`})]})}),Un=({text:e,icon:t,isSelected:n})=>(0,F.jsx)(`div`,{className:`px-[0vw] mt-[0.1vw]`,children:(0,F.jsxs)(`div`,{className:`flex items-center gap-[0.7vw] w-full px-[1.2vw] py-[0.8vw] rounded-[0.4vw] cursor-pointer transition-colors text-[.85vw]
                ${n?`bg-blue-600 text-white font-semibold`:`text-white/80 hover:bg-white/10 hover:text-white`}
            `,children:[(0,F.jsx)(t,{className:`w-[1.2vw] h-[1.2vw] min-w-[1.2vw]`}),(0,F.jsx)(`span`,{children:e})]})}),Wn=()=>{let[e,t]=(0,_.useState)(null),n=He().pathname,r=n.startsWith(`/iml`),i=n.startsWith(`/screen`),a=n===`/iml/new-order`,o=n===`/iml/purchaseManagement`||n===`/iml/purchase-details`,s=n===`/iml/productionManagement`||n===`/iml/production-details`,c=n===`/iml/inventoryManagement`||n===`/iml/inventory-details`,l=n===`/reports`;(0,_.useEffect)(()=>{t(r?`orders`:i?`screenPrinting`:null)},[n]);let u=n=>{t(e===n?null:n)},d=t=>`
            transition-all duration-300 ease-in-out px-[0.5vw]
            ${e===t?`border-[0.1vw] border-white/30 bg-white/5 rounded-[0.8vw] px-[0vw] my-[0.5vw] mx-[0.5vw]`:`border-transparent py-[0.2vw]`}
        `;return(0,F.jsxs)(`aside`,{className:`w-[15%] left-0 top-0 h-screen text-white flex flex-col overflow-y-auto z-50 shadow-2xl`,style:{backgroundImage:`linear-gradient(to bottom, #2638A0 60%, #2485B8 100%)`},children:[(0,F.jsx)(`div`,{className:`h-[5vw] flex items-center px-[1.5vw] border-b border-white/10 justify-center`,children:(0,F.jsx)(`div`,{className:`h-[5vw] flex items-center`,children:(0,F.jsx)(`img`,{src:Bn,alt:`TerraTech Packs Logo`,className:`w-[9.5vw] `})})}),(0,F.jsxs)(`nav`,{className:`flex-1 py-[1.5vw] flex flex-col gap-[0.25vw]`,children:[(0,F.jsx)(`div`,{className:`px-[0.5vw]`,children:(0,F.jsx)(Hn,{icon:Tn,text:`Overview`,isActive:!1,onClick:()=>{}})}),(0,F.jsxs)(`div`,{className:d(`orders`),children:[(0,F.jsx)(Hn,{icon:En,text:`IML / Orders`,hasSub:!0,isActive:r,onClick:()=>u(`orders`)}),(0,F.jsxs)(Vn,{isOpen:e===`orders`,children:[(0,F.jsx)(on,{to:`/iml/new-order`,children:(0,F.jsx)(Un,{text:`New order`,icon:Dn,isSelected:a})}),(0,F.jsx)(on,{to:`/iml/purchaseManagement`,children:(0,F.jsx)(Un,{text:`Purchase`,icon:On,isSelected:o})}),(0,F.jsx)(on,{to:`/iml/productionManagement`,children:(0,F.jsx)(Un,{text:`Production`,icon:Mn,isSelected:s})}),(0,F.jsx)(on,{to:`/iml/inventoryManagement`,children:(0,F.jsx)(Un,{text:`Inventory`,icon:On,isSelected:c})}),(0,F.jsx)(Un,{text:`Billings & Dispatch`,icon:Tn,isSelected:!1})]})]}),(0,F.jsxs)(`div`,{className:d(`screenPrinting`),children:[(0,F.jsx)(Hn,{icon:Mn,text:`Screen Printing`,hasSub:!0,isActive:i,onClick:()=>u(`screenPrinting`)}),(0,F.jsxs)(Vn,{isOpen:e===`screenPrinting`,children:[(0,F.jsx)(Un,{text:`New order`,icon:Dn,isSelected:!1}),(0,F.jsx)(Un,{text:`Stocks check`,icon:On,isSelected:!1}),(0,F.jsx)(Un,{text:`Billings & Dispatch`,icon:Tn,isSelected:!1})]})]}),(0,F.jsx)(`div`,{className:`px-[0.5vw]`,children:(0,F.jsx)(on,{to:`/reports`,children:(0,F.jsx)(Hn,{icon:Fn,text:`Reports`,isActive:l,onClick:()=>{}})})})]}),(0,F.jsxs)(`div`,{className:`p-[1.5vw] border-t border-white/10 flex items-center gap-[1vw] bg-black/10`,children:[(0,F.jsx)(`div`,{className:`w-[3vw] h-[3vw] rounded-full bg-gray-300 border-[0.15vw] border-white overflow-hidden shadow-md`,children:(0,F.jsx)(`img`,{src:`https://i.pravatar.cc/150?img=12`,alt:`User`,className:`w-full h-full object-cover`})}),(0,F.jsxs)(`div`,{children:[(0,F.jsx)(`div`,{className:`text-[.95vw] font-semibold`,children:`User Name`}),(0,F.jsx)(`div`,{className:`text-[0.8vw] opacity-70`,children:`Admin`})]})]})]})},Gn=()=>(0,F.jsxs)(`header`,{className:`h-[5vw] min-h-[5vw] bg-white shadow-sm flex items-center justify-between px-[2vw] sticky top-0 z-40 border-b border-gray-100`,children:[(0,F.jsxs)(`div`,{className:`relative w-[35vw] opacity-0 pointer-events-none`,children:[(0,F.jsx)(`div`,{className:`absolute left-[1vw] top-1/2 -translate-y-1/2 text-gray-400`,children:(0,F.jsx)(An,{className:`w-[1.1vw] h-[1.1vw]`})}),(0,F.jsx)(`input`,{type:`text`,placeholder:`Search company name, orders id`,className:`w-full bg-[#f1f5f9] rounded-full pl-[2.8vw] pr-[2.5vw] py-[0.7vw] text-[1vw] focus:outline-none focus:ring-[0.1vw] focus:ring-[#22d3ee] placeholder-gray-400 font-medium transition-all`}),(0,F.jsx)(`div`,{className:`absolute right-[1vw] top-1/2 -translate-y-1/2 text-gray-400 cursor-pointer hover:text-gray-600 transition-colors`,children:(0,F.jsx)(Nn,{className:`w-[1.1vw] h-[1.1vw]`})})]}),(0,F.jsxs)(`div`,{className:`flex items-center gap-[1.5vw] text-gray-500`,children:[(0,F.jsxs)(`div`,{className:`relative p-2 rounded-full hover:bg-gray-100 cursor-pointer hover:text-[#1a3594] transition-colors`,children:[(0,F.jsx)(jn,{className:`w-[1.3vw] h-[1.3vw]`}),(0,F.jsx)(`span`,{className:`absolute top-1 right-1 w-[0.7vw] h-[0.7vw] bg-red-500 rounded-full border-[0.15vw] border-white`})]}),(0,F.jsx)(`div`,{className:`p-2 rounded-full hover:bg-gray-100 cursor-pointer hover:text-[#1a3594] transition-colors`,children:(0,F.jsx)(Mn,{className:`w-[1.3vw] h-[1.3vw]`})}),(0,F.jsx)(`div`,{className:`flex items-center gap-[0.5vw] cursor-pointer hover:text-red-500 rounded-lg transition-colors`,children:(0,F.jsxs)(on,{to:`/login`,className:`flex align-center justify-center gap-[.5vw]`,children:[(0,F.jsx)(Pn,{className:`w-[1.3vw] h-[1.3vw]`}),(0,F.jsx)(`span`,{className:`text-[1vw] font-medium hidden sm:block`,children:`Logout`})]})})]})]}),Kn=()=>(0,F.jsxs)(`div`,{className:`flex h-[100vh] w-[100%] bg-[#F1F5F9] font-sans`,children:[(0,F.jsx)(Wn,{}),(0,F.jsxs)(`div`,{className:`w-[85%] flex-1 flex flex-col`,children:[(0,F.jsx)(Gn,{}),(0,F.jsx)(`main`,{id:`mainContent`,className:`p-[1vw] overflow-hidden`,children:(0,F.jsx)(gt,{})})]})]});function qn(){return(qn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Jn(e,t){if(e==null)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)t.indexOf(n=a[r])>=0||(i[n]=e[n]);return i}function Yn(e){var t=(0,_.useRef)(e),n=(0,_.useRef)(function(e){t.current&&t.current(e)});return t.current=e,n.current}var Xn=function(e,t,n){return t===void 0&&(t=0),n===void 0&&(n=1),e>n?n:e<t?t:e},Zn=function(e){return`touches`in e},Qn=function(e){return e&&e.ownerDocument.defaultView||self},$n=function(e,t,n){var r=e.getBoundingClientRect(),i=Zn(t)?function(e,t){for(var n=0;n<e.length;n++)if(e[n].identifier===t)return e[n];return e[0]}(t.touches,n):t;return{left:Xn((i.pageX-(r.left+Qn(e).pageXOffset))/r.width),top:Xn((i.pageY-(r.top+Qn(e).pageYOffset))/r.height)}},er=function(e){!Zn(e)&&e.preventDefault()},tr=_.memo(function(e){var t=e.onMove,n=e.onKey,r=Jn(e,[`onMove`,`onKey`]),i=(0,_.useRef)(null),a=Yn(t),o=Yn(n),s=(0,_.useRef)(null),c=(0,_.useRef)(!1),l=(0,_.useMemo)(function(){var e=function(e){er(e),(Zn(e)?e.touches.length>0:e.buttons>0)&&i.current?a($n(i.current,e,s.current)):n(!1)},t=function(){return n(!1)};function n(n){var r=c.current,a=Qn(i.current),o=n?a.addEventListener:a.removeEventListener;o(r?`touchmove`:`mousemove`,e),o(r?`touchend`:`mouseup`,t)}return[function(e){var t=e.nativeEvent,r=i.current;if(r&&(er(t),!function(e,t){return t&&!Zn(e)}(t,c.current)&&r)){if(Zn(t)){c.current=!0;var o=t.changedTouches||[];o.length&&(s.current=o[0].identifier)}r.focus(),a($n(r,t,s.current)),n(!0)}},function(e){var t=e.which||e.keyCode;t<37||t>40||(e.preventDefault(),o({left:t===39?.05:t===37?-.05:0,top:t===40?.05:t===38?-.05:0}))},n]},[o,a]),u=l[0],d=l[1],f=l[2];return(0,_.useEffect)(function(){return f},[f]),_.createElement(`div`,qn({},r,{onTouchStart:u,onMouseDown:u,className:`react-colorful__interactive`,ref:i,onKeyDown:d,tabIndex:0,role:`slider`}))}),nr=function(e){return e.filter(Boolean).join(` `)},rr=function(e){var t=e.color,n=e.left,r=e.top,i=r===void 0?.5:r,a=nr([`react-colorful__pointer`,e.className]);return _.createElement(`div`,{className:a,style:{top:100*i+`%`,left:100*n+`%`}},_.createElement(`div`,{className:`react-colorful__pointer-fill`,style:{backgroundColor:t}}))},ir=function(e,t,n){return t===void 0&&(t=0),n===void 0&&(n=10**t),Math.round(n*e)/n};360/(2*Math.PI);var ar=function(e){var t=e.s,n=e.v,r=e.a,i=(200-t)*n/100;return{h:ir(e.h),s:ir(i>0&&i<200?t*n/100/(i<=100?i:200-i)*100:0),l:ir(i/2),a:ir(r,2)}},or=function(e){var t=ar(e);return`hsl(`+t.h+`, `+t.s+`%, `+t.l+`%)`},sr=function(e){var t=ar(e);return`hsla(`+t.h+`, `+t.s+`%, `+t.l+`%, `+t.a+`)`},cr=function(e){var t=e.h,n=e.s,r=e.v,i=e.a;t=t/360*6,n/=100,r/=100;var a=Math.floor(t),o=r*(1-n),s=r*(1-(t-a)*n),c=r*(1-(1-t+a)*n),l=a%6;return{r:ir(255*[r,s,o,o,c,r][l]),g:ir(255*[c,r,r,s,o,o][l]),b:ir(255*[o,o,c,r,r,s][l]),a:ir(i,2)}},lr=function(e){var t=e.r,n=e.g,r=e.b,i=e.a,a=Math.max(t,n,r),o=a-Math.min(t,n,r),s=o?a===t?(n-r)/o:a===n?2+(r-t)/o:4+(t-n)/o:0;return{h:ir(60*(s<0?s+6:s)),s:ir(a?o/a*100:0),v:ir(a/255*100),a:i}},ur=_.memo(function(e){var t=e.hue,n=e.onChange,r=nr([`react-colorful__hue`,e.className]);return _.createElement(`div`,{className:r},_.createElement(tr,{onMove:function(e){n({h:360*e.left})},onKey:function(e){n({h:Xn(t+360*e.left,0,360)})},"aria-label":`Hue`,"aria-valuenow":ir(t),"aria-valuemax":`360`,"aria-valuemin":`0`},_.createElement(rr,{className:`react-colorful__hue-pointer`,left:t/360,color:or({h:t,s:100,v:100,a:1})})))}),dr=_.memo(function(e){var t=e.hsva,n=e.onChange,r={backgroundColor:or({h:t.h,s:100,v:100,a:1})};return _.createElement(`div`,{className:`react-colorful__saturation`,style:r},_.createElement(tr,{onMove:function(e){n({s:100*e.left,v:100-100*e.top})},onKey:function(e){n({s:Xn(t.s+100*e.left,0,100),v:Xn(t.v-100*e.top,0,100)})},"aria-label":`Color`,"aria-valuetext":`Saturation `+ir(t.s)+`%, Brightness `+ir(t.v)+`%`},_.createElement(rr,{className:`react-colorful__saturation-pointer`,top:1-t.v/100,left:t.s/100,color:or(t)})))}),fr=function(e,t){if(e===t)return!0;for(var n in e)if(e[n]!==t[n])return!1;return!0};function pr(e,t,n){var r=Yn(n),i=(0,_.useState)(function(){return e.toHsva(t)}),a=i[0],o=i[1],s=(0,_.useRef)({color:t,hsva:a});return(0,_.useEffect)(function(){if(!e.equal(t,s.current.color)){var n=e.toHsva(t);s.current={hsva:n,color:t},o(n)}},[t,e]),(0,_.useEffect)(function(){var t;fr(a,s.current.hsva)||e.equal(t=e.fromHsva(a),s.current.color)||(s.current={hsva:a,color:t},r(t))},[a,e,r]),[a,(0,_.useCallback)(function(e){o(function(t){return Object.assign({},t,e)})},[])]}var mr,hr=typeof window<`u`?_.useLayoutEffect:_.useEffect,gr=function(){return mr||(typeof __webpack_nonce__<`u`?__webpack_nonce__:void 0)},_r=new Map,vr=function(e){hr(function(){var t=e.current?e.current.ownerDocument:document;if(t!==void 0&&!_r.has(t)){var n=t.createElement(`style`);n.innerHTML=`.react-colorful{position:relative;display:flex;flex-direction:column;width:200px;height:200px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:default}.react-colorful__saturation{position:relative;flex-grow:1;border-color:transparent;border-bottom:12px solid #000;border-radius:8px 8px 0 0;background-image:linear-gradient(0deg,#000,transparent),linear-gradient(90deg,#fff,hsla(0,0%,100%,0))}.react-colorful__alpha-gradient,.react-colorful__pointer-fill{content:"";position:absolute;left:0;top:0;right:0;bottom:0;pointer-events:none;border-radius:inherit}.react-colorful__alpha-gradient,.react-colorful__saturation{box-shadow:inset 0 0 0 1px rgba(0,0,0,.05)}.react-colorful__alpha,.react-colorful__hue{position:relative;height:24px}.react-colorful__hue{background:linear-gradient(90deg,red 0,#ff0 17%,#0f0 33%,#0ff 50%,#00f 67%,#f0f 83%,red)}.react-colorful__last-control{border-radius:0 0 8px 8px}.react-colorful__interactive{position:absolute;left:0;top:0;right:0;bottom:0;border-radius:inherit;outline:none;touch-action:none}.react-colorful__pointer{position:absolute;z-index:1;box-sizing:border-box;width:28px;height:28px;transform:translate(-50%,-50%);background-color:#fff;border:2px solid #fff;border-radius:50%;box-shadow:0 2px 4px rgba(0,0,0,.2)}.react-colorful__interactive:focus .react-colorful__pointer{transform:translate(-50%,-50%) scale(1.1)}.react-colorful__alpha,.react-colorful__alpha-pointer{background-color:#fff;background-image:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill-opacity=".05"><path d="M8 0h8v8H8zM0 8h8v8H0z"/></svg>')}.react-colorful__saturation-pointer{z-index:3}.react-colorful__hue-pointer{z-index:2}`,_r.set(t,n);var r=gr();r&&n.setAttribute(`nonce`,r),t.head.appendChild(n)}},[])},yr=function(e){var t=e.className,n=e.hsva,r=e.onChange,i={backgroundImage:`linear-gradient(90deg, `+sr(Object.assign({},n,{a:0}))+`, `+sr(Object.assign({},n,{a:1}))+`)`},a=nr([`react-colorful__alpha`,t]),o=ir(100*n.a);return _.createElement(`div`,{className:a},_.createElement(`div`,{className:`react-colorful__alpha-gradient`,style:i}),_.createElement(tr,{onMove:function(e){r({a:e.left})},onKey:function(e){r({a:Xn(n.a+e.left)})},"aria-label":`Alpha`,"aria-valuetext":o+`%`,"aria-valuenow":o,"aria-valuemin":`0`,"aria-valuemax":`100`},_.createElement(rr,{className:`react-colorful__alpha-pointer`,left:n.a,color:sr(n)})))},br=function(e){var t=e.className,n=e.colorModel,r=e.color,i=r===void 0?n.defaultColor:r,a=e.onChange,o=Jn(e,[`className`,`colorModel`,`color`,`onChange`]),s=(0,_.useRef)(null);vr(s);var c=pr(n,i,a),l=c[0],u=c[1],d=nr([`react-colorful`,t]);return _.createElement(`div`,qn({},o,{ref:s,className:d}),_.createElement(dr,{hsva:l,onChange:u}),_.createElement(ur,{hue:l.h,onChange:u}),_.createElement(yr,{hsva:l,onChange:u,className:`react-colorful__last-control`}))},xr={defaultColor:{r:0,g:0,b:0,a:1},toHsva:lr,fromHsva:cr,equal:fr},Sr=function(e){return _.createElement(br,qn({},e,{colorModel:xr}))},Cr={};Cr.d=(e,t)=>{for(var n in t)Cr.o(t,n)&&!Cr.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},Cr.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var wr=typeof process==`object`&&process+``==`[object process]`&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!==`browser`),Tr=[.001,0,0,.001,0,0],Er=1.35;.35/Er;var Dr={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},Or={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},kr=`pdfjs_internal_editor_`,I={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15,POPUP:16,SIGNATURE:101,COMMENT:102},L={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_THICKNESS:32,HIGHLIGHT_FREE:33,HIGHLIGHT_SHOW_ALL:34,DRAW_STEP:41},Ar={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},jr={TRIANGLES:1,LATTICE:2,PATCH:3},Mr={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},Nr={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},Pr={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},Fr={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},Ir={ERRORS:0,WARNINGS:1,INFOS:5},Lr={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93,rawFillPath:94},Rr={moveTo:0,lineTo:1,curveTo:2,quadraticCurveTo:3,closePath:4},zr={NEED_PASSWORD:1,INCORRECT_PASSWORD:2},Br=Ir.WARNINGS;function Vr(e){Number.isInteger(e)&&(Br=e)}function Hr(){return Br}function Ur(e){Br>=Ir.INFOS&&console.info(`Info: ${e}`)}function R(e){Br>=Ir.WARNINGS&&console.warn(`Warning: ${e}`)}function Wr(e){throw Error(e)}function z(e,t){e||Wr(t)}function Gr(e){switch(e?.protocol){case`http:`:case`https:`:case`ftp:`:case`mailto:`:case`tel:`:return!0;default:return!1}}function Kr(e,t=null,n=null){if(!e)return null;if(n&&typeof e==`string`&&(n.addDefaultProtocol&&e.startsWith(`www.`)&&e.match(/\./g)?.length>=2&&(e=`http://${e}`),n.tryConvertEncoding))try{e=si(e)}catch{}let r=t?URL.parse(e,t):URL.parse(e);return Gr(r)?r:null}function qr(e,t,n=!1){let r=URL.parse(e);return r?(r.hash=t,r.href):n&&Kr(e,`http://example.com`)?e.split(`#`,1)[0]+`${t?`#${t}`:``}`:``}function B(e,t,n,r=!1){return Object.defineProperty(e,t,{value:n,enumerable:!r,configurable:!0,writable:!1}),n}var Jr=function(){function e(e,t){this.message=e,this.name=t}return e.prototype=Error(),e.constructor=e,e}(),Yr=class extends Jr{constructor(e,t){super(e,`PasswordException`),this.code=t}},Xr=class extends Jr{constructor(e,t){super(e,`UnknownErrorException`),this.details=t}},Zr=class extends Jr{constructor(e){super(e,`InvalidPDFException`)}},Qr=class extends Jr{constructor(e,t,n){super(e,`ResponseException`),this.status=t,this.missing=n}},$r=class extends Jr{constructor(e){super(e,`FormatError`)}},ei=class extends Jr{constructor(e){super(e,`AbortException`)}};function ti(e){(typeof e!=`object`||e?.length===void 0)&&Wr(`Invalid argument for bytesToString`);let t=e.length,n=8192;if(t<n)return String.fromCharCode.apply(null,e);let r=[];for(let i=0;i<t;i+=n){let a=Math.min(i+n,t),o=e.subarray(i,a);r.push(String.fromCharCode.apply(null,o))}return r.join(``)}function ni(e){typeof e!=`string`&&Wr(`Invalid argument for stringToBytes`);let t=e.length,n=new Uint8Array(t);for(let r=0;r<t;++r)n[r]=e.charCodeAt(r)&255;return n}function ri(e){return String.fromCharCode(e>>24&255,e>>16&255,e>>8&255,e&255)}function ii(){let e=new Uint8Array(4);return e[0]=1,new Uint32Array(e.buffer,0,1)[0]===1}function ai(){try{return Function(``),!0}catch{return!1}}var V=class{static get isLittleEndian(){return B(this,`isLittleEndian`,ii())}static get isEvalSupported(){return B(this,`isEvalSupported`,ai())}static get isOffscreenCanvasSupported(){return B(this,`isOffscreenCanvasSupported`,typeof OffscreenCanvas<`u`)}static get isImageDecoderSupported(){return B(this,`isImageDecoderSupported`,typeof ImageDecoder<`u`)}static get isFloat16ArraySupported(){return B(this,`isFloat16ArraySupported`,typeof Float16Array<`u`)}static get isSanitizerSupported(){return B(this,`isSanitizerSupported`,typeof Sanitizer<`u`)}static get platform(){let{platform:e,userAgent:t}=navigator;return B(this,`platform`,{isAndroid:t.includes(`Android`),isLinux:e.includes(`Linux`),isMac:e.includes(`Mac`),isWindows:e.includes(`Win`),isFirefox:t.includes(`Firefox`)})}static get isCSSRoundSupported(){return B(this,`isCSSRoundSupported`,globalThis.CSS?.supports?.(`width: round(1.5px, 1px)`))}},oi=Array.from(Array(256).keys(),e=>e.toString(16).padStart(2,`0`)),H=class{static makeHexColor(e,t,n){return`#${oi[e]}${oi[t]}${oi[n]}`}static domMatrixToTransform(e){return[e.a,e.b,e.c,e.d,e.e,e.f]}static scaleMinMax(e,t){let n;e[0]?(e[0]<0&&(n=t[0],t[0]=t[2],t[2]=n),t[0]*=e[0],t[2]*=e[0],e[3]<0&&(n=t[1],t[1]=t[3],t[3]=n),t[1]*=e[3],t[3]*=e[3]):(n=t[0],t[0]=t[1],t[1]=n,n=t[2],t[2]=t[3],t[3]=n,e[1]<0&&(n=t[1],t[1]=t[3],t[3]=n),t[1]*=e[1],t[3]*=e[1],e[2]<0&&(n=t[0],t[0]=t[2],t[2]=n),t[0]*=e[2],t[2]*=e[2]),t[0]+=e[4],t[1]+=e[5],t[2]+=e[4],t[3]+=e[5]}static transform(e,t){return[e[0]*t[0]+e[2]*t[1],e[1]*t[0]+e[3]*t[1],e[0]*t[2]+e[2]*t[3],e[1]*t[2]+e[3]*t[3],e[0]*t[4]+e[2]*t[5]+e[4],e[1]*t[4]+e[3]*t[5]+e[5]]}static multiplyByDOMMatrix(e,t){return[e[0]*t.a+e[2]*t.b,e[1]*t.a+e[3]*t.b,e[0]*t.c+e[2]*t.d,e[1]*t.c+e[3]*t.d,e[0]*t.e+e[2]*t.f+e[4],e[1]*t.e+e[3]*t.f+e[5]]}static applyTransform(e,t,n=0){let r=e[n],i=e[n+1];e[n]=r*t[0]+i*t[2]+t[4],e[n+1]=r*t[1]+i*t[3]+t[5]}static applyTransformToBezier(e,t,n=0){let r=t[0],i=t[1],a=t[2],o=t[3],s=t[4],c=t[5];for(let t=0;t<6;t+=2){let l=e[n+t],u=e[n+t+1];e[n+t]=l*r+u*a+s,e[n+t+1]=l*i+u*o+c}}static applyInverseTransform(e,t){let n=e[0],r=e[1],i=t[0]*t[3]-t[1]*t[2];e[0]=(n*t[3]-r*t[2]+t[2]*t[5]-t[4]*t[3])/i,e[1]=(-n*t[1]+r*t[0]+t[4]*t[1]-t[5]*t[0])/i}static axialAlignedBoundingBox(e,t,n){let r=t[0],i=t[1],a=t[2],o=t[3],s=t[4],c=t[5],l=e[0],u=e[1],d=e[2],f=e[3],p=r*l+s,m=p,h=r*d+s,g=h,_=o*u+c,v=_,y=o*f+c,b=y;if(i!==0||a!==0){let e=i*l,t=i*d,n=a*u,r=a*f;p+=n,g+=n,h+=r,m+=r,_+=e,b+=e,y+=t,v+=t}n[0]=Math.min(n[0],p,h,m,g),n[1]=Math.min(n[1],_,y,v,b),n[2]=Math.max(n[2],p,h,m,g),n[3]=Math.max(n[3],_,y,v,b)}static inverseTransform(e){let t=e[0]*e[3]-e[1]*e[2];return[e[3]/t,-e[1]/t,-e[2]/t,e[0]/t,(e[2]*e[5]-e[4]*e[3])/t,(e[4]*e[1]-e[5]*e[0])/t]}static singularValueDecompose2dScale(e,t){let n=e[0],r=e[1],i=e[2],a=e[3],o=n**2+r**2,s=n*i+r*a,c=i**2+a**2,l=(o+c)/2,u=Math.sqrt(l**2-(o*c-s**2));t[0]=Math.sqrt(l+u||1),t[1]=Math.sqrt(l-u||1)}static normalizeRect(e){let t=e.slice(0);return e[0]>e[2]&&(t[0]=e[2],t[2]=e[0]),e[1]>e[3]&&(t[1]=e[3],t[3]=e[1]),t}static intersect(e,t){let n=Math.max(Math.min(e[0],e[2]),Math.min(t[0],t[2])),r=Math.min(Math.max(e[0],e[2]),Math.max(t[0],t[2]));if(n>r)return null;let i=Math.max(Math.min(e[1],e[3]),Math.min(t[1],t[3])),a=Math.min(Math.max(e[1],e[3]),Math.max(t[1],t[3]));return i>a?null:[n,i,r,a]}static pointBoundingBox(e,t,n){n[0]=Math.min(n[0],e),n[1]=Math.min(n[1],t),n[2]=Math.max(n[2],e),n[3]=Math.max(n[3],t)}static rectBoundingBox(e,t,n,r,i){i[0]=Math.min(i[0],e,n),i[1]=Math.min(i[1],t,r),i[2]=Math.max(i[2],e,n),i[3]=Math.max(i[3],t,r)}static#e(e,t,n,r,i,a,o,s,c,l){if(c<=0||c>=1)return;let u=1-c,d=c*c,f=d*c,p=u*(u*(u*e+3*c*t)+3*d*n)+f*r,m=u*(u*(u*i+3*c*a)+3*d*o)+f*s;l[0]=Math.min(l[0],p),l[1]=Math.min(l[1],m),l[2]=Math.max(l[2],p),l[3]=Math.max(l[3],m)}static#t(e,t,n,r,i,a,o,s,c,l,u,d){if(Math.abs(c)<1e-12){Math.abs(l)>=1e-12&&this.#e(e,t,n,r,i,a,o,s,-u/l,d);return}let f=l**2-4*u*c;if(f<0)return;let p=Math.sqrt(f),m=2*c;this.#e(e,t,n,r,i,a,o,s,(-l+p)/m,d),this.#e(e,t,n,r,i,a,o,s,(-l-p)/m,d)}static bezierBoundingBox(e,t,n,r,i,a,o,s,c){c[0]=Math.min(c[0],e,o),c[1]=Math.min(c[1],t,s),c[2]=Math.max(c[2],e,o),c[3]=Math.max(c[3],t,s),this.#t(e,n,i,o,t,r,a,s,3*(-e+3*(n-i)+o),6*(e-2*n+i),3*(n-e),c),this.#t(e,n,i,o,t,r,a,s,3*(-t+3*(r-a)+s),6*(t-2*r+a),3*(r-t),c)}};function si(e){return decodeURIComponent(escape(e))}var ci=null,li=null;function ui(e){return ci||(ci=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,li=new Map([[``,`t`]])),e.replaceAll(ci,(e,t,n)=>t?t.normalize(`NFKC`):li.get(n))}function di(){if(typeof crypto.randomUUID==`function`)return crypto.randomUUID();let e=new Uint8Array(32);return crypto.getRandomValues(e),ti(e)}var fi=`pdfjs_internal_id_`;function pi(e,t,n){if(!Array.isArray(n)||n.length<2)return!1;let[r,i,...a]=n;if(!e(r)&&!Number.isInteger(r)||!t(i))return!1;let o=a.length,s=!0;switch(i.name){case`XYZ`:if(o<2||o>3)return!1;break;case`Fit`:case`FitB`:return o===0;case`FitH`:case`FitBH`:case`FitV`:case`FitBV`:if(o>1)return!1;break;case`FitR`:if(o!==4)return!1;s=!1;break;default:return!1}for(let e of a)if(!(typeof e==`number`||s&&e===null))return!1;return!0}function mi(e,t,n){return Math.min(Math.max(e,t),n)}function hi(e){return Uint8Array.prototype.toBase64?e.toBase64():btoa(ti(e))}function gi(e){return Uint8Array.fromBase64?Uint8Array.fromBase64(e):ni(atob(e))}typeof Promise.try!=`function`&&(Promise.try=function(e,...t){return new Promise(n=>{n(e(...t))})}),typeof Math.sumPrecise!=`function`&&(Math.sumPrecise=function(e){return e.reduce((e,t)=>e+t,0)});var _i=class e{static textContent(t){let n=[],r={items:n,styles:Object.create(null)};function i(t){if(!t)return;let r=null,a=t.name;if(a===`#text`)r=t.value;else if(e.shouldBuildText(a))t?.attributes?.textContent?r=t.attributes.textContent:t.value&&(r=t.value);else return;if(r!==null&&n.push({str:r}),t.children)for(let e of t.children)i(e)}return i(t),r}static shouldBuildText(e){return!(e===`textarea`||e===`input`||e===`option`||e===`select`)}},vi=class{static setupStorage(e,t,n,r,i){let a=r.getValue(t,{value:null});switch(n.name){case`textarea`:if(a.value!==null&&(e.textContent=a.value),i===`print`)break;e.addEventListener(`input`,e=>{r.setValue(t,{value:e.target.value})});break;case`input`:if(n.attributes.type===`radio`||n.attributes.type===`checkbox`){if(a.value===n.attributes.xfaOn?e.setAttribute(`checked`,!0):a.value===n.attributes.xfaOff&&e.removeAttribute(`checked`),i===`print`)break;e.addEventListener(`change`,e=>{r.setValue(t,{value:e.target.checked?e.target.getAttribute(`xfaOn`):e.target.getAttribute(`xfaOff`)})})}else{if(a.value!==null&&e.setAttribute(`value`,a.value),i===`print`)break;e.addEventListener(`input`,e=>{r.setValue(t,{value:e.target.value})})}break;case`select`:if(a.value!==null){e.setAttribute(`value`,a.value);for(let e of n.children)e.attributes.value===a.value?e.attributes.selected=!0:e.attributes.hasOwnProperty(`selected`)&&delete e.attributes.selected}e.addEventListener(`input`,e=>{let n=e.target.options,i=n.selectedIndex===-1?``:n[n.selectedIndex].value;r.setValue(t,{value:i})});break}}static setAttributes({html:e,element:t,storage:n=null,intent:r,linkService:i}){let{attributes:a}=t,o=e instanceof HTMLAnchorElement;a.type===`radio`&&(a.name=`${a.name}-${r}`);for(let[t,n]of Object.entries(a))if(n!=null)switch(t){case`class`:n.length&&e.setAttribute(t,n.join(` `));break;case`dataId`:break;case`id`:e.setAttribute(`data-element-id`,n);break;case`style`:Object.assign(e.style,n);break;case`textContent`:e.textContent=n;break;default:(!o||t!==`href`&&t!==`newWindow`)&&e.setAttribute(t,n)}o&&i.addLinkAttributes(e,a.href,a.newWindow),n&&a.dataId&&this.setupStorage(e,a.dataId,t,n)}static render(e){let t=e.annotationStorage,n=e.linkService,r=e.xfaHtml,i=e.intent||`display`,a=document.createElement(r.name);r.attributes&&this.setAttributes({html:a,element:r,intent:i,linkService:n});let o=i!==`richText`,s=e.div;if(s.append(a),e.viewport){let t=`matrix(${e.viewport.transform.join(`,`)})`;s.style.transform=t}o&&s.setAttribute(`class`,`xfaLayer xfaFont`);let c=[];if(r.children.length===0){if(r.value){let e=document.createTextNode(r.value);a.append(e),o&&_i.shouldBuildText(r.name)&&c.push(e)}return{textDivs:c}}let l=[[r,-1,a]];for(;l.length>0;){let[e,r,a]=l.at(-1);if(r+1===e.children.length){l.pop();continue}let s=e.children[++l.at(-1)[1]];if(s===null)continue;let{name:u}=s;if(u===`#text`){let e=document.createTextNode(s.value);c.push(e),a.append(e);continue}let d=s?.attributes?.xmlns?document.createElementNS(s.attributes.xmlns,u):document.createElement(u);if(a.append(d),s.attributes&&this.setAttributes({html:d,element:s,storage:t,intent:i,linkService:n}),s.children?.length>0)l.push([s,-1,d]);else if(s.value){let e=document.createTextNode(s.value);o&&_i.shouldBuildText(u)&&c.push(e),d.append(e)}}for(let e of s.querySelectorAll(`.xfaNonInteractive input, .xfaNonInteractive textarea`))e.setAttribute(`readOnly`,!0);return{textDivs:c}}static update(e){let t=`matrix(${e.viewport.transform.join(`,`)})`;e.div.style.transform=t,e.div.hidden=!1}},yi=`http://www.w3.org/2000/svg`,bi=class{static CSS=96;static PDF=72;static PDF_TO_CSS_UNITS=this.CSS/this.PDF};async function xi(e,t=`text`){if(ki(e,document.baseURI)){let n=await fetch(e);if(!n.ok)throw Error(n.statusText);switch(t){case`arraybuffer`:return n.arrayBuffer();case`blob`:return n.blob();case`json`:return n.json()}return n.text()}return new Promise((n,r)=>{let i=new XMLHttpRequest;i.open(`GET`,e,!0),i.responseType=t,i.onreadystatechange=()=>{if(i.readyState===XMLHttpRequest.DONE){if(i.status===200||i.status===0){switch(t){case`arraybuffer`:case`blob`:case`json`:n(i.response);return}n(i.responseText);return}r(Error(i.statusText))}},i.send(null)})}var Si=class e{constructor({viewBox:e,userUnit:t,scale:n,rotation:r,offsetX:i=0,offsetY:a=0,dontFlip:o=!1}){this.viewBox=e,this.userUnit=t,this.scale=n,this.rotation=r,this.offsetX=i,this.offsetY=a,n*=t;let s=(e[2]+e[0])/2,c=(e[3]+e[1])/2,l,u,d,f;switch(r%=360,r<0&&(r+=360),r){case 180:l=-1,u=0,d=0,f=1;break;case 90:l=0,u=1,d=1,f=0;break;case 270:l=0,u=-1,d=-1,f=0;break;case 0:l=1,u=0,d=0,f=-1;break;default:throw Error(`PageViewport: Invalid rotation, must be a multiple of 90 degrees.`)}o&&(d=-d,f=-f);let p,m,h,g;l===0?(p=Math.abs(c-e[1])*n+i,m=Math.abs(s-e[0])*n+a,h=(e[3]-e[1])*n,g=(e[2]-e[0])*n):(p=Math.abs(s-e[0])*n+i,m=Math.abs(c-e[1])*n+a,h=(e[2]-e[0])*n,g=(e[3]-e[1])*n),this.transform=[l*n,u*n,d*n,f*n,p-l*n*s-d*n*c,m-u*n*s-f*n*c],this.width=h,this.height=g}get rawDims(){let e=this.viewBox;return B(this,`rawDims`,{pageWidth:e[2]-e[0],pageHeight:e[3]-e[1],pageX:e[0],pageY:e[1]})}clone({scale:t=this.scale,rotation:n=this.rotation,offsetX:r=this.offsetX,offsetY:i=this.offsetY,dontFlip:a=!1}={}){return new e({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:t,rotation:n,offsetX:r,offsetY:i,dontFlip:a})}convertToViewportPoint(e,t){let n=[e,t];return H.applyTransform(n,this.transform),n}convertToViewportRectangle(e){let t=[e[0],e[1]];H.applyTransform(t,this.transform);let n=[e[2],e[3]];return H.applyTransform(n,this.transform),[t[0],t[1],n[0],n[1]]}convertToPdfPoint(e,t){let n=[e,t];return H.applyInverseTransform(n,this.transform),n}},Ci=class extends Jr{constructor(e,t=0){super(e,`RenderingCancelledException`),this.extraDelay=t}};function wi(e){let t=e.length,n=0;for(;n<t&&e[n].trim()===``;)n++;return e.substring(n,n+5).toLowerCase()===`data:`}function Ti(e){return typeof e==`string`&&/\.pdf$/i.test(e)}function Ei(e){return[e]=e.split(/[#?]/,1),e.substring(e.lastIndexOf(`/`)+1)}function Di(e,t=`document.pdf`){if(typeof e!=`string`)return t;if(wi(e))return R(`getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.`),t;let n=(e=>{try{return new URL(e)}catch{try{return new URL(decodeURIComponent(e))}catch{try{return new URL(e,`https://foo.bar`)}catch{try{return new URL(decodeURIComponent(e),`https://foo.bar`)}catch{return null}}}}})(e);if(!n)return t;let r=e=>{try{let t=decodeURIComponent(e);return t.includes(`/`)?(t=t.split(`/`).at(-1),t.test(/^\.pdf$/i)?t:e):t}catch{return e}},i=/\.pdf$/i,a=n.pathname.split(`/`).at(-1);if(i.test(a))return r(a);if(n.searchParams.size>0){let e=Array.from(n.searchParams.values()).reverse();for(let t of e)if(i.test(t))return r(t);let t=Array.from(n.searchParams.keys()).reverse();for(let e of t)if(i.test(e))return r(e)}if(n.hash){let e=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i.exec(n.hash);if(e)return r(e[0])}return t}var Oi=class{started=Object.create(null);times=[];time(e){e in this.started&&R(`Timer is already running for ${e}`),this.started[e]=Date.now()}timeEnd(e){e in this.started||R(`Timer has not been started for ${e}`),this.times.push({name:e,start:this.started[e],end:Date.now()}),delete this.started[e]}toString(){let e=[],t=0;for(let{name:e}of this.times)t=Math.max(e.length,t);for(let{name:n,start:r,end:i}of this.times)e.push(`${n.padEnd(t)} ${i-r}ms\n`);return e.join(``)}};function ki(e,t){let n=t?URL.parse(e,t):URL.parse(e);return n?.protocol===`http:`||n?.protocol===`https:`}function U(e){e.preventDefault()}function W(e){e.preventDefault(),e.stopPropagation()}function Ai(e){console.log(`Deprecated API usage: `+e)}var ji=class{static#e;static toDateObject(e){if(e instanceof Date)return e;if(!e||typeof e!=`string`)return null;this.#e||=RegExp(`^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?`);let t=this.#e.exec(e);if(!t)return null;let n=parseInt(t[1],10),r=parseInt(t[2],10);r=r>=1&&r<=12?r-1:0;let i=parseInt(t[3],10);i=i>=1&&i<=31?i:1;let a=parseInt(t[4],10);a=a>=0&&a<=23?a:0;let o=parseInt(t[5],10);o=o>=0&&o<=59?o:0;let s=parseInt(t[6],10);s=s>=0&&s<=59?s:0;let c=t[7]||`Z`,l=parseInt(t[8],10);l=l>=0&&l<=23?l:0;let u=parseInt(t[9],10)||0;return u=u>=0&&u<=59?u:0,c===`-`?(a+=l,o+=u):c===`+`&&(a-=l,o-=u),new Date(Date.UTC(n,r,i,a,o,s))}};function Mi(e,{scale:t=1,rotation:n=0}){let{width:r,height:i}=e.attributes.style;return new Si({viewBox:[0,0,parseInt(r),parseInt(i)],userUnit:1,scale:t,rotation:n})}function Ni(e){if(e.startsWith(`#`)){let t=parseInt(e.slice(1),16);return[(t&16711680)>>16,(t&65280)>>8,t&255]}return e.startsWith(`rgb(`)?e.slice(4,-1).split(`,`).map(e=>parseInt(e)):e.startsWith(`rgba(`)?e.slice(5,-1).split(`,`).map(e=>parseInt(e)).slice(0,3):(R(`Not a valid color format: "${e}"`),[0,0,0])}function Pi(e){let t=document.createElement(`span`);t.style.visibility=`hidden`,t.style.colorScheme=`only light`,document.body.append(t);for(let n of e.keys()){t.style.color=n;let r=window.getComputedStyle(t).color;e.set(n,Ni(r))}t.remove()}function Fi(e){let{a:t,b:n,c:r,d:i,e:a,f:o}=e.getTransform();return[t,n,r,i,a,o]}function Ii(e){let{a:t,b:n,c:r,d:i,e:a,f:o}=e.getTransform().invertSelf();return[t,n,r,i,a,o]}function Li(e,t,n=!1,r=!0){if(t instanceof Si){let{pageWidth:r,pageHeight:i}=t.rawDims,{style:a}=e,o=V.isCSSRoundSupported,s=`var(--total-scale-factor) * ${r}px`,c=`var(--total-scale-factor) * ${i}px`,l=o?`round(down, ${s}, var(--scale-round-x))`:`calc(${s})`,u=o?`round(down, ${c}, var(--scale-round-y))`:`calc(${c})`;!n||t.rotation%180==0?(a.width=l,a.height=u):(a.width=u,a.height=l)}r&&e.setAttribute(`data-main-rotation`,t.rotation)}var Ri=class e{constructor(){let{pixelRatio:t}=e;this.sx=t,this.sy=t}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}limitCanvas(t,n,r,i,a=-1){let o=1/0,s=1/0,c=1/0;r=e.capPixels(r,a),r>0&&(o=Math.sqrt(r/(t*n))),i!==-1&&(s=i/t,c=i/n);let l=Math.min(o,s,c);return this.sx>l||this.sy>l?(this.sx=l,this.sy=l,!0):!1}static get pixelRatio(){return globalThis.devicePixelRatio||1}static capPixels(e,t){if(t>=0){let n=Math.ceil(window.screen.availWidth*window.screen.availHeight*this.pixelRatio**2*(1+t/100));return e>0?Math.min(e,n):n}return e}},zi=[`image/apng`,`image/avif`,`image/bmp`,`image/gif`,`image/jpeg`,`image/png`,`image/svg+xml`,`image/webp`,`image/x-icon`],Bi=class{static get isDarkMode(){return B(this,`isDarkMode`,!!window?.matchMedia?.(`(prefers-color-scheme: dark)`).matches)}},Vi=class{static get commentForegroundColor(){let e=document.createElement(`span`);e.classList.add(`comment`,`sidebar`);let{style:t}=e;t.width=t.height=`0`,t.display=`none`,t.color=`var(--comment-fg-color)`,document.body.append(e);let{color:n}=window.getComputedStyle(e);return e.remove(),B(this,`commentForegroundColor`,Ni(n))}};function Hi(e,t,n,r){r=Math.min(Math.max(r??1,0),1);let i=255*(1-r);return e=Math.round(e*r+i),t=Math.round(t*r+i),n=Math.round(n*r+i),[e,t,n]}function Ui(e,t){let n=e[0]/255,r=e[1]/255,i=e[2]/255,a=Math.max(n,r,i),o=Math.min(n,r,i),s=(a+o)/2;if(a===o)t[0]=t[1]=0;else{let e=a-o;switch(t[1]=s<.5?e/(a+o):e/(2-a-o),a){case n:t[0]=((r-i)/e+(r<i?6:0))*60;break;case r:t[0]=((i-n)/e+2)*60;break;case i:t[0]=((n-r)/e+4)*60;break}}t[2]=s}function Wi(e,t){let n=e[0],r=e[1],i=e[2],a=(1-Math.abs(2*i-1))*r,o=a*(1-Math.abs(n/60%2-1)),s=i-a/2;switch(Math.floor(n/60)){case 0:t[0]=a+s,t[1]=o+s,t[2]=s;break;case 1:t[0]=o+s,t[1]=a+s,t[2]=s;break;case 2:t[0]=s,t[1]=a+s,t[2]=o+s;break;case 3:t[0]=s,t[1]=o+s,t[2]=a+s;break;case 4:t[0]=o+s,t[1]=s,t[2]=a+s;break;case 5:case 6:t[0]=a+s,t[1]=s,t[2]=o+s;break}}function Gi(e){return e<=.03928?e/12.92:((e+.055)/1.055)**2.4}function Ki(e,t,n){Wi(e,n),n.map(Gi);let r=.2126*n[0]+.7152*n[1]+.0722*n[2];Wi(t,n),n.map(Gi);let i=.2126*n[0]+.7152*n[1]+.0722*n[2];return r>i?(r+.05)/(i+.05):(i+.05)/(r+.05)}var qi=new Map;function Ji(e,t){let n=e[0]+e[1]*256+e[2]*65536+t[0]*16777216+t[1]*4294967296+t[2]*1099511627776,r=qi.get(n);if(r)return r;let i=new Float32Array(9),a=i.subarray(0,3),o=i.subarray(3,6);Ui(e,o);let s=i.subarray(6,9);Ui(t,s);let c=s[2]<.5,l=c?12:4.5;if(o[2]=c?Math.sqrt(o[2]):1-Math.sqrt(1-o[2]),Ki(o,s,a)<l){let e,t;for(c?(e=o[2],t=1):(e=0,t=o[2]);t-e>.005;){let n=o[2]=(e+t)/2;c===Ki(o,s,a)<l?e=n:t=n}o[2]=c?t:e}return Wi(o,a),r=H.makeHexColor(Math.round(a[0]*255),Math.round(a[1]*255),Math.round(a[2]*255)),qi.set(n,r),r}function Yi({html:e,dir:t,className:n},r){let i=document.createDocumentFragment();if(typeof e==`string`){let n=document.createElement(`p`);n.dir=t||`auto`;let r=e.split(/(?:\r\n?|\n)/);for(let e=0,t=r.length;e<t;++e){let i=r[e];n.append(document.createTextNode(i)),e<t-1&&n.append(document.createElement(`br`))}i.append(n)}else vi.render({xfaHtml:e,div:i,intent:`richText`});i.firstChild.classList.add(`richText`,n),r.append(i)}function Xi(e){let t=new Path2D;if(!e)return t;for(let n=0,r=e.length;n<r;)switch(e[n++]){case Rr.moveTo:t.moveTo(e[n++],e[n++]);break;case Rr.lineTo:t.lineTo(e[n++],e[n++]);break;case Rr.curveTo:t.bezierCurveTo(e[n++],e[n++],e[n++],e[n++],e[n++],e[n++]);break;case Rr.quadraticCurveTo:t.quadraticCurveTo(e[n++],e[n++],e[n++],e[n++]);break;case Rr.closePath:t.closePath();break;default:R(`Unrecognized drawing path operator: ${e[n-1]}`);break}return t}var Zi=class e{#e=null;#t=null;#n;#r=null;#i=null;#a=null;#o=null;#s=null;static#c=null;constructor(t){this.#n=t,e.#c||=Object.freeze({freetext:`pdfjs-editor-remove-freetext-button`,highlight:`pdfjs-editor-remove-highlight-button`,ink:`pdfjs-editor-remove-ink-button`,stamp:`pdfjs-editor-remove-stamp-button`,signature:`pdfjs-editor-remove-signature-button`})}render(){let t=this.#e=document.createElement(`div`);t.classList.add(`editToolbar`,`hidden`),t.setAttribute(`role`,`toolbar`);let n=this.#n._uiManager._signal;n instanceof AbortSignal&&!n.aborted&&(t.addEventListener(`contextmenu`,U,{signal:n}),t.addEventListener(`pointerdown`,e.#l,{signal:n}));let r=this.#r=document.createElement(`div`);r.className=`buttons`,t.append(r);let i=this.#n.toolbarPosition;if(i){let{style:e}=t;e.insetInlineEnd=`${100*(this.#n._uiManager.direction===`ltr`?1-i[0]:i[0])}%`,e.top=`calc(${100*i[1]}% + var(--editor-toolbar-vert-offset))`}return t}get div(){return this.#e}static#l(e){e.stopPropagation()}#u(e){this.#n._focusEventsAllowed=!1,W(e)}#d(e){this.#n._focusEventsAllowed=!0,W(e)}#f(e){let t=this.#n._uiManager._signal;return!(t instanceof AbortSignal)||t.aborted?!1:(e.addEventListener(`focusin`,this.#u.bind(this),{capture:!0,signal:t}),e.addEventListener(`focusout`,this.#d.bind(this),{capture:!0,signal:t}),e.addEventListener(`contextmenu`,U,{signal:t}),!0)}hide(){this.#e.classList.add(`hidden`),this.#t?.hideDropdown()}show(){this.#e.classList.remove(`hidden`),this.#i?.shown(),this.#a?.shown()}addDeleteButton(){let{editorType:t,_uiManager:n}=this.#n,r=document.createElement(`button`);r.classList.add(`basic`,`deleteButton`),r.tabIndex=0,r.setAttribute(`data-l10n-id`,e.#c[t]),this.#f(r)&&r.addEventListener(`click`,e=>{n.delete()},{signal:n._signal}),this.#r.append(r)}get#p(){let e=document.createElement(`div`);return e.className=`divider`,e}async addAltText(e){let t=await e.render();this.#f(t),this.#r.append(t,this.#p),this.#i=e}addComment(e,t=null){if(this.#a)return;let n=e.renderForToolbar();if(!n)return;this.#f(n);let r=this.#o=this.#p;t?(this.#r.insertBefore(n,t),this.#r.insertBefore(r,t)):this.#r.append(n,r),this.#a=e,e.toolbar=this}addColorPicker(e){if(this.#t)return;this.#t=e;let t=e.renderButton();this.#f(t),this.#r.append(t,this.#p)}async addEditSignatureButton(e){let t=this.#s=await e.renderEditButton(this.#n);this.#f(t),this.#r.append(t,this.#p)}removeButton(e){switch(e){case`comment`:this.#a?.removeToolbarCommentButton(),this.#a=null,this.#o?.remove(),this.#o=null;break}}async addButton(e,t){switch(e){case`colorPicker`:t&&this.addColorPicker(t);break;case`altText`:t&&await this.addAltText(t);break;case`editSignature`:t&&await this.addEditSignatureButton(t);break;case`delete`:this.addDeleteButton();break;case`comment`:t&&this.addComment(t);break}}async addButtonBefore(e,t,n){if(!t&&e===`comment`)return;let r=this.#r.querySelector(n);r&&e===`comment`&&this.addComment(t,r)}updateEditSignatureButton(e){this.#s&&(this.#s.title=e)}remove(){this.#e.remove(),this.#t?.destroy(),this.#t=null}},Qi=class{#e=null;#t=null;#n;constructor(e){this.#n=e}#r(){let e=this.#t=document.createElement(`div`);e.className=`editToolbar`,e.setAttribute(`role`,`toolbar`);let t=this.#n._signal;t instanceof AbortSignal&&!t.aborted&&e.addEventListener(`contextmenu`,U,{signal:t});let n=this.#e=document.createElement(`div`);return n.className=`buttons`,e.append(n),this.#n.hasCommentManager()&&this.#a(`commentButton`,`pdfjs-comment-floating-button`,`pdfjs-comment-floating-button-label`,()=>{this.#n.commentSelection(`floating_button`)}),this.#a(`highlightButton`,`pdfjs-highlight-floating-button1`,`pdfjs-highlight-floating-button-label`,()=>{this.#n.highlightSelection(`floating_button`)}),e}#i(e,t){let n=0,r=0;for(let i of e){let e=i.y+i.height;if(e<n)continue;let a=i.x+(t?i.width:0);if(e>n){r=a,n=e;continue}t?a>r&&(r=a):a<r&&(r=a)}return[t?1-r:r,n]}show(e,t,n){let[r,i]=this.#i(t,n),{style:a}=this.#t||=this.#r();e.append(this.#t),a.insetInlineEnd=`${100*r}%`,a.top=`calc(${100*i}% + var(--editor-toolbar-vert-offset))`}hide(){this.#t.remove()}#a(e,t,n,r){let i=document.createElement(`button`);i.classList.add(`basic`,e),i.tabIndex=0,i.setAttribute(`data-l10n-id`,t);let a=document.createElement(`span`);i.append(a),a.className=`visuallyHidden`,a.setAttribute(`data-l10n-id`,n);let o=this.#n._signal;o instanceof AbortSignal&&!o.aborted&&(i.addEventListener(`contextmenu`,U,{signal:o}),i.addEventListener(`click`,r,{signal:o})),this.#e.append(i)}};function $i(e,t,n){for(let r of n)t.addEventListener(r,e[r].bind(e))}var ea=class e{static#e=NaN;static#t=null;static#n=NaN;static#r=null;static initializeAndAddPointerId(t){(e.#t||=new Set).add(t)}static setPointer(t,n){e.#e||=n,e.#r??=t}static setTimeStamp(t){e.#n=t}static isSamePointerId(t){return e.#e===t}static isSamePointerIdOrRemove(t){return e.#e===t?!0:(e.#t?.delete(t),!1)}static isSamePointerType(t){return e.#r===t}static isInitializedAndDifferentPointerType(t){return e.#r!==null&&!e.isSamePointerType(t)}static isSameTimeStamp(t){return e.#n===t}static isUsingMultiplePointers(){return e.#t?.size>=1}static clearPointerType(){e.#r=null}static clearPointerIds(){e.#e=NaN,e.#t=null}static clearTimeStamp(){e.#n=NaN}},ta=class{#e=0;get id(){return`${kr}${this.#e++}`}},na=class e{#e=di();#t=0;#n=null;static get _isSVGFittingCanvas(){let e=new OffscreenCanvas(1,3).getContext(`2d`,{willReadFrequently:!0}),t=new Image;t.src=`data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>`;let n=t.decode().then(()=>(e.drawImage(t,0,0,1,1,0,0,1,3),new Uint32Array(e.getImageData(0,0,1,1).data.buffer)[0]===0));return B(this,`_isSVGFittingCanvas`,n)}async#r(t,n){this.#n||=new Map;let r=this.#n.get(t);if(r===null)return null;if(r?.bitmap)return r.refCounter+=1,r;try{r||={bitmap:null,id:`image_${this.#e}_${this.#t++}`,refCounter:0,isSvg:!1};let t;if(typeof n==`string`?(r.url=n,t=await xi(n,`blob`)):n instanceof File?t=r.file=n:n instanceof Blob&&(t=n),t.type===`image/svg+xml`){let n=e._isSVGFittingCanvas,i=new FileReader,a=new Image,o=new Promise((e,t)=>{a.onload=()=>{r.bitmap=a,r.isSvg=!0,e()},i.onload=async()=>{let e=r.svgUrl=i.result;a.src=await n?`${e}#svgView(preserveAspectRatio(none))`:e},a.onerror=i.onerror=t});i.readAsDataURL(t),await o}else r.bitmap=await createImageBitmap(t);r.refCounter=1}catch(e){R(e),r=null}return this.#n.set(t,r),r&&this.#n.set(r.id,r),r}async getFromFile(e){let{lastModified:t,name:n,size:r,type:i}=e;return this.#r(`${t}_${n}_${r}_${i}`,e)}async getFromUrl(e){return this.#r(e,e)}async getFromBlob(e,t){let n=await t;return this.#r(e,n)}async getFromId(e){this.#n||=new Map;let t=this.#n.get(e);if(!t)return null;if(t.bitmap)return t.refCounter+=1,t;if(t.file)return this.getFromFile(t.file);if(t.blobPromise){let{blobPromise:e}=t;return delete t.blobPromise,this.getFromBlob(t.id,e)}return this.getFromUrl(t.url)}getFromCanvas(e,t){this.#n||=new Map;let n=this.#n.get(e);if(n?.bitmap)return n.refCounter+=1,n;let r=new OffscreenCanvas(t.width,t.height);return r.getContext(`2d`).drawImage(t,0,0),n={bitmap:r.transferToImageBitmap(),id:`image_${this.#e}_${this.#t++}`,refCounter:1,isSvg:!1},this.#n.set(e,n),this.#n.set(n.id,n),n}getSvgUrl(e){let t=this.#n.get(e);return t?.isSvg?t.svgUrl:null}deleteId(e){this.#n||=new Map;let t=this.#n.get(e);if(!t||(--t.refCounter,t.refCounter!==0))return;let{bitmap:n}=t;if(!t.url&&!t.file){let e=new OffscreenCanvas(n.width,n.height);e.getContext(`bitmaprenderer`).transferFromImageBitmap(n),t.blobPromise=e.convertToBlob()}n.close?.(),t.bitmap=null}isValidId(e){return e.startsWith(`image_${this.#e}_`)}},ra=class{#e=[];#t=!1;#n;#r=-1;constructor(e=128){this.#n=e}add({cmd:e,undo:t,post:n,mustExec:r,type:i=NaN,overwriteIfSameType:a=!1,keepUndo:o=!1}){if(r&&e(),this.#t)return;let s={cmd:e,undo:t,post:n,type:i};if(this.#r===-1){this.#e.length>0&&(this.#e.length=0),this.#r=0,this.#e.push(s);return}if(a&&this.#e[this.#r].type===i){o&&(s.undo=this.#e[this.#r].undo),this.#e[this.#r]=s;return}let c=this.#r+1;c===this.#n?this.#e.splice(0,1):(this.#r=c,c<this.#e.length&&this.#e.splice(c)),this.#e.push(s)}undo(){if(this.#r===-1)return;this.#t=!0;let{undo:e,post:t}=this.#e[this.#r];e(),t?.(),this.#t=!1,--this.#r}redo(){if(this.#r<this.#e.length-1){this.#r+=1,this.#t=!0;let{cmd:e,post:t}=this.#e[this.#r];e(),t?.(),this.#t=!1}}hasSomethingToUndo(){return this.#r!==-1}hasSomethingToRedo(){return this.#r<this.#e.length-1}cleanType(e){if(this.#r!==-1){for(let t=this.#r;t>=0;t--)if(this.#e[t].type!==e){this.#e.splice(t+1,this.#r-t),this.#r=t;return}this.#e.length=0,this.#r=-1}}destroy(){this.#e=null}},ia=class{constructor(e){this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;let{isMac:t}=V.platform;for(let[n,r,i={}]of e)for(let e of n){let n=e.startsWith(`mac+`);t&&n?(this.callbacks.set(e.slice(4),{callback:r,options:i}),this.allKeys.add(e.split(`+`).at(-1))):!t&&!n&&(this.callbacks.set(e,{callback:r,options:i}),this.allKeys.add(e.split(`+`).at(-1)))}}#e(e){e.altKey&&this.buffer.push(`alt`),e.ctrlKey&&this.buffer.push(`ctrl`),e.metaKey&&this.buffer.push(`meta`),e.shiftKey&&this.buffer.push(`shift`),this.buffer.push(e.key);let t=this.buffer.join(`+`);return this.buffer.length=0,t}exec(e,t){if(!this.allKeys.has(t.key))return;let n=this.callbacks.get(this.#e(t));if(!n)return;let{callback:r,options:{bubbles:i=!1,args:a=[],checker:o=null}}=n;o&&!o(e,t)||(r.bind(e,...a,t)(),i||W(t))}},aa=class e{static _colorsMapping=new Map([[`CanvasText`,[0,0,0]],[`Canvas`,[255,255,255]]]);get _colors(){let e=new Map([[`CanvasText`,null],[`Canvas`,null]]);return Pi(e),B(this,`_colors`,e)}convert(t){let n=Ni(t);if(!window.matchMedia(`(forced-colors: active)`).matches)return n;for(let[t,r]of this._colors)if(r.every((e,t)=>e===n[t]))return e._colorsMapping.get(t);return n}getHexCode(e){let t=this._colors.get(e);return t?H.makeHexColor(...t):e}},oa=class e{#e=new AbortController;#t=null;#n=null;#r=new Map;#i=new Map;#a=null;#o=null;#s=null;#c=new ra;#l=null;#u=null;#d=null;#f=0;#p=new Set;#m=null;#h=null;#g=new Set;_editorUndoBar=null;#_=!1;#v=!1;#y=!1;#b=null;#x=null;#S=null;#C=null;#w=!1;#T=null;#E=new ta;#D=!1;#O=!1;#k=!1;#A=null;#j=null;#M=null;#N=null;#P=null;#F=I.NONE;#I=new Set;#L=null;#R=null;#z=null;#B=null;#V=null;#H={isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1};#U=[0,0];#W=null;#G=null;#K=null;#q=null;#J=null;static TRANSLATE_SMALL=1;static TRANSLATE_BIG=10;static get _keyboardManager(){let t=e.prototype,n=e=>e.#G.contains(document.activeElement)&&document.activeElement.tagName!==`BUTTON`&&e.hasSomethingToControl(),r=(e,{target:t})=>{if(t instanceof HTMLInputElement){let{type:e}=t;return e!==`text`&&e!==`number`}return!0},i=this.TRANSLATE_SMALL,a=this.TRANSLATE_BIG;return B(this,`_keyboardManager`,new ia([[[`ctrl+a`,`mac+meta+a`],t.selectAll,{checker:r}],[[`ctrl+z`,`mac+meta+z`],t.undo,{checker:r}],[[`ctrl+y`,`ctrl+shift+z`,`mac+meta+shift+z`,`ctrl+shift+Z`,`mac+meta+shift+Z`],t.redo,{checker:r}],[[`Backspace`,`alt+Backspace`,`ctrl+Backspace`,`shift+Backspace`,`mac+Backspace`,`mac+alt+Backspace`,`mac+ctrl+Backspace`,`Delete`,`ctrl+Delete`,`shift+Delete`,`mac+Delete`],t.delete,{checker:r}],[[`Enter`,`mac+Enter`],t.addNewEditorFromKeyboard,{checker:(e,{target:t})=>!(t instanceof HTMLButtonElement)&&e.#G.contains(t)&&!e.isEnterHandled}],[[` `,`mac+ `],t.addNewEditorFromKeyboard,{checker:(e,{target:t})=>!(t instanceof HTMLButtonElement)&&e.#G.contains(document.activeElement)}],[[`Escape`,`mac+Escape`],t.unselectAll],[[`ArrowLeft`,`mac+ArrowLeft`],t.translateSelectedEditors,{args:[-i,0],checker:n}],[[`ctrl+ArrowLeft`,`mac+shift+ArrowLeft`],t.translateSelectedEditors,{args:[-a,0],checker:n}],[[`ArrowRight`,`mac+ArrowRight`],t.translateSelectedEditors,{args:[i,0],checker:n}],[[`ctrl+ArrowRight`,`mac+shift+ArrowRight`],t.translateSelectedEditors,{args:[a,0],checker:n}],[[`ArrowUp`,`mac+ArrowUp`],t.translateSelectedEditors,{args:[0,-i],checker:n}],[[`ctrl+ArrowUp`,`mac+shift+ArrowUp`],t.translateSelectedEditors,{args:[0,-a],checker:n}],[[`ArrowDown`,`mac+ArrowDown`],t.translateSelectedEditors,{args:[0,i],checker:n}],[[`ctrl+ArrowDown`,`mac+shift+ArrowDown`],t.translateSelectedEditors,{args:[0,a],checker:n}]]))}constructor(e,t,n,r,i,a,o,s,c,l,u,d,f,p,m,h){let g=this._signal=this.#e.signal;this.#G=e,this.#K=t,this.#q=n,this.#a=r,this.#l=i,this.#R=a,this.#V=s,this._eventBus=o,o._on(`editingaction`,this.onEditingAction.bind(this),{signal:g}),o._on(`pagechanging`,this.onPageChanging.bind(this),{signal:g}),o._on(`scalechanging`,this.onScaleChanging.bind(this),{signal:g}),o._on(`rotationchanging`,this.onRotationChanging.bind(this),{signal:g}),o._on(`setpreference`,this.onSetPreference.bind(this),{signal:g}),o._on(`switchannotationeditorparams`,e=>this.updateParams(e.type,e.value),{signal:g}),window.addEventListener(`pointerdown`,()=>{this.#O=!0},{capture:!0,signal:g}),window.addEventListener(`pointerup`,()=>{this.#O=!1},{capture:!0,signal:g}),this.#ee(),this.#se(),this.#re(),this.#o=s.annotationStorage,this.#b=s.filterFactory,this.#z=c,this.#C=l||null,this.#_=u,this.#v=d,this.#y=f,this.#P=p||null,this.viewParameters={realScale:bi.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=m||null,this._supportsPinchToZoom=h!==!1,i?.setSidebarUiManager(this)}destroy(){this.#J?.resolve(),this.#J=null,this.#e?.abort(),this.#e=null,this._signal=null;for(let e of this.#i.values())e.destroy();this.#i.clear(),this.#r.clear(),this.#g.clear(),this.#N?.clear(),this.#t=null,this.#I.clear(),this.#c.destroy(),this.#a?.destroy(),this.#l?.destroy(),this.#R?.destroy(),this.#T?.hide(),this.#T=null,this.#M?.destroy(),this.#M=null,this.#n=null,this.#x&&=(clearTimeout(this.#x),null),this.#W&&=(clearTimeout(this.#W),null),this._editorUndoBar?.destroy(),this.#V=null}combinedSignal(e){return AbortSignal.any([this._signal,e.signal])}get mlManager(){return this.#P}get useNewAltTextFlow(){return this.#v}get useNewAltTextWhenAddingImage(){return this.#y}get hcmFilter(){return B(this,`hcmFilter`,this.#z?this.#b.addHCMFilter(this.#z.foreground,this.#z.background):`none`)}get direction(){return B(this,`direction`,getComputedStyle(this.#G).direction)}get _highlightColors(){return B(this,`_highlightColors`,this.#C?new Map(this.#C.split(`,`).map(e=>(e=e.split(`=`).map(e=>e.trim()),e[1]=e[1].toUpperCase(),e))):null)}get highlightColors(){let{_highlightColors:e}=this;if(!e)return B(this,`highlightColors`,null);let t=new Map,n=!!this.#z;for(let[r,i]of e){let e=r.endsWith(`_HCM`);if(n&&e){t.set(r.replace(`_HCM`,``),i);continue}!n&&!e&&t.set(r,i)}return B(this,`highlightColors`,t)}get highlightColorNames(){return B(this,`highlightColorNames`,this.highlightColors?new Map(Array.from(this.highlightColors,e=>e.reverse())):null)}getNonHCMColor(e){if(!this._highlightColors)return e;let t=this.highlightColorNames.get(e);return this._highlightColors.get(t)||e}getNonHCMColorName(e){return this.highlightColorNames.get(e)||e}setCurrentDrawingSession(e){e?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),this.#d=e}setMainHighlightColorPicker(e){this.#M=e}editAltText(e,t=!1){this.#a?.editAltText(this,e,t)}hasCommentManager(){return!!this.#l}editComment(e,t,n,r){this.#l?.showDialog(this,e,t,n,r)}selectComment(e,t){(this.#i.get(e)?.getEditorByUID(t))?.toggleComment(!0,!0)}updateComment(e){this.#l?.updateComment(e.getData())}updatePopupColor(e){this.#l?.updatePopupColor(e)}removeComment(e){this.#l?.removeComments([e.uid])}toggleComment(e,t,n=void 0){this.#l?.toggleCommentPopup(e,t,n)}makeCommentColor(e,t){return e&&this.#l?.makeCommentColor(e,t)||null}getCommentDialogElement(){return this.#l?.dialogElement||null}async waitForEditorsRendered(e){if(this.#i.has(e-1))return;let{resolve:t,promise:n}=Promise.withResolvers(),r=n=>{n.pageNumber===e&&(this._eventBus._off(`editorsrendered`,r),t())};this._eventBus.on(`editorsrendered`,r),await n}getSignature(e){this.#R?.getSignature({uiManager:this,editor:e})}get signatureManager(){return this.#R}switchToMode(e,t){this._eventBus.on(`annotationeditormodechanged`,t,{once:!0,signal:this._signal}),this._eventBus.dispatch(`showannotationeditorui`,{source:this,mode:e})}setPreference(e,t){this._eventBus.dispatch(`setpreference`,{source:this,name:e,value:t})}onSetPreference({name:e,value:t}){switch(e){case`enableNewAltTextWhenAddingImage`:this.#y=t;break}}onPageChanging({pageNumber:e}){this.#f=e-1}focusMainContainer(){this.#G.focus()}findParent(e,t){for(let n of this.#i.values()){let{x:r,y:i,width:a,height:o}=n.div.getBoundingClientRect();if(e>=r&&e<=r+a&&t>=i&&t<=i+o)return n}return null}disableUserSelect(e=!1){this.#K.classList.toggle(`noUserSelect`,e)}addShouldRescale(e){this.#g.add(e)}removeShouldRescale(e){this.#g.delete(e)}onScaleChanging({scale:e}){this.commitOrRemove(),this.viewParameters.realScale=e*bi.PDF_TO_CSS_UNITS;for(let e of this.#g)e.onScaleChanging();this.#d?.onScaleChanging()}onRotationChanging({pagesRotation:e}){this.commitOrRemove(),this.viewParameters.rotation=e}#Y({anchorNode:e}){return e.nodeType===Node.TEXT_NODE?e.parentElement:e}#X(e){let{currentLayer:t}=this;if(t.hasTextLayer(e))return t;for(let t of this.#i.values())if(t.hasTextLayer(e))return t;return null}highlightSelection(e=``,t=!1){let n=document.getSelection();if(!n||n.isCollapsed)return;let{anchorNode:r,anchorOffset:i,focusNode:a,focusOffset:o}=n,s=n.toString(),c=this.#Y(n).closest(`.textLayer`),l=this.getSelectionBoxes(c);if(!l)return;n.empty();let u=this.#X(c),d=this.#F===I.NONE,f=()=>{let n=u?.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:e,boxes:l,anchorNode:r,anchorOffset:i,focusNode:a,focusOffset:o,text:s});d&&this.showAllEditors(`highlight`,!0,!0),t&&n?.editComment()};if(d){this.switchToMode(I.HIGHLIGHT,f);return}f()}commentSelection(e=``){this.highlightSelection(e,!0)}#Z(){let e=document.getSelection();if(!e||e.isCollapsed)return;let t=this.#Y(e).closest(`.textLayer`),n=this.getSelectionBoxes(t);n&&(this.#T||=new Qi(this),this.#T.show(t,n,this.direction===`ltr`))}getAndRemoveDataFromAnnotationStorage(e){if(!this.#o)return null;let t=`${kr}${e}`,n=this.#o.getRawValue(t);return n&&this.#o.remove(t),n}addToAnnotationStorage(e){!e.isEmpty()&&this.#o&&!this.#o.has(e.id)&&this.#o.setValue(e.id,e)}a11yAlert(e,t=null){let n=this.#q;n&&(n.setAttribute(`data-l10n-id`,e),t?n.setAttribute(`data-l10n-args`,JSON.stringify(t)):n.removeAttribute(`data-l10n-args`))}#Q(){let e=document.getSelection();if(!e||e.isCollapsed){this.#L&&(this.#T?.hide(),this.#L=null,this.#ce({hasSelectedText:!1}));return}let{anchorNode:t}=e;if(t===this.#L)return;let n=this.#Y(e).closest(`.textLayer`);if(!n){this.#L&&(this.#T?.hide(),this.#L=null,this.#ce({hasSelectedText:!1}));return}if(this.#T?.hide(),this.#L=t,this.#ce({hasSelectedText:!0}),!(this.#F!==I.HIGHLIGHT&&this.#F!==I.NONE)&&(this.#F===I.HIGHLIGHT&&this.showAllEditors(`highlight`,!0,!0),this.#w=this.isShiftKeyDown,!this.isShiftKeyDown)){let e=this.#F===I.HIGHLIGHT?this.#X(n):null;if(e?.toggleDrawing(),this.#O){let t=new AbortController,n=this.combinedSignal(t),r=n=>{n.type===`pointerup`&&n.button!==0||(t.abort(),e?.toggleDrawing(!0),n.type===`pointerup`&&this.#$(`main_toolbar`))};window.addEventListener(`pointerup`,r,{signal:n}),window.addEventListener(`blur`,r,{signal:n})}else e?.toggleDrawing(!0),this.#$(`main_toolbar`)}}#$(e=``){this.#F===I.HIGHLIGHT?this.highlightSelection(e):this.#_&&this.#Z()}#ee(){document.addEventListener(`selectionchange`,this.#Q.bind(this),{signal:this._signal})}#te(){if(this.#S)return;this.#S=new AbortController;let e=this.combinedSignal(this.#S);window.addEventListener(`focus`,this.focus.bind(this),{signal:e}),window.addEventListener(`blur`,this.blur.bind(this),{signal:e})}#ne(){this.#S?.abort(),this.#S=null}blur(){if(this.isShiftKeyDown=!1,this.#w&&(this.#w=!1,this.#$(`main_toolbar`)),!this.hasSelection)return;let{activeElement:e}=document;for(let t of this.#I)if(t.div.contains(e)){this.#j=[t,e],t._focusEventsAllowed=!1;break}}focus(){if(!this.#j)return;let[e,t]=this.#j;this.#j=null,t.addEventListener(`focusin`,()=>{e._focusEventsAllowed=!0},{once:!0,signal:this._signal}),t.focus()}#re(){if(this.#A)return;this.#A=new AbortController;let e=this.combinedSignal(this.#A);window.addEventListener(`keydown`,this.keydown.bind(this),{signal:e}),window.addEventListener(`keyup`,this.keyup.bind(this),{signal:e})}#ie(){this.#A?.abort(),this.#A=null}#ae(){if(this.#u)return;this.#u=new AbortController;let e=this.combinedSignal(this.#u);document.addEventListener(`copy`,this.copy.bind(this),{signal:e}),document.addEventListener(`cut`,this.cut.bind(this),{signal:e}),document.addEventListener(`paste`,this.paste.bind(this),{signal:e})}#oe(){this.#u?.abort(),this.#u=null}#se(){let e=this._signal;document.addEventListener(`dragover`,this.dragOver.bind(this),{signal:e}),document.addEventListener(`drop`,this.drop.bind(this),{signal:e})}addEditListeners(){this.#re(),this.setEditingState(!0)}removeEditListeners(){this.#ie(),this.setEditingState(!1)}dragOver(e){for(let{type:t}of e.dataTransfer.items)for(let n of this.#h)if(n.isHandlingMimeForPasting(t)){e.dataTransfer.dropEffect=`copy`,e.preventDefault();return}}drop(e){for(let t of e.dataTransfer.items)for(let n of this.#h)if(n.isHandlingMimeForPasting(t.type)){n.paste(t,this.currentLayer),e.preventDefault();return}}copy(e){if(e.preventDefault(),this.#t?.commitOrRemove(),!this.hasSelection)return;let t=[];for(let e of this.#I){let n=e.serialize(!0);n&&t.push(n)}t.length!==0&&e.clipboardData.setData(`application/pdfjs`,JSON.stringify(t))}cut(e){this.copy(e),this.delete()}async paste(e){e.preventDefault();let{clipboardData:t}=e;for(let e of t.items)for(let t of this.#h)if(t.isHandlingMimeForPasting(e.type)){t.paste(e,this.currentLayer);return}let n=t.getData(`application/pdfjs`);if(!n)return;try{n=JSON.parse(n)}catch(e){R(`paste: "${e.message}".`);return}if(!Array.isArray(n))return;this.unselectAll();let r=this.currentLayer;try{let e=[];for(let t of n){let n=await r.deserialize(t);if(!n)return;e.push(n)}this.addCommands({cmd:()=>{for(let t of e)this.#fe(t);this.#he(e)},undo:()=>{for(let t of e)t.remove()},mustExec:!0})}catch(e){R(`paste: "${e.message}".`)}}keydown(t){!this.isShiftKeyDown&&t.key===`Shift`&&(this.isShiftKeyDown=!0),this.#F!==I.NONE&&!this.isEditorHandlingKeyboard&&e._keyboardManager.exec(this,t)}keyup(e){this.isShiftKeyDown&&e.key===`Shift`&&(this.isShiftKeyDown=!1,this.#w&&(this.#w=!1,this.#$(`main_toolbar`)))}onEditingAction({name:e}){switch(e){case`undo`:case`redo`:case`delete`:case`selectAll`:this[e]();break;case`highlightSelection`:this.highlightSelection(`context_menu`);break;case`commentSelection`:this.commentSelection(`context_menu`);break}}#ce(e){Object.entries(e).some(([e,t])=>this.#H[e]!==t)&&(this._eventBus.dispatch(`annotationeditorstateschanged`,{source:this,details:Object.assign(this.#H,e)}),this.#F===I.HIGHLIGHT&&e.hasSelectedEditor===!1&&this.#le([[L.HIGHLIGHT_FREE,!0]]))}#le(e){this._eventBus.dispatch(`annotationeditorparamschanged`,{source:this,details:e})}setEditingState(e){e?(this.#te(),this.#ae(),this.#ce({isEditing:this.#F!==I.NONE,isEmpty:this.#me(),hasSomethingToUndo:this.#c.hasSomethingToUndo(),hasSomethingToRedo:this.#c.hasSomethingToRedo(),hasSelectedEditor:!1})):(this.#ne(),this.#oe(),this.#ce({isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(e){if(!this.#h){this.#h=e;for(let e of this.#h)this.#le(e.defaultPropertiesToUpdate)}}getId(){return this.#E.id}get currentLayer(){return this.#i.get(this.#f)}getLayer(e){return this.#i.get(e)}get currentPageIndex(){return this.#f}addLayer(e){this.#i.set(e.pageIndex,e),this.#D?e.enable():e.disable()}removeLayer(e){this.#i.delete(e.pageIndex)}async updateMode(e,t=null,n=!1,r=!1,i=!1){if(this.#F!==e&&!(this.#J&&(await this.#J.promise,!this.#J))){if(this.#J=Promise.withResolvers(),this.#d?.commitOrRemove(),this.#F===I.POPUP&&this.#l?.hideSidebar(),this.#l?.destroyPopup(),this.#F=e,e===I.NONE){this.setEditingState(!1),this.#de();for(let e of this.#r.values())e.hideStandaloneCommentButton();this._editorUndoBar?.hide(),this.toggleComment(null),this.#J.resolve();return}for(let e of this.#r.values())e.addStandaloneCommentButton();e===I.SIGNATURE&&await this.#R?.loadSignatures(),this.setEditingState(!0),await this.#ue(),this.unselectAll();for(let t of this.#i.values())t.updateMode(e);if(e===I.POPUP){this.#n||=await this.#V.getAnnotationsByType(new Set(this.#h.map(e=>e._editorType)));let e=new Set,t=[];for(let n of this.#r.values()){let{annotationElementId:r,hasComment:i,deleted:a}=n;r&&e.add(r),i&&!a&&t.push(n.getData())}for(let n of this.#n){let{id:r,popupRef:i,contentsObj:a}=n;i&&a?.str&&!e.has(r)&&!this.#p.has(r)&&t.push(n)}this.#l?.showSidebar(t)}if(!t){n&&this.addNewEditorFromKeyboard(),this.#J.resolve();return}for(let e of this.#r.values())e.uid===t?(this.setSelected(e),i?e.editComment():r?e.enterInEditMode():e.focus()):e.unselect();this.#J.resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(e){e.mode!==this.#F&&this._eventBus.dispatch(`switchannotationeditormode`,{source:this,...e})}updateParams(e,t){if(this.#h){switch(e){case L.CREATE:this.currentLayer.addNewEditor(t);return;case L.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch(`reporttelemetry`,{source:this,details:{type:`editing`,data:{type:`highlight`,action:`toggle_visibility`}}}),(this.#B||=new Map).set(e,t),this.showAllEditors(`highlight`,t);break}if(this.hasSelection)for(let n of this.#I)n.updateParams(e,t);else for(let n of this.#h)n.updateDefaultParams(e,t)}}showAllEditors(e,t,n=!1){for(let n of this.#r.values())n.editorType===e&&n.show(t);(this.#B?.get(L.HIGHLIGHT_SHOW_ALL)??!0)!==t&&this.#le([[L.HIGHLIGHT_SHOW_ALL,t]])}enableWaiting(e=!1){if(this.#k!==e){this.#k=e;for(let t of this.#i.values())e?t.disableClick():t.enableClick(),t.div.classList.toggle(`waiting`,e)}}async#ue(){if(!this.#D){this.#D=!0;let e=[];for(let t of this.#i.values())e.push(t.enable());await Promise.all(e);for(let e of this.#r.values())e.enable()}}#de(){if(this.unselectAll(),this.#D){this.#D=!1;for(let e of this.#i.values())e.disable();for(let e of this.#r.values())e.disable()}}*getEditors(e){for(let t of this.#r.values())t.pageIndex===e&&(yield t)}getEditor(e){return this.#r.get(e)}addEditor(e){this.#r.set(e.id,e)}removeEditor(e){e.div.contains(document.activeElement)&&(this.#x&&clearTimeout(this.#x),this.#x=setTimeout(()=>{this.focusMainContainer(),this.#x=null},0)),this.#r.delete(e.id),e.annotationElementId&&this.#N?.delete(e.annotationElementId),this.unselect(e),(!e.annotationElementId||!this.#p.has(e.annotationElementId))&&this.#o?.remove(e.id)}addDeletedAnnotationElement(e){this.#p.add(e.annotationElementId),this.addChangedExistingAnnotation(e),e.deleted=!0}isDeletedAnnotationElement(e){return this.#p.has(e)}removeDeletedAnnotationElement(e){this.#p.delete(e.annotationElementId),this.removeChangedExistingAnnotation(e),e.deleted=!1}#fe(e){let t=this.#i.get(e.pageIndex);t?t.addOrRebuild(e):(this.addEditor(e),this.addToAnnotationStorage(e))}setActiveEditor(e){this.#t!==e&&(this.#t=e,e&&this.#le(e.propertiesToUpdate))}get#pe(){let e=null;for(e of this.#I);return e}updateUI(e){this.#pe===e&&this.#le(e.propertiesToUpdate)}updateUIForDefaultProperties(e){this.#le(e.defaultPropertiesToUpdate)}toggleSelected(e){if(this.#I.has(e)){this.#I.delete(e),e.unselect(),this.#ce({hasSelectedEditor:this.hasSelection});return}this.#I.add(e),e.select(),this.#le(e.propertiesToUpdate),this.#ce({hasSelectedEditor:!0})}setSelected(e){this.updateToolbar({mode:e.mode,editId:e.uid}),this.#d?.commitOrRemove();for(let t of this.#I)t!==e&&t.unselect();this.#I.clear(),this.#I.add(e),e.select(),this.#le(e.propertiesToUpdate),this.#ce({hasSelectedEditor:!0})}isSelected(e){return this.#I.has(e)}get firstSelectedEditor(){return this.#I.values().next().value}unselect(e){e.unselect(),this.#I.delete(e),this.#ce({hasSelectedEditor:this.hasSelection})}get hasSelection(){return this.#I.size!==0}get isEnterHandled(){return this.#I.size===1&&this.firstSelectedEditor.isEnterHandled}undo(){this.#c.undo(),this.#ce({hasSomethingToUndo:this.#c.hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:this.#me()}),this._editorUndoBar?.hide()}redo(){this.#c.redo(),this.#ce({hasSomethingToUndo:!0,hasSomethingToRedo:this.#c.hasSomethingToRedo(),isEmpty:this.#me()})}addCommands(e){this.#c.add(e),this.#ce({hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:this.#me()})}cleanUndoStack(e){this.#c.cleanType(e)}#me(){if(this.#r.size===0)return!0;if(this.#r.size===1)for(let e of this.#r.values())return e.isEmpty();return!1}delete(){this.commitOrRemove();let e=this.currentLayer?.endDrawingSession(!0);if(!this.hasSelection&&!e)return;let t=e?[e]:[...this.#I],n=()=>{this._editorUndoBar?.show(r,t.length===1?t[0].editorType:t.length);for(let e of t)e.remove()},r=()=>{for(let e of t)this.#fe(e)};this.addCommands({cmd:n,undo:r,mustExec:!0})}commitOrRemove(){this.#t?.commitOrRemove()}hasSomethingToControl(){return this.#t||this.hasSelection}#he(e){for(let e of this.#I)e.unselect();this.#I.clear();for(let t of e)t.isEmpty()||(this.#I.add(t),t.select());this.#ce({hasSelectedEditor:this.hasSelection})}selectAll(){for(let e of this.#I)e.commit();this.#he(this.#r.values())}unselectAll(){if(!(this.#t&&(this.#t.commitOrRemove(),this.#F!==I.NONE))&&!this.#d?.commitOrRemove()&&this.hasSelection){for(let e of this.#I)e.unselect();this.#I.clear(),this.#ce({hasSelectedEditor:!1})}}translateSelectedEditors(e,t,n=!1){if(n||this.commitOrRemove(),!this.hasSelection)return;this.#U[0]+=e,this.#U[1]+=t;let[r,i]=this.#U,a=[...this.#I];this.#W&&clearTimeout(this.#W),this.#W=setTimeout(()=>{this.#W=null,this.#U[0]=this.#U[1]=0,this.addCommands({cmd:()=>{for(let e of a)this.#r.has(e.id)&&(e.translateInPage(r,i),e.translationDone())},undo:()=>{for(let e of a)this.#r.has(e.id)&&(e.translateInPage(-r,-i),e.translationDone())},mustExec:!1})},1e3);for(let n of a)n.translateInPage(e,t),n.translationDone()}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),this.#m=new Map;for(let e of this.#I)this.#m.set(e,{savedX:e.x,savedY:e.y,savedPageIndex:e.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!this.#m)return!1;this.disableUserSelect(!1);let e=this.#m;this.#m=null;let t=!1;for(let[{x:n,y:r,pageIndex:i},a]of e)a.newX=n,a.newY=r,a.newPageIndex=i,t||=n!==a.savedX||r!==a.savedY||i!==a.savedPageIndex;if(!t)return!1;let n=(e,t,n,r)=>{if(this.#r.has(e.id)){let i=this.#i.get(r);i?e._setParentAndPosition(i,t,n):(e.pageIndex=r,e.x=t,e.y=n)}};return this.addCommands({cmd:()=>{for(let[t,{newX:r,newY:i,newPageIndex:a}]of e)n(t,r,i,a)},undo:()=>{for(let[t,{savedX:r,savedY:i,savedPageIndex:a}]of e)n(t,r,i,a)},mustExec:!0}),!0}dragSelectedEditors(e,t){if(this.#m)for(let n of this.#m.keys())n.drag(e,t)}rebuild(e){if(e.parent===null){let t=this.getLayer(e.pageIndex);t?(t.changeParent(e),t.addOrRebuild(e)):(this.addEditor(e),this.addToAnnotationStorage(e),e.rebuild())}else e.parent.addOrRebuild(e)}get isEditorHandlingKeyboard(){return this.getActive()?.shouldGetKeyboardEvents()||this.#I.size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(e){return this.#t===e}getActive(){return this.#t}getMode(){return this.#F}isEditingMode(){return this.#F!==I.NONE}get imageManager(){return B(this,`imageManager`,new na)}getSelectionBoxes(e){if(!e)return null;let t=document.getSelection();for(let n=0,r=t.rangeCount;n<r;n++)if(!e.contains(t.getRangeAt(n).commonAncestorContainer))return null;let{x:n,y:r,width:i,height:a}=e.getBoundingClientRect(),o;switch(e.getAttribute(`data-main-rotation`)){case`90`:o=(e,t,o,s)=>({x:(t-r)/a,y:1-(e+o-n)/i,width:s/a,height:o/i});break;case`180`:o=(e,t,o,s)=>({x:1-(e+o-n)/i,y:1-(t+s-r)/a,width:o/i,height:s/a});break;case`270`:o=(e,t,o,s)=>({x:1-(t+s-r)/a,y:(e-n)/i,width:s/a,height:o/i});break;default:o=(e,t,o,s)=>({x:(e-n)/i,y:(t-r)/a,width:o/i,height:s/a});break}let s=[];for(let e=0,n=t.rangeCount;e<n;e++){let n=t.getRangeAt(e);if(!n.collapsed)for(let{x:e,y:t,width:r,height:i}of n.getClientRects())r===0||i===0||s.push(o(e,t,r,i))}return s.length===0?null:s}addChangedExistingAnnotation({annotationElementId:e,id:t}){(this.#s||=new Map).set(e,t)}removeChangedExistingAnnotation({annotationElementId:e}){this.#s?.delete(e)}renderAnnotationElement(e){let t=this.#s?.get(e.data.id);if(!t)return;let n=this.#o.getRawValue(t);n&&(this.#F===I.NONE&&!n.hasBeenModified||n.renderAnnotationElement(e))}setMissingCanvas(e,t,n){let r=this.#N?.get(e);r&&(r.setCanvas(t,n),this.#N.delete(e))}addMissingCanvas(e,t){(this.#N||=new Map).set(e,t)}},sa=class e{#e=null;#t=!1;#n=null;#r=null;#i=null;#a=null;#o=!1;#s=null;#c=null;#l=null;#u=null;#d=!1;static#f=null;static _l10n=null;constructor(t){this.#c=t,this.#d=t._uiManager.useNewAltTextFlow,e.#f||=Object.freeze({added:`pdfjs-editor-new-alt-text-added-button`,"added-label":`pdfjs-editor-new-alt-text-added-button-label`,missing:`pdfjs-editor-new-alt-text-missing-button`,"missing-label":`pdfjs-editor-new-alt-text-missing-button-label`,review:`pdfjs-editor-new-alt-text-to-review-button`,"review-label":`pdfjs-editor-new-alt-text-to-review-button-label`})}static initialize(t){e._l10n??=t}async render(){let t=this.#n=document.createElement(`button`);t.className=`altText`,t.tabIndex=`0`;let n=this.#r=document.createElement(`span`);t.append(n),this.#d?(t.classList.add(`new`),t.setAttribute(`data-l10n-id`,e.#f.missing),n.setAttribute(`data-l10n-id`,e.#f[`missing-label`])):(t.setAttribute(`data-l10n-id`,`pdfjs-editor-alt-text-button`),n.setAttribute(`data-l10n-id`,`pdfjs-editor-alt-text-button-label`));let r=this.#c._uiManager._signal;t.addEventListener(`contextmenu`,U,{signal:r}),t.addEventListener(`pointerdown`,e=>e.stopPropagation(),{signal:r});let i=e=>{e.preventDefault(),this.#c._uiManager.editAltText(this.#c),this.#d&&this.#c._reportTelemetry({action:`pdfjs.image.alt_text.image_status_label_clicked`,data:{label:this.#p}})};return t.addEventListener(`click`,i,{capture:!0,signal:r}),t.addEventListener(`keydown`,e=>{e.target===t&&e.key===`Enter`&&(this.#o=!0,i(e))},{signal:r}),await this.#m(),t}get#p(){return this.#e&&`added`||this.#e===null&&this.guessedText&&`review`||`missing`}finish(){this.#n&&(this.#n.focus({focusVisible:this.#o}),this.#o=!1)}isEmpty(){return this.#d?this.#e===null:!this.#e&&!this.#t}hasData(){return this.#d?this.#e!==null||!!this.#l:this.isEmpty()}get guessedText(){return this.#l}async setGuessedText(t){this.#e===null&&(this.#l=t,this.#u=await e._l10n.get(`pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer`,{generatedAltText:t}),this.#m())}toggleAltTextBadge(e=!1){if(!this.#d||this.#e){this.#s?.remove(),this.#s=null;return}if(!this.#s){let e=this.#s=document.createElement(`div`);e.className=`noAltTextBadge`,this.#c.div.append(e)}this.#s.classList.toggle(`hidden`,!e)}serialize(e){let t=this.#e;return!e&&this.#l===t&&(t=this.#u),{altText:t,decorative:this.#t,guessedText:this.#l,textWithDisclaimer:this.#u}}get data(){return{altText:this.#e,decorative:this.#t}}set data({altText:e,decorative:t,guessedText:n,textWithDisclaimer:r,cancel:i=!1}){n&&(this.#l=n,this.#u=r),!(this.#e===e&&this.#t===t)&&(i||(this.#e=e,this.#t=t),this.#m())}toggle(e=!1){this.#n&&(!e&&this.#a&&(clearTimeout(this.#a),this.#a=null),this.#n.disabled=!e)}shown(){this.#c._reportTelemetry({action:`pdfjs.image.alt_text.image_status_label_displayed`,data:{label:this.#p}})}destroy(){this.#n?.remove(),this.#n=null,this.#r=null,this.#i=null,this.#s?.remove(),this.#s=null}async#m(){let t=this.#n;if(!t)return;if(this.#d){if(t.classList.toggle(`done`,!!this.#e),t.setAttribute(`data-l10n-id`,e.#f[this.#p]),this.#r?.setAttribute(`data-l10n-id`,e.#f[`${this.#p}-label`]),!this.#e){this.#i?.remove();return}}else{if(!this.#e&&!this.#t){t.classList.remove(`done`),this.#i?.remove();return}t.classList.add(`done`),t.setAttribute(`data-l10n-id`,`pdfjs-editor-alt-text-edit-button`)}let n=this.#i;if(!n){this.#i=n=document.createElement(`span`),n.className=`tooltip`,n.setAttribute(`role`,`tooltip`),n.id=`alt-text-tooltip-${this.#c.id}`;let e=this.#c._uiManager._signal;e.addEventListener(`abort`,()=>{clearTimeout(this.#a),this.#a=null},{once:!0}),t.addEventListener(`mouseenter`,()=>{this.#a=setTimeout(()=>{this.#a=null,this.#i.classList.add(`show`),this.#c._reportTelemetry({action:`alt_text_tooltip`})},100)},{signal:e}),t.addEventListener(`mouseleave`,()=>{this.#a&&=(clearTimeout(this.#a),null),this.#i?.classList.remove(`show`)},{signal:e})}this.#t?n.setAttribute(`data-l10n-id`,`pdfjs-editor-alt-text-decorative-tooltip`):(n.removeAttribute(`data-l10n-id`),n.textContent=this.#e),n.parentNode||t.append(n),this.#c.getElementForAltText()?.setAttribute(`aria-describedby`,n.id)}},ca=class{#e=null;#t=null;#n=!1;#r=null;#i=null;#a=null;#o=null;#s=null;#c=!1;#l=null;constructor(e){this.#r=e}renderForToolbar(){let e=this.#t=document.createElement(`button`);return e.className=`comment`,this.#u(e,!1)}renderForStandalone(){let e=this.#e=document.createElement(`button`);e.className=`annotationCommentButton`;let t=this.#r.commentButtonPosition;if(t){let{style:n}=e;n.insetInlineEnd=`calc(${100*(this.#r._uiManager.direction===`ltr`?1-t[0]:t[0])}% - var(--comment-button-dim))`,n.top=`calc(${100*t[1]}% - var(--comment-button-dim))`;let r=this.#r.commentButtonColor;r&&(n.backgroundColor=r)}return this.#u(e,!0)}focusButton(){setTimeout(()=>{(this.#e??this.#t)?.focus()},0)}onUpdatedColor(){if(!this.#e)return;let e=this.#r.commentButtonColor;e&&(this.#e.style.backgroundColor=e),this.#r._uiManager.updatePopupColor(this.#r)}get commentButtonWidth(){return(this.#e?.getBoundingClientRect().width??0)/this.#r.parent.boundingClientRect.width}get commentPopupPositionInLayer(){if(this.#l)return this.#l;if(!this.#e)return null;let{x:e,y:t,height:n}=this.#e.getBoundingClientRect(),{x:r,y:i,width:a,height:o}=this.#r.parent.boundingClientRect;return[(e-r)/a,(t+n-i)/o]}set commentPopupPositionInLayer(e){this.#l=e}hasDefaultPopupPosition(){return this.#l===null}removeStandaloneCommentButton(){this.#e?.remove(),this.#e=null}removeToolbarCommentButton(){this.#t?.remove(),this.#t=null}setCommentButtonStates({selected:e,hasPopup:t}){this.#e&&(this.#e.classList.toggle(`selected`,e),this.#e.ariaExpanded=t)}#u(e,t){if(!this.#r._uiManager.hasCommentManager())return null;e.tabIndex=`0`,e.ariaHasPopup=`dialog`,t?(e.ariaControls=`commentPopup`,e.setAttribute(`data-l10n-id`,`pdfjs-show-comment-button`)):(e.ariaControlsElements=[this.#r._uiManager.getCommentDialogElement()],e.setAttribute(`data-l10n-id`,`pdfjs-editor-add-comment-button`));let n=this.#r._uiManager._signal;if(!(n instanceof AbortSignal)||n.aborted)return e;e.addEventListener(`contextmenu`,U,{signal:n}),t&&(e.addEventListener(`focusin`,e=>{this.#r._focusEventsAllowed=!1,W(e)},{capture:!0,signal:n}),e.addEventListener(`focusout`,e=>{this.#r._focusEventsAllowed=!0,W(e)},{capture:!0,signal:n})),e.addEventListener(`pointerdown`,e=>e.stopPropagation(),{signal:n});let r=t=>{t.preventDefault(),e===this.#t?this.edit():this.#r.toggleComment(!0)};return e.addEventListener(`click`,r,{capture:!0,signal:n}),e.addEventListener(`keydown`,t=>{t.target===e&&t.key===`Enter`&&(this.#n=!0,r(t))},{signal:n}),e.addEventListener(`pointerenter`,()=>{this.#r.toggleComment(!1,!0)},{signal:n}),e.addEventListener(`pointerleave`,()=>{this.#r.toggleComment(!1,!1)},{signal:n}),e}edit(e){let t=this.commentPopupPositionInLayer,n,r;if(t)[n,r]=t;else{[n,r]=this.#r.commentButtonPosition;let{width:e,height:t,x:i,y:a}=this.#r;n=i+n*e,r=a+r*t}let i=this.#r.parent.boundingClientRect,{x:a,y:o,width:s,height:c}=i;this.#r._uiManager.editComment(this.#r,a+n*s,o+r*c,{...e,parentDimensions:i})}finish(){this.#t&&(this.#t.focus({focusVisible:this.#n}),this.#n=!1)}isDeleted(){return this.#c||this.#o===``}isEmpty(){return this.#o===null}hasBeenEdited(){return this.isDeleted()||this.#o!==this.#i}serialize(){return this.data}get data(){return{text:this.#o,richText:this.#a,date:this.#s,deleted:this.isDeleted()}}set data(e){if(e!==this.#o&&(this.#a=null),e===null){this.#o=``,this.#c=!0;return}this.#o=e,this.#s=new Date,this.#c=!1}setInitialText(e,t=null){this.#i=e,this.data=e,this.#s=null,this.#a=t}shown(){}destroy(){this.#t?.remove(),this.#t=null,this.#e?.remove(),this.#e=null,this.#o=``,this.#a=null,this.#s=null,this.#r=null,this.#n=!1,this.#c=!1}},la=class e{#e;#t=!1;#n=null;#r;#i;#a;#o;#s=null;#c;#l=null;#u;#d=null;constructor({container:e,isPinchingDisabled:t=null,isPinchingStopped:n=null,onPinchStart:r=null,onPinching:i=null,onPinchEnd:a=null,signal:o}){this.#e=e,this.#n=n,this.#r=t,this.#i=r,this.#a=i,this.#o=a,this.#u=new AbortController,this.#c=AbortSignal.any([o,this.#u.signal]),e.addEventListener(`touchstart`,this.#f.bind(this),{passive:!1,signal:this.#c})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return 35/Ri.pixelRatio}#f(e){if(this.#r?.())return;if(e.touches.length===1){if(this.#s)return;let e=this.#s=new AbortController,t=AbortSignal.any([this.#c,e.signal]),n=this.#e,r={capture:!0,signal:t,passive:!1},i=e=>{e.pointerType===`touch`&&(this.#s?.abort(),this.#s=null)};n.addEventListener(`pointerdown`,e=>{e.pointerType===`touch`&&(W(e),i(e))},r),n.addEventListener(`pointerup`,i,r),n.addEventListener(`pointercancel`,i,r);return}if(!this.#d){this.#d=new AbortController;let e=AbortSignal.any([this.#c,this.#d.signal]),t=this.#e,n={signal:e,capture:!1,passive:!1};t.addEventListener(`touchmove`,this.#p.bind(this),n);let r=this.#m.bind(this);t.addEventListener(`touchend`,r,n),t.addEventListener(`touchcancel`,r,n),n.capture=!0,t.addEventListener(`pointerdown`,W,n),t.addEventListener(`pointermove`,W,n),t.addEventListener(`pointercancel`,W,n),t.addEventListener(`pointerup`,W,n),this.#i?.()}if(W(e),e.touches.length!==2||this.#n?.()){this.#l=null;return}let[t,n]=e.touches;t.identifier>n.identifier&&([t,n]=[n,t]),this.#l={touch0X:t.screenX,touch0Y:t.screenY,touch1X:n.screenX,touch1Y:n.screenY}}#p(t){if(!this.#l||t.touches.length!==2)return;W(t);let[n,r]=t.touches;n.identifier>r.identifier&&([n,r]=[r,n]);let{screenX:i,screenY:a}=n,{screenX:o,screenY:s}=r,c=this.#l,{touch0X:l,touch0Y:u,touch1X:d,touch1Y:f}=c,p=d-l,m=f-u,h=o-i,g=s-a,_=Math.hypot(h,g)||1,v=Math.hypot(p,m)||1;if(!this.#t&&Math.abs(v-_)<=e.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(c.touch0X=i,c.touch0Y=a,c.touch1X=o,c.touch1Y=s,!this.#t){this.#t=!0;return}let y=[(i+o)/2,(a+s)/2];this.#a?.(y,v,_)}#m(e){e.touches.length>=2||(this.#d&&(this.#d.abort(),this.#d=null,this.#o?.()),this.#l&&(W(e),this.#l=null,this.#t=!1))}destroy(){this.#u?.abort(),this.#u=null,this.#s?.abort(),this.#s=null}},ua=class e{#e=null;#t=null;#n=null;#r=null;#i=null;#a=!1;#o=null;#s=``;#c=null;#l=null;#u=null;#d=null;#f=null;#p=``;#m=!1;#h=null;#g=!1;#_=!1;#v=!1;#y=null;#b=0;#x=0;#S=null;#C=null;isSelected=!1;_isCopy=!1;_editToolbar=null;_initialOptions=Object.create(null);_initialData=null;_isVisible=!0;_uiManager=null;_focusEventsAllowed=!0;static _l10n=null;static _l10nResizer=null;#w=!1;#T=e._zIndex++;static _borderLineWidth=-1;static _colorManager=new aa;static _zIndex=1;static _telemetryTimeout=1e3;static get _resizerKeyboardManager(){let t=e.prototype._resizeWithKeyboard,n=oa.TRANSLATE_SMALL,r=oa.TRANSLATE_BIG;return B(this,`_resizerKeyboardManager`,new ia([[[`ArrowLeft`,`mac+ArrowLeft`],t,{args:[-n,0]}],[[`ctrl+ArrowLeft`,`mac+shift+ArrowLeft`],t,{args:[-r,0]}],[[`ArrowRight`,`mac+ArrowRight`],t,{args:[n,0]}],[[`ctrl+ArrowRight`,`mac+shift+ArrowRight`],t,{args:[r,0]}],[[`ArrowUp`,`mac+ArrowUp`],t,{args:[0,-n]}],[[`ctrl+ArrowUp`,`mac+shift+ArrowUp`],t,{args:[0,-r]}],[[`ArrowDown`,`mac+ArrowDown`],t,{args:[0,n]}],[[`ctrl+ArrowDown`,`mac+shift+ArrowDown`],t,{args:[0,r]}],[[`Escape`,`mac+Escape`],e.prototype._stopResizingWithKeyboard]]))}constructor(e){this.parent=e.parent,this.id=e.id,this.width=this.height=null,this.pageIndex=e.parent.pageIndex,this.name=e.name,this.div=null,this._uiManager=e.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=e.isCentered,this._structTreeParentId=null,this.annotationElementId=e.annotationElementId||null,this.creationDate=e.creationDate||new Date,this.modificationDate=e.modificationDate||null,this.canAddComment=!0;let{rotation:t,rawDims:{pageWidth:n,pageHeight:r,pageX:i,pageY:a}}=this.parent.viewport;this.rotation=t,this.pageRotation=(360+t-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[n,r],this.pageTranslation=[i,a];let[o,s]=this.parentDimensions;this.x=e.x/o,this.y=e.y/s,this.isAttachedToDOM=!1,this.deleted=!1}get editorType(){return Object.getPrototypeOf(this).constructor._type}get mode(){return Object.getPrototypeOf(this).constructor._editorType}static get isDrawer(){return!1}static get _defaultLineColor(){return B(this,`_defaultLineColor`,this._colorManager.getHexCode(`CanvasText`))}static deleteAnnotationElement(e){let t=new da({id:e.parent.getNextId(),parent:e.parent,uiManager:e._uiManager});t.annotationElementId=e.annotationElementId,t.deleted=!0,t._uiManager.addToAnnotationStorage(t)}static initialize(t,n){if(e._l10n??=t,e._l10nResizer||=Object.freeze({topLeft:`pdfjs-editor-resizer-top-left`,topMiddle:`pdfjs-editor-resizer-top-middle`,topRight:`pdfjs-editor-resizer-top-right`,middleRight:`pdfjs-editor-resizer-middle-right`,bottomRight:`pdfjs-editor-resizer-bottom-right`,bottomMiddle:`pdfjs-editor-resizer-bottom-middle`,bottomLeft:`pdfjs-editor-resizer-bottom-left`,middleLeft:`pdfjs-editor-resizer-middle-left`}),e._borderLineWidth!==-1)return;let r=getComputedStyle(document.documentElement);e._borderLineWidth=parseFloat(r.getPropertyValue(`--outline-width`))||0}static updateDefaultParams(e,t){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(e){return!1}static paste(e,t){Wr(`Not implemented`)}get propertiesToUpdate(){return[]}get _isDraggable(){return this.#w}set _isDraggable(e){this.#w=e,this.div?.classList.toggle(`draggable`,e)}get uid(){return this.annotationElementId||this.id}get isEnterHandled(){return!0}center(){let[e,t]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*t/(e*2),this.y+=this.width*e/(t*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*t/(e*2),this.y-=this.width*e/(t*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(e){this._uiManager.addCommands(e)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=this.#T}setParent(e){e===null?(this.#W(),this.#d?.remove(),this.#d=null):(this.pageIndex=e.pageIndex,this.pageDimensions=e.pageDimensions),this.parent=e}focusin(e){this._focusEventsAllowed&&(this.#m?this.#m=!1:this.parent.setSelected(this))}focusout(e){this._focusEventsAllowed&&this.isAttachedToDOM&&(e.relatedTarget?.closest(`#${this.id}`)||(e.preventDefault(),this.parent?.isMultipleSelection||this.commitOrRemove()))}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.isInEditMode()&&this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(e,t,n,r){let[i,a]=this.parentDimensions;[n,r]=this.screenToPageTranslation(n,r),this.x=(e+n)/i,this.y=(t+r)/a,this.fixAndSetPosition()}_moveAfterPaste(e,t){let[n,r]=this.parentDimensions;this.setAt(e*n,t*r,this.width*n,this.height*r),this._onTranslated()}#E([e,t],n,r){[n,r]=this.screenToPageTranslation(n,r),this.x+=n/e,this.y+=r/t,this._onTranslating(this.x,this.y),this.fixAndSetPosition()}translate(e,t){this.#E(this.parentDimensions,e,t)}translateInPage(e,t){this.#h||=[this.x,this.y,this.width,this.height],this.#E(this.pageDimensions,e,t),this.div.scrollIntoView({block:`nearest`})}translationDone(){this._onTranslated(this.x,this.y)}drag(e,t){this.#h||=[this.x,this.y,this.width,this.height];let{div:n,parentDimensions:[r,i]}=this;if(this.x+=e/r,this.y+=t/i,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){let{x:e,y:t}=this.div.getBoundingClientRect();this.parent.findNewParent(this,e,t)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:a,y:o}=this,[s,c]=this.getBaseTranslation();a+=s,o+=c;let{style:l}=n;l.left=`${(100*a).toFixed(2)}%`,l.top=`${(100*o).toFixed(2)}%`,this._onTranslating(a,o),n.scrollIntoView({block:`nearest`})}_onTranslating(e,t){}_onTranslated(e,t){}get _hasBeenMoved(){return!!this.#h&&(this.#h[0]!==this.x||this.#h[1]!==this.y)}get _hasBeenResized(){return!!this.#h&&(this.#h[2]!==this.width||this.#h[3]!==this.height)}getBaseTranslation(){let[t,n]=this.parentDimensions,{_borderLineWidth:r}=e,i=r/t,a=r/n;switch(this.rotation){case 90:return[-i,a];case 180:return[i,a];case 270:return[i,-a];default:return[-i,-a]}}get _mustFixPosition(){return!0}fixAndSetPosition(e=this.rotation){let{div:{style:t},pageDimensions:[n,r]}=this,{x:i,y:a,width:o,height:s}=this;if(o*=n,s*=r,i*=n,a*=r,this._mustFixPosition)switch(e){case 0:i=mi(i,0,n-o),a=mi(a,0,r-s);break;case 90:i=mi(i,0,n-s),a=mi(a,o,r);break;case 180:i=mi(i,o,n),a=mi(a,s,r);break;case 270:i=mi(i,s,n),a=mi(a,0,r-o);break}this.x=i/=n,this.y=a/=r;let[c,l]=this.getBaseTranslation();i+=c,a+=l,t.left=`${(100*i).toFixed(2)}%`,t.top=`${(100*a).toFixed(2)}%`,this.moveInDOM()}static#D(e,t,n){switch(n){case 90:return[t,-e];case 180:return[-e,-t];case 270:return[-t,e];default:return[e,t]}}screenToPageTranslation(t,n){return e.#D(t,n,this.parentRotation)}pageTranslationToScreen(t,n){return e.#D(t,n,360-this.parentRotation)}#O(e){switch(e){case 90:{let[e,t]=this.pageDimensions;return[0,-e/t,t/e,0]}case 180:return[-1,0,0,-1];case 270:{let[e,t]=this.pageDimensions;return[0,e/t,-t/e,0]}default:return[1,0,0,1]}}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){let{parentScale:e,pageDimensions:[t,n]}=this;return[t*e,n*e]}setDims(){let{div:{style:e},width:t,height:n}=this;e.width=`${(100*t).toFixed(2)}%`,e.height=`${(100*n).toFixed(2)}%`}getInitialTranslation(){return[0,0]}#k(){if(this.#c)return;this.#c=document.createElement(`div`),this.#c.classList.add(`resizers`);let e=this._willKeepAspectRatio?[`topLeft`,`topRight`,`bottomRight`,`bottomLeft`]:[`topLeft`,`topMiddle`,`topRight`,`middleRight`,`bottomRight`,`bottomMiddle`,`bottomLeft`,`middleLeft`],t=this._uiManager._signal;for(let n of e){let e=document.createElement(`div`);this.#c.append(e),e.classList.add(`resizer`,n),e.setAttribute(`data-resizer-name`,n),e.addEventListener(`pointerdown`,this.#A.bind(this,n),{signal:t}),e.addEventListener(`contextmenu`,U,{signal:t}),e.tabIndex=-1}this.div.prepend(this.#c)}#A(e,t){t.preventDefault();let{isMac:n}=V.platform;if(t.button!==0||t.ctrlKey&&n)return;this.#n?.toggle(!1);let r=this._isDraggable;this._isDraggable=!1,this.#l=[t.screenX,t.screenY];let i=new AbortController,a=this._uiManager.combinedSignal(i);this.parent.togglePointerEvents(!1),window.addEventListener(`pointermove`,this.#N.bind(this,e),{passive:!0,capture:!0,signal:a}),window.addEventListener(`touchmove`,W,{passive:!1,signal:a}),window.addEventListener(`contextmenu`,U,{signal:a}),this.#u={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height};let o=this.parent.div.style.cursor,s=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(t.target).cursor;let c=()=>{i.abort(),this.parent.togglePointerEvents(!0),this.#n?.toggle(!0),this._isDraggable=r,this.parent.div.style.cursor=o,this.div.style.cursor=s,this.#M()};window.addEventListener(`pointerup`,c,{signal:a}),window.addEventListener(`blur`,c,{signal:a})}#j(e,t,n,r){this.width=n,this.height=r,this.x=e,this.y=t,this.setDims(),this.fixAndSetPosition(),this._onResized()}_onResized(){}#M(){if(!this.#u)return;let{savedX:e,savedY:t,savedWidth:n,savedHeight:r}=this.#u;this.#u=null;let i=this.x,a=this.y,o=this.width,s=this.height;i===e&&a===t&&o===n&&s===r||this.addCommands({cmd:this.#j.bind(this,i,a,o,s),undo:this.#j.bind(this,e,t,n,r),mustExec:!0})}static _round(e){return Math.round(e*1e4)/1e4}#N(t,n){let[r,i]=this.parentDimensions,a=this.x,o=this.y,s=this.width,c=this.height,l=e.MIN_SIZE/r,u=e.MIN_SIZE/i,d=this.#O(this.rotation),f=(e,t)=>[d[0]*e+d[2]*t,d[1]*e+d[3]*t],p=this.#O(360-this.rotation),m=(e,t)=>[p[0]*e+p[2]*t,p[1]*e+p[3]*t],h,g,_=!1,v=!1;switch(t){case`topLeft`:_=!0,h=(e,t)=>[0,0],g=(e,t)=>[e,t];break;case`topMiddle`:h=(e,t)=>[e/2,0],g=(e,t)=>[e/2,t];break;case`topRight`:_=!0,h=(e,t)=>[e,0],g=(e,t)=>[0,t];break;case`middleRight`:v=!0,h=(e,t)=>[e,t/2],g=(e,t)=>[0,t/2];break;case`bottomRight`:_=!0,h=(e,t)=>[e,t],g=(e,t)=>[0,0];break;case`bottomMiddle`:h=(e,t)=>[e/2,t],g=(e,t)=>[e/2,0];break;case`bottomLeft`:_=!0,h=(e,t)=>[0,t],g=(e,t)=>[e,0];break;case`middleLeft`:v=!0,h=(e,t)=>[0,t/2],g=(e,t)=>[e,t/2];break}let y=h(s,c),b=g(s,c),x=f(...b),S=e._round(a+x[0]),C=e._round(o+x[1]),w=1,T=1,E,D;if(n.fromKeyboard)({deltaX:E,deltaY:D}=n);else{let{screenX:e,screenY:t}=n,[r,i]=this.#l;[E,D]=this.screenToPageTranslation(e-r,t-i),this.#l[0]=e,this.#l[1]=t}if([E,D]=m(E/r,D/i),_){let e=Math.hypot(s,c);w=T=Math.max(Math.min(Math.hypot(b[0]-y[0]-E,b[1]-y[1]-D)/e,1/s,1/c),l/s,u/c)}else v?w=mi(Math.abs(b[0]-y[0]-E),l,1)/s:T=mi(Math.abs(b[1]-y[1]-D),u,1)/c;let O=e._round(s*w),k=e._round(c*T);x=f(...g(O,k));let A=S-x[0],ee=C-x[1];this.#h||=[this.x,this.y,this.width,this.height],this.width=O,this.height=k,this.x=A,this.y=ee,this.setDims(),this.fixAndSetPosition(),this._onResizing()}_onResizing(){}altTextFinish(){this.#n?.finish()}get toolbarButtons(){return null}async addEditToolbar(){if(this._editToolbar||this.#_)return this._editToolbar;this._editToolbar=new Zi(this),this.div.append(this._editToolbar.render());let{toolbarButtons:e}=this;if(e)for(let[t,n]of e)await this._editToolbar.addButton(t,n);return this.hasComment||this._editToolbar.addButton(`comment`,this.addCommentButton()),this._editToolbar.addButton(`delete`),this._editToolbar}addCommentButtonInToolbar(){this._editToolbar?.addButtonBefore(`comment`,this.addCommentButton(),`.deleteButton`)}removeCommentButtonFromToolbar(){this._editToolbar?.removeButton(`comment`)}removeEditToolbar(){this._editToolbar?.remove(),this._editToolbar=null,this.#n?.destroy()}addContainer(e){let t=this._editToolbar?.div;t?t.before(e):this.div.append(e)}getClientDimensions(){return this.div.getBoundingClientRect()}createAltText(){return this.#n||(sa.initialize(e._l10n),this.#n=new sa(this),this.#e&&=(this.#n.data=this.#e,null)),this.#n}get altTextData(){return this.#n?.data}set altTextData(e){this.#n&&(this.#n.data=e)}get guessedAltText(){return this.#n?.guessedText}async setGuessedAltText(e){await this.#n?.setGuessedText(e)}serializeAltText(e){return this.#n?.serialize(e)}hasAltText(){return!!this.#n&&!this.#n.isEmpty()}hasAltTextData(){return this.#n?.hasData()??!1}focusCommentButton(){this.#r?.focusButton()}addCommentButton(){return this.canAddComment?this.#r||=new ca(this):null}addStandaloneCommentButton(){if(this._uiManager.hasCommentManager()){if(this.#i){this._uiManager.isEditingMode()&&this.#i.classList.remove(`hidden`);return}this.hasComment&&(this.#i=this.#r.renderForStandalone(),this.div.append(this.#i))}}removeStandaloneCommentButton(){this.#r.removeStandaloneCommentButton(),this.#i=null}hideStandaloneCommentButton(){this.#i?.classList.add(`hidden`)}get comment(){let{data:{richText:e,text:t,date:n,deleted:r}}=this.#r;return{text:t,richText:e,date:n,deleted:r,color:this.getNonHCMColor(),opacity:this.opacity??1}}set comment(e){this.#r||=new ca(this),this.#r.data=e,this.hasComment?(this.removeCommentButtonFromToolbar(),this.addStandaloneCommentButton(),this._uiManager.updateComment(this)):(this.addCommentButtonInToolbar(),this.removeStandaloneCommentButton(),this._uiManager.removeComment(this))}setCommentData({comment:e,popupRef:t,richText:n}){if(!t||(this.#r||=new ca(this),this.#r.setInitialText(e,n),!this.annotationElementId))return;let r=this._uiManager.getAndRemoveDataFromAnnotationStorage(this.annotationElementId);r&&this.updateFromAnnotationLayer(r)}get hasEditedComment(){return this.#r?.hasBeenEdited()}get hasDeletedComment(){return this.#r?.isDeleted()}get hasComment(){return!!this.#r&&!this.#r.isEmpty()&&!this.#r.isDeleted()}async editComment(e){this.#r||=new ca(this),this.#r.edit(e)}toggleComment(e,t=void 0){this.hasComment&&this._uiManager.toggleComment(this,e,t)}setSelectedCommentButton(e){this.#r.setSelectedButton(e)}addComment(e){if(this.hasEditedComment){let[,,,t]=e.rect,[n]=this.pageDimensions,[r]=this.pageTranslation,i=r+n+1,a=t-100,o=i+180;e.popup={contents:this.comment.text,deleted:this.comment.deleted,rect:[i,a,o,t]}}}updateFromAnnotationLayer({popup:{contents:e,deleted:t}}){this.#r.data=t?null:e}get parentBoundingClientRect(){return this.parent.boundingClientRect}render(){let e=this.div=document.createElement(`div`);e.setAttribute(`data-editor-rotation`,(360-this.rotation)%360),e.className=this.name,e.setAttribute(`id`,this.id),e.tabIndex=this.#a?-1:0,e.setAttribute(`role`,`application`),this.defaultL10nId&&e.setAttribute(`data-l10n-id`,this.defaultL10nId),this._isVisible||e.classList.add(`hidden`),this.setInForeground(),this.#z();let[t,n]=this.parentDimensions;this.parentRotation%180!=0&&(e.style.maxWidth=`${(100*n/t).toFixed(2)}%`,e.style.maxHeight=`${(100*t/n).toFixed(2)}%`);let[r,i]=this.getInitialTranslation();return this.translate(r,i),$i(this,e,[`keydown`,`pointerdown`,`dblclick`]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(this.#C||=new la({container:e,isPinchingDisabled:()=>!this.isSelected,onPinchStart:this.#P.bind(this),onPinching:this.#F.bind(this),onPinchEnd:this.#I.bind(this),signal:this._uiManager._signal})),this.addStandaloneCommentButton(),this._uiManager._editorUndoBar?.hide(),e}#P(){this.#u={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height},this.#n?.toggle(!1),this.parent.togglePointerEvents(!1)}#F(t,n,r){let i=.7,a=i*(r/n)+1-i;if(a===1)return;let o=this.#O(this.rotation),s=(e,t)=>[o[0]*e+o[2]*t,o[1]*e+o[3]*t],[c,l]=this.parentDimensions,u=this.x,d=this.y,f=this.width,p=this.height,m=e.MIN_SIZE/c,h=e.MIN_SIZE/l;a=Math.max(Math.min(a,1/f,1/p),m/f,h/p);let g=e._round(f*a),_=e._round(p*a);if(g===f&&_===p)return;this.#h||=[u,d,f,p];let v=s(f/2,p/2),y=e._round(u+v[0]),b=e._round(d+v[1]),x=s(g/2,_/2);this.x=y-x[0],this.y=b-x[1],this.width=g,this.height=_,this.setDims(),this.fixAndSetPosition(),this._onResizing()}#I(){this.#n?.toggle(!0),this.parent.togglePointerEvents(!0),this.#M()}pointerdown(e){let{isMac:t}=V.platform;if(e.button!==0||e.ctrlKey&&t){e.preventDefault();return}if(this.#m=!0,this._isDraggable){this.#R(e);return}this.#L(e)}#L(e){let{isMac:t}=V.platform;e.ctrlKey&&!t||e.shiftKey||e.metaKey&&t?this.parent.toggleSelected(this):this.parent.setSelected(this)}#R(e){let{isSelected:t}=this;this._uiManager.setUpDragSession();let n=!1,r=new AbortController,i=this._uiManager.combinedSignal(r),a={capture:!0,passive:!1,signal:i},o=e=>{r.abort(),this.#o=null,this.#m=!1,this._uiManager.endDragSession()||this.#L(e),n&&this._onStopDragging()};t&&(this.#b=e.clientX,this.#x=e.clientY,this.#o=e.pointerId,this.#s=e.pointerType,window.addEventListener(`pointermove`,e=>{n||(n=!0,this._uiManager.toggleComment(this,!0,!1),this._onStartDragging());let{clientX:t,clientY:r,pointerId:i}=e;if(i!==this.#o){W(e);return}let[a,o]=this.screenToPageTranslation(t-this.#b,r-this.#x);this.#b=t,this.#x=r,this._uiManager.dragSelectedEditors(a,o)},a),window.addEventListener(`touchmove`,W,a),window.addEventListener(`pointerdown`,e=>{e.pointerType===this.#s&&(this.#C||e.isPrimary)&&o(e),W(e)},a));let s=e=>{if(!this.#o||this.#o===e.pointerId){o(e);return}W(e)};window.addEventListener(`pointerup`,s,{signal:i}),window.addEventListener(`blur`,s,{signal:i})}_onStartDragging(){}_onStopDragging(){}moveInDOM(){this.#y&&clearTimeout(this.#y),this.#y=setTimeout(()=>{this.#y=null,this.parent?.moveEditorInDOM(this)},0)}_setParentAndPosition(e,t,n){e.changeParent(this),this.x=t,this.y=n,this.fixAndSetPosition(),this._onTranslated()}getRect(e,t,n=this.rotation){let r=this.parentScale,[i,a]=this.pageDimensions,[o,s]=this.pageTranslation,c=e/r,l=t/r,u=this.x*i,d=this.y*a,f=this.width*i,p=this.height*a;switch(n){case 0:return[u+c+o,a-d-l-p+s,u+c+f+o,a-d-l+s];case 90:return[u+l+o,a-d+c+s,u+l+p+o,a-d+c+f+s];case 180:return[u-c-f+o,a-d+l+s,u-c+o,a-d+l+p+s];case 270:return[u-l-p+o,a-d-c-f+s,u-l+o,a-d-c+s];default:throw Error(`Invalid rotation`)}}getRectInCurrentCoords(e,t){let[n,r,i,a]=e,o=i-n,s=a-r;switch(this.rotation){case 0:return[n,t-a,o,s];case 90:return[n,t-r,s,o];case 180:return[i,t-r,o,s];case 270:return[i,t-a,s,o];default:throw Error(`Invalid rotation`)}}getPDFRect(){return this.getRect(0,0)}getNonHCMColor(){return this.color&&e._colorManager.convert(this._uiManager.getNonHCMColor(this.color))}onUpdatedColor(){this.#r?.onUpdatedColor()}getData(){let{comment:{text:e,color:t,date:n,opacity:r,deleted:i,richText:a},uid:o,pageIndex:s,creationDate:c,modificationDate:l}=this;return{id:o,pageIndex:s,rect:this.getPDFRect(),richText:a,contentsObj:{str:e},creationDate:c,modificationDate:n||l,popupRef:!i,color:t,opacity:r}}onceAdded(e){}isEmpty(){return!1}enableEditMode(){return this.isInEditMode()?!1:(this.parent.setEditingState(!1),this.#_=!0,!0)}disableEditMode(){return this.isInEditMode()?(this.parent.setEditingState(!0),this.#_=!1,!0):!1}isInEditMode(){return this.#_}shouldGetKeyboardEvents(){return this.#v}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){let{top:e,left:t,bottom:n,right:r}=this.getClientDimensions(),{innerHeight:i,innerWidth:a}=window;return t<a&&r>0&&e<i&&n>0}#z(){if(this.#f||!this.div)return;this.#f=new AbortController;let e=this._uiManager.combinedSignal(this.#f);this.div.addEventListener(`focusin`,this.focusin.bind(this),{signal:e}),this.div.addEventListener(`focusout`,this.focusout.bind(this),{signal:e})}rebuild(){this.#z()}rotate(e){}resize(){}serializeDeleted(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:this._initialData?.popupRef||``}}serialize(e=!1,t=null){return{annotationType:this.mode,pageIndex:this.pageIndex,rect:this.getPDFRect(),rotation:this.rotation,structTreeParentId:this._structTreeParentId,popupRef:this._initialData?.popupRef||``}}static async deserialize(e,t,n){let r=new this.prototype.constructor({parent:t,id:t.getNextId(),uiManager:n,annotationElementId:e.annotationElementId,creationDate:e.creationDate,modificationDate:e.modificationDate});r.rotation=e.rotation,r.#e=e.accessibilityData,r._isCopy=e.isCopy||!1;let[i,a]=r.pageDimensions,[o,s,c,l]=r.getRectInCurrentCoords(e.rect,a);return r.x=o/i,r.y=s/a,r.width=c/i,r.height=l/a,r}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){if(this.#f?.abort(),this.#f=null,this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),this.hideCommentPopup(),this.#y&&=(clearTimeout(this.#y),null),this.#W(),this.removeEditToolbar(),this.#S){for(let e of this.#S.values())clearTimeout(e);this.#S=null}this.parent=null,this.#C?.destroy(),this.#C=null,this.#d?.remove(),this.#d=null}get isResizable(){return!1}makeResizable(){this.isResizable&&(this.#k(),this.#c.classList.remove(`hidden`))}get toolbarPosition(){return null}get commentButtonPosition(){return this._uiManager.direction===`ltr`?[1,0]:[0,0]}get commentButtonPositionInPage(){let{commentButtonPosition:[t,n]}=this,[r,i,a,o]=this.getPDFRect();return[e._round(r+(a-r)*t),e._round(i+(o-i)*(1-n))]}get commentButtonColor(){return this._uiManager.makeCommentColor(this.getNonHCMColor(),this.opacity)}get commentPopupPosition(){return this.#r.commentPopupPositionInLayer}set commentPopupPosition(e){this.#r.commentPopupPositionInLayer=e}hasDefaultPopupPosition(){return this.#r.hasDefaultPopupPosition()}get commentButtonWidth(){return this.#r.commentButtonWidth}get elementBeforePopup(){return this.div}setCommentButtonStates(e){this.#r?.setCommentButtonStates(e)}keydown(t){if(!this.isResizable||t.target!==this.div||t.key!==`Enter`)return;this._uiManager.setSelected(this),this.#u={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height};let n=this.#c.children;if(!this.#t){this.#t=Array.from(n);let t=this.#B.bind(this),r=this.#V.bind(this),i=this._uiManager._signal;for(let n of this.#t){let a=n.getAttribute(`data-resizer-name`);n.setAttribute(`role`,`spinbutton`),n.addEventListener(`keydown`,t,{signal:i}),n.addEventListener(`blur`,r,{signal:i}),n.addEventListener(`focus`,this.#H.bind(this,a),{signal:i}),n.setAttribute(`data-l10n-id`,e._l10nResizer[a])}}let r=this.#t[0],i=0;for(let e of n){if(e===r)break;i++}let a=(360-this.rotation+this.parentRotation)%360/90*(this.#t.length/4);if(a!==i){if(a<i)for(let e=0;e<i-a;e++)this.#c.append(this.#c.firstChild);else if(a>i)for(let e=0;e<a-i;e++)this.#c.firstChild.before(this.#c.lastChild);let t=0;for(let r of n){let n=this.#t[t++].getAttribute(`data-resizer-name`);r.setAttribute(`data-l10n-id`,e._l10nResizer[n])}}this.#U(0),this.#v=!0,this.#c.firstChild.focus({focusVisible:!0}),t.preventDefault(),t.stopImmediatePropagation()}#B(t){e._resizerKeyboardManager.exec(this,t)}#V(e){this.#v&&e.relatedTarget?.parentNode!==this.#c&&this.#W()}#H(e){this.#p=this.#v?e:``}#U(e){if(this.#t)for(let t of this.#t)t.tabIndex=e}_resizeWithKeyboard(e,t){this.#v&&this.#N(this.#p,{deltaX:e,deltaY:t,fromKeyboard:!0})}#W(){this.#v=!1,this.#U(-1),this.#M()}_stopResizingWithKeyboard(){this.#W(),this.div.focus()}select(){if(this.isSelected&&this._editToolbar){this._editToolbar.show();return}if(this.isSelected=!0,this.makeResizable(),this.div?.classList.add(`selectedEditor`),!this._editToolbar){this.addEditToolbar().then(()=>{this.div?.classList.contains(`selectedEditor`)&&this._editToolbar?.show()});return}this._editToolbar?.show(),this.#n?.toggleAltTextBadge(!1)}focus(){this.div&&!this.div.contains(document.activeElement)&&setTimeout(()=>this.div?.focus({preventScroll:!0}),0)}unselect(){this.isSelected&&(this.isSelected=!1,this.#c?.classList.add(`hidden`),this.div?.classList.remove(`selectedEditor`),this.div?.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),this._editToolbar?.hide(),this.#n?.toggleAltTextBadge(!0),this.hideCommentPopup())}hideCommentPopup(){this.hasComment&&this._uiManager.toggleComment(null)}updateParams(e,t){}disableEditing(){}enableEditing(){}get canChangeContent(){return!1}enterInEditMode(){this.canChangeContent&&(this.enableEditMode(),this.div.focus())}dblclick(e){e.target.nodeName!==`BUTTON`&&(this.enterInEditMode(),this.parent.updateToolbar({mode:this.constructor._editorType,editId:this.uid}))}getElementForAltText(){return this.div}get contentDiv(){return this.div}get isEditing(){return this.#g}set isEditing(e){this.#g=e,this.parent&&(e?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:`added`}}get telemetryFinalData(){return null}_reportTelemetry(t,n=!1){if(n){this.#S||=new Map;let{action:n}=t,r=this.#S.get(n);r&&clearTimeout(r),r=setTimeout(()=>{this._reportTelemetry(t),this.#S.delete(n),this.#S.size===0&&(this.#S=null)},e._telemetryTimeout),this.#S.set(n,r);return}t.type||=this.editorType,this._uiManager._eventBus.dispatch(`reporttelemetry`,{source:this,details:{type:`editing`,data:t}})}show(e=this._isVisible){this.div.classList.toggle(`hidden`,!e),this._isVisible=e}enable(){this.div&&(this.div.tabIndex=0),this.#a=!1}disable(){this.div&&(this.div.tabIndex=-1),this.#a=!0}updateFakeAnnotationElement(e){if(!this.#d&&!this.deleted){this.#d=e.addFakeAnnotation(this);return}if(this.deleted){this.#d.remove(),this.#d=null;return}(this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized)&&this.#d.updateEdited({rect:this.getPDFRect(),popup:this.comment})}renderAnnotationElement(e){if(this.deleted)return e.hide(),null;let t=e.container.querySelector(`.annotationContent`);if(!t)t=document.createElement(`div`),t.classList.add(`annotationContent`,this.editorType),e.container.prepend(t);else if(t.nodeName===`CANVAS`){let e=t;t=document.createElement(`div`),t.classList.add(`annotationContent`,this.editorType),e.before(t)}return t}resetAnnotationElement(e){let{firstChild:t}=e.container;t?.nodeName===`DIV`&&t.classList.contains(`annotationContent`)&&t.remove()}},da=class extends ua{constructor(e){super(e),this.annotationElementId=e.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}},fa=3285377520,pa=4294901760,ma=65535,ha=class{constructor(e){this.h1=e?e&4294967295:fa,this.h2=e?e&4294967295:fa}update(e){let t,n;if(typeof e==`string`){t=new Uint8Array(e.length*2),n=0;for(let r=0,i=e.length;r<i;r++){let i=e.charCodeAt(r);i<=255?t[n++]=i:(t[n++]=i>>>8,t[n++]=i&255)}}else if(ArrayBuffer.isView(e))t=e.slice(),n=t.byteLength;else throw Error(`Invalid data format, must be a string or TypedArray.`);let r=n>>2,i=n-r*4,a=new Uint32Array(t.buffer,0,r),o=0,s=0,c=this.h1,l=this.h2,u=3432918353,d=461845907,f=u&ma,p=d&ma;for(let e=0;e<r;e++)e&1?(o=a[e],o=o*u&pa|o*f&ma,o=o<<15|o>>>17,o=o*d&pa|o*p&ma,c^=o,c=c<<13|c>>>19,c=c*5+3864292196):(s=a[e],s=s*u&pa|s*f&ma,s=s<<15|s>>>17,s=s*d&pa|s*p&ma,l^=s,l=l<<13|l>>>19,l=l*5+3864292196);switch(o=0,i){case 3:o^=t[r*4+2]<<16;case 2:o^=t[r*4+1]<<8;case 1:o^=t[r*4],o=o*u&pa|o*f&ma,o=o<<15|o>>>17,o=o*d&pa|o*p&ma,r&1?c^=o:l^=o}this.h1=c,this.h2=l}hexdigest(){let e=this.h1,t=this.h2;return e^=t>>>1,e=e*3981806797&pa|e*36045&ma,t=t*4283543511&pa|((t<<16|e>>>16)*2950163797&pa)>>>16,e^=t>>>1,e=e*444984403&pa|e*60499&ma,t=t*3301882366&pa|((t<<16|e>>>16)*3120437893&pa)>>>16,e^=t>>>1,(e>>>0).toString(16).padStart(8,`0`)+(t>>>0).toString(16).padStart(8,`0`)}},ga=Object.freeze({map:null,hash:``,transfer:void 0}),_a=class{#e=!1;#t=null;#n=null;#r=new Map;constructor(){this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(e,t){let n=this.#r.get(e);return n===void 0?t:Object.assign(t,n)}getRawValue(e){return this.#r.get(e)}remove(e){let t=this.#r.get(e);if(t!==void 0&&(t instanceof ua&&this.#n.delete(t.annotationElementId),this.#r.delete(e),this.#r.size===0&&this.resetModified(),typeof this.onAnnotationEditor==`function`)){for(let e of this.#r.values())if(e instanceof ua)return;this.onAnnotationEditor(null)}}setValue(e,t){let n=this.#r.get(e),r=!1;if(n!==void 0)for(let[e,i]of Object.entries(t))n[e]!==i&&(r=!0,n[e]=i);else r=!0,this.#r.set(e,t);r&&this.#i(),t instanceof ua&&((this.#n||=new Map).set(t.annotationElementId,t),typeof this.onAnnotationEditor==`function`&&this.onAnnotationEditor(t.constructor._type))}has(e){return this.#r.has(e)}get size(){return this.#r.size}#i(){this.#e||(this.#e=!0,typeof this.onSetModified==`function`&&this.onSetModified())}resetModified(){this.#e&&(this.#e=!1,typeof this.onResetModified==`function`&&this.onResetModified())}get print(){return new va(this)}get serializable(){if(this.#r.size===0)return ga;let e=new Map,t=new ha,n=[],r=Object.create(null),i=!1;for(let[n,a]of this.#r){let o=a instanceof ua?a.serialize(!1,r):a;o&&(e.set(n,o),t.update(`${n}:${JSON.stringify(o)}`),i||=!!o.bitmap)}if(i)for(let t of e.values())t.bitmap&&n.push(t.bitmap);return e.size>0?{map:e,hash:t.hexdigest(),transfer:n}:ga}get editorStats(){let e=null,t=new Map,n=0,r=0;for(let i of this.#r.values()){if(!(i instanceof ua)){i.popup&&(i.popup.deleted?r+=1:n+=1);continue}i.isCommentDeleted?r+=1:i.hasEditedComment&&(n+=1);let a=i.telemetryFinalData;if(!a)continue;let{type:o}=a;t.has(o)||t.set(o,Object.getPrototypeOf(i).constructor),e||=Object.create(null);let s=e[o]||=new Map;for(let[e,t]of Object.entries(a)){if(e===`type`)continue;let n=s.get(e);n||(n=new Map,s.set(e,n));let r=n.get(t)??0;n.set(t,r+1)}}if((r>0||n>0)&&(e||=Object.create(null),e.comments={deleted:r,edited:n}),!e)return null;for(let[n,r]of t)e[n]=r.computeTelemetryFinalData(e[n]);return e}resetModifiedIds(){this.#t=null}updateEditor(e,t){let n=this.#n?.get(e);return n?(n.updateFromAnnotationLayer(t),!0):!1}getEditor(e){return this.#n?.get(e)||null}get modifiedIds(){if(this.#t)return this.#t;let e=[];if(this.#n)for(let t of this.#n.values())t.serialize()&&e.push(t.annotationElementId);return this.#t={ids:new Set(e),hash:e.join(`,`)}}[Symbol.iterator](){return this.#r.entries()}},va=class extends _a{#e;constructor(e){super();let{map:t,hash:n,transfer:r}=e.serializable;this.#e={map:structuredClone(t,r?{transfer:r}:null),hash:n,transfer:r}}get print(){Wr(`Should not call PrintAnnotationStorage.print`)}get serializable(){return this.#e}get modifiedIds(){return B(this,`modifiedIds`,{ids:new Set,hash:``})}},ya=class{#e=new Set;constructor({ownerDocument:e=globalThis.document,styleElement:t=null}){this._document=e,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(e){this.nativeFontFaces.add(e),this._document.fonts.add(e)}removeNativeFontFace(e){this.nativeFontFaces.delete(e),this._document.fonts.delete(e)}insertRule(e){this.styleElement||(this.styleElement=this._document.createElement(`style`),this._document.documentElement.getElementsByTagName(`head`)[0].append(this.styleElement));let t=this.styleElement.sheet;t.insertRule(e,t.cssRules.length)}clear(){for(let e of this.nativeFontFaces)this._document.fonts.delete(e);this.nativeFontFaces.clear(),this.#e.clear(),this.styleElement&&=(this.styleElement.remove(),null)}async loadSystemFont({systemFontInfo:e,disableFontFace:t,_inspectFont:n}){if(!(!e||this.#e.has(e.loadedName))){if(z(!t,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){let{loadedName:t,src:r,style:i}=e,a=new FontFace(t,r,i);this.addNativeFontFace(a);try{await a.load(),this.#e.add(t),n?.(e)}catch{R(`Cannot load system font: ${e.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(a)}return}Wr(`Not implemented: loadSystemFont without the Font Loading API.`)}}async bind(e){if(e.attached||e.missingFile&&!e.systemFontInfo)return;if(e.attached=!0,e.systemFontInfo){await this.loadSystemFont(e);return}if(this.isFontLoadingAPISupported){let t=e.createNativeFontFace();if(t){this.addNativeFontFace(t);try{await t.loaded}catch(n){throw R(`Failed to load font '${t.family}': '${n}'.`),e.disableFontFace=!0,n}}return}let t=e.createFontFaceRule();if(t){if(this.insertRule(t),this.isSyncFontLoadingSupported)return;await new Promise(t=>{let n=this._queueLoadingCallback(t);this._prepareFontLoadEvent(e,n)})}}get isFontLoadingAPISupported(){let e=!!this._document?.fonts;return B(this,`isFontLoadingAPISupported`,e)}get isSyncFontLoadingSupported(){return B(this,`isSyncFontLoadingSupported`,wr||V.platform.isFirefox)}_queueLoadingCallback(e){function t(){for(z(!r.done,`completeRequest() cannot be called twice.`),r.done=!0;n.length>0&&n[0].done;){let e=n.shift();setTimeout(e.callback,0)}}let{loadingRequests:n}=this,r={done:!1,complete:t,callback:e};return n.push(r),r}get _loadTestFont(){let e=atob(`T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==`);return B(this,`_loadTestFont`,e)}_prepareFontLoadEvent(e,t){function n(e,t){return e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3)&255}function r(e,t,n,r){let i=e.substring(0,t),a=e.substring(t+n);return i+r+a}let i,a,o=this._document.createElement(`canvas`);o.width=1,o.height=1;let s=o.getContext(`2d`),c=0;function l(e,t){if(++c>30){R(`Load test font never loaded.`),t();return}if(s.font=`30px `+e,s.fillText(`.`,0,20),s.getImageData(0,0,1,1).data[3]>0){t();return}setTimeout(l.bind(null,e,t))}let u=`lt${Date.now()}${this.loadTestFontId++}`,d=this._loadTestFont;d=r(d,976,u.length,u);let f=1482184792,p=n(d,16);for(i=0,a=u.length-3;i<a;i+=4)p=p-f+n(u,i)|0;i<u.length&&(p=p-f+n(u+`XXX`,i)|0),d=r(d,16,4,ri(p));let m=`@font-face {font-family:"${u}";src:${`url(data:font/opentype;base64,${btoa(d)});`}}`;this.insertRule(m);let h=this._document.createElement(`div`);h.style.visibility=`hidden`,h.style.width=h.style.height=`10px`,h.style.position=`absolute`,h.style.top=h.style.left=`0px`;for(let t of[e.loadedName,u]){let e=this._document.createElement(`span`);e.textContent=`Hi`,e.style.fontFamily=t,h.append(e)}this._document.body.append(h),l(u,()=>{h.remove(),t.complete()})}},ba=class{#e;constructor(e,t=null,n,r){this.compiledGlyphs=Object.create(null),this.#e=e,this._inspectFont=t,n&&Object.assign(this,n),r&&(this.charProcOperatorList=r)}createNativeFontFace(){if(!this.data||this.disableFontFace)return null;let e;if(!this.cssFontInfo)e=new FontFace(this.loadedName,this.data,{});else{let t={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(t.style=`oblique ${this.cssFontInfo.italicAngle}deg`),e=new FontFace(this.cssFontInfo.fontFamily,this.data,t)}return this._inspectFont?.(this),e}createFontFaceRule(){if(!this.data||this.disableFontFace)return null;let e=`url(data:${this.mimetype};base64,${hi(this.data)});`,t;if(!this.cssFontInfo)t=`@font-face {font-family:"${this.loadedName}";src:${e}}`;else{let n=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(n+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),t=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${n}src:${e}}`}return this._inspectFont?.(this,e),t}getPathGenerator(e,t){if(this.compiledGlyphs[t]!==void 0)return this.compiledGlyphs[t];let n=this.loadedName+`_path_`+t,r;try{r=e.get(n)}catch(e){R(`getPathGenerator - ignoring character: "${e}".`)}let i=Xi(r);return this.fontExtraProperties||e.delete(n),this.compiledGlyphs[t]=i}get black(){return this.#e.black}get bold(){return this.#e.bold}get disableFontFace(){return this.#e.disableFontFace??!1}get fontExtraProperties(){return this.#e.fontExtraProperties??!1}get isInvalidPDFjsFont(){return this.#e.isInvalidPDFjsFont}get isType3Font(){return this.#e.isType3Font}get italic(){return this.#e.italic}get missingFile(){return this.#e.missingFile}get remeasure(){return this.#e.remeasure}get vertical(){return this.#e.vertical}get ascent(){return this.#e.ascent}get defaultWidth(){return this.#e.defaultWidth}get descent(){return this.#e.descent}get bbox(){return this.#e.bbox}get fontMatrix(){return this.#e.fontMatrix}get fallbackName(){return this.#e.fallbackName}get loadedName(){return this.#e.loadedName}get mimetype(){return this.#e.mimetype}get name(){return this.#e.name}get data(){return this.#e.data}clearData(){this.#e.clearData()}get cssFontInfo(){return this.#e.cssFontInfo}get systemFontInfo(){return this.#e.systemFontInfo}get defaultVMetrics(){return this.#e.defaultVMetrics}},xa=class e{#e;#t;#n;static strings=[`fontFamily`,`fontWeight`,`italicAngle`];static write(t){let n=new TextEncoder,r={},i=0;for(let a of e.strings){let e=n.encode(t[a]);r[a]=e,i+=4+e.length}let a=new ArrayBuffer(i),o=new Uint8Array(a),s=new DataView(a),c=0;for(let t of e.strings){let e=r[t],n=e.length;s.setUint32(c,n),o.set(e,c+4),c+=4+n}return z(c===a.byteLength,`CssFontInfo.write: Buffer overflow`),a}constructor(e){this.#e=e,this.#t=new DataView(this.#e),this.#n=new TextDecoder}#r(t){z(t<e.strings.length,`Invalid string index`);let n=0;for(let e=0;e<t;e++)n+=this.#t.getUint32(n)+4;let r=this.#t.getUint32(n);return this.#n.decode(new Uint8Array(this.#e,n+4,r))}get fontFamily(){return this.#r(0)}get fontWeight(){return this.#r(1)}get italicAngle(){return this.#r(2)}},Sa=class e{#e;#t;#n;static strings=[`css`,`loadedName`,`baseFontName`,`src`];static write(t){let n=new TextEncoder,r={},i=0;for(let a of e.strings){let e=n.encode(t[a]);r[a]=e,i+=4+e.length}i+=4;let a,o,s=1+i;t.style&&(a=n.encode(t.style.style),o=n.encode(t.style.weight),s+=4+a.length+4+o.length);let c=new ArrayBuffer(s),l=new Uint8Array(c),u=new DataView(c),d=0;u.setUint8(d++,t.guessFallback?1:0),u.setUint32(d,0),d+=4,i=0;for(let t of e.strings){let e=r[t],n=e.length;i+=4+n,u.setUint32(d,n),l.set(e,d+4),d+=4+n}return u.setUint32(d-i-4,i),t.style&&(u.setUint32(d,a.length),l.set(a,d+4),d+=4+a.length,u.setUint32(d,o.length),l.set(o,d+4),d+=4+o.length),z(d<=c.byteLength,`SubstitionInfo.write: Buffer overflow`),c.transferToFixedLength(d)}constructor(e){this.#e=e,this.#t=new DataView(this.#e),this.#n=new TextDecoder}get guessFallback(){return this.#t.getUint8(0)!==0}#r(t){z(t<e.strings.length,`Invalid string index`);let n=5;for(let e=0;e<t;e++)n+=this.#t.getUint32(n)+4;let r=this.#t.getUint32(n);return this.#n.decode(new Uint8Array(this.#e,n+4,r))}get css(){return this.#r(0)}get loadedName(){return this.#r(1)}get baseFontName(){return this.#r(2)}get src(){return this.#r(3)}get style(){let e=1;e+=4+this.#t.getUint32(e);let t=this.#t.getUint32(e),n=this.#n.decode(new Uint8Array(this.#e,e+4,t));e+=4+t;let r=this.#t.getUint32(e);return{style:n,weight:this.#n.decode(new Uint8Array(this.#e,e+4,r))}}},Ca=class e{static bools=[`black`,`bold`,`disableFontFace`,`fontExtraProperties`,`isInvalidPDFjsFont`,`isType3Font`,`italic`,`missingFile`,`remeasure`,`vertical`];static numbers=[`ascent`,`defaultWidth`,`descent`];static strings=[`fallbackName`,`loadedName`,`mimetype`,`name`];static#e=Math.ceil(this.bools.length*2/8);static#t=this.#e+this.numbers.length*8;static#n=this.#t+1+8;static#r=this.#n+1+48;static#i=this.#r+1+6;#a;#o;#s;constructor({data:e,extra:t}){this.#a=e,this.#o=new TextDecoder,this.#s=new DataView(this.#a),t&&Object.assign(this,t)}#c(t){z(t<e.bools.length,`Invalid boolean index`);let n=Math.floor(t/4),r=t*2%8,i=this.#s.getUint8(n)>>r&3;return i===0?void 0:i===2}get black(){return this.#c(0)}get bold(){return this.#c(1)}get disableFontFace(){return this.#c(2)}get fontExtraProperties(){return this.#c(3)}get isInvalidPDFjsFont(){return this.#c(4)}get isType3Font(){return this.#c(5)}get italic(){return this.#c(6)}get missingFile(){return this.#c(7)}get remeasure(){return this.#c(8)}get vertical(){return this.#c(9)}#l(t){return z(t<e.numbers.length,`Invalid number index`),this.#s.getFloat64(e.#e+t*8)}get ascent(){return this.#l(0)}get defaultWidth(){return this.#l(1)}get descent(){return this.#l(2)}get bbox(){let t=e.#t;if(this.#s.getUint8(t)===0)return;t+=1;let n=[];for(let e=0;e<4;e++)n.push(this.#s.getInt16(t,!0)),t+=2;return n}get fontMatrix(){let t=e.#n;if(this.#s.getUint8(t)===0)return;t+=1;let n=[];for(let e=0;e<6;e++)n.push(this.#s.getFloat64(t,!0)),t+=8;return n}get defaultVMetrics(){let t=e.#r;if(this.#s.getUint8(t)===0)return;t+=1;let n=[];for(let e=0;e<3;e++)n.push(this.#s.getInt16(t,!0)),t+=2;return n}#u(t){z(t<e.strings.length,`Invalid string index`);let n=e.#i+4;for(let e=0;e<t;e++)n+=this.#s.getUint32(n)+4;let r=this.#s.getUint32(n),i=new Uint8Array(r);return i.set(new Uint8Array(this.#a,n+4,r)),this.#o.decode(i)}get fallbackName(){return this.#u(0)}get loadedName(){return this.#u(1)}get mimetype(){return this.#u(2)}get name(){return this.#u(3)}get data(){let t=e.#i,n=this.#s.getUint32(t);t+=4+n;let r=this.#s.getUint32(t);t+=4+r;let i=this.#s.getUint32(t);t+=4+i;let a=this.#s.getUint32(t);if(a!==0)return new Uint8Array(this.#a,t+4,a)}clearData(){let t=e.#i,n=this.#s.getUint32(t);t+=4+n;let r=this.#s.getUint32(t);t+=4+r;let i=this.#s.getUint32(t);t+=4+i;let a=this.#s.getUint32(t);new Uint8Array(this.#a,t+4,a).fill(0),this.#s.setUint32(t,0)}get cssFontInfo(){let t=e.#i,n=this.#s.getUint32(t);t+=4+n;let r=this.#s.getUint32(t);t+=4+r;let i=this.#s.getUint32(t);if(i===0)return null;let a=new Uint8Array(i);return a.set(new Uint8Array(this.#a,t+4,i)),new xa(a.buffer)}get systemFontInfo(){let t=e.#i,n=this.#s.getUint32(t);t+=4+n;let r=this.#s.getUint32(t);if(r===0)return null;let i=new Uint8Array(r);return i.set(new Uint8Array(this.#a,t+4,r)),new Sa(i.buffer)}static write(t){let n=t.systemFontInfo?Sa.write(t.systemFontInfo):null,r=t.cssFontInfo?xa.write(t.cssFontInfo):null,i=new TextEncoder,a={},o=0;for(let n of e.strings)a[n]=i.encode(t[n]),o+=4+a[n].length;let s=e.#i+4+o+4+(n?n.byteLength:0)+4+(r?r.byteLength:0)+4+(t.data?t.data.length:0),c=new ArrayBuffer(s),l=new Uint8Array(c),u=new DataView(c),d=0,f=e.bools.length,p=0,m=0;for(let n=0;n<f;n++){let r=t[e.bools[n]];p|=(r===void 0?0:r?2:1)<<m,m+=2,(m===8||n===f-1)&&(u.setUint8(d++,p),p=0,m=0)}z(d===e.#e,`FontInfo.write: Boolean properties offset mismatch`);for(let n of e.numbers)u.setFloat64(d,t[n]),d+=8;if(z(d===e.#t,`FontInfo.write: Number properties offset mismatch`),t.bbox){u.setUint8(d++,4);for(let e of t.bbox)u.setInt16(d,e,!0),d+=2}else u.setUint8(d++,0),d+=8;if(z(d===e.#n,`FontInfo.write: BBox properties offset mismatch`),t.fontMatrix){u.setUint8(d++,6);for(let e of t.fontMatrix)u.setFloat64(d,e,!0),d+=8}else u.setUint8(d++,0),d+=48;if(z(d===e.#r,`FontInfo.write: FontMatrix properties offset mismatch`),t.defaultVMetrics){u.setUint8(d++,1);for(let e of t.defaultVMetrics)u.setInt16(d,e,!0),d+=2}else u.setUint8(d++,0),d+=6;z(d===e.#i,`FontInfo.write: DefaultVMetrics properties offset mismatch`),u.setUint32(e.#i,0),d+=4;for(let t of e.strings){let e=a[t],n=e.length;u.setUint32(d,n),l.set(e,d+4),d+=4+n}if(u.setUint32(e.#i,d-e.#i-4),!n)u.setUint32(d,0),d+=4;else{let e=n.byteLength;u.setUint32(d,e),z(d+4+e<=c.byteLength,`FontInfo.write: Buffer overflow at systemFontInfo`),l.set(new Uint8Array(n),d+4),d+=4+e}if(!r)u.setUint32(d,0),d+=4;else{let e=r.byteLength;u.setUint32(d,e),z(d+4+e<=c.byteLength,`FontInfo.write: Buffer overflow at cssFontInfo`),l.set(new Uint8Array(r),d+4),d+=4+e}return t.data===void 0?(u.setUint32(d,0),d+=4):(u.setUint32(d,t.data.length),l.set(t.data,d+4),d+=4+t.data.length),z(d<=c.byteLength,`FontInfo.write: Buffer overflow`),c.transferToFixedLength(d)}},wa=class e{static#e=0;static#t=1;static#n=2;static#r=3;static#i=4;static#a=8;static#o=12;static#s=16;constructor(e){this.buffer=e,this.view=new DataView(e),this.data=new Uint8Array(e)}static write(t){let n,r=null,i=[],a=[],o=[],s=[],c=null,l=null;switch(t[0]){case`RadialAxial`:n=t[1]===`axial`?1:2,r=t[2],o=t[3],n===1?i.push(...t[4],...t[5]):i.push(t[4][0],t[4][1],t[6],t[5][0],t[5][1],t[7]);break;case`Mesh`:n=3,c=t[1],i=t[2],a=t[3],s=t[4]||[],r=t[6],l=t[7];break;default:throw Error(`Unsupported pattern type: ${t[0]}`)}let u=Math.floor(i.length/2),d=Math.floor(a.length/3),f=o.length,p=s.length,m=0;for(let e of s)m+=1,m=Math.ceil(m/4)*4,m+=4+e.coords.length*4,m+=4+e.colors.length*4,e.verticesPerRow!==void 0&&(m+=4);let h=20+u*8+d*3+f*8+(r?16:0)+(l?3:0)+m,g=new ArrayBuffer(h),_=new DataView(g),v=new Uint8Array(g);_.setUint8(e.#e,n),_.setUint8(e.#t,r?1:0),_.setUint8(e.#n,l?1:0),_.setUint8(e.#r,c),_.setUint32(e.#i,u,!0),_.setUint32(e.#a,d,!0),_.setUint32(e.#o,f,!0),_.setUint32(e.#s,p,!0);let y=20;new Float32Array(g,y,u*2).set(i),y+=u*8,v.set(a,y),y+=d*3;for(let[e,t]of o)_.setFloat32(y,e,!0),y+=4,_.setUint32(y,parseInt(t.slice(1),16),!0),y+=4;if(r)for(let e of r)_.setFloat32(y,e,!0),y+=4;l&&(v.set(l,y),y+=3);for(let e=0;e<s.length;e++){let t=s[e];_.setUint8(y,t.type),y+=1,y=Math.ceil(y/4)*4,_.setUint32(y,t.coords.length,!0),y+=4,new Int32Array(g,y,t.coords.length).set(t.coords),y+=t.coords.length*4,_.setUint32(y,t.colors.length,!0),y+=4,new Int32Array(g,y,t.colors.length).set(t.colors),y+=t.colors.length*4,t.verticesPerRow!==void 0&&(_.setUint32(y,t.verticesPerRow,!0),y+=4)}return g}getIR(){let t=this.view,n=this.data[e.#e],r=!!this.data[e.#t],i=!!this.data[e.#n],a=t.getUint32(e.#i,!0),o=t.getUint32(e.#a,!0),s=t.getUint32(e.#o,!0),c=t.getUint32(e.#s,!0),l=20,u=new Float32Array(this.buffer,l,a*2);l+=a*8;let d=new Uint8Array(this.buffer,l,o*3);l+=o*3;let f=[];for(let e=0;e<s;++e){let e=t.getFloat32(l,!0);l+=4;let n=t.getUint32(l,!0);l+=4,f.push([e,`#${n.toString(16).padStart(6,`0`)}`])}let p=null;if(r){p=[];for(let e=0;e<4;++e)p.push(t.getFloat32(l,!0)),l+=4}let m=null;i&&(m=new Uint8Array(this.buffer,l,3),l+=3);let h=[];for(let e=0;e<c;++e){let e=t.getUint8(l);l+=1,l=Math.ceil(l/4)*4;let n=t.getUint32(l,!0);l+=4;let r=new Int32Array(this.buffer,l,n);l+=n*4;let i=t.getUint32(l,!0);l+=4;let a=new Int32Array(this.buffer,l,i);l+=i*4;let o={type:e,coords:r,colors:a};e===jr.LATTICE&&(o.verticesPerRow=t.getUint32(l,!0),l+=4),h.push(o)}if(n===1)return[`RadialAxial`,`axial`,p,f,Array.from(u.slice(0,2)),Array.from(u.slice(2,4)),null,null];if(n===2)return[`RadialAxial`,`radial`,p,f,[u[0],u[1]],[u[3],u[4]],u[2],u[5]];if(n===3){let t=this.data[e.#r],n=null;if(u.length>0){let e=u[0],t=u[0],r=u[1],i=u[1];for(let n=0;n<u.length;n+=2){let a=u[n],o=u[n+1];e=e>a?a:e,r=r>o?o:r,t=t<a?a:t,i=i<o?o:i}n=[e,r,t,i]}return[`Mesh`,t,u,d,h,n,p,m]}throw Error(`Unsupported pattern kind: ${n}`)}};function Ta(e){if(e instanceof URL)return e.href;if(typeof e==`string`){if(wr)return e;let t=URL.parse(e,window.location);if(t)return t.href}throw Error(`Invalid PDF url data: either string or URL-object is expected in the url property.`)}function Ea(e){if(wr&&typeof Buffer<`u`&&e instanceof Buffer)throw Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(e instanceof Uint8Array&&e.byteLength===e.buffer.byteLength)return e;if(typeof e==`string`)return ni(e);if(e instanceof ArrayBuffer||ArrayBuffer.isView(e)||typeof e==`object`&&!isNaN(e?.length))return new Uint8Array(e);throw Error(`Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.`)}function Da(e){if(typeof e!=`string`)return null;if(e.endsWith(`/`))return e;throw Error(`Invalid factory url: "${e}" must include trailing slash.`)}var Oa=e=>typeof e==`object`&&Number.isInteger(e?.num)&&e.num>=0&&Number.isInteger(e?.gen)&&e.gen>=0,ka=pi.bind(null,Oa,e=>typeof e==`object`&&typeof e?.name==`string`),Aa=class{#e=new Map;#t=Promise.resolve();postMessage(e,t){let n={data:structuredClone(e,t?{transfer:t}:null)};this.#t.then(()=>{for(let[e]of this.#e)e.call(this,n)})}addEventListener(e,t,n=null){let r=null;if(n?.signal instanceof AbortSignal){let{signal:i}=n;if(i.aborted){R("LoopbackPort - cannot use an `aborted` signal.");return}let a=()=>this.removeEventListener(e,t);r=()=>i.removeEventListener(`abort`,a),i.addEventListener(`abort`,a)}this.#e.set(t,r)}removeEventListener(e,t){this.#e.get(t)?.(),this.#e.delete(t)}terminate(){for(let[,e]of this.#e)e?.();this.#e.clear()}},ja={DATA:1,ERROR:2},Ma={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function Na(){}function Pa(e){if(e instanceof ei||e instanceof Zr||e instanceof Yr||e instanceof Qr||e instanceof Xr)return e;switch(e instanceof Error||typeof e==`object`&&e||Wr(`wrapReason: Expected "reason" to be a (possibly cloned) Error.`),e.name){case`AbortException`:return new ei(e.message);case`InvalidPDFException`:return new Zr(e.message);case`PasswordException`:return new Yr(e.message,e.code);case`ResponseException`:return new Qr(e.message,e.status,e.missing);case`UnknownErrorException`:return new Xr(e.message,e.details)}return new Xr(e.message,e.toString())}var Fa=class{#e=new AbortController;constructor(e,t,n){this.sourceName=e,this.targetName=t,this.comObj=n,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),n.addEventListener(`message`,this.#t.bind(this),{signal:this.#e.signal})}#t({data:e}){if(e.targetName!==this.sourceName)return;if(e.stream){this.#r(e);return}if(e.callback){let t=e.callbackId,n=this.callbackCapabilities[t];if(!n)throw Error(`Cannot resolve callback ${t}`);if(delete this.callbackCapabilities[t],e.callback===ja.DATA)n.resolve(e.data);else if(e.callback===ja.ERROR)n.reject(Pa(e.reason));else throw Error(`Unexpected callback case`);return}let t=this.actionHandler[e.action];if(!t)throw Error(`Unknown action from worker: ${e.action}`);if(e.callbackId){let n=this.sourceName,r=e.sourceName,i=this.comObj;Promise.try(t,e.data).then(function(t){i.postMessage({sourceName:n,targetName:r,callback:ja.DATA,callbackId:e.callbackId,data:t})},function(t){i.postMessage({sourceName:n,targetName:r,callback:ja.ERROR,callbackId:e.callbackId,reason:Pa(t)})});return}if(e.streamId){this.#n(e);return}t(e.data)}on(e,t){let n=this.actionHandler;if(n[e])throw Error(`There is already an actionName called "${e}"`);n[e]=t}send(e,t,n){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,data:t},n)}sendWithPromise(e,t,n){let r=this.callbackId++,i=Promise.withResolvers();this.callbackCapabilities[r]=i;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,callbackId:r,data:t},n)}catch(e){i.reject(e)}return i.promise}sendWithStream(e,t,n,r){let i=this.streamId++,a=this.sourceName,o=this.targetName,s=this.comObj;return new ReadableStream({start:n=>{let c=Promise.withResolvers();return this.streamControllers[i]={controller:n,startCall:c,pullCall:null,cancelCall:null,isClosed:!1},s.postMessage({sourceName:a,targetName:o,action:e,streamId:i,data:t,desiredSize:n.desiredSize},r),c.promise},pull:e=>{let t=Promise.withResolvers();return this.streamControllers[i].pullCall=t,s.postMessage({sourceName:a,targetName:o,stream:Ma.PULL,streamId:i,desiredSize:e.desiredSize}),t.promise},cancel:e=>{z(e instanceof Error,`cancel must have a valid reason`);let t=Promise.withResolvers();return this.streamControllers[i].cancelCall=t,this.streamControllers[i].isClosed=!0,s.postMessage({sourceName:a,targetName:o,stream:Ma.CANCEL,streamId:i,reason:Pa(e)}),t.promise}},n)}#n(e){let t=e.streamId,n=this.sourceName,r=e.sourceName,i=this.comObj,a=this,o=this.actionHandler[e.action],s={enqueue(e,a=1,o){if(this.isCancelled)return;let s=this.desiredSize;this.desiredSize-=a,s>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),i.postMessage({sourceName:n,targetName:r,stream:Ma.ENQUEUE,streamId:t,chunk:e},o)},close(){this.isCancelled||(this.isCancelled=!0,i.postMessage({sourceName:n,targetName:r,stream:Ma.CLOSE,streamId:t}),delete a.streamSinks[t])},error(e){z(e instanceof Error,`error must have a valid reason`),!this.isCancelled&&(this.isCancelled=!0,i.postMessage({sourceName:n,targetName:r,stream:Ma.ERROR,streamId:t,reason:Pa(e)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:e.desiredSize,ready:null};s.sinkCapability.resolve(),s.ready=s.sinkCapability.promise,this.streamSinks[t]=s,Promise.try(o,e.data,s).then(function(){i.postMessage({sourceName:n,targetName:r,stream:Ma.START_COMPLETE,streamId:t,success:!0})},function(e){i.postMessage({sourceName:n,targetName:r,stream:Ma.START_COMPLETE,streamId:t,reason:Pa(e)})})}#r(e){let t=e.streamId,n=this.sourceName,r=e.sourceName,i=this.comObj,a=this.streamControllers[t],o=this.streamSinks[t];switch(e.stream){case Ma.START_COMPLETE:e.success?a.startCall.resolve():a.startCall.reject(Pa(e.reason));break;case Ma.PULL_COMPLETE:e.success?a.pullCall.resolve():a.pullCall.reject(Pa(e.reason));break;case Ma.PULL:if(!o){i.postMessage({sourceName:n,targetName:r,stream:Ma.PULL_COMPLETE,streamId:t,success:!0});break}o.desiredSize<=0&&e.desiredSize>0&&o.sinkCapability.resolve(),o.desiredSize=e.desiredSize,Promise.try(o.onPull||Na).then(function(){i.postMessage({sourceName:n,targetName:r,stream:Ma.PULL_COMPLETE,streamId:t,success:!0})},function(e){i.postMessage({sourceName:n,targetName:r,stream:Ma.PULL_COMPLETE,streamId:t,reason:Pa(e)})});break;case Ma.ENQUEUE:if(z(a,`enqueue should have stream controller`),a.isClosed)break;a.controller.enqueue(e.chunk);break;case Ma.CLOSE:if(z(a,`close should have stream controller`),a.isClosed)break;a.isClosed=!0,a.controller.close(),this.#i(a,t);break;case Ma.ERROR:z(a,`error should have stream controller`),a.controller.error(Pa(e.reason)),this.#i(a,t);break;case Ma.CANCEL_COMPLETE:e.success?a.cancelCall.resolve():a.cancelCall.reject(Pa(e.reason)),this.#i(a,t);break;case Ma.CANCEL:if(!o)break;let s=Pa(e.reason);Promise.try(o.onCancel||Na,s).then(function(){i.postMessage({sourceName:n,targetName:r,stream:Ma.CANCEL_COMPLETE,streamId:t,success:!0})},function(e){i.postMessage({sourceName:n,targetName:r,stream:Ma.CANCEL_COMPLETE,streamId:t,reason:Pa(e)})}),o.sinkCapability.reject(s),o.isCancelled=!0,delete this.streamSinks[t];break;default:throw Error(`Unexpected stream case`)}}async#i(e,t){await Promise.allSettled([e.startCall?.promise,e.pullCall?.promise,e.cancelCall?.promise]),delete this.streamControllers[t]}destroy(){this.#e?.abort(),this.#e=null}},Ia=class{#e=!1;constructor({enableHWA:e=!1}){this.#e=e}create(e,t){if(e<=0||t<=0)throw Error(`Invalid canvas size`);let n=this._createCanvas(e,t);return{canvas:n,context:n.getContext(`2d`,{willReadFrequently:!this.#e})}}reset(e,t,n){if(!e.canvas)throw Error(`Canvas is not specified`);if(t<=0||n<=0)throw Error(`Invalid canvas size`);e.canvas.width=t,e.canvas.height=n}destroy(e){if(!e.canvas)throw Error(`Canvas is not specified`);e.canvas.width=0,e.canvas.height=0,e.canvas=null,e.context=null}_createCanvas(e,t){Wr("Abstract method `_createCanvas` called.")}},La=class extends Ia{constructor({ownerDocument:e=globalThis.document,enableHWA:t=!1}){super({enableHWA:t}),this._document=e}_createCanvas(e,t){let n=this._document.createElement(`canvas`);return n.width=e,n.height=t,n}},Ra=class{constructor({baseUrl:e=null,isCompressed:t=!0}){this.baseUrl=e,this.isCompressed=t}async fetch({name:e}){if(!this.baseUrl)throw Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!e)throw Error(`CMap name must be specified.`);let t=this.baseUrl+e+(this.isCompressed?`.bcmap`:``);return this._fetch(t).then(e=>({cMapData:e,isCompressed:this.isCompressed})).catch(e=>{throw Error(`Unable to load ${this.isCompressed?`binary `:``}CMap at: ${t}`)})}async _fetch(e){Wr("Abstract method `_fetch` called.")}},za=class extends Ra{async _fetch(e){let t=await xi(e,this.isCompressed?`arraybuffer`:`text`);return t instanceof ArrayBuffer?new Uint8Array(t):ni(t)}},Ba=class{addFilter(e){return`none`}addHCMFilter(e,t){return`none`}addAlphaFilter(e){return`none`}addLuminosityFilter(e){return`none`}addHighlightHCMFilter(e,t,n,r,i){return`none`}destroy(e=!1){}},Va=class extends Ba{#e;#t;#n;#r;#i;#a;#o=0;constructor({docId:e,ownerDocument:t=globalThis.document}){super(),this.#r=e,this.#i=t}get#s(){return this.#t||=new Map}get#c(){return this.#a||=new Map}get#l(){if(!this.#n){let e=this.#i.createElement(`div`),{style:t}=e;t.visibility=`hidden`,t.contain=`strict`,t.width=t.height=0,t.position=`absolute`,t.top=t.left=0,t.zIndex=-1;let n=this.#i.createElementNS(yi,`svg`);n.setAttribute(`width`,0),n.setAttribute(`height`,0),this.#n=this.#i.createElementNS(yi,`defs`),e.append(n),n.append(this.#n),this.#i.body.append(e)}return this.#n}#u(e){if(e.length===1){let t=e[0],n=Array(256);for(let e=0;e<256;e++)n[e]=t[e]/255;let r=n.join(`,`);return[r,r,r]}let[t,n,r]=e,i=Array(256),a=Array(256),o=Array(256);for(let e=0;e<256;e++)i[e]=t[e]/255,a[e]=n[e]/255,o[e]=r[e]/255;return[i.join(`,`),a.join(`,`),o.join(`,`)]}#d(e){if(this.#e===void 0){this.#e=``;let e=this.#i.URL;e!==this.#i.baseURI&&(wi(e)?R(`#createUrl: ignore "data:"-URL for performance reasons.`):this.#e=qr(e,``))}return`url(${this.#e}#${e})`}addFilter(e){if(!e)return`none`;let t=this.#s.get(e);if(t)return t;let[n,r,i]=this.#u(e),a=e.length===1?n:`${n}${r}${i}`;if(t=this.#s.get(a),t)return this.#s.set(e,t),t;let o=`g_${this.#r}_transfer_map_${this.#o++}`,s=this.#d(o);this.#s.set(e,s),this.#s.set(a,s);let c=this.#m(o);return this.#g(n,r,i,c),s}addHCMFilter(e,t){let n=`${e}-${t}`,r=`base`,i=this.#c.get(r);if(i?.key===n||(i?(i.filter?.remove(),i.key=n,i.url=`none`,i.filter=null):(i={key:n,url:`none`,filter:null},this.#c.set(r,i)),!e||!t))return i.url;let a=this.#v(e);e=H.makeHexColor(...a);let o=this.#v(t);if(t=H.makeHexColor(...o),this.#l.style.color=``,e===`#000000`&&t===`#ffffff`||e===t)return i.url;let s=Array(256);for(let e=0;e<=255;e++){let t=e/255;s[e]=t<=.03928?t/12.92:((t+.055)/1.055)**2.4}let c=s.join(`,`),l=`g_${this.#r}_hcm_filter`,u=i.filter=this.#m(l);this.#g(c,c,c,u),this.#p(u);let d=(e,t)=>{let n=a[e]/255,r=o[e]/255,i=Array(t+1);for(let e=0;e<=t;e++)i[e]=n+e/t*(r-n);return i.join(`,`)};return this.#g(d(0,5),d(1,5),d(2,5),u),i.url=this.#d(l),i.url}addAlphaFilter(e){let t=this.#s.get(e);if(t)return t;let[n]=this.#u([e]),r=`alpha_${n}`;if(t=this.#s.get(r),t)return this.#s.set(e,t),t;let i=`g_${this.#r}_alpha_map_${this.#o++}`,a=this.#d(i);this.#s.set(e,a),this.#s.set(r,a);let o=this.#m(i);return this.#_(n,o),a}addLuminosityFilter(e){let t=this.#s.get(e||`luminosity`);if(t)return t;let n,r;if(e?([n]=this.#u([e]),r=`luminosity_${n}`):r=`luminosity`,t=this.#s.get(r),t)return this.#s.set(e,t),t;let i=`g_${this.#r}_luminosity_map_${this.#o++}`,a=this.#d(i);this.#s.set(e,a),this.#s.set(r,a);let o=this.#m(i);return this.#f(o),e&&this.#_(n,o),a}addHighlightHCMFilter(e,t,n,r,i){let a=`${t}-${n}-${r}-${i}`,o=this.#c.get(e);if(o?.key===a||(o?(o.filter?.remove(),o.key=a,o.url=`none`,o.filter=null):(o={key:a,url:`none`,filter:null},this.#c.set(e,o)),!t||!n))return o.url;let[s,c]=[t,n].map(this.#v.bind(this)),l=Math.round(.2126*s[0]+.7152*s[1]+.0722*s[2]),u=Math.round(.2126*c[0]+.7152*c[1]+.0722*c[2]),[d,f]=[r,i].map(this.#v.bind(this));u<l&&([l,u,d,f]=[u,l,f,d]),this.#l.style.color=``;let p=(e,t,n)=>{let r=Array(256),i=(u-l)/n,a=e/255,o=(t-e)/(255*n),s=0;for(let e=0;e<=n;e++){let t=Math.round(l+e*i),n=a+e*o;for(let e=s;e<=t;e++)r[e]=n;s=t+1}for(let e=s;e<256;e++)r[e]=r[s-1];return r.join(`,`)},m=`g_${this.#r}_hcm_${e}_filter`,h=o.filter=this.#m(m);return this.#p(h),this.#g(p(d[0],f[0],5),p(d[1],f[1],5),p(d[2],f[2],5),h),o.url=this.#d(m),o.url}destroy(e=!1){e&&this.#a?.size||(this.#n?.parentNode.parentNode.remove(),this.#n=null,this.#t?.clear(),this.#t=null,this.#a?.clear(),this.#a=null,this.#o=0)}#f(e){let t=this.#i.createElementNS(yi,`feColorMatrix`);t.setAttribute(`type`,`matrix`),t.setAttribute(`values`,`0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0`),e.append(t)}#p(e){let t=this.#i.createElementNS(yi,`feColorMatrix`);t.setAttribute(`type`,`matrix`),t.setAttribute(`values`,`0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0`),e.append(t)}#m(e){let t=this.#i.createElementNS(yi,`filter`);return t.setAttribute(`color-interpolation-filters`,`sRGB`),t.setAttribute(`id`,e),this.#l.append(t),t}#h(e,t,n){let r=this.#i.createElementNS(yi,t);r.setAttribute(`type`,`discrete`),r.setAttribute(`tableValues`,n),e.append(r)}#g(e,t,n,r){let i=this.#i.createElementNS(yi,`feComponentTransfer`);r.append(i),this.#h(i,`feFuncR`,e),this.#h(i,`feFuncG`,t),this.#h(i,`feFuncB`,n)}#_(e,t){let n=this.#i.createElementNS(yi,`feComponentTransfer`);t.append(n),this.#h(n,`feFuncA`,e)}#v(e){return this.#l.style.color=e,Ni(getComputedStyle(this.#l).getPropertyValue(`color`))}},Ha=class{constructor({baseUrl:e=null}){this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!e)throw Error(`Font filename must be specified.`);let t=`${this.baseUrl}${e}`;return this._fetch(t).catch(e=>{throw Error(`Unable to load font data at: ${t}`)})}async _fetch(e){Wr("Abstract method `_fetch` called.")}},Ua=class extends Ha{async _fetch(e){let t=await xi(e,`arraybuffer`);return new Uint8Array(t)}},Wa=class{constructor({baseUrl:e=null}){this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw Error("Ensure that the `wasmUrl` API parameter is provided.");if(!e)throw Error(`Wasm filename must be specified.`);let t=`${this.baseUrl}${e}`;return this._fetch(t).catch(e=>{throw Error(`Unable to load wasm data at: ${t}`)})}async _fetch(e){Wr("Abstract method `_fetch` called.")}},Ga=class extends Wa{async _fetch(e){let t=await xi(e,`arraybuffer`);return new Uint8Array(t)}};wr&&R("Please use the `legacy` build in Node.js environments.");async function Ka(e){let t=await process.getBuiltinModule(`fs`).promises.readFile(e);return new Uint8Array(t)}var qa=class extends Ba{},Ja=class extends Ia{_createCanvas(e,t){return process.getBuiltinModule(`module`).createRequire(import.meta.url)(`@napi-rs/canvas`).createCanvas(e,t)}},Ya=class extends Ra{async _fetch(e){return Ka(e)}},Xa=class extends Ha{async _fetch(e){return Ka(e)}},Za=class extends Wa{async _fetch(e){return Ka(e)}},Qa=`__forcedDependency`,{floor:$a,ceil:eo}=Math;function to(e,t,n,r,i,a){e[t*4+0]=Math.min(e[t*4+0],n),e[t*4+1]=Math.min(e[t*4+1],r),e[t*4+2]=Math.max(e[t*4+2],i),e[t*4+3]=Math.max(e[t*4+3],a)}var no=new Uint32Array(new Uint8Array([255,255,0,0]).buffer)[0],ro=class{#e;#t;constructor(e,t){this.#e=e,this.#t=t}get length(){return this.#e.length}isEmpty(e){return this.#e[e]===no}minX(e){return this.#t[e*4+0]/256}minY(e){return this.#t[e*4+1]/256}maxX(e){return(this.#t[e*4+2]+1)/256}maxY(e){return(this.#t[e*4+3]+1)/256}},io=(e,t)=>{if(!e)return;let n=e.get(t);return n||(n={dependencies:new Set,isRenderingOperation:!1},e.set(t,n)),n},ao=class{#e={__proto__:null};#t={__proto__:null,transform:[],moveText:[],sameLineText:[],[Qa]:[]};#n=new Map;#r=[];#i=[];#a=[[1,0,0,1,0,0]];#o=[-1/0,-1/0,1/0,1/0];#s=new Float64Array([1/0,1/0,-1/0,-1/0]);#c=-1;#l=new Set;#u=new Map;#d=new Map;#f;#p;#m;#h;#g;constructor(e,t,n=!1){this.#f=e.width,this.#p=e.height,this.#_(t),n&&(this.#g=new Map)}growOperationsCount(e){e>=this.#h.length&&this.#_(e,this.#h)}#_(e,t){let n=new ArrayBuffer(e*4);this.#m=new Uint8ClampedArray(n),this.#h=new Uint32Array(n),t&&t.length>0?(this.#h.set(t),this.#h.fill(no,t.length)):this.#h.fill(no)}save(e){return this.#e={__proto__:this.#e},this.#t={__proto__:this.#t,transform:{__proto__:this.#t.transform},moveText:{__proto__:this.#t.moveText},sameLineText:{__proto__:this.#t.sameLineText},[Qa]:{__proto__:this.#t[Qa]}},this.#o={__proto__:this.#o},this.#r.push(e),this}restore(e){let t=Object.getPrototypeOf(this.#e);if(t===null)return this;this.#e=t,this.#t=Object.getPrototypeOf(this.#t),this.#o=Object.getPrototypeOf(this.#o);let n=this.#r.pop();return n!==void 0&&(io(this.#g,e)?.dependencies.add(n),this.#h[e]=this.#h[n]),this}recordOpenMarker(e){return this.#r.push(e),this}getOpenMarker(){return this.#r.length===0?null:this.#r.at(-1)}recordCloseMarker(e){let t=this.#r.pop();return t!==void 0&&(io(this.#g,e)?.dependencies.add(t),this.#h[e]=this.#h[t]),this}beginMarkedContent(e){return this.#i.push(e),this}endMarkedContent(e){let t=this.#i.pop();return t!==void 0&&(io(this.#g,e)?.dependencies.add(t),this.#h[e]=this.#h[t]),this}pushBaseTransform(e){return this.#a.push(H.multiplyByDOMMatrix(this.#a.at(-1),e.getTransform())),this}popBaseTransform(){return this.#a.length>1&&this.#a.pop(),this}recordSimpleData(e,t){return this.#e[e]=t,this}recordIncrementalData(e,t){return this.#t[e].push(t),this}resetIncrementalData(e,t){return this.#t[e].length=0,this}recordNamedData(e,t){return this.#n.set(e,t),this}recordSimpleDataFromNamed(e,t,n){this.#e[e]=this.#n.get(t)??n}recordFutureForcedDependency(e,t){return this.recordIncrementalData(Qa,t),this}inheritSimpleDataAsFutureForcedDependencies(e){for(let t of e)t in this.#e&&this.recordFutureForcedDependency(t,this.#e[t]);return this}inheritPendingDependenciesAsFutureForcedDependencies(){for(let e of this.#l)this.recordFutureForcedDependency(Qa,e);return this}resetBBox(e){return this.#c!==e&&(this.#c=e,this.#s[0]=1/0,this.#s[1]=1/0,this.#s[2]=-1/0,this.#s[3]=-1/0),this}recordClipBox(e,t,n,r,i,a){let o=H.multiplyByDOMMatrix(this.#a.at(-1),t.getTransform()),s=[1/0,1/0,-1/0,-1/0];H.axialAlignedBoundingBox([n,i,r,a],o,s);let c=H.intersect(this.#o,s);return c?(this.#o[0]=c[0],this.#o[1]=c[1],this.#o[2]=c[2],this.#o[3]=c[3]):(this.#o[0]=this.#o[1]=1/0,this.#o[2]=this.#o[3]=-1/0),this}recordBBox(e,t,n,r,i,a){let o=this.#o;if(o[0]===1/0)return this;let s=H.multiplyByDOMMatrix(this.#a.at(-1),t.getTransform());if(o[0]===-1/0)return H.axialAlignedBoundingBox([n,i,r,a],s,this.#s),this;let c=[1/0,1/0,-1/0,-1/0];return H.axialAlignedBoundingBox([n,i,r,a],s,c),this.#s[0]=Math.min(this.#s[0],Math.max(c[0],o[0])),this.#s[1]=Math.min(this.#s[1],Math.max(c[1],o[1])),this.#s[2]=Math.max(this.#s[2],Math.min(c[2],o[2])),this.#s[3]=Math.max(this.#s[3],Math.min(c[3],o[3])),this}recordCharacterBBox(e,t,n,r=1,i=0,a=0,o){let s=n.bbox,c,l;if(s&&(c=s[2]!==s[0]&&s[3]!==s[1]&&this.#d.get(n),c!==!1&&(l=[0,0,0,0],H.axialAlignedBoundingBox(s,n.fontMatrix,l),(r!==1||i!==0||a!==0)&&H.scaleMinMax([r,0,0,-r,i,a],l),c)))return this.recordBBox(e,t,l[0],l[2],l[1],l[3]);if(!o)return this.recordFullPageBBox(e);let u=o();return s&&l&&c===void 0&&(c=l[0]<=i-u.actualBoundingBoxLeft&&l[2]>=i+u.actualBoundingBoxRight&&l[1]<=a-u.actualBoundingBoxAscent&&l[3]>=a+u.actualBoundingBoxDescent,this.#d.set(n,c),c)?this.recordBBox(e,t,l[0],l[2],l[1],l[3]):this.recordBBox(e,t,i-u.actualBoundingBoxLeft,i+u.actualBoundingBoxRight,a-u.actualBoundingBoxAscent,a+u.actualBoundingBoxDescent)}recordFullPageBBox(e){return this.#s[0]=Math.max(0,this.#o[0]),this.#s[1]=Math.max(0,this.#o[1]),this.#s[2]=Math.min(this.#f,this.#o[2]),this.#s[3]=Math.min(this.#p,this.#o[3]),this}getSimpleIndex(e){return this.#e[e]}recordDependencies(e,t){let n=this.#l,r=this.#e,i=this.#t;for(let e of t)e in this.#e?n.add(r[e]):e in i&&i[e].forEach(n.add,n);return this}recordNamedDependency(e,t){return this.#n.has(t)&&this.#l.add(this.#n.get(t)),this}recordOperation(e,t=!1){if(this.recordDependencies(e,[Qa]),this.#g){let t=io(this.#g,e),{dependencies:n}=t;this.#l.forEach(n.add,n),this.#r.forEach(n.add,n),this.#i.forEach(n.add,n),n.delete(e),t.isRenderingOperation=!0}if(this.#c===e){let n=$a(this.#s[0]*256/this.#f),r=$a(this.#s[1]*256/this.#p),i=eo(this.#s[2]*256/this.#f),a=eo(this.#s[3]*256/this.#p);to(this.#m,e,n,r,i,a);for(let t of this.#l)t!==e&&to(this.#m,t,n,r,i,a);for(let t of this.#r)t!==e&&to(this.#m,t,n,r,i,a);for(let t of this.#i)t!==e&&to(this.#m,t,n,r,i,a);t||(this.#l.clear(),this.#c=-1)}return this}recordShowTextOperation(e,t=!1){let n=Array.from(this.#l);this.recordOperation(e,t),this.recordIncrementalData(`sameLineText`,e);for(let e of n)this.recordIncrementalData(`sameLineText`,e);return this}bboxToClipBoxDropOperation(e,t=!1){return this.#c===e&&(this.#c=-1,this.#o[0]=Math.max(this.#o[0],this.#s[0]),this.#o[1]=Math.max(this.#o[1],this.#s[1]),this.#o[2]=Math.min(this.#o[2],this.#s[2]),this.#o[3]=Math.min(this.#o[3],this.#s[3]),t||this.#l.clear()),this}_takePendingDependencies(){let e=this.#l;return this.#l=new Set,e}_extractOperation(e){let t=this.#u.get(e);return this.#u.delete(e),t}_pushPendingDependencies(e){for(let t of e)this.#l.add(t)}take(){return this.#d.clear(),new ro(this.#h,this.#m)}takeDebugMetadata(){return this.#g}},oo=class e{#e;#t;#n;#r=0;#i=0;constructor(t,n,r){if(t instanceof e&&t.#n===!!r)return t;this.#e=t,this.#t=n,this.#n=!!r}growOperationsCount(){throw Error(`Unreachable`)}save(e){return this.#i++,this.#e.save(this.#t),this}restore(e){return this.#i>0&&(this.#e.restore(this.#t),this.#i--),this}recordOpenMarker(e){return this.#r++,this}getOpenMarker(){return this.#r>0?this.#t:this.#e.getOpenMarker()}recordCloseMarker(e){return this.#r--,this}beginMarkedContent(e){return this}endMarkedContent(e){return this}pushBaseTransform(e){return this.#e.pushBaseTransform(e),this}popBaseTransform(){return this.#e.popBaseTransform(),this}recordSimpleData(e,t){return this.#e.recordSimpleData(e,this.#t),this}recordIncrementalData(e,t){return this.#e.recordIncrementalData(e,this.#t),this}resetIncrementalData(e,t){return this.#e.resetIncrementalData(e,this.#t),this}recordNamedData(e,t){return this}recordSimpleDataFromNamed(e,t,n){return this.#e.recordSimpleDataFromNamed(e,t,this.#t),this}recordFutureForcedDependency(e,t){return this.#e.recordFutureForcedDependency(e,this.#t),this}inheritSimpleDataAsFutureForcedDependencies(e){return this.#e.inheritSimpleDataAsFutureForcedDependencies(e),this}inheritPendingDependenciesAsFutureForcedDependencies(){return this.#e.inheritPendingDependenciesAsFutureForcedDependencies(),this}resetBBox(e){return this.#n||this.#e.resetBBox(this.#t),this}recordClipBox(e,t,n,r,i,a){return this.#n||this.#e.recordClipBox(this.#t,t,n,r,i,a),this}recordBBox(e,t,n,r,i,a){return this.#n||this.#e.recordBBox(this.#t,t,n,r,i,a),this}recordCharacterBBox(e,t,n,r,i,a,o){return this.#n||this.#e.recordCharacterBBox(this.#t,t,n,r,i,a,o),this}recordFullPageBBox(e){return this.#n||this.#e.recordFullPageBBox(this.#t),this}getSimpleIndex(e){return this.#e.getSimpleIndex(e)}recordDependencies(e,t){return this.#e.recordDependencies(this.#t,t),this}recordNamedDependency(e,t){return this.#e.recordNamedDependency(this.#t,t),this}recordOperation(e){return this.#e.recordOperation(this.#t,!0),this}recordShowTextOperation(e){return this.#e.recordShowTextOperation(this.#t,!0),this}bboxToClipBoxDropOperation(e){return this.#n||this.#e.bboxToClipBoxDropOperation(this.#t,!0),this}take(){throw Error(`Unreachable`)}takeDebugMetadata(){throw Error(`Unreachable`)}},so={stroke:[`path`,`transform`,`filter`,`strokeColor`,`strokeAlpha`,`lineWidth`,`lineCap`,`lineJoin`,`miterLimit`,`dash`],fill:[`path`,`transform`,`filter`,`fillColor`,`fillAlpha`,`globalCompositeOperation`,`SMask`],imageXObject:[`transform`,`SMask`,`filter`,`fillAlpha`,`strokeAlpha`,`globalCompositeOperation`],rawFillPath:[`filter`,`fillColor`,`fillAlpha`],showText:[`transform`,`leading`,`charSpacing`,`wordSpacing`,`hScale`,`textRise`,`moveText`,`textMatrix`,`font`,`fontObj`,`filter`,`fillColor`,`textRenderingMode`,`SMask`,`fillAlpha`,`strokeAlpha`,`globalCompositeOperation`,`sameLineText`],transform:[`transform`],transformAndFill:[`transform`,`fillColor`]},G={FILL:`Fill`,STROKE:`Stroke`,SHADING:`Shading`};function K(e,t){if(!t)return;let n=t[2]-t[0],r=t[3]-t[1],i=new Path2D;i.rect(t[0],t[1],n,r),e.clip(i)}var co=class{isModifyingCurrentTransform(){return!1}getPattern(){Wr("Abstract method `getPattern` called.")}},lo=class extends co{constructor(e){super(),this._type=e[1],this._bbox=e[2],this._colorStops=e[3],this._p0=e[4],this._p1=e[5],this._r0=e[6],this._r1=e[7],this.matrix=null}_createGradient(e){let t;this._type===`axial`?t=e.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type===`radial`&&(t=e.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(let e of this._colorStops)t.addColorStop(e[0],e[1]);return t}getPattern(e,t,n,r){let i;if(r===G.STROKE||r===G.FILL){let a=t.current.getClippedPathBoundingBox(r,Fi(e))||[0,0,0,0],o=Math.ceil(a[2]-a[0])||1,s=Math.ceil(a[3]-a[1])||1,c=t.cachedCanvases.getCanvas(`pattern`,o,s),l=c.context;l.clearRect(0,0,l.canvas.width,l.canvas.height),l.beginPath(),l.rect(0,0,l.canvas.width,l.canvas.height),l.translate(-a[0],-a[1]),n=H.transform(n,[1,0,0,1,a[0],a[1]]),l.transform(...t.baseTransform),this.matrix&&l.transform(...this.matrix),K(l,this._bbox),l.fillStyle=this._createGradient(l),l.fill(),i=e.createPattern(c.canvas,`no-repeat`);let u=new DOMMatrix(n);i.setTransform(u)}else K(e,this._bbox),i=this._createGradient(e);return i}};function uo(e,t,n,r,i,a,o,s){let c=t.coords,l=t.colors,u=e.data,d=e.width*4,f;c[n+1]>c[r+1]&&(f=n,n=r,r=f,f=a,a=o,o=f),c[r+1]>c[i+1]&&(f=r,r=i,i=f,f=o,o=s,s=f),c[n+1]>c[r+1]&&(f=n,n=r,r=f,f=a,a=o,o=f);let p=(c[n]+t.offsetX)*t.scaleX,m=(c[n+1]+t.offsetY)*t.scaleY,h=(c[r]+t.offsetX)*t.scaleX,g=(c[r+1]+t.offsetY)*t.scaleY,_=(c[i]+t.offsetX)*t.scaleX,v=(c[i+1]+t.offsetY)*t.scaleY;if(m>=v)return;let y=l[a],b=l[a+1],x=l[a+2],S=l[o],C=l[o+1],w=l[o+2],T=l[s],E=l[s+1],D=l[s+2],O=Math.round(m),k=Math.round(v),A,ee,te,j,M,ne,N,P;for(let e=O;e<=k;e++){if(e<g){let t=e<m?0:(m-e)/(m-g);A=p-(p-h)*t,ee=y-(y-S)*t,te=b-(b-C)*t,j=x-(x-w)*t}else{let t;t=e>v?1:g===v?0:(g-e)/(g-v),A=h-(h-_)*t,ee=S-(S-T)*t,te=C-(C-E)*t,j=w-(w-D)*t}let t;t=e<m?0:e>v?1:(m-e)/(m-v),M=p-(p-_)*t,ne=y-(y-T)*t,N=b-(b-E)*t,P=x-(x-D)*t;let n=Math.round(Math.min(A,M)),r=Math.round(Math.max(A,M)),i=d*e+n*4;for(let e=n;e<=r;e++)t=(A-e)/(A-M),t<0?t=0:t>1&&(t=1),u[i++]=ee-(ee-ne)*t|0,u[i++]=te-(te-N)*t|0,u[i++]=j-(j-P)*t|0,u[i++]=255}}function fo(e,t,n){let r=t.coords,i=t.colors,a,o;switch(t.type){case jr.LATTICE:let s=t.verticesPerRow,c=Math.floor(r.length/s)-1,l=s-1;for(a=0;a<c;a++){let t=a*s;for(let a=0;a<l;a++,t++)uo(e,n,r[t],r[t+1],r[t+s],i[t],i[t+1],i[t+s]),uo(e,n,r[t+s+1],r[t+1],r[t+s],i[t+s+1],i[t+1],i[t+s])}break;case jr.TRIANGLES:for(a=0,o=r.length;a<o;a+=3)uo(e,n,r[a],r[a+1],r[a+2],i[a],i[a+1],i[a+2]);break;default:throw Error(`illegal figure`)}}var po=class extends co{constructor(e){super(),this._coords=e[2],this._colors=e[3],this._figures=e[4],this._bounds=e[5],this._bbox=e[6],this._background=e[7],this.matrix=null}_createMeshCanvas(e,t,n){let r=1.1,i=3e3,a=Math.floor(this._bounds[0]),o=Math.floor(this._bounds[1]),s=Math.ceil(this._bounds[2])-a,c=Math.ceil(this._bounds[3])-o,l=Math.min(Math.ceil(Math.abs(s*e[0]*r)),i),u=Math.min(Math.ceil(Math.abs(c*e[1]*r)),i),d=s/l,f=c/u,p={coords:this._coords,colors:this._colors,offsetX:-a,offsetY:-o,scaleX:1/d,scaleY:1/f},m=l+4,h=u+4,g=n.getCanvas(`mesh`,m,h),_=g.context,v=_.createImageData(l,u);if(t){let e=v.data;for(let n=0,r=e.length;n<r;n+=4)e[n]=t[0],e[n+1]=t[1],e[n+2]=t[2],e[n+3]=255}for(let e of this._figures)fo(v,e,p);return _.putImageData(v,2,2),{canvas:g.canvas,offsetX:a-2*d,offsetY:o-2*f,scaleX:d,scaleY:f}}isModifyingCurrentTransform(){return!0}getPattern(e,t,n,r){K(e,this._bbox);let i=new Float32Array(2);if(r===G.SHADING)H.singularValueDecompose2dScale(Fi(e),i);else if(this.matrix){H.singularValueDecompose2dScale(this.matrix,i);let[e,n]=i;H.singularValueDecompose2dScale(t.baseTransform,i),i[0]*=e,i[1]*=n}else H.singularValueDecompose2dScale(t.baseTransform,i);let a=this._createMeshCanvas(i,r===G.SHADING?null:this._background,t.cachedCanvases);return r!==G.SHADING&&(e.setTransform(...t.baseTransform),this.matrix&&e.transform(...this.matrix)),e.translate(a.offsetX,a.offsetY),e.scale(a.scaleX,a.scaleY),e.createPattern(a.canvas,`no-repeat`)}},mo=class extends co{getPattern(){return`hotpink`}};function ho(e){switch(e[0]){case`RadialAxial`:return new lo(e);case`Mesh`:return new po(e);case`Dummy`:return new mo}throw Error(`Unknown IR type: ${e[0]}`)}var go={COLORED:1,UNCOLORED:2},_o=class e{static MAX_PATTERN_SIZE=3e3;constructor(e,t,n,r){this.color=e[1],this.operatorList=e[2],this.matrix=e[3],this.bbox=e[4],this.xstep=e[5],this.ystep=e[6],this.paintType=e[7],this.tilingType=e[8],this.ctx=t,this.canvasGraphicsFactory=n,this.baseTransform=r}createPatternCanvas(e,t){let{bbox:n,operatorList:r,paintType:i,tilingType:a,color:o,canvasGraphicsFactory:s}=this,{xstep:c,ystep:l}=this;c=Math.abs(c),l=Math.abs(l),Ur(`TilingType: `+a);let u=n[0],d=n[1],f=n[2],p=n[3],m=f-u,h=p-d,g=new Float32Array(2);H.singularValueDecompose2dScale(this.matrix,g);let[_,v]=g;H.singularValueDecompose2dScale(this.baseTransform,g);let y=_*g[0],b=v*g[1],x=m,S=h,C=!1,w=!1,T=Math.ceil(c*y),E=Math.ceil(l*b),D=Math.ceil(m*y),O=Math.ceil(h*b);T>=D?x=c:C=!0,E>=O?S=l:w=!0;let k=this.getSizeAndScale(x,this.ctx.canvas.width,y),A=this.getSizeAndScale(S,this.ctx.canvas.height,b),ee=e.cachedCanvases.getCanvas(`pattern`,k.size,A.size),te=ee.context,j=s.createCanvasGraphics(te,t);if(j.groupLevel=e.groupLevel,this.setFillAndStrokeStyleToContext(j,i,o),te.translate(-k.scale*u,-A.scale*d),j.transform(0,k.scale,0,0,A.scale,0,0),te.save(),j.dependencyTracker?.save(),this.clipBbox(j,u,d,f,p),j.baseTransform=Fi(j.ctx),j.executeOperatorList(r),j.endDrawing(),j.dependencyTracker?.restore(),te.restore(),C||w){let t=ee.canvas;C&&(x=c),w&&(S=l);let n=this.getSizeAndScale(x,this.ctx.canvas.width,y),r=this.getSizeAndScale(S,this.ctx.canvas.height,b),i=n.size,a=r.size,o=e.cachedCanvases.getCanvas(`pattern-workaround`,i,a),s=o.context,f=C?Math.floor(m/c):0,p=w?Math.floor(h/l):0;for(let e=0;e<=f;e++)for(let n=0;n<=p;n++)s.drawImage(t,i*e,a*n,i,a,0,0,i,a);return{canvas:o.canvas,scaleX:n.scale,scaleY:r.scale,offsetX:u,offsetY:d}}return{canvas:ee.canvas,scaleX:k.scale,scaleY:A.scale,offsetX:u,offsetY:d}}getSizeAndScale(t,n,r){let i=Math.max(e.MAX_PATTERN_SIZE,n),a=Math.ceil(t*r);return a>=i?a=i:r=a/t,{scale:r,size:a}}clipBbox(e,t,n,r,i){let a=r-t,o=i-n;e.ctx.rect(t,n,a,o),H.axialAlignedBoundingBox([t,n,r,i],Fi(e.ctx),e.current.minMax),e.clip(),e.endPath()}setFillAndStrokeStyleToContext(e,t,n){let r=e.ctx,i=e.current;switch(t){case go.COLORED:let{fillStyle:e,strokeStyle:a}=this.ctx;r.fillStyle=i.fillColor=e,r.strokeStyle=i.strokeColor=a;break;case go.UNCOLORED:r.fillStyle=r.strokeStyle=n,i.fillColor=i.strokeColor=n;break;default:throw new $r(`Unsupported paint type: ${t}`)}}isModifyingCurrentTransform(){return!1}getPattern(e,t,n,r,i){let a=n;r!==G.SHADING&&(a=H.transform(a,t.baseTransform),this.matrix&&(a=H.transform(a,this.matrix)));let o=this.createPatternCanvas(t,i),s=new DOMMatrix(a);s=s.translate(o.offsetX,o.offsetY),s=s.scale(1/o.scaleX,1/o.scaleY);let c=e.createPattern(o.canvas,`repeat`);return c.setTransform(s),c}};function vo({src:e,srcPos:t=0,dest:n,width:r,height:i,nonBlackColor:a=4294967295,inverseDecode:o=!1}){let s=V.isLittleEndian?4278190080:255,[c,l]=o?[a,s]:[s,a],u=r>>3,d=r&7,f=e.length;n=new Uint32Array(n.buffer);let p=0;for(let r=0;r<i;r++){for(let r=t+u;t<r;t++){let r=t<f?e[t]:255;n[p++]=r&128?l:c,n[p++]=r&64?l:c,n[p++]=r&32?l:c,n[p++]=r&16?l:c,n[p++]=r&8?l:c,n[p++]=r&4?l:c,n[p++]=r&2?l:c,n[p++]=r&1?l:c}if(d===0)continue;let r=t<f?e[t++]:255;for(let e=0;e<d;e++)n[p++]=r&1<<7-e?l:c}return{srcPos:t,destPos:p}}var yo=16,bo=100,xo=15,So=10,Co=16,wo=new DOMMatrix,To=new Float32Array(2),Eo=new Float32Array([1/0,1/0,-1/0,-1/0]);function Do(e,t){if(e._removeMirroring)throw Error(`Context is already forwarding operations.`);e.__originalSave=e.save,e.__originalRestore=e.restore,e.__originalRotate=e.rotate,e.__originalScale=e.scale,e.__originalTranslate=e.translate,e.__originalTransform=e.transform,e.__originalSetTransform=e.setTransform,e.__originalResetTransform=e.resetTransform,e.__originalClip=e.clip,e.__originalMoveTo=e.moveTo,e.__originalLineTo=e.lineTo,e.__originalBezierCurveTo=e.bezierCurveTo,e.__originalRect=e.rect,e.__originalClosePath=e.closePath,e.__originalBeginPath=e.beginPath,e._removeMirroring=()=>{e.save=e.__originalSave,e.restore=e.__originalRestore,e.rotate=e.__originalRotate,e.scale=e.__originalScale,e.translate=e.__originalTranslate,e.transform=e.__originalTransform,e.setTransform=e.__originalSetTransform,e.resetTransform=e.__originalResetTransform,e.clip=e.__originalClip,e.moveTo=e.__originalMoveTo,e.lineTo=e.__originalLineTo,e.bezierCurveTo=e.__originalBezierCurveTo,e.rect=e.__originalRect,e.closePath=e.__originalClosePath,e.beginPath=e.__originalBeginPath,delete e._removeMirroring},e.save=function(){t.save(),this.__originalSave()},e.restore=function(){t.restore(),this.__originalRestore()},e.translate=function(e,n){t.translate(e,n),this.__originalTranslate(e,n)},e.scale=function(e,n){t.scale(e,n),this.__originalScale(e,n)},e.transform=function(e,n,r,i,a,o){t.transform(e,n,r,i,a,o),this.__originalTransform(e,n,r,i,a,o)},e.setTransform=function(e,n,r,i,a,o){t.setTransform(e,n,r,i,a,o),this.__originalSetTransform(e,n,r,i,a,o)},e.resetTransform=function(){t.resetTransform(),this.__originalResetTransform()},e.rotate=function(e){t.rotate(e),this.__originalRotate(e)},e.clip=function(e){t.clip(e),this.__originalClip(e)},e.moveTo=function(e,n){t.moveTo(e,n),this.__originalMoveTo(e,n)},e.lineTo=function(e,n){t.lineTo(e,n),this.__originalLineTo(e,n)},e.bezierCurveTo=function(e,n,r,i,a,o){t.bezierCurveTo(e,n,r,i,a,o),this.__originalBezierCurveTo(e,n,r,i,a,o)},e.rect=function(e,n,r,i){t.rect(e,n,r,i),this.__originalRect(e,n,r,i)},e.closePath=function(){t.closePath(),this.__originalClosePath()},e.beginPath=function(){t.beginPath(),this.__originalBeginPath()}}var Oo=class{constructor(e){this.canvasFactory=e,this.cache=Object.create(null)}getCanvas(e,t,n){let r;return this.cache[e]===void 0?(r=this.canvasFactory.create(t,n),this.cache[e]=r):(r=this.cache[e],this.canvasFactory.reset(r,t,n)),r}delete(e){delete this.cache[e]}clear(){for(let e in this.cache){let t=this.cache[e];this.canvasFactory.destroy(t),delete this.cache[e]}}};function ko(e,t,n,r,i,a,o,s,c,l){let[u,d,f,p,m,h]=Fi(e);if(d===0&&f===0){let g=o*u+m,_=Math.round(g),v=s*p+h,y=Math.round(v),b=(o+c)*u+m,x=Math.abs(Math.round(b)-_)||1,S=(s+l)*p+h,C=Math.abs(Math.round(S)-y)||1;return e.setTransform(Math.sign(u),0,0,Math.sign(p),_,y),e.drawImage(t,n,r,i,a,0,0,x,C),e.setTransform(u,d,f,p,m,h),[x,C]}if(u===0&&p===0){let g=s*f+m,_=Math.round(g),v=o*d+h,y=Math.round(v),b=(s+l)*f+m,x=Math.abs(Math.round(b)-_)||1,S=(o+c)*d+h,C=Math.abs(Math.round(S)-y)||1;return e.setTransform(0,Math.sign(d),Math.sign(f),0,_,y),e.drawImage(t,n,r,i,a,0,0,C,x),e.setTransform(u,d,f,p,m,h),[C,x]}e.drawImage(t,n,r,i,a,o,s,c,l);let g=Math.hypot(u,d),_=Math.hypot(f,p);return[g*c,_*l]}var Ao=class{alphaIsShape=!1;fontSize=0;fontSizeScale=1;textMatrix=null;textMatrixScale=1;fontMatrix=Tr;leading=0;x=0;y=0;lineX=0;lineY=0;charSpacing=0;wordSpacing=0;textHScale=1;textRenderingMode=Mr.FILL;textRise=0;fillColor=`#000000`;strokeColor=`#000000`;patternFill=!1;patternStroke=!1;fillAlpha=1;strokeAlpha=1;lineWidth=1;activeSMask=null;transferMaps=`none`;constructor(e,t,n){n?.(this),this.clipBox=new Float32Array([0,0,e,t]),this.minMax=Eo.slice()}clone(){let e=Object.create(this);return e.clipBox=this.clipBox.slice(),e.minMax=this.minMax.slice(),e}getPathBoundingBox(e=G.FILL,t=null){let n=this.minMax.slice();if(e===G.STROKE){t||Wr(`Stroke bounding box must include transform.`),H.singularValueDecompose2dScale(t,To);let e=To[0]*this.lineWidth/2,r=To[1]*this.lineWidth/2;n[0]-=e,n[1]-=r,n[2]+=e,n[3]+=r}return n}updateClipFromPath(){let e=H.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(e||[0,0,0,0])}isEmptyClip(){return this.minMax[0]===1/0}startNewPathAndClipBox(e){this.clipBox.set(e,0),this.minMax.set(Eo,0)}getClippedPathBoundingBox(e=G.FILL,t=null){return H.intersect(this.clipBox,this.getPathBoundingBox(e,t))}};function jo(e,t){if(t instanceof ImageData){e.putImageData(t,0,0);return}let n=t.height,r=t.width,i=n%Co,a=(n-i)/Co,o=i===0?a:a+1,s=e.createImageData(r,Co),c=0,l,u=t.data,d=s.data,f,p,m,h;if(t.kind===Nr.GRAYSCALE_1BPP){let t=u.byteLength,n=new Uint32Array(d.buffer,0,d.byteLength>>2),h=n.length,g=r+7>>3,_=4294967295,v=V.isLittleEndian?4278190080:255;for(f=0;f<o;f++){for(m=f<a?Co:i,l=0,p=0;p<m;p++){let e=t-c,i=0,a=e>g?r:e*8-7,o=a&-8,s=0,d=0;for(;i<o;i+=8)d=u[c++],n[l++]=d&128?_:v,n[l++]=d&64?_:v,n[l++]=d&32?_:v,n[l++]=d&16?_:v,n[l++]=d&8?_:v,n[l++]=d&4?_:v,n[l++]=d&2?_:v,n[l++]=d&1?_:v;for(;i<a;i++)s===0&&(d=u[c++],s=128),n[l++]=d&s?_:v,s>>=1}for(;l<h;)n[l++]=0;e.putImageData(s,0,f*Co)}}else if(t.kind===Nr.RGBA_32BPP){for(p=0,h=r*Co*4,f=0;f<a;f++)d.set(u.subarray(c,c+h)),c+=h,e.putImageData(s,0,p),p+=Co;f<o&&(h=r*i*4,d.set(u.subarray(c,c+h)),e.putImageData(s,0,p))}else if(t.kind===Nr.RGB_24BPP)for(m=Co,h=r*m,f=0;f<o;f++){for(f>=a&&(m=i,h=r*m),l=0,p=h;p--;)d[l++]=u[c++],d[l++]=u[c++],d[l++]=u[c++],d[l++]=255;e.putImageData(s,0,f*Co)}else throw Error(`bad image kind: ${t.kind}`)}function Mo(e,t){if(t.bitmap){e.drawImage(t.bitmap,0,0);return}let n=t.height,r=t.width,i=n%Co,a=(n-i)/Co,o=i===0?a:a+1,s=e.createImageData(r,Co),c=0,l=t.data,u=s.data;for(let t=0;t<o;t++){let n=t<a?Co:i;({srcPos:c}=vo({src:l,srcPos:c,dest:u,width:r,height:n,nonBlackColor:0})),e.putImageData(s,0,t*Co)}}function No(e,t){for(let n of[`strokeStyle`,`fillStyle`,`fillRule`,`globalAlpha`,`lineWidth`,`lineCap`,`lineJoin`,`miterLimit`,`globalCompositeOperation`,`font`,`filter`])e[n]!==void 0&&(t[n]=e[n]);e.setLineDash!==void 0&&(t.setLineDash(e.getLineDash()),t.lineDashOffset=e.lineDashOffset)}function Po(e){e.strokeStyle=e.fillStyle=`#000000`,e.fillRule=`nonzero`,e.globalAlpha=1,e.lineWidth=1,e.lineCap=`butt`,e.lineJoin=`miter`,e.miterLimit=10,e.globalCompositeOperation=`source-over`,e.font=`10px sans-serif`,e.setLineDash!==void 0&&(e.setLineDash([]),e.lineDashOffset=0);let{filter:t}=e;t!==`none`&&t!==``&&(e.filter=`none`)}function Fo(e,t){if(t)return!0;H.singularValueDecompose2dScale(e,To);let n=Math.fround(Ri.pixelRatio*bi.PDF_TO_CSS_UNITS);return To[0]<=n&&To[1]<=n}var Io=[`butt`,`round`,`square`],Lo=[`miter`,`round`,`bevel`],Ro={},zo={},Bo=class e{constructor(e,t,n,r,i,{optionalContentConfig:a,markedContentStack:o=null},s,c,l){this.ctx=e,this.current=new Ao(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=t,this.objs=n,this.canvasFactory=r,this.filterFactory=i,this.groupStack=[],this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=o||[],this.optionalContentConfig=a,this.cachedCanvases=new Oo(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=s,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=c,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map,this.dependencyTracker=l??null}getObject(e,t,n=null){return typeof t==`string`?(this.dependencyTracker?.recordNamedDependency(e,t),t.startsWith(`g_`)?this.commonObjs.get(t):this.objs.get(t)):n}beginDrawing({transform:e,viewport:t,transparency:n=!1,background:r=null}){let i=this.ctx.canvas.width,a=this.ctx.canvas.height,o=this.ctx.fillStyle;if(this.ctx.fillStyle=r||`#ffffff`,this.ctx.fillRect(0,0,i,a),this.ctx.fillStyle=o,n){let e=this.cachedCanvases.getCanvas(`transparent`,i,a);this.compositeCtx=this.ctx,this.transparentCanvas=e.canvas,this.ctx=e.context,this.ctx.save(),this.ctx.transform(...Fi(this.compositeCtx))}this.ctx.save(),Po(this.ctx),e&&(this.ctx.transform(...e),this.outputScaleX=e[0],this.outputScaleY=e[0]),this.ctx.transform(...t.transform),this.viewportScale=t.scale,this.baseTransform=Fi(this.ctx)}executeOperatorList(e,t,n,r,i){let a=e.argsArray,o=e.fnArray,s=t||0,c=a.length;if(c===s)return s;let l=c-s>So&&typeof n==`function`,u=l?Date.now()+xo:0,d=0,f=this.commonObjs,p=this.objs,m,h;for(;;){if(r!==void 0&&s===r.nextBreakPoint)return r.breakIt(s,n),s;if(!i||i(s))if(m=o[s],h=a[s]??null,m!==Lr.dependency)h===null?this[m](s):this[m](s,...h);else for(let e of h){this.dependencyTracker?.recordNamedData(e,s);let t=e.startsWith(`g_`)?f:p;if(!t.has(e))return t.get(e,n),s}if(s++,s===c)return s;if(l&&++d>So){if(Date.now()>u)return n(),s;d=0}}}#e(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&=(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),null)}endDrawing(){this.#e(),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(let e of this._cachedBitmapsMap.values()){for(let t of e.values())typeof HTMLCanvasElement<`u`&&t instanceof HTMLCanvasElement&&(t.width=t.height=0);e.clear()}this._cachedBitmapsMap.clear(),this.#t()}#t(){if(this.pageColors){let e=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(e!==`none`){let t=this.ctx.filter;this.ctx.filter=e,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=t}}}_scaleImage(e,t){let n=e.width??e.displayWidth,r=e.height??e.displayHeight,i=Math.max(Math.hypot(t[0],t[1]),1),a=Math.max(Math.hypot(t[2],t[3]),1),o=n,s=r,c=`prescale1`,l,u;for(;i>2&&o>1||a>2&&s>1;){let t=o,n=s;i>2&&o>1&&(t=o>=16384?Math.floor(o/2)-1||1:Math.ceil(o/2),i/=o/t),a>2&&s>1&&(n=s>=16384?Math.floor(s/2)-1||1:Math.ceil(s)/2,a/=s/n),l=this.cachedCanvases.getCanvas(c,t,n),u=l.context,u.clearRect(0,0,t,n),u.drawImage(e,0,0,o,s,0,0,t,n),e=l.canvas,o=t,s=n,c=c===`prescale1`?`prescale2`:`prescale1`}return{img:e,paintWidth:o,paintHeight:s}}_createMaskCanvas(e,t){let n=this.ctx,{width:r,height:i}=t,a=this.current.fillColor,o=this.current.patternFill,s=Fi(n),c,l,u,d;if((t.bitmap||t.data)&&t.count>1){let n=t.bitmap||t.data.buffer;l=JSON.stringify(o?s:[s.slice(0,4),a]),c=this._cachedBitmapsMap.get(n),c||(c=new Map,this._cachedBitmapsMap.set(n,c));let r=c.get(l);if(r&&!o){let t=Math.round(Math.min(s[0],s[2])+s[4]),n=Math.round(Math.min(s[1],s[3])+s[5]);return this.dependencyTracker?.recordDependencies(e,so.transformAndFill),{canvas:r,offsetX:t,offsetY:n}}u=r}u||(d=this.cachedCanvases.getCanvas(`maskCanvas`,r,i),Mo(d.context,t));let f=H.transform(s,[1/r,0,0,-1/i,0,0]);f=H.transform(f,[1,0,0,1,0,-i]);let p=Eo.slice();H.axialAlignedBoundingBox([0,0,r,i],f,p);let[m,h,g,_]=p,v=Math.round(g-m)||1,y=Math.round(_-h)||1,b=this.cachedCanvases.getCanvas(`fillCanvas`,v,y),x=b.context,S=m,C=h;x.translate(-S,-C),x.transform(...f),u||(u=this._scaleImage(d.canvas,Ii(x)),u=u.img,c&&o&&c.set(l,u)),x.imageSmoothingEnabled=Fo(Fi(x),t.interpolate),ko(x,u,0,0,u.width,u.height,0,0,r,i),x.globalCompositeOperation=`source-in`;let w=H.transform(Ii(x),[1,0,0,1,-S,-C]);return x.fillStyle=o?a.getPattern(n,this,w,G.FILL,e):a,x.fillRect(0,0,r,i),c&&!o&&(this.cachedCanvases.delete(`fillCanvas`),c.set(l,b.canvas)),this.dependencyTracker?.recordDependencies(e,so.transformAndFill),{canvas:b.canvas,offsetX:Math.round(S),offsetY:Math.round(C)}}setLineWidth(e,t){this.dependencyTracker?.recordSimpleData(`lineWidth`,e),t!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=t,this.ctx.lineWidth=t}setLineCap(e,t){this.dependencyTracker?.recordSimpleData(`lineCap`,e),this.ctx.lineCap=Io[t]}setLineJoin(e,t){this.dependencyTracker?.recordSimpleData(`lineJoin`,e),this.ctx.lineJoin=Lo[t]}setMiterLimit(e,t){this.dependencyTracker?.recordSimpleData(`miterLimit`,e),this.ctx.miterLimit=t}setDash(e,t,n){this.dependencyTracker?.recordSimpleData(`dash`,e);let r=this.ctx;r.setLineDash!==void 0&&(r.setLineDash(t),r.lineDashOffset=n)}setRenderingIntent(e,t){}setFlatness(e,t){}setGState(e,t){for(let[n,r]of t)switch(n){case`LW`:this.setLineWidth(e,r);break;case`LC`:this.setLineCap(e,r);break;case`LJ`:this.setLineJoin(e,r);break;case`ML`:this.setMiterLimit(e,r);break;case`D`:this.setDash(e,r[0],r[1]);break;case`RI`:this.setRenderingIntent(e,r);break;case`FL`:this.setFlatness(e,r);break;case`Font`:this.setFont(e,r[0],r[1]);break;case`CA`:this.dependencyTracker?.recordSimpleData(`strokeAlpha`,e),this.current.strokeAlpha=r;break;case`ca`:this.dependencyTracker?.recordSimpleData(`fillAlpha`,e),this.ctx.globalAlpha=this.current.fillAlpha=r;break;case`BM`:this.dependencyTracker?.recordSimpleData(`globalCompositeOperation`,e),this.ctx.globalCompositeOperation=r;break;case`SMask`:this.dependencyTracker?.recordSimpleData(`SMask`,e),this.current.activeSMask=r?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case`TR`:this.dependencyTracker?.recordSimpleData(`filter`,e),this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(r);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){let e=this.inSMaskMode;this.current.activeSMask&&!e?this.beginSMaskMode():!this.current.activeSMask&&e&&this.endSMaskMode()}beginSMaskMode(e){if(this.inSMaskMode)throw Error(`beginSMaskMode called while already in smask mode`);let t=this.ctx.canvas.width,n=this.ctx.canvas.height,r=`smaskGroupAt`+this.groupLevel,i=this.cachedCanvases.getCanvas(r,t,n);this.suspendedCtx=this.ctx;let a=this.ctx=i.context;a.setTransform(this.suspendedCtx.getTransform()),No(this.suspendedCtx,a),Do(a,this.suspendedCtx),this.setGState(e,[[`BM`,`source-over`]])}endSMaskMode(){if(!this.inSMaskMode)throw Error(`endSMaskMode called while not in smask mode`);this.ctx._removeMirroring(),No(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(e){if(!this.current.activeSMask)return;e?(e[0]=Math.floor(e[0]),e[1]=Math.floor(e[1]),e[2]=Math.ceil(e[2]),e[3]=Math.ceil(e[3])):e=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];let t=this.current.activeSMask,n=this.suspendedCtx;this.composeSMask(n,t,this.ctx,e),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(e,t,n,r){let i=r[0],a=r[1],o=r[2]-i,s=r[3]-a;o===0||s===0||(this.genericComposeSMask(t.context,n,o,s,t.subtype,t.backdrop,t.transferMap,i,a,t.offsetX,t.offsetY),e.save(),e.globalAlpha=1,e.globalCompositeOperation=`source-over`,e.setTransform(1,0,0,1,0,0),e.drawImage(n.canvas,0,0),e.restore())}genericComposeSMask(e,t,n,r,i,a,o,s,c,l,u){let d=e.canvas,f=s-l,p=c-u;if(a)if(f<0||p<0||f+n>d.width||p+r>d.height){let e=this.cachedCanvases.getCanvas(`maskExtension`,n,r),t=e.context;t.drawImage(d,-f,-p),t.globalCompositeOperation=`destination-atop`,t.fillStyle=a,t.fillRect(0,0,n,r),t.globalCompositeOperation=`source-over`,d=e.canvas,f=p=0}else{e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0);let t=new Path2D;t.rect(f,p,n,r),e.clip(t),e.globalCompositeOperation=`destination-atop`,e.fillStyle=a,e.fillRect(f,p,n,r),e.restore()}t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0),i===`Alpha`&&o?t.filter=this.filterFactory.addAlphaFilter(o):i===`Luminosity`&&(t.filter=this.filterFactory.addLuminosityFilter(o));let m=new Path2D;m.rect(s,c,n,r),t.clip(m),t.globalCompositeOperation=`destination-in`,t.drawImage(d,f,p,n,r,s,c,n,r),t.restore()}save(e){this.inSMaskMode&&No(this.ctx,this.suspendedCtx),this.ctx.save();let t=this.current;this.stateStack.push(t),this.current=t.clone(),this.dependencyTracker?.save(e)}restore(e){if(this.dependencyTracker?.restore(e),this.stateStack.length===0){this.inSMaskMode&&this.endSMaskMode();return}this.current=this.stateStack.pop(),this.ctx.restore(),this.inSMaskMode&&No(this.suspendedCtx,this.ctx),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}transform(e,t,n,r,i,a,o){this.dependencyTracker?.recordIncrementalData(`transform`,e),this.ctx.transform(t,n,r,i,a,o),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(e,t,n,r){let[i]=n;if(!r){i||=n[0]=new Path2D,this[t](e,i);return}if(this.dependencyTracker!==null){let n=t===Lr.stroke?this.current.lineWidth/2:0;this.dependencyTracker.resetBBox(e).recordBBox(e,this.ctx,r[0]-n,r[2]+n,r[1]-n,r[3]+n).recordDependencies(e,[`transform`])}i instanceof Path2D||(i=n[0]=Xi(i)),H.axialAlignedBoundingBox(r,Fi(this.ctx),this.current.minMax),this[t](e,i),this._pathStartIdx=e}closePath(e){this.ctx.closePath()}stroke(e,t,n=!0){let r=this.ctx,i=this.current.strokeColor;if(r.globalAlpha=this.current.strokeAlpha,this.contentVisible)if(typeof i==`object`&&i?.getPattern){let n=i.isModifyingCurrentTransform()?r.getTransform():null;if(r.save(),r.strokeStyle=i.getPattern(r,this,Ii(r),G.STROKE,e),n){let e=new Path2D;e.addPath(t,r.getTransform().invertSelf().multiplySelf(n)),t=e}this.rescaleAndStroke(t,!1),r.restore()}else this.rescaleAndStroke(t,!0);this.dependencyTracker?.recordDependencies(e,so.stroke),n&&this.consumePath(e,t,this.current.getClippedPathBoundingBox(G.STROKE,Fi(this.ctx))),r.globalAlpha=this.current.fillAlpha}closeStroke(e,t){this.stroke(e,t)}fill(e,t,n=!0){let r=this.ctx,i=this.current.fillColor,a=this.current.patternFill,o=!1;if(a){let n=i.isModifyingCurrentTransform()?r.getTransform():null;if(this.dependencyTracker?.save(e),r.save(),r.fillStyle=i.getPattern(r,this,Ii(r),G.FILL,e),n){let e=new Path2D;e.addPath(t,r.getTransform().invertSelf().multiplySelf(n)),t=e}o=!0}let s=this.current.getClippedPathBoundingBox();this.contentVisible&&s!==null&&(this.pendingEOFill?(r.fill(t,`evenodd`),this.pendingEOFill=!1):r.fill(t)),this.dependencyTracker?.recordDependencies(e,so.fill),o&&(r.restore(),this.dependencyTracker?.restore(e)),n&&this.consumePath(e,t,s)}eoFill(e,t){this.pendingEOFill=!0,this.fill(e,t)}fillStroke(e,t){this.fill(e,t,!1),this.stroke(e,t,!1),this.consumePath(e,t)}eoFillStroke(e,t){this.pendingEOFill=!0,this.fillStroke(e,t)}closeFillStroke(e,t){this.fillStroke(e,t)}closeEOFillStroke(e,t){this.pendingEOFill=!0,this.fillStroke(e,t)}endPath(e,t){this.consumePath(e,t)}rawFillPath(e,t){this.ctx.fill(t),this.dependencyTracker?.recordDependencies(e,so.rawFillPath).recordOperation(e)}clip(e){this.dependencyTracker?.recordFutureForcedDependency(`clipMode`,e),this.pendingClip=Ro}eoClip(e){this.dependencyTracker?.recordFutureForcedDependency(`clipMode`,e),this.pendingClip=zo}beginText(e){this.current.textMatrix=null,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0,this.dependencyTracker?.recordOpenMarker(e).resetIncrementalData(`sameLineText`).resetIncrementalData(`moveText`,e)}endText(e){let t=this.pendingTextPaths,n=this.ctx;if(this.dependencyTracker){let{dependencyTracker:n}=this;t!==void 0&&n.recordFutureForcedDependency(`textClip`,n.getOpenMarker()).recordFutureForcedDependency(`textClip`,e),n.recordCloseMarker(e)}if(t!==void 0){let e=new Path2D,r=n.getTransform().invertSelf();for(let{transform:n,x:i,y:a,fontSize:o,path:s}of t)s&&e.addPath(s,new DOMMatrix(n).preMultiplySelf(r).translate(i,a).scale(o,-o));n.clip(e)}delete this.pendingTextPaths}setCharSpacing(e,t){this.dependencyTracker?.recordSimpleData(`charSpacing`,e),this.current.charSpacing=t}setWordSpacing(e,t){this.dependencyTracker?.recordSimpleData(`wordSpacing`,e),this.current.wordSpacing=t}setHScale(e,t){this.dependencyTracker?.recordSimpleData(`hScale`,e),this.current.textHScale=t/100}setLeading(e,t){this.dependencyTracker?.recordSimpleData(`leading`,e),this.current.leading=-t}setFont(e,t,n){this.dependencyTracker?.recordSimpleData(`font`,e).recordSimpleDataFromNamed(`fontObj`,t,e);let r=this.commonObjs.get(t),i=this.current;if(!r)throw Error(`Can't find font for ${t}`);if(i.fontMatrix=r.fontMatrix||Tr,(i.fontMatrix[0]===0||i.fontMatrix[3]===0)&&R(`Invalid font matrix for font `+t),n<0?(n=-n,i.fontDirection=-1):i.fontDirection=1,this.current.font=r,this.current.fontSize=n,r.isType3Font)return;let a=r.loadedName||`sans-serif`,o=r.systemFontInfo?.css||`"${a}", ${r.fallbackName}`,s=`normal`;r.black?s=`900`:r.bold&&(s=`bold`);let c=r.italic?`italic`:`normal`,l=n;n<yo?l=yo:n>bo&&(l=bo),this.current.fontSizeScale=n/l,this.ctx.font=`${c} ${s} ${l}px ${o}`}setTextRenderingMode(e,t){this.dependencyTracker?.recordSimpleData(`textRenderingMode`,e),this.current.textRenderingMode=t}setTextRise(e,t){this.dependencyTracker?.recordSimpleData(`textRise`,e),this.current.textRise=t}moveText(e,t,n){this.dependencyTracker?.resetIncrementalData(`sameLineText`).recordIncrementalData(`moveText`,e),this.current.x=this.current.lineX+=t,this.current.y=this.current.lineY+=n}setLeadingMoveText(e,t,n){this.setLeading(e,-n),this.moveText(e,t,n)}setTextMatrix(e,t){this.dependencyTracker?.resetIncrementalData(`sameLineText`).recordSimpleData(`textMatrix`,e);let{current:n}=this;n.textMatrix=t,n.textMatrixScale=Math.hypot(t[0],t[1]),n.x=n.lineX=0,n.y=n.lineY=0}nextLine(e){this.moveText(e,0,this.current.leading),this.dependencyTracker?.recordIncrementalData(`moveText`,this.dependencyTracker.getSimpleIndex(`leading`)??e)}#n(e,t,n){let r=new Path2D;return r.addPath(e,new DOMMatrix(n).invertSelf().multiplySelf(t)),r}paintChar(e,t,n,r,i,a){let o=this.ctx,s=this.current,c=s.font,l=s.textRenderingMode,u=s.fontSize/s.fontSizeScale,d=l&Mr.FILL_STROKE_MASK,f=!!(l&Mr.ADD_TO_PATH_FLAG),p=s.patternFill&&!c.missingFile,m=s.patternStroke&&!c.missingFile,h;if((c.disableFontFace||f||p||m)&&!c.missingFile&&(h=c.getPathGenerator(this.commonObjs,t)),h&&(c.disableFontFace||p||m)){o.save(),o.translate(n,r),o.scale(u,-u),this.dependencyTracker?.recordCharacterBBox(e,o,c);let t;if(d===Mr.FILL||d===Mr.FILL_STROKE)if(i){t=o.getTransform(),o.setTransform(...i);let e=this.#n(h,t,i);o.fill(e)}else o.fill(h);if(d===Mr.STROKE||d===Mr.FILL_STROKE)if(a){t||=o.getTransform(),o.setTransform(...a);let{a:e,b:n,c:r,d:i}=t,s=H.inverseTransform(a),c=H.transform([e,n,r,i,0,0],s);H.singularValueDecompose2dScale(c,To),o.lineWidth*=Math.max(To[0],To[1])/u,o.stroke(this.#n(h,t,a))}else o.lineWidth/=u,o.stroke(h);o.restore()}else (d===Mr.FILL||d===Mr.FILL_STROKE)&&(o.fillText(t,n,r),this.dependencyTracker?.recordCharacterBBox(e,o,c,u,n,r,()=>o.measureText(t))),(d===Mr.STROKE||d===Mr.FILL_STROKE)&&(this.dependencyTracker&&this.dependencyTracker?.recordCharacterBBox(e,o,c,u,n,r,()=>o.measureText(t)).recordDependencies(e,so.stroke),o.strokeText(t,n,r));f&&((this.pendingTextPaths||=[]).push({transform:Fi(o),x:n,y:r,fontSize:u,path:h}),this.dependencyTracker?.recordCharacterBBox(e,o,c,u,n,r))}get isFontSubpixelAAEnabled(){let{context:e}=this.cachedCanvases.getCanvas(`isFontSubpixelAAEnabled`,10,10);e.scale(1.5,1),e.fillText(`I`,0,10);let t=e.getImageData(0,0,10,10).data,n=!1;for(let e=3;e<t.length;e+=4)if(t[e]>0&&t[e]<255){n=!0;break}return B(this,`isFontSubpixelAAEnabled`,n)}showText(e,t){this.dependencyTracker&&(this.dependencyTracker.recordDependencies(e,so.showText).resetBBox(e),this.current.textRenderingMode&Mr.ADD_TO_PATH_FLAG&&this.dependencyTracker.recordFutureForcedDependency(`textClip`,e).inheritPendingDependenciesAsFutureForcedDependencies());let n=this.current,r=n.font;if(r.isType3Font){this.showType3Text(e,t),this.dependencyTracker?.recordShowTextOperation(e);return}let i=n.fontSize;if(i===0){this.dependencyTracker?.recordOperation(e);return}let a=this.ctx,o=n.fontSizeScale,s=n.charSpacing,c=n.wordSpacing,l=n.fontDirection,u=n.textHScale*l,d=t.length,f=r.vertical,p=f?1:-1,m=r.defaultVMetrics,h=i*n.fontMatrix[0],g=n.textRenderingMode===Mr.FILL&&!r.disableFontFace&&!n.patternFill;a.save(),n.textMatrix&&a.transform(...n.textMatrix),a.translate(n.x,n.y+n.textRise),l>0?a.scale(u,-1):a.scale(u,1);let _,v;if(n.patternFill){a.save();let t=n.fillColor.getPattern(a,this,Ii(a),G.FILL,e);_=Fi(a),a.restore(),a.fillStyle=t}if(n.patternStroke){a.save();let t=n.strokeColor.getPattern(a,this,Ii(a),G.STROKE,e);v=Fi(a),a.restore(),a.strokeStyle=t}let y=n.lineWidth,b=n.textMatrixScale;if(b===0||y===0){let e=n.textRenderingMode&Mr.FILL_STROKE_MASK;(e===Mr.STROKE||e===Mr.FILL_STROKE)&&(y=this.getSinglePixelWidth())}else y/=b;if(o!==1&&(a.scale(o,o),y/=o),a.lineWidth=y,r.isInvalidPDFjsFont){let r=[],i=0;for(let e of t)r.push(e.unicode),i+=e.width;let o=r.join(``);if(a.fillText(o,0,0),this.dependencyTracker!==null){let t=a.measureText(o);this.dependencyTracker.recordBBox(e,this.ctx,-t.actualBoundingBoxLeft,t.actualBoundingBoxRight,-t.actualBoundingBoxAscent,t.actualBoundingBoxDescent).recordShowTextOperation(e)}n.x+=i*h*u,a.restore(),this.compose();return}let x=0,S;for(S=0;S<d;++S){let n=t[S];if(typeof n==`number`){x+=p*n*i/1e3;continue}let u=!1,d=(n.isSpace?c:0)+s,y=n.fontChar,b=n.accent,C,w,T=n.width;if(f){let e=n.vmetric||m,t=-(n.vmetric?e[1]:T*.5)*h,r=e[2]*h;T=e?-e[0]:T,C=t/o,w=(x+r)/o}else C=x/o,w=0;let E;if(r.remeasure&&T>0){E=a.measureText(y);let e=E.width*1e3/i*o;if(T<e&&this.isFontSubpixelAAEnabled){let t=T/e;u=!0,a.save(),a.scale(t,1),C/=t}else T!==e&&(C+=(T-e)/2e3*i/o)}if(this.contentVisible&&(n.isInFont||r.missingFile)){if(g&&!b)a.fillText(y,C,w),this.dependencyTracker?.recordCharacterBBox(e,a,E?{bbox:null}:r,i/o,C,w,()=>E??a.measureText(y));else if(this.paintChar(e,y,C,w,_,v),b){let t=C+i*b.offset.x/o,n=w-i*b.offset.y/o;this.paintChar(e,b.fontChar,t,n,_,v)}}let D=f?T*h-d*l:T*h+d*l;x+=D,u&&a.restore()}f?n.y-=x:n.x+=x*u,a.restore(),this.compose(),this.dependencyTracker?.recordShowTextOperation(e)}showType3Text(e,t){let n=this.ctx,r=this.current,i=r.font,a=r.fontSize,o=r.fontDirection,s=i.vertical?1:-1,c=r.charSpacing,l=r.wordSpacing,u=r.textHScale*o,d=r.fontMatrix||Tr,f=t.length,p=r.textRenderingMode===Mr.INVISIBLE,m,h,g,_;if(p||a===0)return;this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,n.save(),r.textMatrix&&n.transform(...r.textMatrix),n.translate(r.x,r.y+r.textRise),n.scale(u,o);let v=this.dependencyTracker;for(this.dependencyTracker=v?new oo(v,e):null,m=0;m<f;++m){if(h=t[m],typeof h==`number`){_=s*h*a/1e3,this.ctx.translate(_,0),r.x+=_*u;continue}let e=(h.isSpace?l:0)+c,o=i.charProcOperatorList[h.operatorListId];o?this.contentVisible&&(this.save(),n.scale(a,a),n.transform(...d),this.executeOperatorList(o),this.restore()):R(`Type3 character "${h.operatorListId}" is not available.`);let f=[h.width,0];H.applyTransform(f,d),g=f[0]*a+e,n.translate(g,0),r.x+=g*u}n.restore(),v&&(this.dependencyTracker=v)}setCharWidth(e,t,n){}setCharWidthAndBounds(e,t,n,r,i,a,o){let s=new Path2D;s.rect(r,i,a-r,o-i),this.ctx.clip(s),this.dependencyTracker?.recordBBox(e,this.ctx,r,a,i,o).recordClipBox(e,this.ctx,r,a,i,o),this.endPath(e)}getColorN_Pattern(t,n){let r;if(n[0]===`TilingPattern`){let t=this.baseTransform||Fi(this.ctx);r=new _o(n,this.ctx,{createCanvasGraphics:(t,n)=>new e(t,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack},void 0,void 0,this.dependencyTracker?new oo(this.dependencyTracker,n,!0):null)},t)}else r=this._getPattern(t,n[1],n[2]);return r}setStrokeColorN(e,...t){this.dependencyTracker?.recordSimpleData(`strokeColor`,e),this.current.strokeColor=this.getColorN_Pattern(e,t),this.current.patternStroke=!0}setFillColorN(e,...t){this.dependencyTracker?.recordSimpleData(`fillColor`,e),this.current.fillColor=this.getColorN_Pattern(e,t),this.current.patternFill=!0}setStrokeRGBColor(e,t){this.dependencyTracker?.recordSimpleData(`strokeColor`,e),this.ctx.strokeStyle=this.current.strokeColor=t,this.current.patternStroke=!1}setStrokeTransparent(e){this.dependencyTracker?.recordSimpleData(`strokeColor`,e),this.ctx.strokeStyle=this.current.strokeColor=`transparent`,this.current.patternStroke=!1}setFillRGBColor(e,t){this.dependencyTracker?.recordSimpleData(`fillColor`,e),this.ctx.fillStyle=this.current.fillColor=t,this.current.patternFill=!1}setFillTransparent(e){this.dependencyTracker?.recordSimpleData(`fillColor`,e),this.ctx.fillStyle=this.current.fillColor=`transparent`,this.current.patternFill=!1}_getPattern(e,t,n=null){let r;return this.cachedPatterns.has(t)?r=this.cachedPatterns.get(t):(r=ho(this.getObject(e,t)),this.cachedPatterns.set(t,r)),n&&(r.matrix=n),r}shadingFill(e,t){if(!this.contentVisible)return;let n=this.ctx;this.save(e),n.fillStyle=this._getPattern(e,t).getPattern(n,this,Ii(n),G.SHADING,e);let r=Ii(n);if(r){let{width:e,height:t}=n.canvas,i=Eo.slice();H.axialAlignedBoundingBox([0,0,e,t],r,i);let[a,o,s,c]=i;this.ctx.fillRect(a,o,s-a,c-o)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.dependencyTracker?.resetBBox(e).recordFullPageBBox(e).recordDependencies(e,so.transform).recordDependencies(e,so.fill).recordOperation(e),this.compose(this.current.getClippedPathBoundingBox()),this.restore(e)}beginInlineImage(){Wr(`Should not call beginInlineImage`)}beginImageData(){Wr(`Should not call beginImageData`)}paintFormXObjectBegin(e,t,n){if(this.contentVisible&&(this.save(e),this.baseTransformStack.push(this.baseTransform),t&&this.transform(e,...t),this.baseTransform=Fi(this.ctx),n)){H.axialAlignedBoundingBox(n,this.baseTransform,this.current.minMax);let[t,r,i,a]=n,o=new Path2D;o.rect(t,r,i-t,a-r),this.ctx.clip(o),this.dependencyTracker?.recordClipBox(e,this.ctx,t,i,r,a),this.endPath(e)}}paintFormXObjectEnd(e){this.contentVisible&&(this.restore(e),this.baseTransform=this.baseTransformStack.pop())}beginGroup(e,t){if(!this.contentVisible)return;this.save(e),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);let n=this.ctx;t.isolated||Ur(`TODO: Support non-isolated groups.`),t.knockout&&R(`Knockout groups not supported.`);let r=Fi(n);if(t.matrix&&n.transform(...t.matrix),!t.bbox)throw Error(`Bounding box is required.`);let i=Eo.slice();H.axialAlignedBoundingBox(t.bbox,Fi(n),i);let a=[0,0,n.canvas.width,n.canvas.height];i=H.intersect(i,a)||[0,0,0,0];let o=Math.floor(i[0]),s=Math.floor(i[1]),c=Math.max(Math.ceil(i[2])-o,1),l=Math.max(Math.ceil(i[3])-s,1);this.current.startNewPathAndClipBox([0,0,c,l]);let u=`groupAt`+this.groupLevel;t.smask&&(u+=`_smask_`+ this.smaskCounter++%2);let d=this.cachedCanvases.getCanvas(u,c,l),f=d.context;f.translate(-o,-s),f.transform(...r);let p=new Path2D,[m,h,g,_]=t.bbox;if(p.rect(m,h,g-m,_-h),t.matrix){let e=new Path2D;e.addPath(p,new DOMMatrix(t.matrix)),p=e}f.clip(p),t.smask&&this.smaskStack.push({canvas:d.canvas,context:f,offsetX:o,offsetY:s,subtype:t.smask.subtype,backdrop:t.smask.backdrop,transferMap:t.smask.transferMap||null,startTransformInverse:null}),(!t.smask||this.dependencyTracker)&&(n.setTransform(1,0,0,1,0,0),n.translate(o,s),n.save()),No(n,f),this.ctx=f,this.dependencyTracker?.inheritSimpleDataAsFutureForcedDependencies([`fillAlpha`,`strokeAlpha`,`globalCompositeOperation`]).pushBaseTransform(n),this.setGState(e,[[`BM`,`source-over`],[`ca`,1],[`CA`,1]]),this.groupStack.push(n),this.groupLevel++}endGroup(e,t){if(!this.contentVisible)return;this.groupLevel--;let n=this.ctx;if(this.ctx=this.groupStack.pop(),this.ctx.imageSmoothingEnabled=!1,this.dependencyTracker?.popBaseTransform(),t.smask)this.tempSMask=this.smaskStack.pop(),this.restore(e),this.dependencyTracker&&this.ctx.restore();else{this.ctx.restore();let t=Fi(this.ctx);this.restore(e),this.ctx.save(),this.ctx.setTransform(...t);let r=Eo.slice();H.axialAlignedBoundingBox([0,0,n.canvas.width,n.canvas.height],t,r),this.ctx.drawImage(n.canvas,0,0),this.ctx.restore(),this.compose(r)}}beginAnnotation(e,t,n,r,i,a){if(this.#e(),Po(this.ctx),this.ctx.save(),this.save(e),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),n){let i=n[2]-n[0],o=n[3]-n[1];if(a&&this.annotationCanvasMap){r=r.slice(),r[4]-=n[0],r[5]-=n[1],n=n.slice(),n[0]=n[1]=0,n[2]=i,n[3]=o,H.singularValueDecompose2dScale(Fi(this.ctx),To);let{viewportScale:e}=this,a=Math.ceil(i*this.outputScaleX*e),s=Math.ceil(o*this.outputScaleY*e);this.annotationCanvas=this.canvasFactory.create(a,s);let{canvas:c,context:l}=this.annotationCanvas;this.annotationCanvasMap.set(t,c),this.annotationCanvas.savedCtx=this.ctx,this.ctx=l,this.ctx.save(),this.ctx.setTransform(To[0],0,0,-To[1],0,o*To[1]),Po(this.ctx)}else{Po(this.ctx),this.endPath(e);let t=new Path2D;t.rect(n[0],n[1],i,o),this.ctx.clip(t)}}this.current=new Ao(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(e,...r),this.transform(e,...i)}endAnnotation(e){this.annotationCanvas&&(this.ctx.restore(),this.#t(),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(e,t){if(!this.contentVisible)return;let n=t.count;t=this.getObject(e,t.data,t),t.count=n;let r=this.ctx,i=this._createMaskCanvas(e,t),a=i.canvas;r.save(),r.setTransform(1,0,0,1,0,0),r.drawImage(a,i.offsetX,i.offsetY),this.dependencyTracker?.resetBBox(e).recordBBox(e,this.ctx,i.offsetX,i.offsetX+a.width,i.offsetY,i.offsetY+a.height).recordOperation(e),r.restore(),this.compose()}paintImageMaskXObjectRepeat(e,t,n,r=0,i=0,a,o){if(!this.contentVisible)return;t=this.getObject(e,t.data,t);let s=this.ctx;s.save();let c=Fi(s);s.transform(n,r,i,a,0,0);let l=this._createMaskCanvas(e,t);s.setTransform(1,0,0,1,l.offsetX-c[4],l.offsetY-c[5]),this.dependencyTracker?.resetBBox(e);for(let t=0,u=o.length;t<u;t+=2){let u=H.transform(c,[n,r,i,a,o[t],o[t+1]]);s.drawImage(l.canvas,u[4],u[5]),this.dependencyTracker?.recordBBox(e,this.ctx,u[4],u[4]+l.canvas.width,u[5],u[5]+l.canvas.height)}s.restore(),this.compose(),this.dependencyTracker?.recordOperation(e)}paintImageMaskXObjectGroup(e,t){if(!this.contentVisible)return;let n=this.ctx,r=this.current.fillColor,i=this.current.patternFill;this.dependencyTracker?.resetBBox(e).recordDependencies(e,so.transformAndFill);for(let a of t){let{data:t,width:o,height:s,transform:c}=a,l=this.cachedCanvases.getCanvas(`maskCanvas`,o,s),u=l.context;u.save(),Mo(u,this.getObject(e,t,a)),u.globalCompositeOperation=`source-in`,u.fillStyle=i?r.getPattern(u,this,Ii(n),G.FILL,e):r,u.fillRect(0,0,o,s),u.restore(),n.save(),n.transform(...c),n.scale(1,-1),ko(n,l.canvas,0,0,o,s,0,-1,1,1),this.dependencyTracker?.recordBBox(e,n,0,o,0,s),n.restore()}this.compose(),this.dependencyTracker?.recordOperation(e)}paintImageXObject(e,t){if(!this.contentVisible)return;let n=this.getObject(e,t);if(!n){R(`Dependent image isn't ready yet`);return}this.paintInlineImageXObject(e,n)}paintImageXObjectRepeat(e,t,n,r,i){if(!this.contentVisible)return;let a=this.getObject(e,t);if(!a){R(`Dependent image isn't ready yet`);return}let o=a.width,s=a.height,c=[];for(let e=0,t=i.length;e<t;e+=2)c.push({transform:[n,0,0,r,i[e],i[e+1]],x:0,y:0,w:o,h:s});this.paintInlineImageXObjectGroup(e,a,c)}applyTransferMapsToCanvas(e){return this.current.transferMaps!==`none`&&(e.filter=this.current.transferMaps,e.drawImage(e.canvas,0,0),e.filter=`none`),e.canvas}applyTransferMapsToBitmap(e){if(this.current.transferMaps===`none`)return e.bitmap;let{bitmap:t,width:n,height:r}=e,i=this.cachedCanvases.getCanvas(`inlineImage`,n,r),a=i.context;return a.filter=this.current.transferMaps,a.drawImage(t,0,0),a.filter=`none`,i.canvas}paintInlineImageXObject(e,t){if(!this.contentVisible)return;let n=t.width,r=t.height,i=this.ctx;this.save(e);let{filter:a}=i;a!==`none`&&a!==``&&(i.filter=`none`),i.scale(1/n,-1/r);let o;if(t.bitmap)o=this.applyTransferMapsToBitmap(t);else if(typeof HTMLElement==`function`&&t instanceof HTMLElement||!t.data)o=t;else{let e=this.cachedCanvases.getCanvas(`inlineImage`,n,r).context;jo(e,t),o=this.applyTransferMapsToCanvas(e)}let s=this._scaleImage(o,Ii(i));i.imageSmoothingEnabled=Fo(Fi(i),t.interpolate),this.dependencyTracker?.resetBBox(e).recordBBox(e,i,0,n,-r,0).recordDependencies(e,so.imageXObject).recordOperation(e),ko(i,s.img,0,0,s.paintWidth,s.paintHeight,0,-r,n,r),this.compose(),this.restore(e)}paintInlineImageXObjectGroup(e,t,n){if(!this.contentVisible)return;let r=this.ctx,i;if(t.bitmap)i=t.bitmap;else{let e=t.width,n=t.height,r=this.cachedCanvases.getCanvas(`inlineImage`,e,n).context;jo(r,t),i=this.applyTransferMapsToCanvas(r)}this.dependencyTracker?.resetBBox(e);for(let t of n)r.save(),r.transform(...t.transform),r.scale(1,-1),ko(r,i,t.x,t.y,t.w,t.h,0,-1,1,1),this.dependencyTracker?.recordBBox(e,r,0,1,-1,0),r.restore();this.dependencyTracker?.recordOperation(e),this.compose()}paintSolidColorImageMask(e){this.contentVisible&&(this.dependencyTracker?.resetBBox(e).recordBBox(e,this.ctx,0,1,0,1).recordDependencies(e,so.fill).recordOperation(e),this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(e,t){}markPointProps(e,t,n){}beginMarkedContent(e,t){this.dependencyTracker?.beginMarkedContent(e),this.markedContentStack.push({visible:!0})}beginMarkedContentProps(e,t,n){this.dependencyTracker?.beginMarkedContent(e),t===`OC`?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(n)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(e){this.dependencyTracker?.endMarkedContent(e),this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(e){}endCompat(e){}consumePath(e,t,n){let r=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(n);let i=this.ctx;this.pendingClip?(r||(this.pendingClip===zo?i.clip(t,`evenodd`):i.clip(t)),this.pendingClip=null,this.dependencyTracker?.bboxToClipBoxDropOperation(e).recordFutureForcedDependency(`clipPath`,e)):this.dependencyTracker?.recordOperation(e),this.current.startNewPathAndClipBox(this.current.clipBox)}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){let e=Fi(this.ctx);if(e[1]===0&&e[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(e[0]),Math.abs(e[3]));else{let t=Math.abs(e[0]*e[3]-e[2]*e[1]),n=Math.hypot(e[0],e[2]),r=Math.hypot(e[1],e[3]);this._cachedGetSinglePixelWidth=Math.max(n,r)/t}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){let{lineWidth:e}=this.current,{a:t,b:n,c:r,d:i}=this.ctx.getTransform(),a,o;if(n===0&&r===0){let n=Math.abs(t),r=Math.abs(i);if(n===r)if(e===0)a=o=1/n;else{let t=n*e;a=o=t<1?1/t:1}else if(e===0)a=1/n,o=1/r;else{let t=n*e,i=r*e;a=t<1?1/t:1,o=i<1?1/i:1}}else{let s=Math.abs(t*i-n*r),c=Math.hypot(t,n),l=Math.hypot(r,i);if(e===0)a=l/s,o=c/s;else{let t=e*s;a=l>t?l/t:1,o=c>t?c/t:1}}this._cachedScaleForStroking[0]=a,this._cachedScaleForStroking[1]=o}return this._cachedScaleForStroking}rescaleAndStroke(e,t){let{ctx:n,current:{lineWidth:r}}=this,[i,a]=this.getScaleForStroking();if(i===a){n.lineWidth=(r||1)*i,n.stroke(e);return}let o=n.getLineDash();t&&n.save(),n.scale(i,a),wo.a=1/i,wo.d=1/a;let s=new Path2D;if(s.addPath(e,wo),o.length>0){let e=Math.max(i,a);n.setLineDash(o.map(t=>t/e)),n.lineDashOffset/=e}n.lineWidth=r||1,n.stroke(s),t&&n.restore()}isContentVisible(){for(let e=this.markedContentStack.length-1;e>=0;e--)if(!this.markedContentStack[e].visible)return!1;return!0}};for(let e in Lr)Bo.prototype[e]!==void 0&&(Bo.prototype[Lr[e]]=Bo.prototype[e]);var Vo=class{static#e=null;static#t=``;static get workerPort(){return this.#e}static set workerPort(e){if(!(typeof Worker<`u`&&e instanceof Worker)&&e!==null)throw Error("Invalid `workerPort` type.");this.#e=e}static get workerSrc(){return this.#t}static set workerSrc(e){if(typeof e!=`string`)throw Error("Invalid `workerSrc` type.");this.#t=e}},Ho=class{#e;#t;constructor({parsedData:e,rawData:t}){this.#e=e,this.#t=t}getRaw(){return this.#t}get(e){return this.#e.get(e)??null}[Symbol.iterator](){return this.#e.entries()}},Uo=Symbol(`INTERNAL`),Wo=class{#e=!1;#t=!1;#n=!1;#r=!0;constructor(e,{name:t,intent:n,usage:r,rbGroups:i}){this.#e=!!(e&Dr.DISPLAY),this.#t=!!(e&Dr.PRINT),this.name=t,this.intent=n,this.usage=r,this.rbGroups=i}get visible(){if(this.#n)return this.#r;if(!this.#r)return!1;let{print:e,view:t}=this.usage;return this.#e?t?.viewState!==`OFF`:this.#t?e?.printState!==`OFF`:!0}_setVisible(e,t,n=!1){e!==Uo&&Wr("Internal method `_setVisible` called."),this.#n=n,this.#r=t}},Go=class{#e=null;#t=new Map;#n=null;#r=null;constructor(e,t=Dr.DISPLAY){if(this.renderingIntent=t,this.name=null,this.creator=null,e!==null){this.name=e.name,this.creator=e.creator,this.#r=e.order;for(let n of e.groups)this.#t.set(n.id,new Wo(t,n));if(e.baseState===`OFF`)for(let e of this.#t.values())e._setVisible(Uo,!1);for(let t of e.on)this.#t.get(t)._setVisible(Uo,!0);for(let t of e.off)this.#t.get(t)._setVisible(Uo,!1);this.#n=this.getHash()}}#i(e){let t=e.length;if(t<2)return!0;let n=e[0];for(let r=1;r<t;r++){let t=e[r],i;if(Array.isArray(t))i=this.#i(t);else if(this.#t.has(t))i=this.#t.get(t).visible;else return R(`Optional content group not found: ${t}`),!0;switch(n){case`And`:if(!i)return!1;break;case`Or`:if(i)return!0;break;case`Not`:return!i;default:return!0}}return n===`And`}isVisible(e){if(this.#t.size===0)return!0;if(!e)return Ur(`Optional content group not defined.`),!0;if(e.type===`OCG`)return this.#t.has(e.id)?this.#t.get(e.id).visible:(R(`Optional content group not found: ${e.id}`),!0);if(e.type===`OCMD`){if(e.expression)return this.#i(e.expression);if(!e.policy||e.policy===`AnyOn`){for(let t of e.ids){if(!this.#t.has(t))return R(`Optional content group not found: ${t}`),!0;if(this.#t.get(t).visible)return!0}return!1}else if(e.policy===`AllOn`){for(let t of e.ids){if(!this.#t.has(t))return R(`Optional content group not found: ${t}`),!0;if(!this.#t.get(t).visible)return!1}return!0}else if(e.policy===`AnyOff`){for(let t of e.ids){if(!this.#t.has(t))return R(`Optional content group not found: ${t}`),!0;if(!this.#t.get(t).visible)return!0}return!1}else if(e.policy===`AllOff`){for(let t of e.ids){if(!this.#t.has(t))return R(`Optional content group not found: ${t}`),!0;if(this.#t.get(t).visible)return!1}return!0}return R(`Unknown optional content policy ${e.policy}.`),!0}return R(`Unknown group type ${e.type}.`),!0}setVisibility(e,t=!0,n=!0){let r=this.#t.get(e);if(!r){R(`Optional content group not found: ${e}`);return}if(n&&t&&r.rbGroups.length)for(let t of r.rbGroups)for(let n of t)n!==e&&this.#t.get(n)?._setVisible(Uo,!1,!0);r._setVisible(Uo,!!t,!0),this.#e=null}setOCGState({state:e,preserveRB:t}){let n;for(let r of e){switch(r){case`ON`:case`OFF`:case`Toggle`:n=r;continue}let e=this.#t.get(r);if(e)switch(n){case`ON`:this.setVisibility(r,!0,t);break;case`OFF`:this.setVisibility(r,!1,t);break;case`Toggle`:this.setVisibility(r,!e.visible,t);break}}this.#e=null}get hasInitialVisibility(){return this.#n===null||this.getHash()===this.#n}getOrder(){return this.#t.size?this.#r?this.#r.slice():[...this.#t.keys()]:null}getGroup(e){return this.#t.get(e)||null}getHash(){if(this.#e!==null)return this.#e;let e=new ha;for(let[t,n]of this.#t)e.update(`${t}:${n.visible}`);return this.#e=e.hexdigest()}[Symbol.iterator](){return this.#t.entries()}},Ko=class{constructor(e,{disableRange:t=!1,disableStream:n=!1}){z(e,`PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.`);let{length:r,initialData:i,progressiveDone:a,contentDispositionFilename:o}=e;if(this._queuedChunks=[],this._progressiveDone=a,this._contentDispositionFilename=o,i?.length>0){let e=i instanceof Uint8Array&&i.byteLength===i.buffer.byteLength?i.buffer:new Uint8Array(i).buffer;this._queuedChunks.push(e)}this._pdfDataRangeTransport=e,this._isStreamingSupported=!n,this._isRangeSupported=!t,this._contentLength=r,this._fullRequestReader=null,this._rangeReaders=[],e.addRangeListener((e,t)=>{this._onReceiveData({begin:e,chunk:t})}),e.addProgressListener((e,t)=>{this._onProgress({loaded:e,total:t})}),e.addProgressiveReadListener(e=>{this._onReceiveData({chunk:e})}),e.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),e.transportReady()}_onReceiveData({begin:e,chunk:t}){let n=t instanceof Uint8Array&&t.byteLength===t.buffer.byteLength?t.buffer:new Uint8Array(t).buffer;e===void 0?this._fullRequestReader?this._fullRequestReader._enqueue(n):this._queuedChunks.push(n):z(this._rangeReaders.some(function(t){return t._begin===e?(t._enqueue(n),!0):!1}),"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}_onProgress(e){e.total===void 0?this._rangeReaders[0]?.onProgress?.({loaded:e.loaded}):this._fullRequestReader?.onProgress?.({loaded:e.loaded,total:e.total})}_onProgressiveDone(){this._fullRequestReader?.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(e){let t=this._rangeReaders.indexOf(e);t>=0&&this._rangeReaders.splice(t,1)}getFullReader(){z(!this._fullRequestReader,`PDFDataTransportStream.getFullReader can only be called once.`);let e=this._queuedChunks;return this._queuedChunks=null,new qo(this,e,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;let n=new Jo(this,e,t);return this._pdfDataRangeTransport.requestDataRange(e,t),this._rangeReaders.push(n),n}cancelAllRequests(e){this._fullRequestReader?.cancel(e);for(let t of this._rangeReaders.slice(0))t.cancel(e);this._pdfDataRangeTransport.abort()}},qo=class{constructor(e,t,n=!1,r=null){this._stream=e,this._done=n||!1,this._filename=Ti(r)?r:null,this._queuedChunks=t||[],this._loaded=0;for(let e of this._queuedChunks)this._loaded+=e.byteLength;this._requests=[],this._headersReady=Promise.resolve(),e._fullRequestReader=this,this.onProgress=null}_enqueue(e){this._done||(this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunks.push(e),this._loaded+=e.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};let e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(let e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||=!0}},Jo=class{constructor(e,t,n){this._stream=e,this._begin=t,this._end=n,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(e){if(!this._done){if(this._requests.length===0)this._queuedChunk=e;else{this._requests.shift().resolve({value:e,done:!1});for(let e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){let e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};let e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(let e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}};function Yo(e){let t=!0,n=r(`filename\\*`,`i`).exec(e);if(n){n=n[1];let e=s(n);return e=unescape(e),e=c(e),e=l(e),a(e)}if(n=o(e),n)return a(l(n));if(n=r(`filename`,`i`).exec(e),n){n=n[1];let e=s(n);return e=l(e),a(e)}function r(e,t){return RegExp(`(?:^|;)\\s*`+e+`\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)`,t)}function i(e,n){if(e){if(!/^[\x00-\xFF]+$/.test(n))return n;try{let r=new TextDecoder(e,{fatal:!0}),i=ni(n);n=r.decode(i),t=!1}catch{}}return n}function a(e){return t&&/[\x80-\xff]/.test(e)&&(e=i(`utf-8`,e),t&&(e=i(`iso-8859-1`,e))),e}function o(e){let t=[],n,i=r(`filename\\*((?!0\\d)\\d+)(\\*?)`,`ig`);for(;(n=i.exec(e))!==null;){let[,e,r,i]=n;if(e=parseInt(e,10),e in t){if(e===0)break;continue}t[e]=[r,i]}let a=[];for(let e=0;e<t.length&&e in t;++e){let[n,r]=t[e];r=s(r),n&&(r=unescape(r),e===0&&(r=c(r))),a.push(r)}return a.join(``)}function s(e){if(e.startsWith(`"`)){let t=e.slice(1).split(`\\"`);for(let e=0;e<t.length;++e){let n=t[e].indexOf(`"`);n!==-1&&(t[e]=t[e].slice(0,n),t.length=e+1),t[e]=t[e].replaceAll(/\\(.)/g,`$1`)}e=t.join(`"`)}return e}function c(e){let t=e.indexOf(`'`);return t===-1?e:i(e.slice(0,t),e.slice(t+1).replace(/^[^']*'/,``))}function l(e){return!e.startsWith(`=?`)||/[\x00-\x19\x80-\xff]/.test(e)?e:e.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(e,t,n,r){if(n===`q`||n===`Q`)return r=r.replaceAll(`_`,` `),r=r.replaceAll(/=([0-9a-fA-F]{2})/g,function(e,t){return String.fromCharCode(parseInt(t,16))}),i(t,r);try{r=atob(r)}catch{}return i(t,r)})}return``}function Xo(e,t){let n=new Headers;if(!e||!t||typeof t!=`object`)return n;for(let e in t){let r=t[e];r!==void 0&&n.append(e,r)}return n}function Zo(e){return URL.parse(e)?.origin??null}function Qo({responseHeaders:e,isHttp:t,rangeChunkSize:n,disableRange:r}){let i={allowRangeRequests:!1,suggestedLength:void 0},a=parseInt(e.get(`Content-Length`),10);return!Number.isInteger(a)||(i.suggestedLength=a,a<=2*n)||r||!t||e.get(`Accept-Ranges`)!==`bytes`||(e.get(`Content-Encoding`)||`identity`)!==`identity`||(i.allowRangeRequests=!0),i}function $o(e){let t=e.get(`Content-Disposition`);if(t){let e=Yo(t);if(e.includes(`%`))try{e=decodeURIComponent(e)}catch{}if(Ti(e))return e}return null}function es(e,t){return new Qr(`Unexpected server response (${e}) while retrieving PDF "${t}".`,e,e===404||e===0&&t.startsWith(`file:`))}function ts(e){return e===200||e===206}function ns(e,t,n){return{method:`GET`,headers:e,signal:n.signal,mode:`cors`,credentials:t?`include`:`same-origin`,redirect:`follow`}}function rs(e){return e instanceof Uint8Array?e.buffer:e instanceof ArrayBuffer?e:(R(`getArrayBuffer - unexpected data format: ${e}`),new Uint8Array(e).buffer)}var is=class{_responseOrigin=null;constructor(e){this.source=e,this.isHttp=/^https?:/i.test(e.url),this.headers=Xo(this.isHttp,e.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return z(!this._fullRequestReader,`PDFFetchStream.getFullReader can only be called once.`),this._fullRequestReader=new as(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;let n=new os(this,e,t);return this._rangeRequestReaders.push(n),n}cancelAllRequests(e){this._fullRequestReader?.cancel(e);for(let t of this._rangeRequestReaders.slice(0))t.cancel(e)}},as=class{constructor(e){this._stream=e,this._reader=null,this._loaded=0,this._filename=null;let t=e.source;this._withCredentials=t.withCredentials||!1,this._contentLength=t.length,this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange;let n=new Headers(e.headers),r=t.url;fetch(r,ns(n,this._withCredentials,this._abortController)).then(t=>{if(e._responseOrigin=Zo(t.url),!ts(t.status))throw es(t.status,r);this._reader=t.body.getReader(),this._headersCapability.resolve();let n=t.headers,{allowRangeRequests:i,suggestedLength:a}=Qo({responseHeaders:n,isHttp:e.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=i,this._contentLength=a||this._contentLength,this._filename=$o(n),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new ei(`Streaming is disabled.`))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._headersCapability.promise;let{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:rs(e),done:!1})}cancel(e){this._reader?.cancel(e),this._abortController.abort()}},os=class{constructor(e,t,n){this._stream=e,this._reader=null,this._loaded=0;let r=e.source;this._withCredentials=r.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!r.disableStream,this._abortController=new AbortController;let i=new Headers(e.headers);i.append(`Range`,`bytes=${t}-${n-1}`);let a=r.url;fetch(a,ns(i,this._withCredentials,this._abortController)).then(t=>{let n=Zo(t.url);if(n!==e._responseOrigin)throw Error(`Expected range response-origin "${n}" to match "${e._responseOrigin}".`);if(!ts(t.status))throw es(t.status,a);this._readCapability.resolve(),this._reader=t.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._readCapability.promise;let{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,this.onProgress?.({loaded:this._loaded}),{value:rs(e),done:!1})}cancel(e){this._reader?.cancel(e),this._abortController.abort()}},ss=200,cs=206;function ls(e){let t=e.response;return typeof t==`string`?ni(t).buffer:t}var us=class{_responseOrigin=null;constructor({url:e,httpHeaders:t,withCredentials:n}){this.url=e,this.isHttp=/^https?:/i.test(e),this.headers=Xo(this.isHttp,t),this.withCredentials=n||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}request(e){let t=new XMLHttpRequest,n=this.currXhrId++,r=this.pendingRequests[n]={xhr:t};t.open(`GET`,this.url),t.withCredentials=this.withCredentials;for(let[e,n]of this.headers)t.setRequestHeader(e,n);return this.isHttp&&`begin`in e&&`end`in e?(t.setRequestHeader(`Range`,`bytes=${e.begin}-${e.end-1}`),r.expectedStatus=cs):r.expectedStatus=ss,t.responseType=`arraybuffer`,z(e.onError,"Expected `onError` callback to be provided."),t.onerror=()=>{e.onError(t.status)},t.onreadystatechange=this.onStateChange.bind(this,n),t.onprogress=this.onProgress.bind(this,n),r.onHeadersReceived=e.onHeadersReceived,r.onDone=e.onDone,r.onError=e.onError,r.onProgress=e.onProgress,t.send(null),n}onProgress(e,t){let n=this.pendingRequests[e];n&&n.onProgress?.(t)}onStateChange(e,t){let n=this.pendingRequests[e];if(!n)return;let r=n.xhr;if(r.readyState>=2&&n.onHeadersReceived&&(n.onHeadersReceived(),delete n.onHeadersReceived),r.readyState!==4||!(e in this.pendingRequests))return;if(delete this.pendingRequests[e],r.status===0&&this.isHttp){n.onError(r.status);return}let i=r.status||ss;if(!(i===ss&&n.expectedStatus===cs)&&i!==n.expectedStatus){n.onError(r.status);return}let a=ls(r);if(i===cs){let e=r.getResponseHeader(`Content-Range`),t=/bytes (\d+)-(\d+)\/(\d+)/.exec(e);t?n.onDone({begin:parseInt(t[1],10),chunk:a}):(R(`Missing or invalid "Content-Range" header.`),n.onError(0))}else a?n.onDone({begin:0,chunk:a}):n.onError(r.status)}getRequestXhr(e){return this.pendingRequests[e].xhr}isPendingRequest(e){return e in this.pendingRequests}abortRequest(e){let t=this.pendingRequests[e].xhr;delete this.pendingRequests[e],t.abort()}},ds=class{constructor(e){this._source=e,this._manager=new us(e),this._rangeChunkSize=e.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(e){let t=this._rangeRequestReaders.indexOf(e);t>=0&&this._rangeRequestReaders.splice(t,1)}getFullReader(){return z(!this._fullRequestReader,`PDFNetworkStream.getFullReader can only be called once.`),this._fullRequestReader=new fs(this._manager,this._source),this._fullRequestReader}getRangeReader(e,t){let n=new ps(this._manager,e,t);return n.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(n),n}cancelAllRequests(e){this._fullRequestReader?.cancel(e);for(let t of this._rangeRequestReaders.slice(0))t.cancel(e)}},fs=class{constructor(e,t){this._manager=e,this._url=t.url,this._fullRequestId=e.request({onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._contentLength=t.length,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){let e=this._fullRequestId,t=this._manager.getRequestXhr(e);this._manager._responseOrigin=Zo(t.responseURL);let n=t.getAllResponseHeaders(),r=new Headers(n?n.trimStart().replace(/[^\S ]+$/,``).split(/[\r\n]+/).map(e=>{let[t,...n]=e.split(`: `);return[t,n.join(`: `)]}):[]),{allowRangeRequests:i,suggestedLength:a}=Qo({responseHeaders:r,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});i&&(this._isRangeSupported=!0),this._contentLength=a||this._contentLength,this._filename=$o(r),this._isRangeSupported&&this._manager.abortRequest(e),this._headersCapability.resolve()}_onDone(e){if(e&&(this._requests.length>0?this._requests.shift().resolve({value:e.chunk,done:!1}):this._cachedChunks.push(e.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(let e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(e){this._storedError=es(e,this._url),this._headersCapability.reject(this._storedError);for(let e of this._requests)e.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(e){this.onProgress?.({loaded:e.loaded,total:e.lengthComputable?e.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};let e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0,this._headersCapability.reject(e);for(let e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}},ps=class{constructor(e,t,n){this._manager=e,this._url=e.url,this._requestId=e.request({begin:t,end:n,onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_onHeadersReceived(){let e=Zo(this._manager.getRequestXhr(this._requestId)?.responseURL);e!==this._manager._responseOrigin&&(this._storedError=Error(`Expected range response-origin "${e}" to match "${this._manager._responseOrigin}".`),this._onError(0))}_close(){this.onClosed?.(this)}_onDone(e){let t=e.chunk;this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunk=t,this._done=!0;for(let e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(e){this._storedError??=es(e,this._url);for(let e of this._requests)e.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(e){this.isStreamingSupported||this.onProgress?.({loaded:e.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){let e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};let e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(let e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}},ms=/^[a-z][a-z0-9\-+.]+:/i;function hs(e){if(ms.test(e))return new URL(e);let t=process.getBuiltinModule(`url`);return new URL(t.pathToFileURL(e))}var gs=class{constructor(e){this.source=e,this.url=hs(e.url),z(this.url.protocol===`file:`,`PDFNodeStream only supports file:// URLs.`),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return z(!this._fullRequestReader,`PDFNodeStream.getFullReader can only be called once.`),this._fullRequestReader=new _s(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;let n=new vs(this,e,t);return this._rangeRequestReaders.push(n),n}cancelAllRequests(e){this._fullRequestReader?.cancel(e);for(let t of this._rangeRequestReaders.slice(0))t.cancel(e)}},_s=class{constructor(e){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null;let t=e.source;this._contentLength=t.length,this._loaded=0,this._filename=null,this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers();let n=process.getBuiltinModule(`fs`);n.promises.lstat(this._url).then(e=>{this._contentLength=e.size,this._setReadableStream(n.createReadStream(this._url)),this._headersCapability.resolve()},e=>{e.code===`ENOENT`&&(e=es(0,this._url.href)),this._storedError=e,this._headersCapability.reject(e)})}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;let e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on(`readable`,()=>{this._readCapability.resolve()}),e.on(`end`,()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on(`error`,e=>{this._error(e)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new ei(`streaming is disabled`)),this._storedError&&this._readableStream.destroy(this._storedError)}},vs=class{constructor(e,t,n){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!e.source.disableStream;let r=process.getBuiltinModule(`fs`);this._setReadableStream(r.createReadStream(this._url,{start:t,end:n-1}))}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;let e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,this.onProgress?.({loaded:this._loaded}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on(`readable`,()=>{this._readCapability.resolve()}),e.on(`end`,()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on(`error`,e=>{this._error(e)}),this._storedError&&this._readableStream.destroy(this._storedError)}},ys=Symbol(`INITIAL_DATA`),bs=class{#e=Object.create(null);#t(e){return this.#e[e]||={...Promise.withResolvers(),data:ys}}get(e,t=null){if(t){let n=this.#t(e);return n.promise.then(()=>t(n.data)),null}let n=this.#e[e];if(!n||n.data===ys)throw Error(`Requesting object that isn't resolved yet ${e}.`);return n.data}has(e){let t=this.#e[e];return!!t&&t.data!==ys}delete(e){let t=this.#e[e];return!t||t.data===ys?!1:(delete this.#e[e],!0)}resolve(e,t=null){let n=this.#t(e);n.data=t,n.resolve()}clear(){for(let e in this.#e){let{data:t}=this.#e[e];t?.bitmap?.close()}this.#e=Object.create(null)}*[Symbol.iterator](){for(let e in this.#e){let{data:t}=this.#e[e];t!==ys&&(yield[e,t])}}},xs=1e5,Ss=30,Cs=class e{#e=Promise.withResolvers();#t=null;#n=!1;#r=!!globalThis.FontInspector?.enabled;#i=null;#a=null;#o=0;#s=0;#c=null;#l=null;#u=0;#d=0;#f=Object.create(null);#p=[];#m=null;#h=[];#g=new WeakMap;#_=null;static#v=new Map;static#y=new Map;static#b=new WeakMap;static#x=null;static#S=new Set;constructor({textContentSource:t,container:n,viewport:r}){if(t instanceof ReadableStream)this.#m=t;else if(typeof t==`object`)this.#m=new ReadableStream({start(e){e.enqueue(t),e.close()}});else throw Error(`No "textContentSource" parameter specified.`);this.#t=this.#l=n,this.#d=r.scale*Ri.pixelRatio,this.#u=r.rotation,this.#a={div:null,properties:null,ctx:null};let{pageWidth:i,pageHeight:a,pageX:o,pageY:s}=r.rawDims;this.#_=[1,0,0,-1,-o,s+a],this.#s=i,this.#o=a,e.#O(),Li(n,r),this.#e.promise.finally(()=>{e.#S.delete(this),this.#a=null,this.#f=null}).catch(()=>{})}static get fontFamilyMap(){let{isWindows:e,isFirefox:t}=V.platform;return B(this,`fontFamilyMap`,new Map([[`sans-serif`,`${e&&t?`Calibri, `:``}sans-serif`],[`monospace`,`${e&&t?`Lucida Console, `:``}monospace`]]))}render(){let t=()=>{this.#c.read().then(({value:e,done:n})=>{if(n){this.#e.resolve();return}this.#i??=e.lang,Object.assign(this.#f,e.styles),this.#C(e.items),t()},this.#e.reject)};return this.#c=this.#m.getReader(),e.#S.add(this),t(),this.#e.promise}update({viewport:t,onBefore:n=null}){let r=t.scale*Ri.pixelRatio,i=t.rotation;if(i!==this.#u&&(n?.(),this.#u=i,Li(this.#l,{rotation:i})),r!==this.#d){n?.(),this.#d=r;let t={div:null,properties:null,ctx:e.#E(this.#i)};for(let e of this.#h)t.properties=this.#g.get(e),t.div=e,this.#T(t)}}cancel(){let e=new ei(`TextLayer task cancelled.`);this.#c?.cancel(e).catch(()=>{}),this.#c=null,this.#e.reject(e)}get textDivs(){return this.#h}get textContentItemsStr(){return this.#p}#C(t){if(this.#n)return;this.#a.ctx??=e.#E(this.#i);let n=this.#h,r=this.#p;for(let e of t){if(n.length>xs){R(`Ignoring additional textDivs for performance reasons.`),this.#n=!0;return}if(e.str===void 0){if(e.type===`beginMarkedContentProps`||e.type===`beginMarkedContent`){let t=this.#t;this.#t=document.createElement(`span`),this.#t.classList.add(`markedContent`),e.id&&this.#t.setAttribute(`id`,`${e.id}`),t.append(this.#t)}else e.type===`endMarkedContent`&&(this.#t=this.#t.parentNode);continue}r.push(e.str),this.#w(e)}}#w(t){let n=document.createElement(`span`),r={angle:0,canvasWidth:0,hasText:t.str!==``,hasEOL:t.hasEOL,fontSize:0};this.#h.push(n);let i=H.transform(this.#_,t.transform),a=Math.atan2(i[1],i[0]),o=this.#f[t.fontName];o.vertical&&(a+=Math.PI/2);let s=this.#r&&o.fontSubstitution||o.fontFamily;s=e.fontFamilyMap.get(s)||s;let c=Math.hypot(i[2],i[3]),l=c*e.#k(s,o,this.#i),u,d;a===0?(u=i[4],d=i[5]-l):(u=i[4]+l*Math.sin(a),d=i[5]-l*Math.cos(a));let f=`calc(var(--total-scale-factor) *`,p=n.style;this.#t===this.#l?(p.left=`${(100*u/this.#s).toFixed(2)}%`,p.top=`${(100*d/this.#o).toFixed(2)}%`):(p.left=`${f}${u.toFixed(2)}px)`,p.top=`${f}${d.toFixed(2)}px)`),p.fontSize=`${f}${(e.#x*c).toFixed(2)}px)`,p.fontFamily=s,r.fontSize=c,n.setAttribute(`role`,`presentation`),n.textContent=t.str,n.dir=t.dir,this.#r&&(n.dataset.fontName=o.fontSubstitutionLoadedName||t.fontName),a!==0&&(r.angle=a*(180/Math.PI));let m=!1;if(t.str.length>1)m=!0;else if(t.str!==` `&&t.transform[0]!==t.transform[3]){let e=Math.abs(t.transform[0]),n=Math.abs(t.transform[3]);e!==n&&Math.max(e,n)/Math.min(e,n)>1.5&&(m=!0)}if(m&&(r.canvasWidth=o.vertical?t.height:t.width),this.#g.set(n,r),this.#a.div=n,this.#a.properties=r,this.#T(this.#a),r.hasText&&this.#t.append(n),r.hasEOL){let e=document.createElement(`br`);e.setAttribute(`role`,`presentation`),this.#t.append(e)}}#T(t){let{div:n,properties:r,ctx:i}=t,{style:a}=n,o=``;if(e.#x>1&&(o=`scale(${1/e.#x})`),r.canvasWidth!==0&&r.hasText){let{fontFamily:t}=a,{canvasWidth:s,fontSize:c}=r;e.#D(i,c*this.#d,t);let{width:l}=i.measureText(n.textContent);l>0&&(o=`scaleX(${s*this.#d/l}) ${o}`)}r.angle!==0&&(o=`rotate(${r.angle}deg) ${o}`),o.length>0&&(a.transform=o)}static cleanup(){if(!(this.#S.size>0)){this.#v.clear();for(let{canvas:e}of this.#y.values())e.remove();this.#y.clear()}}static#E(e=null){let t=this.#y.get(e||=``);if(!t){let n=document.createElement(`canvas`);n.className=`hiddenCanvasElement`,n.lang=e,document.body.append(n),t=n.getContext(`2d`,{alpha:!1,willReadFrequently:!0}),this.#y.set(e,t),this.#b.set(t,{size:0,family:``})}return t}static#D(e,t,n){let r=this.#b.get(e);t===r.size&&n===r.family||(e.font=`${t}px ${n}`,r.size=t,r.family=n)}static#O(){if(this.#x!==null)return;let e=document.createElement(`div`);e.style.opacity=0,e.style.lineHeight=1,e.style.fontSize=`1px`,e.style.position=`absolute`,e.textContent=`X`,document.body.append(e),this.#x=e.getBoundingClientRect().height,e.remove()}static#k(e,t,n){let r=this.#v.get(e);if(r)return r;let i=this.#E(n);i.canvas.width=i.canvas.height=Ss,this.#D(i,Ss,e);let a=i.measureText(``),o=a.fontBoundingBoxAscent,s=Math.abs(a.fontBoundingBoxDescent);i.canvas.width=i.canvas.height=0;let c=.8;return o?c=o/(o+s):(V.platform.isFirefox&&R("Enable the `dom.textMetrics.fontBoundingBox.enabled` preference in `about:config` to improve TextLayer rendering."),t.ascent?c=t.ascent:t.descent&&(c=1+t.descent)),this.#v.set(e,c),c}},ws=100;function Ts(e={}){typeof e==`string`||e instanceof URL?e={url:e}:(e instanceof ArrayBuffer||ArrayBuffer.isView(e))&&(e={data:e});let t=new Es,{docId:n}=t,r=e.url?Ta(e.url):null,i=e.data?Ea(e.data):null,a=e.httpHeaders||null,o=e.withCredentials===!0,s=e.password??null,c=e.range instanceof Ds?e.range:null,l=Number.isInteger(e.rangeChunkSize)&&e.rangeChunkSize>0?e.rangeChunkSize:2**16,u=e.worker instanceof As?e.worker:null,d=e.verbosity,f=typeof e.docBaseUrl==`string`&&!wi(e.docBaseUrl)?e.docBaseUrl:null,p=Da(e.cMapUrl),m=e.cMapPacked!==!1,h=e.CMapReaderFactory||(wr?Ya:za),g=Da(e.iccUrl),_=Da(e.standardFontDataUrl),v=e.StandardFontDataFactory||(wr?Xa:Ua),y=Da(e.wasmUrl),b=e.WasmFactory||(wr?Za:Ga),x=e.stopAtErrors!==!0,S=Number.isInteger(e.maxImageSize)&&e.maxImageSize>-1?e.maxImageSize:-1,C=e.isEvalSupported!==!1,w=typeof e.isOffscreenCanvasSupported==`boolean`?e.isOffscreenCanvasSupported:!wr,T=typeof e.isImageDecoderSupported==`boolean`?e.isImageDecoderSupported:!wr&&(V.platform.isFirefox||!globalThis.chrome),E=Number.isInteger(e.canvasMaxAreaInBytes)?e.canvasMaxAreaInBytes:-1,D=typeof e.disableFontFace==`boolean`?e.disableFontFace:wr,O=e.fontExtraProperties===!0,k=e.enableXfa===!0,A=e.ownerDocument||globalThis.document,ee=e.disableRange===!0,te=e.disableStream===!0,j=e.disableAutoFetch===!0,M=e.pdfBug===!0,ne=e.CanvasFactory||(wr?Ja:La),N=e.FilterFactory||(wr?qa:Va),P=e.enableHWA===!0,re=e.useWasm!==!1,ie=c?c.length:e.length??NaN,ae=typeof e.useSystemFonts==`boolean`?e.useSystemFonts:!wr&&!D,oe=typeof e.useWorkerFetch==`boolean`?e.useWorkerFetch:!!(h===za&&v===Ua&&b===Ga&&p&&_&&y&&ki(p,document.baseURI)&&ki(_,document.baseURI)&&ki(y,document.baseURI));Vr(d);let se={canvasFactory:new ne({ownerDocument:A,enableHWA:P}),filterFactory:new N({docId:n,ownerDocument:A}),cMapReaderFactory:oe?null:new h({baseUrl:p,isCompressed:m}),standardFontDataFactory:oe?null:new v({baseUrl:_}),wasmFactory:oe?null:new b({baseUrl:y})};u||(u=As.create({verbosity:d,port:Vo.workerPort}),t._worker=u);let ce={docId:n,apiVersion:`5.4.394`,data:i,password:s,disableAutoFetch:j,rangeChunkSize:l,length:ie,docBaseUrl:f,enableXfa:k,evaluatorOptions:{maxImageSize:S,disableFontFace:D,ignoreErrors:x,isEvalSupported:C,isOffscreenCanvasSupported:w,isImageDecoderSupported:T,canvasMaxAreaInBytes:E,fontExtraProperties:O,useSystemFonts:ae,useWasm:re,useWorkerFetch:oe,cMapUrl:p,iccUrl:g,standardFontDataUrl:_,wasmUrl:y}},le={ownerDocument:A,pdfBug:M,styleElement:null,loadingParams:{disableAutoFetch:j,enableXfa:k}};return u.promise.then(function(){if(t.destroyed)throw Error(`Loading aborted`);if(u.destroyed)throw Error(`Worker was destroyed`);let e=u.messageHandler.sendWithPromise(`GetDocRequest`,ce,i?[i.buffer]:null),s;if(c)s=new Ko(c,{disableRange:ee,disableStream:te});else if(!i){if(!r)throw Error("getDocument - no `url` parameter provided.");s=new(ki(r)?is:wr?gs:ds)({url:r,length:ie,httpHeaders:a,withCredentials:o,rangeChunkSize:l,disableRange:ee,disableStream:te})}return e.then(e=>{if(t.destroyed)throw Error(`Loading aborted`);if(u.destroyed)throw Error(`Worker was destroyed`);let r=new Fa(n,e,u.port);t._transport=new js(r,t,s,le,se,P),r.send(`Ready`,null)})}).catch(t._capability.reject),t}var Es=class e{static#e=0;_capability=Promise.withResolvers();_transport=null;_worker=null;docId=`d${e.#e++}`;destroyed=!1;onPassword=null;onProgress=null;get promise(){return this._capability.promise}async destroy(){this.destroyed=!0;try{this._worker?.port&&(this._worker._pendingDestroy=!0),await this._transport?.destroy()}catch(e){throw this._worker?.port&&delete this._worker._pendingDestroy,e}this._transport=null,this._worker?.destroy(),this._worker=null}async getData(){return this._transport.getData()}},Ds=class{#e=Promise.withResolvers();#t=[];#n=[];#r=[];#i=[];constructor(e,t,n=!1,r=null){this.length=e,this.initialData=t,this.progressiveDone=n,this.contentDispositionFilename=r}addRangeListener(e){this.#i.push(e)}addProgressListener(e){this.#r.push(e)}addProgressiveReadListener(e){this.#n.push(e)}addProgressiveDoneListener(e){this.#t.push(e)}onDataRange(e,t){for(let n of this.#i)n(e,t)}onDataProgress(e,t){this.#e.promise.then(()=>{for(let n of this.#r)n(e,t)})}onDataProgressiveRead(e){this.#e.promise.then(()=>{for(let t of this.#n)t(e)})}onDataProgressiveDone(){this.#e.promise.then(()=>{for(let e of this.#t)e()})}transportReady(){this.#e.resolve()}requestDataRange(e,t){Wr(`Abstract method PDFDataRangeTransport.requestDataRange`)}abort(){}},Os=class{constructor(e,t){this._pdfInfo=e,this._transport=t}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return B(this,`isPureXfa`,!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(e){return this._transport.getPage(e)}getPageIndex(e){return this._transport.getPageIndex(e)}getDestinations(){return this._transport.getDestinations()}getDestination(e){return this._transport.getDestination(e)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getAnnotationsByType(e,t){return this._transport.getAnnotationsByType(e,t)}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:e=`display`}={}){let{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getOptionalContentConfig(t)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(e=!1){return this._transport.startCleanup(e||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(e){return this._transport.cachedPageNumber(e)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}},ks=class{#e=!1;constructor(e,t,n,r=!1){this._pageIndex=e,this._pageInfo=t,this._transport=n,this._stats=r?new Oi:null,this._pdfBug=r,this.commonObjs=n.commonObjs,this.objs=new bs,this._intentStates=new Map,this.destroyed=!1,this.recordedBBoxes=null}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:e,rotation:t=this.rotate,offsetX:n=0,offsetY:r=0,dontFlip:i=!1}={}){return new Si({viewBox:this.view,userUnit:this.userUnit,scale:e,rotation:t,offsetX:n,offsetY:r,dontFlip:i})}getAnnotations({intent:e=`display`}={}){let{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getAnnotations(this._pageIndex,t)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return B(this,`isPureXfa`,!!this._transport._htmlForXfa)}async getXfa(){return this._transport._htmlForXfa?.children[this._pageIndex]||null}render({canvasContext:e,canvas:t=e.canvas,viewport:n,intent:r=`display`,annotationMode:i=Or.ENABLE,transform:a=null,background:o=null,optionalContentConfigPromise:s=null,annotationCanvasMap:c=null,pageColors:l=null,printAnnotationStorage:u=null,isEditing:d=!1,recordOperations:f=!1,operationsFilter:p=null}){this._stats?.time(`Overall`);let m=this._transport.getRenderingIntent(r,i,u,d),{renderingIntent:h,cacheKey:g}=m;this.#e=!1,s||=this._transport.getOptionalContentConfig(h);let _=this._intentStates.get(g);_||(_=Object.create(null),this._intentStates.set(g,_)),_.streamReaderCancelTimeout&&=(clearTimeout(_.streamReaderCancelTimeout),null);let v=!!(h&Dr.PRINT);_.displayReadyCapability||(_.displayReadyCapability=Promise.withResolvers(),_.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time(`Page Request`),this._pumpOperatorList(m));let y=!!(this._pdfBug&&globalThis.StepperManager?.enabled),b=!this.recordedBBoxes&&(f||y),x=e=>{if(_.renderTasks.delete(S),b){let e=S.gfx?.dependencyTracker.take();e&&(S.stepper&&S.stepper.setOperatorBBoxes(e,S.gfx.dependencyTracker.takeDebugMetadata()),f&&(this.recordedBBoxes=e))}v&&(this.#e=!0),this.#t(),e?(S.capability.reject(e),this._abortOperatorList({intentState:_,reason:e instanceof Error?e:Error(e)})):S.capability.resolve(),this._stats&&(this._stats.timeEnd(`Rendering`),this._stats.timeEnd(`Overall`),globalThis.Stats?.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},S=new Ns({callback:x,params:{canvas:t,canvasContext:e,dependencyTracker:b?new ao(t,_.operatorList.length,y):null,viewport:n,transform:a,background:o},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:c,operatorList:_.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!v,pdfBug:this._pdfBug,pageColors:l,enableHWA:this._transport.enableHWA,operationsFilter:p});(_.renderTasks||=new Set).add(S);let C=S.task;return Promise.all([_.displayReadyCapability.promise,s]).then(([e,t])=>{if(this.destroyed){x();return}if(this._stats?.time(`Rendering`),!(t.renderingIntent&h))throw Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");S.initializeGraphics({transparency:e,optionalContentConfig:t}),S.operatorListChanged()}).catch(x),C}getOperatorList({intent:e=`display`,annotationMode:t=Or.ENABLE,printAnnotationStorage:n=null,isEditing:r=!1}={}){function i(){o.operatorList.lastChunk&&(o.opListReadCapability.resolve(o.operatorList),o.renderTasks.delete(s))}let a=this._transport.getRenderingIntent(e,t,n,r,!0),o=this._intentStates.get(a.cacheKey);o||(o=Object.create(null),this._intentStates.set(a.cacheKey,o));let s;return o.opListReadCapability||(s=Object.create(null),s.operatorListChanged=i,o.opListReadCapability=Promise.withResolvers(),(o.renderTasks||=new Set).add(s),o.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time(`Page Request`),this._pumpOperatorList(a)),o.opListReadCapability.promise}streamTextContent({includeMarkedContent:e=!1,disableNormalization:t=!1}={}){return this._transport.messageHandler.sendWithStream(`GetTextContent`,{pageIndex:this._pageIndex,includeMarkedContent:e===!0,disableNormalization:t===!0},{highWaterMark:100,size(e){return e.items.length}})}getTextContent(e={}){if(this._transport._htmlForXfa)return this.getXfa().then(e=>_i.textContent(e));let t=this.streamTextContent(e);return new Promise(function(e,n){function r(){i.read().then(function({value:t,done:n}){if(n){e(a);return}a.lang??=t.lang,Object.assign(a.styles,t.styles),a.items.push(...t.items),r()},n)}let i=t.getReader(),a={items:[],styles:Object.create(null),lang:null};r()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;let e=[];for(let t of this._intentStates.values())if(this._abortOperatorList({intentState:t,reason:Error(`Page was destroyed.`),force:!0}),!t.opListReadCapability)for(let n of t.renderTasks)e.push(n.completed),n.cancel();return this.objs.clear(),this.#e=!1,Promise.all(e)}cleanup(e=!1){this.#e=!0;let t=this.#t();return e&&t&&(this._stats&&=new Oi),t}#t(){if(!this.#e||this.destroyed)return!1;for(let{renderTasks:e,operatorList:t}of this._intentStates.values())if(e.size>0||!t.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),this.#e=!1,!0}_startRenderPage(e,t){let n=this._intentStates.get(t);n&&(this._stats?.timeEnd(`Page Request`),n.displayReadyCapability?.resolve(e))}_renderPageChunk(e,t){for(let n=0,r=e.length;n<r;n++)t.operatorList.fnArray.push(e.fnArray[n]),t.operatorList.argsArray.push(e.argsArray[n]);t.operatorList.lastChunk=e.lastChunk,t.operatorList.separateAnnots=e.separateAnnots;for(let e of t.renderTasks)e.operatorListChanged();e.lastChunk&&this.#t()}_pumpOperatorList({renderingIntent:e,cacheKey:t,annotationStorageSerializable:n,modifiedIds:r}){let{map:i,transfer:a}=n,o=this._transport.messageHandler.sendWithStream(`GetOperatorList`,{pageIndex:this._pageIndex,intent:e,cacheKey:t,annotationStorage:i,modifiedIds:r},a).getReader(),s=this._intentStates.get(t);s.streamReader=o;let c=()=>{o.read().then(({value:e,done:t})=>{if(t){s.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(e,s),c())},e=>{if(s.streamReader=null,!this._transport.destroyed){if(s.operatorList){s.operatorList.lastChunk=!0;for(let e of s.renderTasks)e.operatorListChanged();this.#t()}if(s.displayReadyCapability)s.displayReadyCapability.reject(e);else if(s.opListReadCapability)s.opListReadCapability.reject(e);else throw e}})};c()}_abortOperatorList({intentState:e,reason:t,force:n=!1}){if(e.streamReader){if(e.streamReaderCancelTimeout&&=(clearTimeout(e.streamReaderCancelTimeout),null),!n){if(e.renderTasks.size>0)return;if(t instanceof Ci){let n=ws;t.extraDelay>0&&t.extraDelay<1e3&&(n+=t.extraDelay),e.streamReaderCancelTimeout=setTimeout(()=>{e.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:e,reason:t,force:!0})},n);return}}if(e.streamReader.cancel(new ei(t.message)).catch(()=>{}),e.streamReader=null,!this._transport.destroyed){for(let[t,n]of this._intentStates)if(n===e){this._intentStates.delete(t);break}this.cleanup()}}}get stats(){return this._stats}},As=class e{#e=Promise.withResolvers();#t=null;#n=null;#r=null;static#i=0;static#a=!1;static#o=new WeakMap;static#s=(()=>{wr&&(this.#a=!0,Vo.workerSrc||=`./pdf.worker.mjs`),this._isSameOrigin=(e,t)=>{let n=URL.parse(e);if(!n?.origin||n.origin===`null`)return!1;let r=new URL(t,n);return n.origin===r.origin},this._createCDNWrapper=e=>{let t=`await import("${e}");`;return URL.createObjectURL(new Blob([t],{type:`text/javascript`}))},this.fromPort=e=>{if(Ai("`PDFWorker.fromPort` - please use `PDFWorker.create` instead."),!e?.port)throw Error(`PDFWorker.fromPort - invalid method signature.`);return this.create(e)}})();constructor({name:t=null,port:n=null,verbosity:r=Hr()}={}){if(this.name=t,this.destroyed=!1,this.verbosity=r,n){if(e.#o.has(n))throw Error(`Cannot use more than one PDFWorker per port.`);e.#o.set(n,this),this.#l(n)}else this.#u()}get promise(){return this.#e.promise}#c(){this.#e.resolve(),this.#t.send(`configure`,{verbosity:this.verbosity})}get port(){return this.#n}get messageHandler(){return this.#t}#l(e){this.#n=e,this.#t=new Fa(`main`,`worker`,e),this.#t.on(`ready`,()=>{}),this.#c()}#u(){if(e.#a||e.#f){this.#d();return}let{workerSrc:t}=e;try{e._isSameOrigin(window.location,t)||(t=e._createCDNWrapper(new URL(t,window.location).href));let n=new Worker(t,{type:`module`}),r=new Fa(`main`,`worker`,n),i=()=>{a.abort(),r.destroy(),n.terminate(),this.destroyed?this.#e.reject(Error(`Worker was destroyed`)):this.#d()},a=new AbortController;n.addEventListener(`error`,()=>{this.#r||i()},{signal:a.signal}),r.on(`test`,e=>{if(a.abort(),this.destroyed||!e){i();return}this.#t=r,this.#n=n,this.#r=n,this.#c()}),r.on(`ready`,e=>{if(a.abort(),this.destroyed){i();return}try{o()}catch{this.#d()}});let o=()=>{let e=new Uint8Array;r.send(`test`,e,[e.buffer])};o();return}catch{Ur(`The worker has been disabled.`)}this.#d()}#d(){e.#a||=(R(`Setting up fake worker.`),!0),e._setupFakeWorkerGlobal.then(t=>{if(this.destroyed){this.#e.reject(Error(`Worker was destroyed`));return}let n=new Aa;this.#n=n;let r=`fake${e.#i++}`,i=new Fa(r+`_worker`,r,n);t.setup(i,n),this.#t=new Fa(r,r+`_worker`,n),this.#c()}).catch(e=>{this.#e.reject(Error(`Setting up fake worker failed: "${e.message}".`))})}destroy(){this.destroyed=!0,this.#r?.terminate(),this.#r=null,e.#o.delete(this.#n),this.#n=null,this.#t?.destroy(),this.#t=null}static create(t){let n=this.#o.get(t?.port);if(n){if(n._pendingDestroy)throw Error("PDFWorker.create - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return n}return new e(t)}static get workerSrc(){if(Vo.workerSrc)return Vo.workerSrc;throw Error(`No "GlobalWorkerOptions.workerSrc" specified.`)}static get#f(){try{return globalThis.pdfjsWorker?.WorkerMessageHandler||null}catch{return null}}static get _setupFakeWorkerGlobal(){return B(this,`_setupFakeWorkerGlobal`,(async()=>this.#f?this.#f:(await x(()=>import(this.workerSrc),[])).WorkerMessageHandler)())}},js=class{#e=new Map;#t=new Map;#n=new Map;#r=new Map;#i=null;constructor(e,t,n,r,i,a){this.messageHandler=e,this.loadingTask=t,this.commonObjs=new bs,this.fontLoader=new ya({ownerDocument:r.ownerDocument,styleElement:r.styleElement}),this.loadingParams=r.loadingParams,this._params=r,this.canvasFactory=i.canvasFactory,this.filterFactory=i.filterFactory,this.cMapReaderFactory=i.cMapReaderFactory,this.standardFontDataFactory=i.standardFontDataFactory,this.wasmFactory=i.wasmFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=n,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.enableHWA=a,this.setupMessageHandler()}#a(e,t=null){let n=this.#e.get(e);if(n)return n;let r=this.messageHandler.sendWithPromise(e,t);return this.#e.set(e,r),r}get annotationStorage(){return B(this,`annotationStorage`,new _a)}getRenderingIntent(e,t=Or.ENABLE,n=null,r=!1,i=!1){let a=Dr.DISPLAY,o=ga;switch(e){case`any`:a=Dr.ANY;break;case`display`:break;case`print`:a=Dr.PRINT;break;default:R(`getRenderingIntent - invalid intent: ${e}`)}let s=a&Dr.PRINT&&n instanceof va?n:this.annotationStorage;switch(t){case Or.DISABLE:a+=Dr.ANNOTATIONS_DISABLE;break;case Or.ENABLE:break;case Or.ENABLE_FORMS:a+=Dr.ANNOTATIONS_FORMS;break;case Or.ENABLE_STORAGE:a+=Dr.ANNOTATIONS_STORAGE,o=s.serializable;break;default:R(`getRenderingIntent - invalid annotationMode: ${t}`)}r&&(a+=Dr.IS_EDITING),i&&(a+=Dr.OPLIST);let{ids:c,hash:l}=s.modifiedIds,u=[a,o.hash,l];return{renderingIntent:a,cacheKey:u.join(`_`),annotationStorageSerializable:o,modifiedIds:c}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),this.#i?.reject(Error(`Worker was destroyed during onPassword callback`));let e=[];for(let t of this.#t.values())e.push(t._destroy());this.#t.clear(),this.#n.clear(),this.#r.clear(),this.hasOwnProperty(`annotationStorage`)&&this.annotationStorage.resetModified();let t=this.messageHandler.sendWithPromise(`Terminate`,null);return e.push(t),Promise.all(e).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),this.#e.clear(),this.filterFactory.destroy(),Cs.cleanup(),this._networkStream?.cancelAllRequests(new ei(`Worker was terminated.`)),this.messageHandler?.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){let{messageHandler:e,loadingTask:t}=this;e.on(`GetReader`,(e,t)=>{z(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=e=>{this._lastProgress={loaded:e.loaded,total:e.total}},t.onPull=()=>{this._fullReader.read().then(function({value:e,done:n}){if(n){t.close();return}z(e instanceof ArrayBuffer,`GetReader - expected an ArrayBuffer.`),t.enqueue(new Uint8Array(e),1,[e])}).catch(e=>{t.error(e)})},t.onCancel=e=>{this._fullReader.cancel(e),t.ready.catch(e=>{if(!this.destroyed)throw e})}}),e.on(`ReaderHeadersReady`,async e=>{await this._fullReader.headersReady;let{isStreamingSupported:n,isRangeSupported:r,contentLength:i}=this._fullReader;return(!n||!r)&&(this._lastProgress&&t.onProgress?.(this._lastProgress),this._fullReader.onProgress=e=>{t.onProgress?.({loaded:e.loaded,total:e.total})}),{isStreamingSupported:n,isRangeSupported:r,contentLength:i}}),e.on(`GetRangeReader`,(e,t)=>{z(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");let n=this._networkStream.getRangeReader(e.begin,e.end);if(!n){t.close();return}t.onPull=()=>{n.read().then(function({value:e,done:n}){if(n){t.close();return}z(e instanceof ArrayBuffer,`GetRangeReader - expected an ArrayBuffer.`),t.enqueue(new Uint8Array(e),1,[e])}).catch(e=>{t.error(e)})},t.onCancel=e=>{n.cancel(e),t.ready.catch(e=>{if(!this.destroyed)throw e})}}),e.on(`GetDoc`,({pdfInfo:e})=>{this._numPages=e.numPages,this._htmlForXfa=e.htmlForXfa,delete e.htmlForXfa,t._capability.resolve(new Os(e,this))}),e.on(`DocException`,e=>{t._capability.reject(Pa(e))}),e.on(`PasswordRequest`,e=>{this.#i=Promise.withResolvers();try{if(!t.onPassword)throw Pa(e);t.onPassword(e=>{e instanceof Error?this.#i.reject(e):this.#i.resolve({password:e})},e.code)}catch(e){this.#i.reject(e)}return this.#i.promise}),e.on(`DataLoaded`,e=>{t.onProgress?.({loaded:e.length,total:e.length}),this.downloadInfoCapability.resolve(e)}),e.on(`StartRenderPage`,e=>{this.destroyed||this.#t.get(e.pageIndex)._startRenderPage(e.transparency,e.cacheKey)}),e.on(`commonobj`,([t,n,r])=>{if(this.destroyed||this.commonObjs.has(t))return null;switch(n){case`Font`:if(`error`in r){let e=r.error;R(`Error during font loading: ${e}`),this.commonObjs.resolve(t,e);break}let i=new ba(new Ca(r),this._params.pdfBug&&globalThis.FontInspector?.enabled?(e,t)=>globalThis.FontInspector.fontAdded(e,t):null,r.extra,r.charProcOperatorList);this.fontLoader.bind(i).catch(()=>e.sendWithPromise(`FontFallback`,{id:t})).finally(()=>{!i.fontExtraProperties&&i.data&&i.clearData(),this.commonObjs.resolve(t,i)});break;case`CopyLocalImage`:let{imageRef:a}=r;z(a,`The imageRef must be defined.`);for(let e of this.#t.values())for(let[,n]of e.objs)if(n?.ref===a)return n.dataLen?(this.commonObjs.resolve(t,structuredClone(n)),n.dataLen):null;break;case`FontPath`:case`Image`:this.commonObjs.resolve(t,r);break;case`Pattern`:let o=new wa(r);this.commonObjs.resolve(t,o.getIR());break;default:throw Error(`Got unknown common object type ${n}`)}return null}),e.on(`obj`,([e,t,n,r])=>{if(this.destroyed)return;let i=this.#t.get(t);if(!i.objs.has(e)){if(i._intentStates.size===0){r?.bitmap?.close();return}switch(n){case`Image`:case`Pattern`:i.objs.resolve(e,r);break;default:throw Error(`Got unknown object type ${n}`)}}}),e.on(`DocProgress`,e=>{this.destroyed||t.onProgress?.({loaded:e.loaded,total:e.total})}),e.on(`FetchBinaryData`,async e=>{if(this.destroyed)throw Error(`Worker was destroyed.`);let t=this[e.type];if(!t)throw Error(`${e.type} not initialized, see the \`useWorkerFetch\` parameter.`);return t.fetch(e)})}getData(){return this.messageHandler.sendWithPromise(`GetData`,null)}saveDocument(){this.annotationStorage.size<=0&&R("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");let{map:e,transfer:t}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise(`SaveDocument`,{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:e,filename:this._fullReader?.filename??null},t).finally(()=>{this.annotationStorage.resetModified()})}getPage(e){if(!Number.isInteger(e)||e<=0||e>this._numPages)return Promise.reject(Error(`Invalid page request.`));let t=e-1,n=this.#n.get(t);if(n)return n;let r=this.messageHandler.sendWithPromise(`GetPage`,{pageIndex:t}).then(n=>{if(this.destroyed)throw Error(`Transport destroyed`);n.refStr&&this.#r.set(n.refStr,e);let r=new ks(t,n,this,this._params.pdfBug);return this.#t.set(t,r),r});return this.#n.set(t,r),r}getPageIndex(e){return Oa(e)?this.messageHandler.sendWithPromise(`GetPageIndex`,{num:e.num,gen:e.gen}):Promise.reject(Error(`Invalid pageIndex request.`))}getAnnotations(e,t){return this.messageHandler.sendWithPromise(`GetAnnotations`,{pageIndex:e,intent:t})}getFieldObjects(){return this.#a(`GetFieldObjects`)}hasJSActions(){return this.#a(`HasJSActions`)}getCalculationOrderIds(){return this.messageHandler.sendWithPromise(`GetCalculationOrderIds`,null)}getDestinations(){return this.messageHandler.sendWithPromise(`GetDestinations`,null)}getDestination(e){return typeof e==`string`?this.messageHandler.sendWithPromise(`GetDestination`,{id:e}):Promise.reject(Error(`Invalid destination request.`))}getPageLabels(){return this.messageHandler.sendWithPromise(`GetPageLabels`,null)}getPageLayout(){return this.messageHandler.sendWithPromise(`GetPageLayout`,null)}getPageMode(){return this.messageHandler.sendWithPromise(`GetPageMode`,null)}getViewerPreferences(){return this.messageHandler.sendWithPromise(`GetViewerPreferences`,null)}getOpenAction(){return this.messageHandler.sendWithPromise(`GetOpenAction`,null)}getAttachments(){return this.messageHandler.sendWithPromise(`GetAttachments`,null)}getAnnotationsByType(e,t){return this.messageHandler.sendWithPromise(`GetAnnotationsByType`,{types:e,pageIndexesToSkip:t})}getDocJSActions(){return this.#a(`GetDocJSActions`)}getPageJSActions(e){return this.messageHandler.sendWithPromise(`GetPageJSActions`,{pageIndex:e})}getStructTree(e){return this.messageHandler.sendWithPromise(`GetStructTree`,{pageIndex:e})}getOutline(){return this.messageHandler.sendWithPromise(`GetOutline`,null)}getOptionalContentConfig(e){return this.#a(`GetOptionalContentConfig`).then(t=>new Go(t,e))}getPermissions(){return this.messageHandler.sendWithPromise(`GetPermissions`,null)}getMetadata(){let e=`GetMetadata`,t=this.#e.get(e);if(t)return t;let n=this.messageHandler.sendWithPromise(e,null).then(e=>({info:e[0],metadata:e[1]?new Ho(e[1]):null,contentDispositionFilename:this._fullReader?.filename??null,contentLength:this._fullReader?.contentLength??null}));return this.#e.set(e,n),n}getMarkInfo(){return this.messageHandler.sendWithPromise(`GetMarkInfo`,null)}async startCleanup(e=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise(`Cleanup`,null);for(let e of this.#t.values())if(!e.cleanup())throw Error(`startCleanup: Page ${e.pageNumber} is currently rendering.`);this.commonObjs.clear(),e||this.fontLoader.clear(),this.#e.clear(),this.filterFactory.destroy(!0),Cs.cleanup()}}cachedPageNumber(e){if(!Oa(e))return null;let t=e.gen===0?`${e.num}R`:`${e.num}R${e.gen}`;return this.#r.get(t)??null}},Ms=class{#e=null;onContinue=null;onError=null;constructor(e){this.#e=e}get promise(){return this.#e.capability.promise}cancel(e=0){this.#e.cancel(null,e)}get separateAnnots(){let{separateAnnots:e}=this.#e.operatorList;if(!e)return!1;let{annotationCanvasMap:t}=this.#e;return e.form||e.canvas&&t?.size>0}},Ns=class e{#e=null;static#t=new WeakSet;constructor({callback:e,params:t,objs:n,commonObjs:r,annotationCanvasMap:i,operatorList:a,pageIndex:o,canvasFactory:s,filterFactory:c,useRequestAnimationFrame:l=!1,pdfBug:u=!1,pageColors:d=null,enableHWA:f=!1,operationsFilter:p=null}){this.callback=e,this.params=t,this.objs=n,this.commonObjs=r,this.annotationCanvasMap=i,this.operatorListIdx=null,this.operatorList=a,this._pageIndex=o,this.canvasFactory=s,this.filterFactory=c,this._pdfBug=u,this.pageColors=d,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=l===!0&&typeof window<`u`,this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new Ms(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=t.canvas,this._canvasContext=t.canvas?null:t.canvasContext,this._enableHWA=f,this._dependencyTracker=t.dependencyTracker,this._operationsFilter=p}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:t=!1,optionalContentConfig:n}){if(this.cancelled)return;if(this._canvas){if(e.#t.has(this._canvas))throw Error(`Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.`);e.#t.add(this._canvas)}this._pdfBug&&globalThis.StepperManager?.enabled&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());let{viewport:r,transform:i,background:a,dependencyTracker:o}=this.params;this.gfx=new Bo(this._canvasContext||this._canvas.getContext(`2d`,{alpha:!1,willReadFrequently:!this._enableHWA}),this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:n},this.annotationCanvasMap,this.pageColors,o),this.gfx.beginDrawing({transform:i,viewport:r,transparency:t,background:a}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback?.()}cancel(t=null,n=0){this.running=!1,this.cancelled=!0,this.gfx?.endDrawing(),this.#e&&=(window.cancelAnimationFrame(this.#e),null),e.#t.delete(this._canvas),t||=new Ci(`Rendering cancelled, page ${this._pageIndex+1}`,n),this.callback(t),this.task.onError?.(t)}operatorListChanged(){if(!this.graphicsReady){this.graphicsReadyCallback||=this._continueBound;return}this.gfx.dependencyTracker?.growOperationsCount(this.operatorList.fnArray.length),this.stepper?.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?this.#e=window.requestAnimationFrame(()=>{this.#e=null,this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper,this._operationsFilter),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),e.#t.delete(this._canvas),this.callback())))}},Ps=`5.4.394`,Fs=`2cc809ade`,Is=class e{#e=null;#t=null;#n;#r=null;#i=!1;#a=!1;#o=null;#s;#c=null;#l=null;static#u=null;static get _keyboardManager(){return B(this,`_keyboardManager`,new ia([[[`Escape`,`mac+Escape`],e.prototype._hideDropdownFromKeyboard],[[` `,`mac+ `],e.prototype._colorSelectFromKeyboard],[[`ArrowDown`,`ArrowRight`,`mac+ArrowDown`,`mac+ArrowRight`],e.prototype._moveToNext],[[`ArrowUp`,`ArrowLeft`,`mac+ArrowUp`,`mac+ArrowLeft`],e.prototype._moveToPrevious],[[`Home`,`mac+Home`],e.prototype._moveToBeginning],[[`End`,`mac+End`],e.prototype._moveToEnd]]))}constructor({editor:t=null,uiManager:n=null}){t?(this.#a=!1,this.#o=t):this.#a=!0,this.#l=t?._uiManager||n,this.#s=this.#l._eventBus,this.#n=t?.color?.toUpperCase()||this.#l?.highlightColors.values().next().value||`#FFFF98`,e.#u||=Object.freeze({blue:`pdfjs-editor-colorpicker-blue`,green:`pdfjs-editor-colorpicker-green`,pink:`pdfjs-editor-colorpicker-pink`,red:`pdfjs-editor-colorpicker-red`,yellow:`pdfjs-editor-colorpicker-yellow`})}renderButton(){let e=this.#e=document.createElement(`button`);e.className=`colorPicker`,e.tabIndex=`0`,e.setAttribute(`data-l10n-id`,`pdfjs-editor-colorpicker-button`),e.ariaHasPopup=`true`,this.#o&&(e.ariaControls=`${this.#o.id}_colorpicker_dropdown`);let t=this.#l._signal;e.addEventListener(`click`,this.#m.bind(this),{signal:t}),e.addEventListener(`keydown`,this.#p.bind(this),{signal:t});let n=this.#t=document.createElement(`span`);return n.className=`swatch`,n.ariaHidden=`true`,n.style.backgroundColor=this.#n,e.append(n),e}renderMainDropdown(){let e=this.#r=this.#d();return e.ariaOrientation=`horizontal`,e.ariaLabelledBy=`highlightColorPickerLabel`,e}#d(){let t=document.createElement(`div`),n=this.#l._signal;t.addEventListener(`contextmenu`,U,{signal:n}),t.className=`dropdown`,t.role=`listbox`,t.ariaMultiSelectable=`false`,t.ariaOrientation=`vertical`,t.setAttribute(`data-l10n-id`,`pdfjs-editor-colorpicker-dropdown`),this.#o&&(t.id=`${this.#o.id}_colorpicker_dropdown`);for(let[r,i]of this.#l.highlightColors){let a=document.createElement(`button`);a.tabIndex=`0`,a.role=`option`,a.setAttribute(`data-color`,i),a.title=r,a.setAttribute(`data-l10n-id`,e.#u[r]);let o=document.createElement(`span`);a.append(o),o.className=`swatch`,o.style.backgroundColor=i,a.ariaSelected=i===this.#n,a.addEventListener(`click`,this.#f.bind(this,i),{signal:n}),t.append(a)}return t.addEventListener(`keydown`,this.#p.bind(this),{signal:n}),t}#f(e,t){t.stopPropagation(),this.#s.dispatch(`switchannotationeditorparams`,{source:this,type:L.HIGHLIGHT_COLOR,value:e}),this.updateColor(e)}_colorSelectFromKeyboard(e){if(e.target===this.#e){this.#m(e);return}let t=e.target.getAttribute(`data-color`);t&&this.#f(t,e)}_moveToNext(e){if(!this.#g){this.#m(e);return}if(e.target===this.#e){this.#r.firstChild?.focus();return}e.target.nextSibling?.focus()}_moveToPrevious(e){if(e.target===this.#r?.firstChild||e.target===this.#e){this.#g&&this._hideDropdownFromKeyboard();return}this.#g||this.#m(e),e.target.previousSibling?.focus()}_moveToBeginning(e){if(!this.#g){this.#m(e);return}this.#r.firstChild?.focus()}_moveToEnd(e){if(!this.#g){this.#m(e);return}this.#r.lastChild?.focus()}#p(t){e._keyboardManager.exec(this,t)}#m(e){if(this.#g){this.hideDropdown();return}if(this.#i=e.detail===0,this.#c||(this.#c=new AbortController,window.addEventListener(`pointerdown`,this.#h.bind(this),{signal:this.#l.combinedSignal(this.#c)})),this.#e.ariaExpanded=`true`,this.#r){this.#r.classList.remove(`hidden`);return}let t=this.#r=this.#d();this.#e.append(t)}#h(e){this.#r?.contains(e.target)||this.hideDropdown()}hideDropdown(){this.#r?.classList.add(`hidden`),this.#e.ariaExpanded=`false`,this.#c?.abort(),this.#c=null}get#g(){return this.#r&&!this.#r.classList.contains(`hidden`)}_hideDropdownFromKeyboard(){if(!this.#a){if(!this.#g){this.#o?.unselect();return}this.hideDropdown(),this.#e.focus({preventScroll:!0,focusVisible:this.#i})}}updateColor(e){if(this.#t&&(this.#t.style.backgroundColor=e),!this.#r)return;let t=this.#l.highlightColors.values();for(let n of this.#r.children)n.ariaSelected=t.next().value===e.toUpperCase()}destroy(){this.#e?.remove(),this.#e=null,this.#t=null,this.#r?.remove(),this.#r=null}},Ls=class e{#e=null;#t=null;#n=null;static#r=null;constructor(t){this.#t=t,this.#n=t._uiManager,e.#r||=Object.freeze({freetext:`pdfjs-editor-color-picker-free-text-input`,ink:`pdfjs-editor-color-picker-ink-input`})}renderButton(){if(this.#e)return this.#e;let{editorType:t,colorType:n,color:r}=this.#t,i=this.#e=document.createElement(`input`);return i.type=`color`,i.value=r||`#000000`,i.className=`basicColorPicker`,i.tabIndex=0,i.setAttribute(`data-l10n-id`,e.#r[t]),i.addEventListener(`input`,()=>{this.#n.updateParams(n,i.value)},{signal:this.#n._signal}),i}update(e){this.#e&&(this.#e.value=e)}destroy(){this.#e?.remove(),this.#e=null}hideDropdown(){}};function Rs(e){return Math.floor(Math.max(0,Math.min(1,e))*255).toString(16).padStart(2,`0`)}function zs(e){return Math.max(0,Math.min(255,255*e))}var Bs=class{static CMYK_G([e,t,n,r]){return[`G`,1-Math.min(1,.3*e+.59*n+.11*t+r)]}static G_CMYK([e]){return[`CMYK`,0,0,0,1-e]}static G_RGB([e]){return[`RGB`,e,e,e]}static G_rgb([e]){return e=zs(e),[e,e,e]}static G_HTML([e]){let t=Rs(e);return`#${t}${t}${t}`}static RGB_G([e,t,n]){return[`G`,.3*e+.59*t+.11*n]}static RGB_rgb(e){return e.map(zs)}static RGB_HTML(e){return`#${e.map(Rs).join(``)}`}static T_HTML(){return`#00000000`}static T_rgb(){return[null]}static CMYK_RGB([e,t,n,r]){return[`RGB`,1-Math.min(1,e+r),1-Math.min(1,n+r),1-Math.min(1,t+r)]}static CMYK_rgb([e,t,n,r]){return[zs(1-Math.min(1,e+r)),zs(1-Math.min(1,n+r)),zs(1-Math.min(1,t+r))]}static CMYK_HTML(e){let t=this.CMYK_RGB(e).slice(1);return this.RGB_HTML(t)}static RGB_CMYK([e,t,n]){let r=1-e,i=1-t,a=1-n;return[`CMYK`,r,i,a,Math.min(r,i,a)]}},Vs=class{create(e,t,n=!1){if(e<=0||t<=0)throw Error(`Invalid SVG dimensions`);let r=this._createSVG(`svg:svg`);return r.setAttribute(`version`,`1.1`),n||(r.setAttribute(`width`,`${e}px`),r.setAttribute(`height`,`${t}px`)),r.setAttribute(`preserveAspectRatio`,`none`),r.setAttribute(`viewBox`,`0 0 ${e} ${t}`),r}createElement(e){if(typeof e!=`string`)throw Error(`Invalid SVG element type`);return this._createSVG(e)}_createSVG(e){Wr("Abstract method `_createSVG` called.")}},Hs=class extends Vs{_createSVG(e){return document.createElementNS(yi,e)}},Us=9,Ws=new WeakSet,Gs=new Date().getTimezoneOffset()*60*1e3,Ks=class{static create(e){switch(e.data.annotationType){case Pr.LINK:return new Ys(e);case Pr.TEXT:return new Xs(e);case Pr.WIDGET:switch(e.data.fieldType){case`Tx`:return new Qs(e);case`Btn`:return e.data.radioButton?new tc(e):e.data.checkBox?new ec(e):new nc(e);case`Ch`:return new rc(e);case`Sig`:return new $s(e)}return new Zs(e);case Pr.POPUP:return new ic(e);case Pr.FREETEXT:return new oc(e);case Pr.LINE:return new sc(e);case Pr.SQUARE:return new cc(e);case Pr.CIRCLE:return new lc(e);case Pr.POLYLINE:return new uc(e);case Pr.CARET:return new fc(e);case Pr.INK:return new pc(e);case Pr.POLYGON:return new dc(e);case Pr.HIGHLIGHT:return new mc(e);case Pr.UNDERLINE:return new hc(e);case Pr.SQUIGGLY:return new gc(e);case Pr.STRIKEOUT:return new _c(e);case Pr.STAMP:return new vc(e);case Pr.FILEATTACHMENT:return new yc(e);default:return new qs(e)}}},qs=class e{#e=null;#t=!1;#n=null;constructor(e,{isRenderable:t=!1,ignoreBorder:n=!1,createQuadrilaterals:r=!1}={}){this.isRenderable=t,this.data=e.data,this.layer=e.layer,this.linkService=e.linkService,this.downloadManager=e.downloadManager,this.imageResourcesPath=e.imageResourcesPath,this.renderForms=e.renderForms,this.svgFactory=e.svgFactory,this.annotationStorage=e.annotationStorage,this.enableComment=e.enableComment,this.enableScripting=e.enableScripting,this.hasJSActions=e.hasJSActions,this._fieldObjects=e.fieldObjects,this.parent=e.parent,this.hasOwnCommentButton=!1,t&&(this.contentElement=this.container=this._createContainer(n)),r&&this._createQuadrilaterals()}static _hasPopupData({contentsObj:e,richText:t}){return!!(e?.str||t?.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return e._hasPopupData(this.data)||this.enableComment&&!!this.commentText}get commentData(){let{data:e}=this,t=this.annotationStorage?.getEditor(e.id);return t?t.getData():e}get hasCommentButton(){return this.enableComment&&this.hasPopupElement}get commentButtonPosition(){let e=this.annotationStorage?.getEditor(this.data.id);if(e)return e.commentButtonPositionInPage;let{quadPoints:t,inkLists:n,rect:r}=this.data,i=-1/0,a=-1/0;if(t?.length>=8){for(let e=0;e<t.length;e+=8)t[e+1]>a?(a=t[e+1],i=t[e+2]):t[e+1]===a&&(i=Math.max(i,t[e+2]));return[i,a]}if(n?.length>=1){for(let e of n)for(let t=0,n=e.length;t<n;t+=2)e[t+1]>a?(a=e[t+1],i=e[t]):e[t+1]===a&&(i=Math.max(i,e[t]));if(i!==1/0)return[i,a]}return r?[r[2],r[3]]:null}_normalizePoint(e){let{page:{view:t},viewport:{rawDims:{pageWidth:n,pageHeight:r,pageX:i,pageY:a}}}=this.parent;return e[1]=t[3]-e[1]+t[1],e[0]=100*(e[0]-i)/n,e[1]=100*(e[1]-a)/r,e}get commentText(){let{data:e}=this;return this.annotationStorage.getRawValue(`${kr}${e.id}`)?.popup?.contents||e.contentsObj?.str||``}set commentText(e){let{data:t}=this,n={deleted:!e,contents:e||``};this.annotationStorage.updateEditor(t.id,{popup:n})||this.annotationStorage.setValue(`${kr}${t.id}`,{id:t.id,annotationType:t.annotationType,pageIndex:this.parent.page._pageIndex,popup:n,popupRef:t.popupRef,modificationDate:new Date}),e||this.removePopup()}removePopup(){(this.#n?.popup||this.popup)?.remove(),this.#n=this.popup=null}updateEdited(e){if(!this.container)return;e.rect&&(this.#e||={rect:this.data.rect.slice(0)});let{rect:t,popup:n}=e;t&&this.#r(t);let r=this.#n?.popup||this.popup;!r&&n?.text&&(this._createPopup(n),r=this.#n.popup),r&&(r.updateEdited(e),n?.deleted&&(r.remove(),this.#n=null,this.popup=null))}resetEdited(){this.#e&&=(this.#r(this.#e.rect),this.#n?.popup.resetEdited(),null)}#r(e){let{container:{style:t},data:{rect:n,rotation:r},parent:{viewport:{rawDims:{pageWidth:i,pageHeight:a,pageX:o,pageY:s}}}}=this;n?.splice(0,4,...e),t.left=`${100*(e[0]-o)/i}%`,t.top=`${100*(a-e[3]+s)/a}%`,r===0?(t.width=`${100*(e[2]-e[0])/i}%`,t.height=`${100*(e[3]-e[1])/a}%`):this.setRotation(r)}_createContainer(e){let{data:t,parent:{page:n,viewport:r}}=this,i=document.createElement(`section`);i.setAttribute(`data-annotation-id`,t.id),!(this instanceof Zs)&&!(this instanceof Ys)&&(i.tabIndex=0);let{style:a}=i;if(a.zIndex=this.parent.zIndex,this.parent.zIndex+=2,t.alternativeText&&(i.title=t.alternativeText),t.noRotate&&i.classList.add(`norotate`),!t.rect||this instanceof ic){let{rotation:e}=t;return!t.hasOwnCanvas&&e!==0&&this.setRotation(e,i),i}let{width:o,height:s}=this;if(!e&&t.borderStyle.width>0){a.borderWidth=`${t.borderStyle.width}px`;let e=t.borderStyle.horizontalCornerRadius,n=t.borderStyle.verticalCornerRadius;switch(e>0||n>0?a.borderRadius=`calc(${e}px * var(--total-scale-factor)) / calc(${n}px * var(--total-scale-factor))`:this instanceof tc&&(a.borderRadius=`calc(${o}px * var(--total-scale-factor)) / calc(${s}px * var(--total-scale-factor))`),t.borderStyle.style){case Fr.SOLID:a.borderStyle=`solid`;break;case Fr.DASHED:a.borderStyle=`dashed`;break;case Fr.BEVELED:R(`Unimplemented border style: beveled`);break;case Fr.INSET:R(`Unimplemented border style: inset`);break;case Fr.UNDERLINE:a.borderBottomStyle=`solid`;break;default:break}let r=t.borderColor||null;r?(this.#t=!0,a.borderColor=H.makeHexColor(r[0]|0,r[1]|0,r[2]|0)):a.borderWidth=0}let c=H.normalizeRect([t.rect[0],n.view[3]-t.rect[1]+n.view[1],t.rect[2],n.view[3]-t.rect[3]+n.view[1]]),{pageWidth:l,pageHeight:u,pageX:d,pageY:f}=r.rawDims;a.left=`${100*(c[0]-d)/l}%`,a.top=`${100*(c[1]-f)/u}%`;let{rotation:p}=t;return t.hasOwnCanvas||p===0?(a.width=`${100*o/l}%`,a.height=`${100*s/u}%`):this.setRotation(p,i),i}setRotation(e,t=this.container){if(!this.data.rect)return;let{pageWidth:n,pageHeight:r}=this.parent.viewport.rawDims,{width:i,height:a}=this;e%180!=0&&([i,a]=[a,i]),t.style.width=`${100*i/n}%`,t.style.height=`${100*a/r}%`,t.setAttribute(`data-main-rotation`,(360-e)%360)}get _commonActions(){let e=(e,t,n)=>{let r=n.detail[e],i=r[0],a=r.slice(1);n.target.style[t]=Bs[`${i}_HTML`](a),this.annotationStorage.setValue(this.data.id,{[t]:Bs[`${i}_rgb`](a)})};return B(this,`_commonActions`,{display:e=>{let{display:t}=e.detail,n=t%2==1;this.container.style.visibility=n?`hidden`:`visible`,this.annotationStorage.setValue(this.data.id,{noView:n,noPrint:t===1||t===2})},print:e=>{this.annotationStorage.setValue(this.data.id,{noPrint:!e.detail.print})},hidden:e=>{let{hidden:t}=e.detail;this.container.style.visibility=t?`hidden`:`visible`,this.annotationStorage.setValue(this.data.id,{noPrint:t,noView:t})},focus:e=>{setTimeout(()=>e.target.focus({preventScroll:!1}),0)},userName:e=>{e.target.title=e.detail.userName},readonly:e=>{e.target.disabled=e.detail.readonly},required:e=>{this._setRequired(e.target,e.detail.required)},bgColor:t=>{e(`bgColor`,`backgroundColor`,t)},fillColor:t=>{e(`fillColor`,`backgroundColor`,t)},fgColor:t=>{e(`fgColor`,`color`,t)},textColor:t=>{e(`textColor`,`color`,t)},borderColor:t=>{e(`borderColor`,`borderColor`,t)},strokeColor:t=>{e(`strokeColor`,`borderColor`,t)},rotation:e=>{let t=e.detail.rotation;this.setRotation(t),this.annotationStorage.setValue(this.data.id,{rotation:t})}})}_dispatchEventFromSandbox(e,t){let n=this._commonActions;for(let r of Object.keys(t.detail))(e[r]||n[r])?.(t)}_setDefaultPropertiesFromJS(e){if(!this.enableScripting)return;let t=this.annotationStorage.getRawValue(this.data.id);if(!t)return;let n=this._commonActions;for(let[r,i]of Object.entries(t)){let a=n[r];a&&(a({detail:{[r]:i},target:e}),delete t[r])}}_createQuadrilaterals(){if(!this.container)return;let{quadPoints:e}=this.data;if(!e)return;let[t,n,r,i]=this.data.rect.map(e=>Math.fround(e));if(e.length===8){let[a,o,s,c]=e.subarray(2,6);if(r===a&&i===o&&t===s&&n===c)return}let{style:a}=this.container,o;if(this.#t){let{borderColor:e,borderWidth:t}=a;a.borderWidth=0,o=[`url('data:image/svg+xml;utf8,`,`<svg xmlns="http://www.w3.org/2000/svg"`,` preserveAspectRatio="none" viewBox="0 0 1 1">`,`<g fill="transparent" stroke="${e}" stroke-width="${t}">`],this.container.classList.add(`hasBorder`)}let s=r-t,c=i-n,{svgFactory:l}=this,u=l.createElement(`svg`);u.classList.add(`quadrilateralsContainer`),u.setAttribute(`width`,0),u.setAttribute(`height`,0),u.role=`none`;let d=l.createElement(`defs`);u.append(d);let f=l.createElement(`clipPath`),p=`clippath_${this.data.id}`;f.setAttribute(`id`,p),f.setAttribute(`clipPathUnits`,`objectBoundingBox`),d.append(f);for(let n=2,r=e.length;n<r;n+=8){let r=e[n],a=e[n+1],u=e[n+2],d=e[n+3],p=l.createElement(`rect`),m=(u-t)/s,h=(i-a)/c,g=(r-u)/s,_=(a-d)/c;p.setAttribute(`x`,m),p.setAttribute(`y`,h),p.setAttribute(`width`,g),p.setAttribute(`height`,_),f.append(p),o?.push(`<rect vector-effect="non-scaling-stroke" x="${m}" y="${h}" width="${g}" height="${_}"/>`)}this.#t&&(o.push(`</g></svg>')`),a.backgroundImage=o.join(``)),this.container.append(u),this.container.style.clipPath=`url(#${p})`}_createPopup(e=null){let{data:t}=this,n,r;e?(n={str:e.text},r=e.date):(n=t.contentsObj,r=t.modificationDate),this.#n=new ic({data:{color:t.color,titleObj:t.titleObj,modificationDate:r,contentsObj:n,richText:t.richText,parentRect:t.rect,borderStyle:0,id:`popup_${t.id}`,rotation:t.rotation,noRotate:!0},linkService:this.linkService,parent:this.parent,elements:[this]})}get hasPopupElement(){return!!(this.#n||this.popup||this.data.popupRef)}get extraPopupElement(){return this.#n}render(){Wr("Abstract method `AnnotationElement.render` called")}_getElementsByName(e,t=null){let n=[];if(this._fieldObjects){let r=this._fieldObjects[e];if(r)for(let{page:e,id:i,exportValues:a}of r){if(e===-1||i===t)continue;let r=typeof a==`string`?a:null,o=document.querySelector(`[data-element-id="${i}"]`);if(o&&!Ws.has(o)){R(`_getElementsByName - element not allowed: ${i}`);continue}n.push({id:i,exportValue:r,domElement:o})}return n}for(let r of document.getElementsByName(e)){let{exportValue:e}=r,i=r.getAttribute(`data-element-id`);i!==t&&Ws.has(r)&&n.push({id:i,exportValue:e,domElement:r})}return n}show(){this.container&&(this.container.hidden=!1),this.popup?.maybeShow()}hide(){this.container&&(this.container.hidden=!0),this.popup?.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){let e=this.getElementsToTriggerPopup();if(Array.isArray(e))for(let t of e)t.classList.add(`highlightArea`);else e.classList.add(`highlightArea`)}_editOnDoubleClick(){if(!this._isEditable)return;let{annotationEditorType:e,data:{id:t}}=this;this.container.addEventListener(`dblclick`,()=>{this.linkService.eventBus?.dispatch(`switchannotationeditormode`,{source:this,mode:e,editId:t,mustEnterInEditMode:!0})})}get width(){return this.data.rect[2]-this.data.rect[0]}get height(){return this.data.rect[3]-this.data.rect[1]}},Js=class extends qs{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.editor=e.editor}render(){return this.container.className=`editorAnnotation`,this.container}createOrUpdatePopup(){let{editor:e}=this;e.hasComment&&this._createPopup(e.comment)}get hasCommentButton(){return this.enableComment&&this.editor.hasComment}get commentButtonPosition(){return this.editor.commentButtonPositionInPage}get commentText(){return this.editor.comment.text}set commentText(e){this.editor.comment=e,e||this.removePopup()}get commentData(){return this.editor.getData()}remove(){this.parent.removeAnnotation(this.data.id),this.container.remove(),this.container=null,this.removePopup()}},Ys=class extends qs{constructor(e,t=null){super(e,{isRenderable:!0,ignoreBorder:!!t?.ignoreBorder,createQuadrilaterals:!0}),this.isTooltipOnly=e.data.isTooltipOnly}render(){let{data:e,linkService:t}=this,n=document.createElement(`a`);n.setAttribute(`data-element-id`,e.id);let r=!1;return e.url?(t.addLinkAttributes(n,e.url,e.newWindow),r=!0):e.action?(this._bindNamedAction(n,e.action,e.overlaidText),r=!0):e.attachment?(this.#t(n,e.attachment,e.overlaidText,e.attachmentDest),r=!0):e.setOCGState?(this.#n(n,e.setOCGState,e.overlaidText),r=!0):e.dest?(this._bindLink(n,e.dest,e.overlaidText),r=!0):(e.actions&&(e.actions.Action||e.actions[`Mouse Up`]||e.actions[`Mouse Down`])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(n,e),r=!0),e.resetForm?(this._bindResetFormAction(n,e.resetForm),r=!0):this.isTooltipOnly&&!r&&(this._bindLink(n,``),r=!0)),this.container.classList.add(`linkAnnotation`),r&&(this.contentElement=n,this.container.append(n)),this.container}#e(){this.container.setAttribute(`data-internal-link`,``)}_bindLink(e,t,n=``){e.href=this.linkService.getDestinationHash(t),e.onclick=()=>(t&&this.linkService.goToDestination(t),!1),(t||t===``)&&this.#e(),n&&(e.title=n)}_bindNamedAction(e,t,n=``){e.href=this.linkService.getAnchorUrl(``),e.onclick=()=>(this.linkService.executeNamedAction(t),!1),n&&(e.title=n),this.#e()}#t(e,t,n=``,r=null){e.href=this.linkService.getAnchorUrl(``),t.description?e.title=t.description:n&&(e.title=n),e.onclick=()=>(this.downloadManager?.openOrDownloadData(t.content,t.filename,r),!1),this.#e()}#n(e,t,n=``){e.href=this.linkService.getAnchorUrl(``),e.onclick=()=>(this.linkService.executeSetOCGState(t),!1),n&&(e.title=n),this.#e()}_bindJSAction(e,t){e.href=this.linkService.getAnchorUrl(``);let n=new Map([[`Action`,`onclick`],[`Mouse Up`,`onmouseup`],[`Mouse Down`,`onmousedown`]]);for(let r of Object.keys(t.actions)){let i=n.get(r);i&&(e[i]=()=>(this.linkService.eventBus?.dispatch(`dispatcheventinsandbox`,{source:this,detail:{id:t.id,name:r}}),!1))}t.overlaidText&&(e.title=t.overlaidText),e.onclick||=()=>!1,this.#e()}_bindResetFormAction(e,t){let n=e.onclick;if(n||(e.href=this.linkService.getAnchorUrl(``)),this.#e(),!this._fieldObjects){R('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),n||(e.onclick=()=>!1);return}e.onclick=()=>{n?.();let{fields:e,refs:r,include:i}=t,a=[];if(e.length!==0||r.length!==0){let t=new Set(r);for(let n of e){let e=this._fieldObjects[n]||[];for(let{id:n}of e)t.add(n)}for(let e of Object.values(this._fieldObjects))for(let n of e)t.has(n.id)===i&&a.push(n)}else for(let e of Object.values(this._fieldObjects))a.push(...e);let o=this.annotationStorage,s=[];for(let e of a){let{id:t}=e;switch(s.push(t),e.type){case`text`:{let n=e.defaultValue||``;o.setValue(t,{value:n});break}case`checkbox`:case`radiobutton`:{let n=e.defaultValue===e.exportValues;o.setValue(t,{value:n});break}case`combobox`:case`listbox`:{let n=e.defaultValue||``;o.setValue(t,{value:n});break}default:continue}let n=document.querySelector(`[data-element-id="${t}"]`);if(n){if(!Ws.has(n)){R(`_bindResetFormAction - element not allowed: ${t}`);continue}}else continue;n.dispatchEvent(new Event(`resetform`))}return this.enableScripting&&this.linkService.eventBus?.dispatch(`dispatcheventinsandbox`,{source:this,detail:{id:`app`,ids:s,name:`ResetForm`}}),!1}}},Xs=class extends qs{constructor(e){super(e,{isRenderable:!0})}render(){this.container.classList.add(`textAnnotation`);let e=document.createElement(`img`);return e.src=this.imageResourcesPath+`annotation-`+this.data.name.toLowerCase()+`.svg`,e.setAttribute(`data-l10n-id`,`pdfjs-text-annotation-type`),e.setAttribute(`data-l10n-args`,JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.append(e),this.container}},Zs=class extends qs{render(){return this.container}showElementAndHideCanvas(e){this.data.hasOwnCanvas&&(e.previousSibling?.nodeName===`CANVAS`&&(e.previousSibling.hidden=!0),e.hidden=!1)}_getKeyModifier(e){return V.platform.isMac?e.metaKey:e.ctrlKey}_setEventListener(e,t,n,r,i){n.includes(`mouse`)?e.addEventListener(n,e=>{this.linkService.eventBus?.dispatch(`dispatcheventinsandbox`,{source:this,detail:{id:this.data.id,name:r,value:i(e),shift:e.shiftKey,modifier:this._getKeyModifier(e)}})}):e.addEventListener(n,e=>{if(n===`blur`){if(!t.focused||!e.relatedTarget)return;t.focused=!1}else if(n===`focus`){if(t.focused)return;t.focused=!0}i&&this.linkService.eventBus?.dispatch(`dispatcheventinsandbox`,{source:this,detail:{id:this.data.id,name:r,value:i(e)}})})}_setEventListeners(e,t,n,r){for(let[i,a]of n)(a===`Action`||this.data.actions?.[a])&&((a===`Focus`||a===`Blur`)&&(t||={focused:!1}),this._setEventListener(e,t,i,a,r),a===`Focus`&&!this.data.actions?.Blur?this._setEventListener(e,t,`blur`,`Blur`,null):a===`Blur`&&!this.data.actions?.Focus&&this._setEventListener(e,t,`focus`,`Focus`,null))}_setBackgroundColor(e){let t=this.data.backgroundColor||null;e.style.backgroundColor=t===null?`transparent`:H.makeHexColor(t[0],t[1],t[2])}_setTextStyle(e){let t=[`left`,`center`,`right`],{fontColor:n}=this.data.defaultAppearanceData,r=this.data.defaultAppearanceData.fontSize||Us,i=e.style,a,o=e=>Math.round(10*e)/10;if(this.data.multiLine){let e=Math.abs(this.data.rect[3]-this.data.rect[1]-2),t=e/(Math.round(e/(Er*r))||1);a=Math.min(r,o(t/Er))}else{let e=Math.abs(this.data.rect[3]-this.data.rect[1]-2);a=Math.min(r,o(e/Er))}i.fontSize=`calc(${a}px * var(--total-scale-factor))`,i.color=H.makeHexColor(n[0],n[1],n[2]),this.data.textAlignment!==null&&(i.textAlign=t[this.data.textAlignment])}_setRequired(e,t){t?e.setAttribute(`required`,!0):e.removeAttribute(`required`),e.setAttribute(`aria-required`,t)}},Qs=class extends Zs{constructor(e){let t=e.renderForms||e.data.hasOwnCanvas||!e.data.hasAppearance&&!!e.data.fieldValue;super(e,{isRenderable:t})}setPropertyOnSiblings(e,t,n,r){let i=this.annotationStorage;for(let a of this._getElementsByName(e.name,e.id))a.domElement&&(a.domElement[t]=n),i.setValue(a.id,{[r]:n})}render(){let e=this.annotationStorage,t=this.data.id;this.container.classList.add(`textWidgetAnnotation`);let n=null;if(this.renderForms){let r=e.getValue(t,{value:this.data.fieldValue}),i=r.value||``,a=e.getValue(t,{charLimit:this.data.maxLen}).charLimit;a&&i.length>a&&(i=i.slice(0,a));let o=r.formattedValue||this.data.textContent?.join(`
`)||null;o&&this.data.comb&&(o=o.replaceAll(/\s+/g,``));let s={userValue:i,formattedValue:o,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(n=document.createElement(`textarea`),n.textContent=o??i,this.data.doNotScroll&&(n.style.overflowY=`hidden`)):(n=document.createElement(`input`),n.type=this.data.password?`password`:`text`,n.setAttribute(`value`,o??i),this.data.doNotScroll&&(n.style.overflowX=`hidden`)),this.data.hasOwnCanvas&&(n.hidden=!0),Ws.add(n),this.contentElement=n,n.setAttribute(`data-element-id`,t),n.disabled=this.data.readOnly,n.name=this.data.fieldName,n.tabIndex=0;let{datetimeFormat:c,datetimeType:l,timeStep:u}=this.data,d=!!l&&this.enableScripting;c&&(n.title=c),this._setRequired(n,this.data.required),a&&(n.maxLength=a),n.addEventListener(`input`,r=>{e.setValue(t,{value:r.target.value}),this.setPropertyOnSiblings(n,`value`,r.target.value,`value`),s.formattedValue=null}),n.addEventListener(`resetform`,e=>{n.value=s.userValue=this.data.defaultFieldValue??``,s.formattedValue=null});let f=e=>{let{formattedValue:t}=s;t!=null&&(e.target.value=t),e.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){n.addEventListener(`focus`,e=>{if(s.focused)return;let{target:t}=e;if(d&&(t.type=l,u&&(t.step=u)),s.userValue){let e=s.userValue;if(d)if(l===`time`){let n=new Date(e);t.value=[n.getHours(),n.getMinutes(),n.getSeconds()].map(e=>e.toString().padStart(2,`0`)).join(`:`)}else t.value=new Date(e-Gs).toISOString().split(l===`date`?`T`:`.`,1)[0];else t.value=e}s.lastCommittedValue=t.value,s.commitKey=1,this.data.actions?.Focus||(s.focused=!0)}),n.addEventListener(`updatefromsandbox`,n=>{this.showElementAndHideCanvas(n.target),this._dispatchEventFromSandbox({value(n){s.userValue=n.detail.value??``,d||e.setValue(t,{value:s.userValue.toString()}),n.target.value=s.userValue},formattedValue(n){let{formattedValue:r}=n.detail;s.formattedValue=r,r!=null&&n.target!==document.activeElement&&(n.target.value=r);let i={formattedValue:r};d&&(i.value=r),e.setValue(t,i)},selRange(e){e.target.setSelectionRange(...e.detail.selRange)},charLimit:n=>{let{charLimit:r}=n.detail,{target:i}=n;if(r===0){i.removeAttribute(`maxLength`);return}i.setAttribute(`maxLength`,r);let a=s.userValue;!a||a.length<=r||(a=a.slice(0,r),i.value=s.userValue=a,e.setValue(t,{value:a}),this.linkService.eventBus?.dispatch(`dispatcheventinsandbox`,{source:this,detail:{id:t,name:`Keystroke`,value:a,willCommit:!0,commitKey:1,selStart:i.selectionStart,selEnd:i.selectionEnd}}))}},n)}),n.addEventListener(`keydown`,e=>{s.commitKey=1;let n=-1;if(e.key===`Escape`?n=0:e.key===`Enter`&&!this.data.multiLine?n=2:e.key===`Tab`&&(s.commitKey=3),n===-1)return;let{value:r}=e.target;s.lastCommittedValue!==r&&(s.lastCommittedValue=r,s.userValue=r,this.linkService.eventBus?.dispatch(`dispatcheventinsandbox`,{source:this,detail:{id:t,name:`Keystroke`,value:r,willCommit:!0,commitKey:n,selStart:e.target.selectionStart,selEnd:e.target.selectionEnd}}))});let r=f;f=null,n.addEventListener(`blur`,e=>{if(!s.focused||!e.relatedTarget)return;this.data.actions?.Blur||(s.focused=!1);let{target:n}=e,{value:i}=n;if(d){if(i&&l===`time`){let e=i.split(`:`).map(e=>parseInt(e,10));i=new Date(2e3,0,1,e[0],e[1],e[2]||0).valueOf(),n.step=``}else i.includes(`T`)||(i=`${i}T00:00`),i=new Date(i).valueOf();n.type=`text`}s.userValue=i,s.lastCommittedValue!==i&&this.linkService.eventBus?.dispatch(`dispatcheventinsandbox`,{source:this,detail:{id:t,name:`Keystroke`,value:i,willCommit:!0,commitKey:s.commitKey,selStart:e.target.selectionStart,selEnd:e.target.selectionEnd}}),r(e)}),this.data.actions?.Keystroke&&n.addEventListener(`beforeinput`,e=>{s.lastCommittedValue=null;let{data:n,target:r}=e,{value:i,selectionStart:a,selectionEnd:o}=r,c=a,l=o;switch(e.inputType){case`deleteWordBackward`:{let e=i.substring(0,a).match(/\w*[^\w]*$/);e&&(c-=e[0].length);break}case`deleteWordForward`:{let e=i.substring(a).match(/^[^\w]*\w*/);e&&(l+=e[0].length);break}case`deleteContentBackward`:a===o&&--c;break;case`deleteContentForward`:a===o&&(l+=1);break}e.preventDefault(),this.linkService.eventBus?.dispatch(`dispatcheventinsandbox`,{source:this,detail:{id:t,name:`Keystroke`,value:i,change:n||``,willCommit:!1,selStart:c,selEnd:l}})}),this._setEventListeners(n,s,[[`focus`,`Focus`],[`blur`,`Blur`],[`mousedown`,`Mouse Down`],[`mouseenter`,`Mouse Enter`],[`mouseleave`,`Mouse Exit`],[`mouseup`,`Mouse Up`]],e=>e.target.value)}if(f&&n.addEventListener(`blur`,f),this.data.comb){let e=(this.data.rect[2]-this.data.rect[0])/a;n.classList.add(`comb`),n.style.letterSpacing=`calc(${e}px * var(--total-scale-factor) - 1ch)`}}else n=document.createElement(`div`),n.textContent=this.data.fieldValue,n.style.verticalAlign=`middle`,n.style.display=`table-cell`,this.data.hasOwnCanvas&&(n.hidden=!0);return this._setTextStyle(n),this._setBackgroundColor(n),this._setDefaultPropertiesFromJS(n),this.container.append(n),this.container}},$s=class extends Zs{constructor(e){super(e,{isRenderable:!!e.data.hasOwnCanvas})}},ec=class extends Zs{constructor(e){super(e,{isRenderable:e.renderForms})}render(){let e=this.annotationStorage,t=this.data,n=t.id,r=e.getValue(n,{value:t.exportValue===t.fieldValue}).value;typeof r==`string`&&(r=r!==`Off`,e.setValue(n,{value:r})),this.container.classList.add(`buttonWidgetAnnotation`,`checkBox`);let i=document.createElement(`input`);return Ws.add(i),i.setAttribute(`data-element-id`,n),i.disabled=t.readOnly,this._setRequired(i,this.data.required),i.type=`checkbox`,i.name=t.fieldName,r&&i.setAttribute(`checked`,!0),i.setAttribute(`exportValue`,t.exportValue),i.tabIndex=0,i.addEventListener(`change`,r=>{let{name:i,checked:a}=r.target;for(let r of this._getElementsByName(i,n)){let n=a&&r.exportValue===t.exportValue;r.domElement&&(r.domElement.checked=n),e.setValue(r.id,{value:n})}e.setValue(n,{value:a})}),i.addEventListener(`resetform`,e=>{let n=t.defaultFieldValue||`Off`;e.target.checked=n===t.exportValue}),this.enableScripting&&this.hasJSActions&&(i.addEventListener(`updatefromsandbox`,t=>{this._dispatchEventFromSandbox({value(t){t.target.checked=t.detail.value!==`Off`,e.setValue(n,{value:t.target.checked})}},t)}),this._setEventListeners(i,null,[[`change`,`Validate`],[`change`,`Action`],[`focus`,`Focus`],[`blur`,`Blur`],[`mousedown`,`Mouse Down`],[`mouseenter`,`Mouse Enter`],[`mouseleave`,`Mouse Exit`],[`mouseup`,`Mouse Up`]],e=>e.target.checked)),this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}},tc=class extends Zs{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add(`buttonWidgetAnnotation`,`radioButton`);let e=this.annotationStorage,t=this.data,n=t.id,r=e.getValue(n,{value:t.fieldValue===t.buttonValue}).value;if(typeof r==`string`&&(r=r!==t.buttonValue,e.setValue(n,{value:r})),r)for(let r of this._getElementsByName(t.fieldName,n))e.setValue(r.id,{value:!1});let i=document.createElement(`input`);if(Ws.add(i),i.setAttribute(`data-element-id`,n),i.disabled=t.readOnly,this._setRequired(i,this.data.required),i.type=`radio`,i.name=t.fieldName,r&&i.setAttribute(`checked`,!0),i.tabIndex=0,i.addEventListener(`change`,t=>{let{name:r,checked:i}=t.target;for(let t of this._getElementsByName(r,n))e.setValue(t.id,{value:!1});e.setValue(n,{value:i})}),i.addEventListener(`resetform`,e=>{let n=t.defaultFieldValue;e.target.checked=n!=null&&n===t.buttonValue}),this.enableScripting&&this.hasJSActions){let r=t.buttonValue;i.addEventListener(`updatefromsandbox`,t=>{this._dispatchEventFromSandbox({value:t=>{let i=r===t.detail.value;for(let r of this._getElementsByName(t.target.name)){let t=i&&r.id===n;r.domElement&&(r.domElement.checked=t),e.setValue(r.id,{value:t})}}},t)}),this._setEventListeners(i,null,[[`change`,`Validate`],[`change`,`Action`],[`focus`,`Focus`],[`blur`,`Blur`],[`mousedown`,`Mouse Down`],[`mouseenter`,`Mouse Enter`],[`mouseleave`,`Mouse Exit`],[`mouseup`,`Mouse Up`]],e=>e.target.checked)}return this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}},nc=class extends Ys{constructor(e){super(e,{ignoreBorder:e.data.hasAppearance})}render(){let e=super.render();e.classList.add(`buttonWidgetAnnotation`,`pushButton`);let t=e.lastChild;return this.enableScripting&&this.hasJSActions&&t&&(this._setDefaultPropertiesFromJS(t),t.addEventListener(`updatefromsandbox`,e=>{this._dispatchEventFromSandbox({},e)})),e}},rc=class extends Zs{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add(`choiceWidgetAnnotation`);let e=this.annotationStorage,t=this.data.id,n=e.getValue(t,{value:this.data.fieldValue}),r=document.createElement(`select`);Ws.add(r),r.setAttribute(`data-element-id`,t),r.disabled=this.data.readOnly,this._setRequired(r,this.data.required),r.name=this.data.fieldName,r.tabIndex=0;let i=this.data.combo&&this.data.options.length>0;this.data.combo||(r.size=this.data.options.length,this.data.multiSelect&&(r.multiple=!0)),r.addEventListener(`resetform`,e=>{let t=this.data.defaultFieldValue;for(let e of r.options)e.selected=e.value===t});for(let e of this.data.options){let t=document.createElement(`option`);t.textContent=e.displayValue,t.value=e.exportValue,n.value.includes(e.exportValue)&&(t.setAttribute(`selected`,!0),i=!1),r.append(t)}let a=null;if(i){let e=document.createElement(`option`);e.value=` `,e.setAttribute(`hidden`,!0),e.setAttribute(`selected`,!0),r.prepend(e),a=()=>{e.remove(),r.removeEventListener(`input`,a),a=null},r.addEventListener(`input`,a)}let o=e=>{let t=e?`value`:`textContent`,{options:n,multiple:i}=r;return i?Array.prototype.filter.call(n,e=>e.selected).map(e=>e[t]):n.selectedIndex===-1?null:n[n.selectedIndex][t]},s=o(!1),c=e=>{let t=e.target.options;return Array.prototype.map.call(t,e=>({displayValue:e.textContent,exportValue:e.value}))};return this.enableScripting&&this.hasJSActions?(r.addEventListener(`updatefromsandbox`,n=>{this._dispatchEventFromSandbox({value(n){a?.();let i=n.detail.value,c=new Set(Array.isArray(i)?i:[i]);for(let e of r.options)e.selected=c.has(e.value);e.setValue(t,{value:o(!0)}),s=o(!1)},multipleSelection(e){r.multiple=!0},remove(n){let i=r.options,a=n.detail.remove;i[a].selected=!1,r.remove(a),i.length>0&&Array.prototype.findIndex.call(i,e=>e.selected)===-1&&(i[0].selected=!0),e.setValue(t,{value:o(!0),items:c(n)}),s=o(!1)},clear(n){for(;r.length!==0;)r.remove(0);e.setValue(t,{value:null,items:[]}),s=o(!1)},insert(n){let{index:i,displayValue:a,exportValue:l}=n.detail.insert,u=r.children[i],d=document.createElement(`option`);d.textContent=a,d.value=l,u?u.before(d):r.append(d),e.setValue(t,{value:o(!0),items:c(n)}),s=o(!1)},items(n){let{items:i}=n.detail;for(;r.length!==0;)r.remove(0);for(let e of i){let{displayValue:t,exportValue:n}=e,i=document.createElement(`option`);i.textContent=t,i.value=n,r.append(i)}r.options.length>0&&(r.options[0].selected=!0),e.setValue(t,{value:o(!0),items:c(n)}),s=o(!1)},indices(n){let r=new Set(n.detail.indices);for(let e of n.target.options)e.selected=r.has(e.index);e.setValue(t,{value:o(!0)}),s=o(!1)},editable(e){e.target.disabled=!e.detail.editable}},n)}),r.addEventListener(`input`,n=>{let r=o(!0),i=o(!1);e.setValue(t,{value:r}),n.preventDefault(),this.linkService.eventBus?.dispatch(`dispatcheventinsandbox`,{source:this,detail:{id:t,name:`Keystroke`,value:s,change:i,changeEx:r,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(r,null,[[`focus`,`Focus`],[`blur`,`Blur`],[`mousedown`,`Mouse Down`],[`mouseenter`,`Mouse Enter`],[`mouseleave`,`Mouse Exit`],[`mouseup`,`Mouse Up`],[`input`,`Action`],[`input`,`Validate`]],e=>e.target.value)):r.addEventListener(`input`,function(n){e.setValue(t,{value:o(!0)})}),this.data.combo&&this._setTextStyle(r),this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}},ic=class extends qs{constructor(e){let{data:t,elements:n,parent:r}=e,i=!!r._commentManager;if(super(e,{isRenderable:!i&&qs._hasPopupData(t)}),this.elements=n,i&&qs._hasPopupData(t)){let e=this.popup=this.#e();for(let t of n)t.popup=e}else this.popup=null}#e(){return new ac({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate||this.data.creationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open,commentManager:this.parent._commentManager})}render(){let{container:e}=this;e.classList.add(`popupAnnotation`),e.role=`comment`;let t=this.popup=this.#e(),n=[];for(let e of this.elements)e.popup=t,e.container.ariaHasPopup=`dialog`,n.push(e.data.id),e.addHighlightArea();return this.container.setAttribute(`aria-controls`,n.map(e=>`${fi}${e}`).join(`,`)),this.container}},ac=class{#e=null;#t=this.#P.bind(this);#n=this.#R.bind(this);#r=this.#L.bind(this);#i=this.#I.bind(this);#a=null;#o=null;#s=null;#c=null;#l=null;#u=null;#d=null;#f=!1;#p=null;#m=null;#h=null;#g=null;#_=null;#v=null;#y=null;#b=null;#x=null;#S=null;#C=!1;#w=null;#T=null;constructor({container:e,color:t,elements:n,titleObj:r,modificationDate:i,contentsObj:a,richText:o,parent:s,rect:c,parentRect:l,open:u,commentManager:d=null}){this.#o=e,this.#x=r,this.#s=a,this.#b=o,this.#u=s,this.#a=t,this.#y=c,this.#d=l,this.#l=n,this.#e=d,this.#w=n[0],this.#c=ji.toDateObject(i),this.trigger=n.flatMap(e=>e.getElementsToTriggerPopup()),d||(this.#E(),this.#o.hidden=!0,u&&this.#I())}#E(){if(this.#m)return;this.#m=new AbortController;let{signal:e}=this.#m;for(let t of this.trigger)t.addEventListener(`click`,this.#i,{signal:e}),t.addEventListener(`pointerenter`,this.#r,{signal:e}),t.addEventListener(`pointerleave`,this.#n,{signal:e}),t.classList.add(`popupTriggerArea`);for(let t of this.#l)t.container?.addEventListener(`keydown`,this.#t,{signal:e})}#D(){let e=this.#l.find(e=>e.hasCommentButton);e&&(this.#_=e._normalizePoint(e.commentButtonPosition))}renderCommentButton(){if(this.#g){this.#g.parentNode||this.#w.container.after(this.#g);return}if(this.#_||this.#D(),!this.#_)return;let{signal:e}=this.#m=new AbortController,t=this.#w.hasOwnCommentButton,n=()=>{this.#e.toggleCommentPopup(this,!0,void 0,!t)},r=()=>{this.#e.toggleCommentPopup(this,!1,!0,!t)},i=()=>{this.#e.toggleCommentPopup(this,!1,!1)};if(t){this.#g=this.#w.container;for(let t of this.trigger)t.ariaHasPopup=`dialog`,t.ariaControls=`commentPopup`,t.addEventListener(`keydown`,this.#t,{signal:e}),t.addEventListener(`click`,n,{signal:e}),t.addEventListener(`pointerenter`,r,{signal:e}),t.addEventListener(`pointerleave`,i,{signal:e}),t.classList.add(`popupTriggerArea`)}else{let t=this.#g=document.createElement(`button`);t.className=`annotationCommentButton`;let a=this.#w.container;t.style.zIndex=a.style.zIndex+1,t.tabIndex=0,t.ariaHasPopup=`dialog`,t.ariaControls=`commentPopup`,t.setAttribute(`data-l10n-id`,`pdfjs-show-comment-button`),this.#k(),this.#O(),t.addEventListener(`keydown`,this.#t,{signal:e}),t.addEventListener(`click`,n,{signal:e}),t.addEventListener(`pointerenter`,r,{signal:e}),t.addEventListener(`pointerleave`,i,{signal:e}),a.after(t)}}#O(){if(this.#w.extraPopupElement&&!this.#w.editor)return;this.#g||this.renderCommentButton();let[e,t]=this.#_,{style:n}=this.#g;n.left=`calc(${e}%)`,n.top=`calc(${t}% - var(--comment-button-dim))`}#k(){this.#w.extraPopupElement||(this.#g||this.renderCommentButton(),this.#g.style.backgroundColor=this.commentButtonColor||``)}get commentButtonColor(){let{color:e,opacity:t}=this.#w.commentData;return e?this.#u._commentManager.makeCommentColor(e,t):null}focusCommentButton(){setTimeout(()=>{this.#g?.focus()},0)}getData(){let{richText:e,color:t,opacity:n,creationDate:r,modificationDate:i}=this.#w.commentData;return{contentsObj:{str:this.comment},richText:e,color:t,opacity:n,creationDate:r,modificationDate:i}}get elementBeforePopup(){return this.#g}get comment(){return this.#T||=this.#w.commentText,this.#T}set comment(e){e!==this.comment&&(this.#w.commentText=this.#T=e)}focus(){this.#w.container?.focus()}get parentBoundingClientRect(){return this.#w.layer.getBoundingClientRect()}setCommentButtonStates({selected:e,hasPopup:t}){this.#g&&(this.#g.classList.toggle(`selected`,e),this.#g.ariaExpanded=t)}setSelectedCommentButton(e){this.#g.classList.toggle(`selected`,e)}get commentPopupPosition(){if(this.#v)return this.#v;let{x:e,y:t,height:n}=this.#g.getBoundingClientRect(),{x:r,y:i,width:a,height:o}=this.#w.layer.getBoundingClientRect();return[(e-r)/a,(t+n-i)/o]}set commentPopupPosition(e){this.#v=e}hasDefaultPopupPosition(){return this.#v===null}get commentButtonPosition(){return this.#_}get commentButtonWidth(){return this.#g.getBoundingClientRect().width/this.parentBoundingClientRect.width}editComment(e){let[t,n]=this.#v||this.commentButtonPosition.map(e=>e/100),r=this.parentBoundingClientRect,{x:i,y:a,width:o,height:s}=r;this.#e.showDialog(null,this,i+t*o,a+n*s,{...e,parentDimensions:r})}render(){if(this.#p)return;let e=this.#p=document.createElement(`div`);if(e.className=`popup`,this.#a){let t=e.style.outlineColor=H.makeHexColor(...this.#a);e.style.backgroundColor=`color-mix(in srgb, ${t} 30%, white)`}let t=document.createElement(`span`);if(t.className=`header`,this.#x?.str){let e=document.createElement(`span`);e.className=`title`,t.append(e),{dir:e.dir,str:e.textContent}=this.#x}if(e.append(t),this.#c){let e=document.createElement(`time`);e.className=`popupDate`,e.setAttribute(`data-l10n-id`,`pdfjs-annotation-date-time-string`),e.setAttribute(`data-l10n-args`,JSON.stringify({dateObj:this.#c.valueOf()})),e.dateTime=this.#c.toISOString(),t.append(e)}Yi({html:this.#A||this.#s.str,dir:this.#s?.dir,className:`popupContent`},e),this.#o.append(e)}get#A(){let e=this.#b,t=this.#s;return e?.str&&(!t?.str||t.str===e.str)&&this.#b.html||null}get#j(){return this.#A?.attributes?.style?.fontSize||0}get#M(){return this.#A?.attributes?.style?.color||null}#N(e){let t=[],n={str:e,html:{name:`div`,attributes:{dir:`auto`},children:[{name:`p`,children:t}]}},r={style:{color:this.#M,fontSize:this.#j?`calc(${this.#j}px * var(--total-scale-factor))`:``}};for(let n of e.split(`
`))t.push({name:`span`,value:n,attributes:r});return n}#P(e){e.altKey||e.shiftKey||e.ctrlKey||e.metaKey||(e.key===`Enter`||e.key===`Escape`&&this.#f)&&this.#I()}updateEdited({rect:e,popup:t,deleted:n}){if(this.#e){n?(this.remove(),this.#T=null):t&&(t.deleted?this.remove():(this.#k(),this.#T=t.text)),e&&(this.#_=null,this.#D(),this.#O());return}if(n||t?.deleted){this.remove();return}this.#E(),this.#S||={contentsObj:this.#s,richText:this.#b},e&&(this.#h=null),t&&t.text&&(this.#b=this.#N(t.text),this.#c=ji.toDateObject(t.date),this.#s=null),this.#p?.remove(),this.#p=null}resetEdited(){this.#S&&({contentsObj:this.#s,richText:this.#b}=this.#S,this.#S=null,this.#p?.remove(),this.#p=null,this.#h=null)}remove(){if(this.#m?.abort(),this.#m=null,this.#p?.remove(),this.#p=null,this.#C=!1,this.#f=!1,this.#g?.remove(),this.#g=null,this.trigger)for(let e of this.trigger)e.classList.remove(`popupTriggerArea`)}#F(){if(this.#h!==null)return;let{page:{view:e},viewport:{rawDims:{pageWidth:t,pageHeight:n,pageX:r,pageY:i}}}=this.#u,a=!!this.#d,o=a?this.#d:this.#y;for(let e of this.#l)if(!o||H.intersect(e.data.rect,o)!==null){o=e.data.rect,a=!0;break}let s=H.normalizeRect([o[0],e[3]-o[1]+e[1],o[2],e[3]-o[3]+e[1]]),c=a?o[2]-o[0]+5:0,l=s[0]+c,u=s[1];this.#h=[100*(l-r)/t,100*(u-i)/n];let{style:d}=this.#o;d.left=`${this.#h[0]}%`,d.top=`${this.#h[1]}%`}#I(){if(this.#e){this.#e.toggleCommentPopup(this,!1);return}this.#f=!this.#f,this.#f?(this.#L(),this.#o.addEventListener(`click`,this.#i),this.#o.addEventListener(`keydown`,this.#t)):(this.#R(),this.#o.removeEventListener(`click`,this.#i),this.#o.removeEventListener(`keydown`,this.#t))}#L(){this.#p||this.render(),this.isVisible?this.#f&&this.#o.classList.add(`focused`):(this.#F(),this.#o.hidden=!1,this.#o.style.zIndex=parseInt(this.#o.style.zIndex)+1e3)}#R(){this.#o.classList.remove(`focused`),!(this.#f||!this.isVisible)&&(this.#o.hidden=!0,this.#o.style.zIndex=parseInt(this.#o.style.zIndex)-1e3)}forceHide(){this.#C=this.isVisible,this.#C&&(this.#o.hidden=!0)}maybeShow(){this.#e||(this.#E(),this.#C&&(this.#p||this.#L(),this.#C=!1,this.#o.hidden=!1))}get isVisible(){return this.#e?!1:this.#o.hidden===!1}},oc=class extends qs{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.textContent=e.data.textContent,this.textPosition=e.data.textPosition,this.annotationEditorType=I.FREETEXT}render(){if(this.container.classList.add(`freeTextAnnotation`),this.textContent){let e=this.contentElement=document.createElement(`div`);e.classList.add(`annotationTextContent`),e.setAttribute(`role`,`comment`);for(let t of this.textContent){let n=document.createElement(`span`);n.textContent=t,e.append(n)}this.container.append(e)}return!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this._editOnDoubleClick(),this.container}},sc=class extends qs{#e=null;constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add(`lineAnnotation`);let{data:e,width:t,height:n}=this,r=this.svgFactory.create(t,n,!0),i=this.#e=this.svgFactory.createElement(`svg:line`);return i.setAttribute(`x1`,e.rect[2]-e.lineCoordinates[0]),i.setAttribute(`y1`,e.rect[3]-e.lineCoordinates[1]),i.setAttribute(`x2`,e.rect[2]-e.lineCoordinates[2]),i.setAttribute(`y2`,e.rect[3]-e.lineCoordinates[3]),i.setAttribute(`stroke-width`,e.borderStyle.width||1),i.setAttribute(`stroke`,`transparent`),i.setAttribute(`fill`,`transparent`),r.append(i),this.container.append(r),!e.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add(`highlightArea`)}},cc=class extends qs{#e=null;constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add(`squareAnnotation`);let{data:e,width:t,height:n}=this,r=this.svgFactory.create(t,n,!0),i=e.borderStyle.width,a=this.#e=this.svgFactory.createElement(`svg:rect`);return a.setAttribute(`x`,i/2),a.setAttribute(`y`,i/2),a.setAttribute(`width`,t-i),a.setAttribute(`height`,n-i),a.setAttribute(`stroke-width`,i||1),a.setAttribute(`stroke`,`transparent`),a.setAttribute(`fill`,`transparent`),r.append(a),this.container.append(r),!e.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add(`highlightArea`)}},lc=class extends qs{#e=null;constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add(`circleAnnotation`);let{data:e,width:t,height:n}=this,r=this.svgFactory.create(t,n,!0),i=e.borderStyle.width,a=this.#e=this.svgFactory.createElement(`svg:ellipse`);return a.setAttribute(`cx`,t/2),a.setAttribute(`cy`,n/2),a.setAttribute(`rx`,t/2-i/2),a.setAttribute(`ry`,n/2-i/2),a.setAttribute(`stroke-width`,i||1),a.setAttribute(`stroke`,`transparent`),a.setAttribute(`fill`,`transparent`),r.append(a),this.container.append(r),!e.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add(`highlightArea`)}},uc=class extends qs{#e=null;constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName=`polylineAnnotation`,this.svgElementName=`svg:polyline`}render(){this.container.classList.add(this.containerClassName);let{data:{rect:e,vertices:t,borderStyle:n,popupRef:r},width:i,height:a}=this;if(!t)return this.container;let o=this.svgFactory.create(i,a,!0),s=[];for(let n=0,r=t.length;n<r;n+=2){let r=t[n]-e[0],i=e[3]-t[n+1];s.push(`${r},${i}`)}s=s.join(` `);let c=this.#e=this.svgFactory.createElement(this.svgElementName);return c.setAttribute(`points`,s),c.setAttribute(`stroke-width`,n.width||1),c.setAttribute(`stroke`,`transparent`),c.setAttribute(`fill`,`transparent`),o.append(c),this.container.append(o),!r&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add(`highlightArea`)}},dc=class extends uc{constructor(e){super(e),this.containerClassName=`polygonAnnotation`,this.svgElementName=`svg:polygon`}},fc=class extends qs{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add(`caretAnnotation`),!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}},pc=class extends qs{#e=null;#t=[];constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName=`inkAnnotation`,this.svgElementName=`svg:polyline`,this.annotationEditorType=this.data.it===`InkHighlight`?I.HIGHLIGHT:I.INK}#n(e,t){switch(e){case 90:return{transform:`rotate(90) translate(${-t[0]},${t[1]}) scale(1,-1)`,width:t[3]-t[1],height:t[2]-t[0]};case 180:return{transform:`rotate(180) translate(${-t[2]},${t[1]}) scale(1,-1)`,width:t[2]-t[0],height:t[3]-t[1]};case 270:return{transform:`rotate(270) translate(${-t[2]},${t[3]}) scale(1,-1)`,width:t[3]-t[1],height:t[2]-t[0]};default:return{transform:`translate(${-t[0]},${t[3]}) scale(1,-1)`,width:t[2]-t[0],height:t[3]-t[1]}}}render(){this.container.classList.add(this.containerClassName);let{data:{rect:e,rotation:t,inkLists:n,borderStyle:r,popupRef:i}}=this,{transform:a,width:o,height:s}=this.#n(t,e),c=this.svgFactory.create(o,s,!0),l=this.#e=this.svgFactory.createElement(`svg:g`);c.append(l),l.setAttribute(`stroke-width`,r.width||1),l.setAttribute(`stroke-linecap`,`round`),l.setAttribute(`stroke-linejoin`,`round`),l.setAttribute(`stroke-miterlimit`,10),l.setAttribute(`stroke`,`transparent`),l.setAttribute(`fill`,`transparent`),l.setAttribute(`transform`,a);for(let e=0,t=n.length;e<t;e++){let t=this.svgFactory.createElement(this.svgElementName);this.#t.push(t),t.setAttribute(`points`,n[e].join(`,`)),l.append(t)}return!i&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.append(c),this._editOnDoubleClick(),this.container}updateEdited(e){super.updateEdited(e);let{thickness:t,points:n,rect:r}=e,i=this.#e;if(t>=0&&i.setAttribute(`stroke-width`,t||1),n)for(let e=0,t=this.#t.length;e<t;e++)this.#t[e].setAttribute(`points`,n[e].join(`,`));if(r){let{transform:e,width:t,height:n}=this.#n(this.data.rotation,r);i.parentElement.setAttribute(`viewBox`,`0 0 ${t} ${n}`),i.setAttribute(`transform`,e)}}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add(`highlightArea`)}},mc=class extends qs{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=I.HIGHLIGHT}render(){let{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add(`highlightAnnotation`),this._editOnDoubleClick(),e){let t=document.createElement(`mark`);t.classList.add(`overlaidText`),t.textContent=e,this.container.append(t)}return this.container}},hc=class extends qs{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){let{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add(`underlineAnnotation`),e){let t=document.createElement(`u`);t.classList.add(`overlaidText`),t.textContent=e,this.container.append(t)}return this.container}},gc=class extends qs{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){let{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add(`squigglyAnnotation`),e){let t=document.createElement(`u`);t.classList.add(`overlaidText`),t.textContent=e,this.container.append(t)}return this.container}},_c=class extends qs{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){let{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add(`strikeoutAnnotation`),e){let t=document.createElement(`s`);t.classList.add(`overlaidText`),t.textContent=e,this.container.append(t)}return this.container}},vc=class extends qs{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=I.STAMP}render(){return this.container.classList.add(`stampAnnotation`),this.container.setAttribute(`role`,`img`),!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this._editOnDoubleClick(),this.container}},yc=class extends qs{#e=null;constructor(e){super(e,{isRenderable:!0});let{file:t}=this.data;this.filename=t.filename,this.content=t.content,this.linkService.eventBus?.dispatch(`fileattachmentannotation`,{source:this,...t})}render(){this.container.classList.add(`fileAttachmentAnnotation`);let{container:e,data:t}=this,n;t.hasAppearance||t.fillAlpha===0?n=document.createElement(`div`):(n=document.createElement(`img`),n.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(t.name)?`paperclip`:`pushpin`}.svg`,t.fillAlpha&&t.fillAlpha<1&&(n.style=`filter: opacity(${Math.round(t.fillAlpha*100)}%);`)),n.addEventListener(`dblclick`,this.#t.bind(this)),this.#e=n;let{isMac:r}=V.platform;return e.addEventListener(`keydown`,e=>{e.key===`Enter`&&(r?e.metaKey:e.ctrlKey)&&this.#t()}),!t.popupRef&&this.hasPopupData?(this.hasOwnCommentButton=!0,this._createPopup()):n.classList.add(`popupTriggerArea`),e.append(n),e}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add(`highlightArea`)}#t(){this.downloadManager?.openOrDownloadData(this.content,this.filename)}},bc=class e{#e=null;#t=null;#n=null;#r=new Map;#i=null;#a=null;#o=[];#s=!1;constructor({div:e,accessibilityManager:t,annotationCanvasMap:n,annotationEditorUIManager:r,page:i,viewport:a,structTreeLayer:o,commentManager:s,linkService:c,annotationStorage:l}){this.div=e,this.#e=t,this.#t=n,this.#i=o||null,this.#a=c||null,this.#n=l||new _a,this.page=i,this.viewport=a,this.zIndex=0,this._annotationEditorUIManager=r,this._commentManager=s||null}hasEditableAnnotations(){return this.#r.size>0}async render(e){let{annotations:t}=e,n=this.div;Li(n,this.viewport);let r=new Map,i=[],a={data:null,layer:n,linkService:this.#a,downloadManager:e.downloadManager,imageResourcesPath:e.imageResourcesPath||``,renderForms:e.renderForms!==!1,svgFactory:new Hs,annotationStorage:this.#n,enableComment:e.enableComment===!0,enableScripting:e.enableScripting===!0,hasJSActions:e.hasJSActions,fieldObjects:e.fieldObjects,parent:this,elements:null};for(let e of t){if(e.noHTML)continue;let t=e.annotationType===Pr.POPUP;if(t){let t=r.get(e.id);if(!t)continue;if(!this._commentManager){i.push(e);continue}a.elements=t}else if(e.rect[2]===e.rect[0]||e.rect[3]===e.rect[1])continue;a.data=e;let n=Ks.create(a);if(!n.isRenderable)continue;if(!t&&(this.#o.push(n),e.popupRef)){let t=r.get(e.popupRef);t?t.push(n):r.set(e.popupRef,[n])}let o=n.render();e.hidden&&(o.style.visibility=`hidden`),n._isEditable&&(this.#r.set(n.data.id,n),this._annotationEditorUIManager?.renderAnnotationElement(n))}await this.#c();for(let e of i){let t=a.elements=r.get(e.id);a.data=e;let n=Ks.create(a);if(!n.isRenderable)continue;let i=n.render();n.contentElement.id=`${fi}${e.id}`,e.hidden&&(i.style.visibility=`hidden`),t.at(-1).container.after(i)}this.#l()}async#c(){if(this.#o.length===0)return;this.div.replaceChildren();let e=[];if(!this.#s){this.#s=!0;for(let{contentElement:t,data:{id:n}}of this.#o){let r=t.id=`${fi}${n}`;e.push(this.#i?.getAriaAttributes(r).then(e=>{if(e)for(let[n,r]of e)t.setAttribute(n,r)}))}}this.#o.sort(({data:{rect:[e,t,n,r]}},{data:{rect:[i,a,o,s]}})=>{if(e===n&&t===r)return 1;if(i===o&&a===s)return-1;let c=r,l=t,u=(t+r)/2,d=s,f=a,p=(a+s)/2;return u>=d&&p<=l?-1:p>=c&&u<=f?1:(e+n)/2-(i+o)/2});let t=document.createDocumentFragment();for(let e of this.#o)t.append(e.container),this._commentManager?(e.extraPopupElement?.popup||e.popup)?.renderCommentButton():e.extraPopupElement&&t.append(e.extraPopupElement.render());if(this.div.append(t),await Promise.all(e),this.#e)for(let e of this.#o)this.#e.addPointerInTextLayer(e.contentElement,!1)}async addLinkAnnotations(t){let n={data:null,layer:this.div,linkService:this.#a,svgFactory:new Hs,parent:this};for(let r of t){r.borderStyle||=e._defaultBorderStyle,n.data=r;let t=Ks.create(n);t.isRenderable&&(t.render(),t.contentElement.id=`${fi}${r.id}`,this.#o.push(t))}await this.#c()}update({viewport:e}){let t=this.div;this.viewport=e,Li(t,{rotation:e.rotation}),this.#l(),t.hidden=!1}#l(){if(!this.#t)return;let e=this.div;for(let[t,n]of this.#t){let r=e.querySelector(`[data-annotation-id="${t}"]`);if(!r)continue;n.className=`annotationContent`;let{firstChild:i}=r;i?i.nodeName===`CANVAS`?i.replaceWith(n):i.classList.contains(`annotationContent`)?i.after(n):i.before(n):r.append(n);let a=this.#r.get(t);a&&(a._hasNoCanvas?(this._annotationEditorUIManager?.setMissingCanvas(t,r.id,n),a._hasNoCanvas=!1):a.canvas=n)}this.#t.clear()}getEditableAnnotations(){return Array.from(this.#r.values())}getEditableAnnotation(e){return this.#r.get(e)}addFakeAnnotation(e){let{div:t}=this,{id:n,rotation:r}=e,i=new Js({data:{id:n,rect:e.getPDFRect(),rotation:r},editor:e,layer:t,parent:this,enableComment:!!this._commentManager,linkService:this.#a,annotationStorage:this.#n});return i.render(),i.contentElement.id=`${fi}${n}`,i.createOrUpdatePopup(),this.#o.push(i),i}removeAnnotation(e){let t=this.#o.findIndex(t=>t.data.id===e);if(t<0)return;let[n]=this.#o.splice(t,1);this.#e?.removePointerInTextLayer(n.contentElement)}updateFakeAnnotations(e){if(e.length!==0){for(let t of e)t.updateFakeAnnotationElement(this);this.#c()}}togglePointerEvents(e=!1){this.div.classList.toggle(`disabled`,!e)}static get _defaultBorderStyle(){return B(this,`_defaultBorderStyle`,Object.freeze({width:1,rawWidth:1,style:Fr.SOLID,dashArray:[3],horizontalCornerRadius:0,verticalCornerRadius:0}))}},xc=/\r\n?|\n/g,Sc=class e extends ua{#e=``;#t=`${this.id}-editor`;#n=null;#r;_colorPicker=null;static _freeTextDefaultContent=``;static _internalPadding=0;static _defaultColor=null;static _defaultFontSize=10;static get _keyboardManager(){let t=e.prototype,n=e=>e.isEmpty(),r=oa.TRANSLATE_SMALL,i=oa.TRANSLATE_BIG;return B(this,`_keyboardManager`,new ia([[[`ctrl+s`,`mac+meta+s`,`ctrl+p`,`mac+meta+p`],t.commitOrRemove,{bubbles:!0}],[[`ctrl+Enter`,`mac+meta+Enter`,`Escape`,`mac+Escape`],t.commitOrRemove],[[`ArrowLeft`,`mac+ArrowLeft`],t._translateEmpty,{args:[-r,0],checker:n}],[[`ctrl+ArrowLeft`,`mac+shift+ArrowLeft`],t._translateEmpty,{args:[-i,0],checker:n}],[[`ArrowRight`,`mac+ArrowRight`],t._translateEmpty,{args:[r,0],checker:n}],[[`ctrl+ArrowRight`,`mac+shift+ArrowRight`],t._translateEmpty,{args:[i,0],checker:n}],[[`ArrowUp`,`mac+ArrowUp`],t._translateEmpty,{args:[0,-r],checker:n}],[[`ctrl+ArrowUp`,`mac+shift+ArrowUp`],t._translateEmpty,{args:[0,-i],checker:n}],[[`ArrowDown`,`mac+ArrowDown`],t._translateEmpty,{args:[0,r],checker:n}],[[`ctrl+ArrowDown`,`mac+shift+ArrowDown`],t._translateEmpty,{args:[0,i],checker:n}]]))}static _type=`freetext`;static _editorType=I.FREETEXT;constructor(t){super({...t,name:`freeTextEditor`}),this.color=t.color||e._defaultColor||ua._defaultLineColor,this.#r=t.fontSize||e._defaultFontSize,this.annotationElementId||this._uiManager.a11yAlert(`pdfjs-editor-freetext-added-alert`),this.canAddComment=!1}static initialize(e,t){ua.initialize(e,t);let n=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(n.getPropertyValue(`--freetext-padding`))}static updateDefaultParams(t,n){switch(t){case L.FREETEXT_SIZE:e._defaultFontSize=n;break;case L.FREETEXT_COLOR:e._defaultColor=n;break}}updateParams(e,t){switch(e){case L.FREETEXT_SIZE:this.#i(t);break;case L.FREETEXT_COLOR:this.#a(t);break}}static get defaultPropertiesToUpdate(){return[[L.FREETEXT_SIZE,e._defaultFontSize],[L.FREETEXT_COLOR,e._defaultColor||ua._defaultLineColor]]}get propertiesToUpdate(){return[[L.FREETEXT_SIZE,this.#r],[L.FREETEXT_COLOR,this.color]]}get toolbarButtons(){return this._colorPicker||=new Ls(this),[[`colorPicker`,this._colorPicker]]}get colorType(){return L.FREETEXT_COLOR}#i(e){let t=e=>{this.editorDiv.style.fontSize=`calc(${e}px * var(--total-scale-factor))`,this.translate(0,-(e-this.#r)*this.parentScale),this.#r=e,this.#s()},n=this.#r;this.addCommands({cmd:t.bind(this,e),undo:t.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:L.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})}onUpdatedColor(){this.editorDiv.style.color=this.color,this._colorPicker?.update(this.color),super.onUpdatedColor()}#a(e){let t=e=>{this.color=e,this.onUpdatedColor()},n=this.color;this.addCommands({cmd:t.bind(this,e),undo:t.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:L.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})}_translateEmpty(e,t){this._uiManager.translateSelectedEditors(e,t,!0)}getInitialTranslation(){let t=this.parentScale;return[-e._internalPadding*t,-(e._internalPadding+this.#r)*t]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(!super.enableEditMode())return!1;this.overlayDiv.classList.remove(`enabled`),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute(`aria-activedescendant`),this.#n=new AbortController;let e=this._uiManager.combinedSignal(this.#n);return this.editorDiv.addEventListener(`keydown`,this.editorDivKeydown.bind(this),{signal:e}),this.editorDiv.addEventListener(`focus`,this.editorDivFocus.bind(this),{signal:e}),this.editorDiv.addEventListener(`blur`,this.editorDivBlur.bind(this),{signal:e}),this.editorDiv.addEventListener(`input`,this.editorDivInput.bind(this),{signal:e}),this.editorDiv.addEventListener(`paste`,this.editorDivPaste.bind(this),{signal:e}),!0}disableEditMode(){return super.disableEditMode()?(this.overlayDiv.classList.add(`enabled`),this.editorDiv.contentEditable=!1,this.div.setAttribute(`aria-activedescendant`,this.#t),this._isDraggable=!0,this.#n?.abort(),this.#n=null,this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add(`freetextEditing`),!0):!1}focusin(e){this._focusEventsAllowed&&(super.focusin(e),e.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(e){this.width||(this.enableEditMode(),e&&this.editorDiv.focus(),this._initialOptions?.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===``}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add(`freetextEditing`)),super.remove()}#o(){let t=[];this.editorDiv.normalize();let n=null;for(let r of this.editorDiv.childNodes)n?.nodeType===Node.TEXT_NODE&&r.nodeName===`BR`||(t.push(e.#c(r)),n=r);return t.join(`
`)}#s(){let[e,t]=this.parentDimensions,n;if(this.isAttachedToDOM)n=this.div.getBoundingClientRect();else{let{currentLayer:e,div:t}=this,r=t.style.display,i=t.classList.contains(`hidden`);t.classList.remove(`hidden`),t.style.display=`hidden`,e.div.append(this.div),n=t.getBoundingClientRect(),t.remove(),t.style.display=r,t.classList.toggle(`hidden`,i)}this.rotation%180==this.parentRotation%180?(this.width=n.width/e,this.height=n.height/t):(this.width=n.height/e,this.height=n.width/t),this.fixAndSetPosition()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();let e=this.#e,t=this.#e=this.#o().trimEnd();if(e===t)return;let n=e=>{if(this.#e=e,!e){this.remove();return}this.#l(),this._uiManager.rebuild(this),this.#s()};this.addCommands({cmd:()=>{n(t)},undo:()=>{n(e)},mustExec:!1}),this.#s()}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}keydown(e){e.target===this.div&&e.key===`Enter`&&(this.enterInEditMode(),e.preventDefault())}editorDivKeydown(t){e._keyboardManager.exec(this,t)}editorDivFocus(e){this.isEditing=!0}editorDivBlur(e){this.isEditing=!1}editorDivInput(e){this.parent.div.classList.toggle(`freetextEditing`,this.isEmpty())}disableEditing(){this.editorDiv.setAttribute(`role`,`comment`),this.editorDiv.removeAttribute(`aria-multiline`)}enableEditing(){this.editorDiv.setAttribute(`role`,`textbox`),this.editorDiv.setAttribute(`aria-multiline`,!0)}get canChangeContent(){return!0}render(){if(this.div)return this.div;let e,t;(this._isCopy||this.annotationElementId)&&(e=this.x,t=this.y),super.render(),this.editorDiv=document.createElement(`div`),this.editorDiv.className=`internal`,this.editorDiv.setAttribute(`id`,this.#t),this.editorDiv.setAttribute(`data-l10n-id`,`pdfjs-free-text2`),this.editorDiv.setAttribute(`data-l10n-attrs`,`default-content`),this.enableEditing(),this.editorDiv.contentEditable=!0;let{style:n}=this.editorDiv;if(n.fontSize=`calc(${this.#r}px * var(--total-scale-factor))`,n.color=this.color,this.div.append(this.editorDiv),this.overlayDiv=document.createElement(`div`),this.overlayDiv.classList.add(`overlay`,`enabled`),this.div.append(this.overlayDiv),this._isCopy||this.annotationElementId){let[n,r]=this.parentDimensions;if(this.annotationElementId){let{position:i}=this._initialData,[a,o]=this.getInitialTranslation();[a,o]=this.pageTranslationToScreen(a,o);let[s,c]=this.pageDimensions,[l,u]=this.pageTranslation,d,f;switch(this.rotation){case 0:d=e+(i[0]-l)/s,f=t+this.height-(i[1]-u)/c;break;case 90:d=e+(i[0]-l)/s,f=t-(i[1]-u)/c,[a,o]=[o,-a];break;case 180:d=e-this.width+(i[0]-l)/s,f=t-(i[1]-u)/c,[a,o]=[-a,-o];break;case 270:d=e+(i[0]-l-this.height*c)/s,f=t+(i[1]-u-this.width*s)/c,[a,o]=[-o,a];break}this.setAt(d*n,f*r,a,o)}else this._moveAfterPaste(e,t);this.#l(),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}static#c(e){return(e.nodeType===Node.TEXT_NODE?e.nodeValue:e.innerText).replaceAll(xc,``)}editorDivPaste(t){let n=t.clipboardData||window.clipboardData,{types:r}=n;if(r.length===1&&r[0]===`text/plain`)return;t.preventDefault();let i=e.#d(n.getData(`text`)||``).replaceAll(xc,`
`);if(!i)return;let a=window.getSelection();if(!a.rangeCount)return;this.editorDiv.normalize(),a.deleteFromDocument();let o=a.getRangeAt(0);if(!i.includes(`
`)){o.insertNode(document.createTextNode(i)),this.editorDiv.normalize(),a.collapseToStart();return}let{startContainer:s,startOffset:c}=o,l=[],u=[];if(s.nodeType===Node.TEXT_NODE){let t=s.parentElement;if(u.push(s.nodeValue.slice(c).replaceAll(xc,``)),t!==this.editorDiv){let n=l;for(let r of this.editorDiv.childNodes){if(r===t){n=u;continue}n.push(e.#c(r))}}l.push(s.nodeValue.slice(0,c).replaceAll(xc,``))}else if(s===this.editorDiv){let t=l,n=0;for(let r of this.editorDiv.childNodes)n++===c&&(t=u),t.push(e.#c(r))}this.#e=`${l.join(`
`)}${i}${u.join(`
`)}`,this.#l();let d=new Range,f=Math.sumPrecise(l.map(e=>e.length));for(let{firstChild:e}of this.editorDiv.childNodes)if(e.nodeType===Node.TEXT_NODE){let t=e.nodeValue.length;if(f<=t){d.setStart(e,f),d.setEnd(e,f);break}f-=t}a.removeAllRanges(),a.addRange(d)}#l(){if(this.editorDiv.replaceChildren(),this.#e)for(let e of this.#e.split(`
`)){let t=document.createElement(`div`);t.append(e?document.createTextNode(e):document.createElement(`br`)),this.editorDiv.append(t)}}#u(){return this.#e.replaceAll(`\xA0`,` `)}static#d(e){return e.replaceAll(` `,`\xA0`)}get contentDiv(){return this.editorDiv}getPDFRect(){let t=e._internalPadding*this.parentScale;return this.getRect(t,t)}static async deserialize(t,n,r){let i=null;if(t instanceof oc){let{data:{defaultAppearanceData:{fontSize:e,fontColor:n},rect:r,rotation:a,id:o,popupRef:s,richText:c,contentsObj:l,creationDate:u,modificationDate:d},textContent:f,textPosition:p,parent:{page:{pageNumber:m}}}=t;if(!f||f.length===0)return null;i=t={annotationType:I.FREETEXT,color:Array.from(n),fontSize:e,value:f.join(`
`),position:p,pageIndex:m-1,rect:r.slice(0),rotation:a,annotationElementId:o,id:o,deleted:!1,popupRef:s,comment:l?.str||null,richText:c,creationDate:u,modificationDate:d}}let a=await super.deserialize(t,n,r);return a.#r=t.fontSize,a.color=H.makeHexColor(...t.color),a.#e=e.#d(t.value),a._initialData=i,t.comment&&a.setCommentData(t),a}serialize(e=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();let t=ua._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:this.color),n=Object.assign(super.serialize(e),{color:t,fontSize:this.#r,value:this.#u()});return this.addComment(n),e?(n.isCopy=!0,n):this.annotationElementId&&!this.#f(n)?null:(n.id=this.annotationElementId,n)}#f(e){let{value:t,fontSize:n,color:r,pageIndex:i}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||e.value!==t||e.fontSize!==n||e.color.some((e,t)=>e!==r[t])||e.pageIndex!==i}renderAnnotationElement(e){let t=super.renderAnnotationElement(e);if(!t)return null;let{style:n}=t;n.fontSize=`calc(${this.#r}px * var(--total-scale-factor))`,n.color=this.color,t.replaceChildren();for(let e of this.#e.split(`
`)){let n=document.createElement(`div`);n.append(e?document.createTextNode(e):document.createElement(`br`)),t.append(n)}return e.updateEdited({rect:this.getPDFRect(),popup:this._uiManager.hasCommentManager()||this.hasEditedComment?this.comment:{text:this.#e}}),t}resetAnnotationElement(e){super.resetAnnotationElement(e),e.resetEdited()}},q=class{static PRECISION=1e-4;toSVGPath(){Wr("Abstract method `toSVGPath` must be implemented.")}get box(){Wr("Abstract getter `box` must be implemented.")}serialize(e,t){Wr("Abstract method `serialize` must be implemented.")}static _rescale(e,t,n,r,i,a){a||=new Float32Array(e.length);for(let o=0,s=e.length;o<s;o+=2)a[o]=t+e[o]*r,a[o+1]=n+e[o+1]*i;return a}static _rescaleAndSwap(e,t,n,r,i,a){a||=new Float32Array(e.length);for(let o=0,s=e.length;o<s;o+=2)a[o]=t+e[o+1]*r,a[o+1]=n+e[o]*i;return a}static _translate(e,t,n,r){r||=new Float32Array(e.length);for(let i=0,a=e.length;i<a;i+=2)r[i]=t+e[i],r[i+1]=n+e[i+1];return r}static svgRound(e){return Math.round(e*1e4)}static _normalizePoint(e,t,n,r,i){switch(i){case 90:return[1-t/n,e/r];case 180:return[1-e/n,1-t/r];case 270:return[t/n,1-e/r];default:return[e/n,t/r]}}static _normalizePagePoint(e,t,n){switch(n){case 90:return[1-t,e];case 180:return[1-e,1-t];case 270:return[t,1-e];default:return[e,t]}}static createBezierPoints(e,t,n,r,i,a){return[(e+5*n)/6,(t+5*r)/6,(5*n+i)/6,(5*r+a)/6,(n+i)/2,(r+a)/2]}},Cc=class e{#e;#t=[];#n;#r;#i=[];#a=new Float32Array(18);#o;#s;#c;#l;#u;#d;#f=[];static#p=8;static#m=2;static#h=e.#p+e.#m;constructor({x:t,y:n},r,i,a,o,s=0){this.#e=r,this.#d=a*i,this.#r=o,this.#a.set([NaN,NaN,NaN,NaN,t,n],6),this.#n=s,this.#l=e.#p*i,this.#c=e.#h*i,this.#u=i,this.#f.push(t,n)}isEmpty(){return isNaN(this.#a[8])}#g(){let e=this.#a.subarray(4,6),t=this.#a.subarray(16,18),[n,r,i,a]=this.#e;return[(this.#o+(e[0]-t[0])/2-n)/i,(this.#s+(e[1]-t[1])/2-r)/a,(this.#o+(t[0]-e[0])/2-n)/i,(this.#s+(t[1]-e[1])/2-r)/a]}add({x:e,y:t}){this.#o=e,this.#s=t;let[n,r,i,a]=this.#e,[o,s,c,l]=this.#a.subarray(8,12),u=e-c,d=t-l,f=Math.hypot(u,d);if(f<this.#c)return!1;let p=f-this.#l,m=p/f,h=m*u,g=m*d,_=o,v=s;o=c,s=l,c+=h,l+=g,this.#f?.push(e,t);let y=-g/p,b=h/p,x=y*this.#d,S=b*this.#d;return this.#a.set(this.#a.subarray(2,8),0),this.#a.set([c+x,l+S],4),this.#a.set(this.#a.subarray(14,18),12),this.#a.set([c-x,l-S],16),isNaN(this.#a[6])?(this.#i.length===0&&(this.#a.set([o+x,s+S],2),this.#i.push(NaN,NaN,NaN,NaN,(o+x-n)/i,(s+S-r)/a),this.#a.set([o-x,s-S],14),this.#t.push(NaN,NaN,NaN,NaN,(o-x-n)/i,(s-S-r)/a)),this.#a.set([_,v,o,s,c,l],6),!this.isEmpty()):(this.#a.set([_,v,o,s,c,l],6),Math.abs(Math.atan2(v-s,_-o)-Math.atan2(g,h))<Math.PI/2?([o,s,c,l]=this.#a.subarray(2,6),this.#i.push(NaN,NaN,NaN,NaN,((o+c)/2-n)/i,((s+l)/2-r)/a),[o,s,_,v]=this.#a.subarray(14,18),this.#t.push(NaN,NaN,NaN,NaN,((_+o)/2-n)/i,((v+s)/2-r)/a),!0):([_,v,o,s,c,l]=this.#a.subarray(0,6),this.#i.push(((_+5*o)/6-n)/i,((v+5*s)/6-r)/a,((5*o+c)/6-n)/i,((5*s+l)/6-r)/a,((o+c)/2-n)/i,((s+l)/2-r)/a),[c,l,o,s,_,v]=this.#a.subarray(12,18),this.#t.push(((_+5*o)/6-n)/i,((v+5*s)/6-r)/a,((5*o+c)/6-n)/i,((5*s+l)/6-r)/a,((o+c)/2-n)/i,((s+l)/2-r)/a),!0))}toSVGPath(){if(this.isEmpty())return``;let e=this.#i,t=this.#t;if(isNaN(this.#a[6])&&!this.isEmpty())return this.#_();let n=[];n.push(`M${e[4]} ${e[5]}`);for(let t=6;t<e.length;t+=6)isNaN(e[t])?n.push(`L${e[t+4]} ${e[t+5]}`):n.push(`C${e[t]} ${e[t+1]} ${e[t+2]} ${e[t+3]} ${e[t+4]} ${e[t+5]}`);this.#y(n);for(let e=t.length-6;e>=6;e-=6)isNaN(t[e])?n.push(`L${t[e+4]} ${t[e+5]}`):n.push(`C${t[e]} ${t[e+1]} ${t[e+2]} ${t[e+3]} ${t[e+4]} ${t[e+5]}`);return this.#v(n),n.join(` `)}#_(){let[e,t,n,r]=this.#e,[i,a,o,s]=this.#g();return`M${(this.#a[2]-e)/n} ${(this.#a[3]-t)/r} L${(this.#a[4]-e)/n} ${(this.#a[5]-t)/r} L${i} ${a} L${o} ${s} L${(this.#a[16]-e)/n} ${(this.#a[17]-t)/r} L${(this.#a[14]-e)/n} ${(this.#a[15]-t)/r} Z`}#v(e){let t=this.#t;e.push(`L${t[4]} ${t[5]} Z`)}#y(e){let[t,n,r,i]=this.#e,a=this.#a.subarray(4,6),o=this.#a.subarray(16,18),[s,c,l,u]=this.#g();e.push(`L${(a[0]-t)/r} ${(a[1]-n)/i} L${s} ${c} L${l} ${u} L${(o[0]-t)/r} ${(o[1]-n)/i}`)}newFreeDrawOutline(e,t,n,r,i,a){return new wc(e,t,n,r,i,a)}getOutlines(){let e=this.#i,t=this.#t,n=this.#a,[r,i,a,o]=this.#e,s=new Float32Array((this.#f?.length??0)+2);for(let e=0,t=s.length-2;e<t;e+=2)s[e]=(this.#f[e]-r)/a,s[e+1]=(this.#f[e+1]-i)/o;if(s[s.length-2]=(this.#o-r)/a,s[s.length-1]=(this.#s-i)/o,isNaN(n[6])&&!this.isEmpty())return this.#b(s);let c=new Float32Array(this.#i.length+24+this.#t.length),l=e.length;for(let t=0;t<l;t+=2){if(isNaN(e[t])){c[t]=c[t+1]=NaN;continue}c[t]=e[t],c[t+1]=e[t+1]}l=this.#S(c,l);for(let e=t.length-6;e>=6;e-=6)for(let n=0;n<6;n+=2){if(isNaN(t[e+n])){c[l]=c[l+1]=NaN,l+=2;continue}c[l]=t[e+n],c[l+1]=t[e+n+1],l+=2}return this.#x(c,l),this.newFreeDrawOutline(c,s,this.#e,this.#u,this.#n,this.#r)}#b(e){let t=this.#a,[n,r,i,a]=this.#e,[o,s,c,l]=this.#g(),u=new Float32Array(36);return u.set([NaN,NaN,NaN,NaN,(t[2]-n)/i,(t[3]-r)/a,NaN,NaN,NaN,NaN,(t[4]-n)/i,(t[5]-r)/a,NaN,NaN,NaN,NaN,o,s,NaN,NaN,NaN,NaN,c,l,NaN,NaN,NaN,NaN,(t[16]-n)/i,(t[17]-r)/a,NaN,NaN,NaN,NaN,(t[14]-n)/i,(t[15]-r)/a],0),this.newFreeDrawOutline(u,e,this.#e,this.#u,this.#n,this.#r)}#x(e,t){let n=this.#t;return e.set([NaN,NaN,NaN,NaN,n[4],n[5]],t),t+=6}#S(e,t){let n=this.#a.subarray(4,6),r=this.#a.subarray(16,18),[i,a,o,s]=this.#e,[c,l,u,d]=this.#g();return e.set([NaN,NaN,NaN,NaN,(n[0]-i)/o,(n[1]-a)/s,NaN,NaN,NaN,NaN,c,l,NaN,NaN,NaN,NaN,u,d,NaN,NaN,NaN,NaN,(r[0]-i)/o,(r[1]-a)/s],t),t+=24}},wc=class extends q{#e;#t=new Float32Array(4);#n;#r;#i;#a;#o;constructor(e,t,n,r,i,a){super(),this.#o=e,this.#i=t,this.#e=n,this.#a=r,this.#n=i,this.#r=a,this.firstPoint=[NaN,NaN],this.lastPoint=[NaN,NaN],this.#s(a);let[o,s,c,l]=this.#t;for(let t=0,n=e.length;t<n;t+=2)e[t]=(e[t]-o)/c,e[t+1]=(e[t+1]-s)/l;for(let e=0,n=t.length;e<n;e+=2)t[e]=(t[e]-o)/c,t[e+1]=(t[e+1]-s)/l}toSVGPath(){let e=[`M${this.#o[4]} ${this.#o[5]}`];for(let t=6,n=this.#o.length;t<n;t+=6){if(isNaN(this.#o[t])){e.push(`L${this.#o[t+4]} ${this.#o[t+5]}`);continue}e.push(`C${this.#o[t]} ${this.#o[t+1]} ${this.#o[t+2]} ${this.#o[t+3]} ${this.#o[t+4]} ${this.#o[t+5]}`)}return e.push(`Z`),e.join(` `)}serialize([e,t,n,r],i){let a=n-e,o=r-t,s,c;switch(i){case 0:s=q._rescale(this.#o,e,r,a,-o),c=q._rescale(this.#i,e,r,a,-o);break;case 90:s=q._rescaleAndSwap(this.#o,e,t,a,o),c=q._rescaleAndSwap(this.#i,e,t,a,o);break;case 180:s=q._rescale(this.#o,n,t,-a,o),c=q._rescale(this.#i,n,t,-a,o);break;case 270:s=q._rescaleAndSwap(this.#o,n,r,-a,-o),c=q._rescaleAndSwap(this.#i,n,r,-a,-o);break}return{outline:Array.from(s),points:[Array.from(c)]}}#s(e){let t=this.#o,n=t[4],r=t[5],i=[n,r,n,r],a=n,o=r,s=n,c=r,l=e?Math.max:Math.min,u=new Float32Array(4);for(let e=6,d=t.length;e<d;e+=6){let d=t[e+4],f=t[e+5];isNaN(t[e])?(H.pointBoundingBox(d,f,i),o>f?(a=d,o=f):o===f&&(a=l(a,d)),c<f?(s=d,c=f):c===f&&(s=l(s,d))):(u[0]=u[1]=1/0,u[2]=u[3]=-1/0,H.bezierBoundingBox(n,r,...t.slice(e,e+6),u),H.rectBoundingBox(u[0],u[1],u[2],u[3],i),o>u[1]?(a=u[0],o=u[1]):o===u[1]&&(a=l(a,u[0])),c<u[3]?(s=u[2],c=u[3]):c===u[3]&&(s=l(s,u[2]))),n=d,r=f}let d=this.#t;d[0]=i[0]-this.#n,d[1]=i[1]-this.#n,d[2]=i[2]-i[0]+2*this.#n,d[3]=i[3]-i[1]+2*this.#n,this.firstPoint=[a,o],this.lastPoint=[s,c]}get box(){return this.#t}newOutliner(e,t,n,r,i,a=0){return new Cc(e,t,n,r,i,a)}getNewOutline(e,t){let[n,r,i,a]=this.#t,[o,s,c,l]=this.#e,u=i*c,d=a*l,f=n*c+o,p=r*l+s,m=this.newOutliner({x:this.#i[0]*u+f,y:this.#i[1]*d+p},this.#e,this.#a,e,this.#r,t??this.#n);for(let e=2;e<this.#i.length;e+=2)m.add({x:this.#i[e]*u+f,y:this.#i[e+1]*d+p});return m.getOutlines()}},Tc=class{#e;#t;#n;#r=[];#i=[];constructor(e,t=0,n=0,r=!0){let i=[1/0,1/0,-1/0,-1/0],a=10**-4;for(let{x:n,y:r,width:o,height:s}of e){let e=Math.floor((n-t)/a)*a,c=Math.ceil((n+o+t)/a)*a,l=Math.floor((r-t)/a)*a,u=Math.ceil((r+s+t)/a)*a,d=[e,l,u,!0],f=[c,l,u,!1];this.#r.push(d,f),H.rectBoundingBox(e,l,c,u,i)}let o=i[2]-i[0]+2*n,s=i[3]-i[1]+2*n,c=i[0]-n,l=i[1]-n,u=r?-1/0:1/0,d=1/0,f=this.#r.at(r?-1:-2),p=[f[0],f[2]];for(let e of this.#r){let[t,n,i,a]=e;!a&&r?n<d?(d=n,u=t):n===d&&(u=Math.max(u,t)):a&&!r&&(n<d?(d=n,u=t):n===d&&(u=Math.min(u,t))),e[0]=(t-c)/o,e[1]=(n-l)/s,e[2]=(i-l)/s}this.#e=new Float32Array([c,l,o,s]),this.#t=[u,d],this.#n=p}getOutlines(){this.#r.sort((e,t)=>e[0]-t[0]||e[1]-t[1]||e[2]-t[2]);let e=[];for(let t of this.#r)t[3]?(e.push(...this.#l(t)),this.#s(t)):(this.#c(t),e.push(...this.#l(t)));return this.#a(e)}#a(e){let t=[],n=new Set;for(let n of e){let[e,r,i]=n;t.push([e,r,n],[e,i,n])}t.sort((e,t)=>e[1]-t[1]||e[0]-t[0]);for(let e=0,r=t.length;e<r;e+=2){let r=t[e][2],i=t[e+1][2];r.push(i),i.push(r),n.add(r),n.add(i)}let r=[],i;for(;n.size>0;){let e=n.values().next().value,[t,a,o,s,c]=e;n.delete(e);let l=t,u=a;for(i=[t,o],r.push(i);;){let e;if(n.has(s))e=s;else if(n.has(c))e=c;else break;n.delete(e),[t,a,o,s,c]=e,l!==t&&(i.push(l,u,t,u===a?a:o),l=t),u=u===a?o:a}i.push(l,u)}return new Ec(r,this.#e,this.#t,this.#n)}#o(e){let t=this.#i,n=0,r=t.length-1;for(;n<=r;){let i=n+r>>1,a=t[i][0];if(a===e)return i;a<e?n=i+1:r=i-1}return r+1}#s([,e,t]){let n=this.#o(e);this.#i.splice(n,0,[e,t])}#c([,e,t]){let n=this.#o(e);for(let r=n;r<this.#i.length;r++){let[n,i]=this.#i[r];if(n!==e)break;if(n===e&&i===t){this.#i.splice(r,1);return}}for(let r=n-1;r>=0;r--){let[n,i]=this.#i[r];if(n!==e)break;if(n===e&&i===t){this.#i.splice(r,1);return}}}#l(e){let[t,n,r]=e,i=[[t,n,r]],a=this.#o(r);for(let e=0;e<a;e++){let[n,r]=this.#i[e];for(let e=0,a=i.length;e<a;e++){let[,o,s]=i[e];if(!(r<=o||s<=n)){if(o>=n){if(s>r)i[e][1]=r;else{if(a===1)return[];i.splice(e,1),e--,a--}continue}i[e][2]=n,s>r&&i.push([t,r,s])}}}return i}},Ec=class extends q{#e;#t;constructor(e,t,n,r){super(),this.#t=e,this.#e=t,this.firstPoint=n,this.lastPoint=r}toSVGPath(){let e=[];for(let t of this.#t){let[n,r]=t;e.push(`M${n} ${r}`);for(let i=2;i<t.length;i+=2){let a=t[i],o=t[i+1];a===n?(e.push(`V${o}`),r=o):o===r&&(e.push(`H${a}`),n=a)}e.push(`Z`)}return e.join(` `)}serialize([e,t,n,r],i){let a=[],o=n-e,s=r-t;for(let t of this.#t){let n=Array(t.length);for(let i=0;i<t.length;i+=2)n[i]=e+t[i]*o,n[i+1]=r-t[i+1]*s;a.push(n)}return a}get box(){return this.#e}get classNamesForOutlining(){return[`highlightOutline`]}},Dc=class extends Cc{newFreeDrawOutline(e,t,n,r,i,a){return new Oc(e,t,n,r,i,a)}},Oc=class extends wc{newOutliner(e,t,n,r,i,a=0){return new Dc(e,t,n,r,i,a)}},kc=class e extends ua{#e=null;#t=0;#n;#r=null;#i=null;#a=null;#o=null;#s=0;#c=null;#l=null;#u=null;#d=!1;#f=null;#p=null;#m=null;#h=``;#g;#_=``;static _defaultColor=null;static _defaultOpacity=1;static _defaultThickness=12;static _type=`highlight`;static _editorType=I.HIGHLIGHT;static _freeHighlightId=-1;static _freeHighlight=null;static _freeHighlightClipId=``;static get _keyboardManager(){let t=e.prototype;return B(this,`_keyboardManager`,new ia([[[`ArrowLeft`,`mac+ArrowLeft`],t._moveCaret,{args:[0]}],[[`ArrowRight`,`mac+ArrowRight`],t._moveCaret,{args:[1]}],[[`ArrowUp`,`mac+ArrowUp`],t._moveCaret,{args:[2]}],[[`ArrowDown`,`mac+ArrowDown`],t._moveCaret,{args:[3]}]]))}constructor(t){super({...t,name:`highlightEditor`}),this.color=t.color||e._defaultColor,this.#g=t.thickness||e._defaultThickness,this.opacity=t.opacity||e._defaultOpacity,this.#n=t.boxes||null,this.#_=t.methodOfCreation||``,this.#h=t.text||``,this._isDraggable=!1,this.defaultL10nId=`pdfjs-editor-highlight-editor`,t.highlightId>-1?(this.#d=!0,this.#y(t),this.#w()):this.#n&&(this.#e=t.anchorNode,this.#t=t.anchorOffset,this.#o=t.focusNode,this.#s=t.focusOffset,this.#v(),this.#w(),this.rotate(this.rotation)),this.annotationElementId||this._uiManager.a11yAlert(`pdfjs-editor-highlight-added-alert`)}get telemetryInitialData(){return{action:`added`,type:this.#d?`free_highlight`:`highlight`,color:this._uiManager.getNonHCMColorName(this.color),thickness:this.#g,methodOfCreation:this.#_}}get telemetryFinalData(){return{type:`highlight`,color:this._uiManager.getNonHCMColorName(this.color)}}static computeTelemetryFinalData(e){return{numberOfColors:e.get(`color`).size}}#v(){this.#l=new Tc(this.#n,.001).getOutlines(),[this.x,this.y,this.width,this.height]=this.#l.box,this.#a=new Tc(this.#n,.0025,.001,this._uiManager.direction===`ltr`).getOutlines();let{firstPoint:e}=this.#l;this.#f=[(e[0]-this.x)/this.width,(e[1]-this.y)/this.height];let{lastPoint:t}=this.#a;this.#p=[(t[0]-this.x)/this.width,(t[1]-this.y)/this.height]}#y({highlightOutlines:t,highlightId:n,clipPathId:r}){if(this.#l=t,this.#a=t.getNewOutline(this.#g/2+1.5,.0025),n>=0)this.#u=n,this.#r=r,this.parent.drawLayer.finalizeDraw(n,{bbox:t.box,path:{d:t.toSVGPath()}}),this.#m=this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:this.#a.box,path:{d:this.#a.toSVGPath()}},!0);else if(this.parent){let n=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(this.#u,{bbox:e.#T(this.#l.box,(n-this.rotation+360)%360),path:{d:t.toSVGPath()}}),this.parent.drawLayer.updateProperties(this.#m,{bbox:e.#T(this.#a.box,n),path:{d:this.#a.toSVGPath()}})}let[i,a,o,s]=t.box;switch(this.rotation){case 0:this.x=i,this.y=a,this.width=o,this.height=s;break;case 90:{let[e,t]=this.parentDimensions;this.x=a,this.y=1-i,this.width=o*t/e,this.height=s*e/t;break}case 180:this.x=1-i,this.y=1-a,this.width=o,this.height=s;break;case 270:{let[e,t]=this.parentDimensions;this.x=1-a,this.y=i,this.width=o*t/e,this.height=s*e/t;break}}let{firstPoint:c}=t;this.#f=[(c[0]-i)/o,(c[1]-a)/s];let{lastPoint:l}=this.#a;this.#p=[(l[0]-i)/o,(l[1]-a)/s]}static initialize(t,n){ua.initialize(t,n),e._defaultColor||=n.highlightColors?.values().next().value||`#fff066`}static updateDefaultParams(t,n){switch(t){case L.HIGHLIGHT_COLOR:e._defaultColor=n;break;case L.HIGHLIGHT_THICKNESS:e._defaultThickness=n;break}}translateInPage(e,t){}get toolbarPosition(){return this.#p}get commentButtonPosition(){return this.#f}updateParams(e,t){switch(e){case L.HIGHLIGHT_COLOR:this.#b(t);break;case L.HIGHLIGHT_THICKNESS:this.#x(t);break}}static get defaultPropertiesToUpdate(){return[[L.HIGHLIGHT_COLOR,e._defaultColor],[L.HIGHLIGHT_THICKNESS,e._defaultThickness]]}get propertiesToUpdate(){return[[L.HIGHLIGHT_COLOR,this.color||e._defaultColor],[L.HIGHLIGHT_THICKNESS,this.#g||e._defaultThickness],[L.HIGHLIGHT_FREE,this.#d]]}onUpdatedColor(){this.parent?.drawLayer.updateProperties(this.#u,{root:{fill:this.color,"fill-opacity":this.opacity}}),this.#i?.updateColor(this.color),super.onUpdatedColor()}#b(t){let n=(e,t)=>{this.color=e,this.opacity=t,this.onUpdatedColor()},r=this.color,i=this.opacity;this.addCommands({cmd:n.bind(this,t,e._defaultOpacity),undo:n.bind(this,r,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:L.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:`color_changed`,color:this._uiManager.getNonHCMColorName(t)},!0)}#x(e){let t=this.#g,n=e=>{this.#g=e,this.#S(e)};this.addCommands({cmd:n.bind(this,e),undo:n.bind(this,t),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:L.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:`thickness_changed`,thickness:e},!0)}get toolbarButtons(){return this._uiManager.highlightColors?[[`colorPicker`,this.#i=new Is({editor:this})]]:super.toolbarButtons}disableEditing(){super.disableEditing(),this.div.classList.toggle(`disabled`,!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle(`disabled`,!1)}fixAndSetPosition(){return super.fixAndSetPosition(this.#O())}getBaseTranslation(){return[0,0]}getRect(e,t){return super.getRect(e,t,this.#O())}onceAdded(e){this.annotationElementId||this.parent.addUndoableEditor(this),e&&this.div.focus()}remove(){this.#C(),this._reportTelemetry({action:`deleted`}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.#w(),this.isAttachedToDOM||this.parent.add(this)))}setParent(e){let t=!1;this.parent&&!e?this.#C():e&&(this.#w(e),t=!this.parent&&this.div?.classList.contains(`selectedEditor`)),super.setParent(e),this.show(this._isVisible),t&&this.select()}#S(e){this.#d&&(this.#y({highlightOutlines:this.#l.getNewOutline(e/2)}),this.fixAndSetPosition(),this.setDims())}#C(){this.#u===null||!this.parent||(this.parent.drawLayer.remove(this.#u),this.#u=null,this.parent.drawLayer.remove(this.#m),this.#m=null)}#w(e=this.parent){this.#u===null&&({id:this.#u,clipPathId:this.#r}=e.drawLayer.draw({bbox:this.#l.box,root:{viewBox:`0 0 1 1`,fill:this.color,"fill-opacity":this.opacity},rootClass:{highlight:!0,free:this.#d},path:{d:this.#l.toSVGPath()}},!1,!0),this.#m=e.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:this.#d},bbox:this.#a.box,path:{d:this.#a.toSVGPath()}},this.#d),this.#c&&(this.#c.style.clipPath=this.#r))}static#T([e,t,n,r],i){switch(i){case 90:return[1-t-r,e,r,n];case 180:return[1-e-n,1-t-r,n,r];case 270:return[t,1-e-n,r,n]}return[e,t,n,r]}rotate(t){let{drawLayer:n}=this.parent,r;this.#d?(t=(t-this.rotation+360)%360,r=e.#T(this.#l.box,t)):r=e.#T([this.x,this.y,this.width,this.height],t),n.updateProperties(this.#u,{bbox:r,root:{"data-main-rotation":t}}),n.updateProperties(this.#m,{bbox:e.#T(this.#a.box,t),root:{"data-main-rotation":t}})}render(){if(this.div)return this.div;let e=super.render();this.#h&&(e.setAttribute(`aria-label`,this.#h),e.setAttribute(`role`,`mark`)),this.#d?e.classList.add(`free`):this.div.addEventListener(`keydown`,this.#E.bind(this),{signal:this._uiManager._signal});let t=this.#c=document.createElement(`div`);return e.append(t),t.setAttribute(`aria-hidden`,`true`),t.className=`internal`,t.style.clipPath=this.#r,this.setDims(),$i(this,this.#c,[`pointerover`,`pointerleave`]),this.enableEditing(),e}pointerover(){this.isSelected||this.parent?.drawLayer.updateProperties(this.#m,{rootClass:{hovered:!0}})}pointerleave(){this.isSelected||this.parent?.drawLayer.updateProperties(this.#m,{rootClass:{hovered:!1}})}#E(t){e._keyboardManager.exec(this,t)}_moveCaret(e){switch(this.parent.unselect(this),e){case 0:case 2:this.#D(!0);break;case 1:case 3:this.#D(!1);break}}#D(e){if(!this.#e)return;let t=window.getSelection();e?t.setPosition(this.#e,this.#t):t.setPosition(this.#o,this.#s)}select(){super.select(),this.#m&&this.parent?.drawLayer.updateProperties(this.#m,{rootClass:{hovered:!1,selected:!0}})}unselect(){super.unselect(),this.#m&&(this.parent?.drawLayer.updateProperties(this.#m,{rootClass:{selected:!1}}),this.#d||this.#D(!1))}get _mustFixPosition(){return!this.#d}show(e=this._isVisible){super.show(e),this.parent&&(this.parent.drawLayer.updateProperties(this.#u,{rootClass:{hidden:!e}}),this.parent.drawLayer.updateProperties(this.#m,{rootClass:{hidden:!e}}))}#O(){return this.#d?this.rotation:0}#k(){if(this.#d)return null;let[e,t]=this.pageDimensions,[n,r]=this.pageTranslation,i=this.#n,a=new Float32Array(i.length*8),o=0;for(let{x:s,y:c,width:l,height:u}of i){let i=s*e+n,d=(1-c)*t+r;a[o]=a[o+4]=i,a[o+1]=a[o+3]=d,a[o+2]=a[o+6]=i+l*e,a[o+5]=a[o+7]=d-u*t,o+=8}return a}#A(e){return this.#l.serialize(e,this.#O())}static startHighlighting(e,t,{target:n,x:r,y:i}){let{x:a,y:o,width:s,height:c}=n.getBoundingClientRect(),l=new AbortController,u=e.combinedSignal(l),d=t=>{l.abort(),this.#M(e,t)};window.addEventListener(`blur`,d,{signal:u}),window.addEventListener(`pointerup`,d,{signal:u}),window.addEventListener(`pointerdown`,W,{capture:!0,passive:!1,signal:u}),window.addEventListener(`contextmenu`,U,{signal:u}),n.addEventListener(`pointermove`,this.#j.bind(this,e),{signal:u}),this._freeHighlight=new Dc({x:r,y:i},[a,o,s,c],e.scale,this._defaultThickness/2,t,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=e.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:`0 0 1 1`,fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0)}static#j(e,t){this._freeHighlight.add(t)&&e.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})}static#M(e,t){this._freeHighlight.isEmpty()?e.drawLayer.remove(this._freeHighlightId):e.createAndAddNewEditor(t,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:`main_toolbar`}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=``}static async deserialize(e,t,n){let r=null;if(e instanceof mc){let{data:{quadPoints:t,rect:n,rotation:i,id:a,color:o,opacity:s,popupRef:c,richText:l,contentsObj:u,creationDate:d,modificationDate:f},parent:{page:{pageNumber:p}}}=e;r=e={annotationType:I.HIGHLIGHT,color:Array.from(o),opacity:s,quadPoints:t,boxes:null,pageIndex:p-1,rect:n.slice(0),rotation:i,annotationElementId:a,id:a,deleted:!1,popupRef:c,richText:l,comment:u?.str||null,creationDate:d,modificationDate:f}}else if(e instanceof pc){let{data:{inkLists:t,rect:n,rotation:i,id:a,color:o,borderStyle:{rawWidth:s},popupRef:c,richText:l,contentsObj:u,creationDate:d,modificationDate:f},parent:{page:{pageNumber:p}}}=e;r=e={annotationType:I.HIGHLIGHT,color:Array.from(o),thickness:s,inkLists:t,boxes:null,pageIndex:p-1,rect:n.slice(0),rotation:i,annotationElementId:a,id:a,deleted:!1,popupRef:c,richText:l,comment:u?.str||null,creationDate:d,modificationDate:f}}let{color:i,quadPoints:a,inkLists:o,opacity:s}=e,c=await super.deserialize(e,t,n);c.color=H.makeHexColor(...i),c.opacity=s||1,o&&(c.#g=e.thickness),c._initialData=r,e.comment&&c.setCommentData(e);let[l,u]=c.pageDimensions,[d,f]=c.pageTranslation;if(a){let e=c.#n=[];for(let t=0;t<a.length;t+=8)e.push({x:(a[t]-d)/l,y:1-(a[t+1]-f)/u,width:(a[t+2]-a[t])/l,height:(a[t+1]-a[t+5])/u});c.#v(),c.#w(),c.rotate(c.rotation)}else if(o){c.#d=!0;let e=o[0],n={x:e[0]-d,y:u-(e[1]-f)},r=new Dc(n,[0,0,l,u],1,c.#g/2,!0,.001);for(let t=0,i=e.length;t<i;t+=2)n.x=e[t]-d,n.y=u-(e[t+1]-f),r.add(n);let{id:i,clipPathId:a}=t.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:`0 0 1 1`,fill:c.color,"fill-opacity":c._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:r.toSVGPath()}},!0,!0);c.#y({highlightOutlines:r.getOutlines(),highlightId:i,clipPathId:a}),c.#w(),c.rotate(c.parentRotation)}return c}serialize(e=!1){if(this.isEmpty()||e)return null;if(this.deleted)return this.serializeDeleted();let t=ua._colorManager.convert(this._uiManager.getNonHCMColor(this.color)),n=super.serialize(e);return Object.assign(n,{color:t,opacity:this.opacity,thickness:this.#g,quadPoints:this.#k(),outlines:this.#A(n.rect)}),this.addComment(n),this.annotationElementId&&!this.#N(n)?null:(n.id=this.annotationElementId,n)}#N(e){let{color:t}=this._initialData;return this.hasEditedComment||e.color.some((e,n)=>e!==t[n])}renderAnnotationElement(e){return this.deleted?(e.hide(),null):(e.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}static canCreateNewEmptyEditor(){return!1}},Ac=class{#e=Object.create(null);updateProperty(e,t){this[e]=t,this.updateSVGProperty(e,t)}updateProperties(e){if(e)for(let[t,n]of Object.entries(e))t.startsWith(`_`)||this.updateProperty(t,n)}updateSVGProperty(e,t){this.#e[e]=t}toSVGProperties(){let e=this.#e;return this.#e=Object.create(null),{root:e}}reset(){this.#e=Object.create(null)}updateAll(e=this){this.updateProperties(e)}clone(){Wr(`Not implemented`)}},jc=class e extends ua{#e=null;#t;_colorPicker=null;_drawId=null;static _currentDrawId=-1;static _currentParent=null;static#n=null;static#r=null;static#i=null;static _INNER_MARGIN=3;constructor(e){super(e),this.#t=e.mustBeCommitted||!1,this._addOutlines(e)}onUpdatedColor(){this._colorPicker?.update(this.color),super.onUpdatedColor()}_addOutlines(e){e.drawOutlines&&(this.#a(e),this.#c())}#a({drawOutlines:e,drawId:t,drawingOptions:n}){this.#e=e,this._drawingOptions||=n,this.annotationElementId||this._uiManager.a11yAlert(`pdfjs-editor-${this.editorType}-added-alert`),t>=0?(this._drawId=t,this.parent.drawLayer.finalizeDraw(t,e.defaultProperties)):this._drawId=this.#o(e,this.parent),this.#d(e.box)}#o(t,n){let{id:r}=n.drawLayer.draw(e._mergeSVGProperties(this._drawingOptions.toSVGProperties(),t.defaultSVGProperties),!1,!1);return r}static _mergeSVGProperties(e,t){let n=new Set(Object.keys(e));for(let[r,i]of Object.entries(t))n.has(r)?Object.assign(e[r],i):e[r]=i;return e}static getDefaultDrawingOptions(e){Wr(`Not implemented`)}static get typesMap(){Wr(`Not implemented`)}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(t,n){let r=this.typesMap.get(t);r&&this._defaultDrawingOptions.updateProperty(r,n),this._currentParent&&(e.#n.updateProperty(r,n),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(e,t){let n=this.constructor.typesMap.get(e);n&&this._updateProperty(e,n,t)}static get defaultPropertiesToUpdate(){let e=[],t=this._defaultDrawingOptions;for(let[n,r]of this.typesMap)e.push([n,t[r]]);return e}get propertiesToUpdate(){let e=[],{_drawingOptions:t}=this;for(let[n,r]of this.constructor.typesMap)e.push([n,t[r]]);return e}_updateProperty(e,t,n){let r=this._drawingOptions,i=r[t],a=n=>{r.updateProperty(t,n);let i=this.#e.updateProperty(t,n);i&&this.#d(i),this.parent?.drawLayer.updateProperties(this._drawId,r.toSVGProperties()),e===this.colorType&&this.onUpdatedColor()};this.addCommands({cmd:a.bind(this,n),undo:a.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:e,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){this.parent?.drawLayer.updateProperties(this._drawId,e._mergeSVGProperties(this.#e.getPathResizingSVGProperties(this.#u()),{bbox:this.#f()}))}_onResized(){this.parent?.drawLayer.updateProperties(this._drawId,e._mergeSVGProperties(this.#e.getPathResizedSVGProperties(this.#u()),{bbox:this.#f()}))}_onTranslating(e,t){this.parent?.drawLayer.updateProperties(this._drawId,{bbox:this.#f()})}_onTranslated(){this.parent?.drawLayer.updateProperties(this._drawId,e._mergeSVGProperties(this.#e.getPathTranslatedSVGProperties(this.#u(),this.parentDimensions),{bbox:this.#f()}))}_onStartDragging(){this.parent?.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){this.parent?.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle(`disabled`,!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle(`disabled`,!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(e){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,this.#t&&(this.#t=!1,this.commit(),this.parent.setSelected(this),e&&this.isOnScreen&&this.div.focus())}remove(){this.#s(),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.#c(),this.#d(this.#e.box),this.isAttachedToDOM||this.parent.add(this)))}setParent(e){let t=!1;this.parent&&!e?(this._uiManager.removeShouldRescale(this),this.#s()):e&&(this._uiManager.addShouldRescale(this),this.#c(e),t=!this.parent&&this.div?.classList.contains(`selectedEditor`)),super.setParent(e),t&&this.select()}#s(){this._drawId===null||!this.parent||(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())}#c(e=this.parent){if(!(this._drawId!==null&&this.parent===e)){if(this._drawId!==null){this.parent.drawLayer.updateParent(this._drawId,e.drawLayer);return}this._drawingOptions.updateAll(),this._drawId=this.#o(this.#e,e)}}#l([e,t,n,r]){let{parentDimensions:[i,a],rotation:o}=this;switch(o){case 90:return[t,1-e,n*(a/i),r*(i/a)];case 180:return[1-e,1-t,n,r];case 270:return[1-t,e,n*(a/i),r*(i/a)];default:return[e,t,n,r]}}#u(){let{x:e,y:t,width:n,height:r,parentDimensions:[i,a],rotation:o}=this;switch(o){case 90:return[1-t,e,n*(i/a),r*(a/i)];case 180:return[1-e,1-t,n,r];case 270:return[t,1-e,n*(i/a),r*(a/i)];default:return[e,t,n,r]}}#d(e){[this.x,this.y,this.width,this.height]=this.#l(e),this.div&&(this.fixAndSetPosition(),this.setDims()),this._onResized()}#f(){let{x:e,y:t,width:n,height:r,rotation:i,parentRotation:a,parentDimensions:[o,s]}=this;switch((i*4+a)/90){case 1:return[1-t-r,e,r,n];case 2:return[1-e-n,1-t-r,n,r];case 3:return[t,1-e-n,r,n];case 4:return[e,t-n*(o/s),r*(s/o),n*(o/s)];case 5:return[1-t,e,n*(o/s),r*(s/o)];case 6:return[1-e-r*(s/o),1-t,r*(s/o),n*(o/s)];case 7:return[t-n*(o/s),1-e-r*(s/o),n*(o/s),r*(s/o)];case 8:return[e-n,t-r,n,r];case 9:return[1-t,e-n,r,n];case 10:return[1-e,1-t,n,r];case 11:return[t-r,1-e,r,n];case 12:return[e-r*(s/o),t,r*(s/o),n*(o/s)];case 13:return[1-t-n*(o/s),e-r*(s/o),n*(o/s),r*(s/o)];case 14:return[1-e,1-t-n*(o/s),r*(s/o),n*(o/s)];case 15:return[t,1-e,n*(o/s),r*(s/o)];default:return[e,t,n,r]}}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,e._mergeSVGProperties({bbox:this.#f()},this.#e.updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&this.#d(this.#e.updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;let e,t;this._isCopy&&(e=this.x,t=this.y);let n=super.render();n.classList.add(`draw`);let r=document.createElement(`div`);return n.append(r),r.setAttribute(`aria-hidden`,`true`),r.className=`internal`,this.setDims(),this._uiManager.addShouldRescale(this),this.disableEditing(),this._isCopy&&this._moveAfterPaste(e,t),n}static createDrawerInstance(e,t,n,r,i){Wr(`Not implemented`)}static startDrawing(t,n,r,i){let{target:a,offsetX:o,offsetY:s,pointerId:c,pointerType:l}=i;if(ea.isInitializedAndDifferentPointerType(l))return;let{viewport:{rotation:u}}=t,{width:d,height:f}=a.getBoundingClientRect(),p=e.#r=new AbortController,m=t.combinedSignal(p);if(ea.setPointer(l,c),window.addEventListener(`pointerup`,e=>{ea.isSamePointerIdOrRemove(e.pointerId)&&this._endDraw(e)},{signal:m}),window.addEventListener(`pointercancel`,e=>{ea.isSamePointerIdOrRemove(e.pointerId)&&this._currentParent.endDrawingSession()},{signal:m}),window.addEventListener(`pointerdown`,t=>{ea.isSamePointerType(t.pointerType)&&(ea.initializeAndAddPointerId(t.pointerId),e.#n.isCancellable()&&(e.#n.removeLastElement(),e.#n.isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:m}),window.addEventListener(`contextmenu`,U,{signal:m}),a.addEventListener(`pointermove`,this._drawMove.bind(this),{signal:m}),a.addEventListener(`touchmove`,e=>{ea.isSameTimeStamp(e.timeStamp)&&W(e)},{signal:m}),t.toggleDrawing(),n._editorUndoBar?.hide(),e.#n){t.drawLayer.updateProperties(this._currentDrawId,e.#n.startNew(o,s,d,f,u));return}n.updateUIForDefaultProperties(this),e.#n=this.createDrawerInstance(o,s,d,f,u),e.#i=this.getDefaultDrawingOptions(),this._currentParent=t,{id:this._currentDrawId}=t.drawLayer.draw(this._mergeSVGProperties(e.#i.toSVGProperties(),e.#n.defaultSVGProperties),!0,!1)}static _drawMove(t){if(ea.isSameTimeStamp(t.timeStamp),!e.#n)return;let{offsetX:n,offsetY:r,pointerId:i}=t;if(ea.isSamePointerId(i)){if(ea.isUsingMultiplePointers()){this._endDraw(t);return}this._currentParent.drawLayer.updateProperties(this._currentDrawId,e.#n.add(n,r)),ea.setTimeStamp(t.timeStamp),W(t)}}static _cleanup(t){t&&(this._currentDrawId=-1,this._currentParent=null,e.#n=null,e.#i=null,ea.clearPointerType(),ea.clearTimeStamp()),e.#r&&(e.#r.abort(),e.#r=null,ea.clearPointerIds())}static _endDraw(t){let n=this._currentParent;if(n){if(n.toggleDrawing(!0),this._cleanup(!1),t?.target===n.div&&n.drawLayer.updateProperties(this._currentDrawId,e.#n.end(t.offsetX,t.offsetY)),this.supportMultipleDrawings){let t=e.#n,r=this._currentDrawId,i=t.getLastElement();n.addCommands({cmd:()=>{n.drawLayer.updateProperties(r,t.setLastElement(i))},undo:()=>{n.drawLayer.updateProperties(r,t.removeLastElement())},mustExec:!1,type:L.DRAW_STEP});return}this.endDrawing(!1)}}static endDrawing(t){let n=this._currentParent;if(!n)return null;if(n.toggleDrawing(!0),n.cleanUndoStack(L.DRAW_STEP),!e.#n.isEmpty()){let{pageDimensions:[r,i],scale:a}=n,o=n.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:e.#n.getOutlines(r*a,i*a,a,this._INNER_MARGIN),drawingOptions:e.#i,mustBeCommitted:!t});return this._cleanup(!0),o}return n.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(e){}static deserializeDraw(e,t,n,r,i,a){Wr(`Not implemented`)}static async deserialize(e,t,n){let{rawDims:{pageWidth:r,pageHeight:i,pageX:a,pageY:o}}=t.viewport,s=this.deserializeDraw(a,o,r,i,this._INNER_MARGIN,e),c=await super.deserialize(e,t,n);return c.createDrawingOptions(e),c.#a({drawOutlines:s}),c.#c(),c.onScaleChanging(),c.rotate(),c}serializeDraw(e){let[t,n]=this.pageTranslation,[r,i]=this.pageDimensions;return this.#e.serialize([t,n,r,i],e)}renderAnnotationElement(e){return e.updateEdited({rect:this.getPDFRect()}),null}static canCreateNewEmptyEditor(){return!1}},Mc=class{#e=new Float64Array(6);#t;#n;#r;#i;#a;#o=``;#s=0;#c=new Nc;#l;#u;constructor(e,t,n,r,i,a){this.#l=n,this.#u=r,this.#r=i,this.#i=a,[e,t]=this.#d(e,t);let o=this.#t=[NaN,NaN,NaN,NaN,e,t];this.#a=[e,t],this.#n=[{line:o,points:this.#a}],this.#e.set(o,0)}updateProperty(e,t){e===`stroke-width`&&(this.#i=t)}#d(e,t){return q._normalizePoint(e,t,this.#l,this.#u,this.#r)}isEmpty(){return!this.#n||this.#n.length===0}isCancellable(){return this.#a.length<=10}add(e,t){[e,t]=this.#d(e,t);let[n,r,i,a]=this.#e.subarray(2,6),o=e-i,s=t-a;return Math.hypot(this.#l*o,this.#u*s)<=2?null:(this.#a.push(e,t),isNaN(n)?(this.#e.set([i,a,e,t],2),this.#t.push(NaN,NaN,NaN,NaN,e,t),{path:{d:this.toSVGPath()}}):(isNaN(this.#e[0])&&this.#t.splice(6,6),this.#e.set([n,r,i,a,e,t],0),this.#t.push(...q.createBezierPoints(n,r,i,a,e,t)),{path:{d:this.toSVGPath()}}))}end(e,t){return this.add(e,t)||(this.#a.length===2?{path:{d:this.toSVGPath()}}:null)}startNew(e,t,n,r,i){this.#l=n,this.#u=r,this.#r=i,[e,t]=this.#d(e,t);let a=this.#t=[NaN,NaN,NaN,NaN,e,t];this.#a=[e,t];let o=this.#n.at(-1);return o&&(o.line=new Float32Array(o.line),o.points=new Float32Array(o.points)),this.#n.push({line:a,points:this.#a}),this.#e.set(a,0),this.#s=0,this.toSVGPath(),null}getLastElement(){return this.#n.at(-1)}setLastElement(e){return this.#n?(this.#n.push(e),this.#t=e.line,this.#a=e.points,this.#s=0,{path:{d:this.toSVGPath()}}):this.#c.setLastElement(e)}removeLastElement(){if(!this.#n)return this.#c.removeLastElement();this.#n.pop(),this.#o=``;for(let e=0,t=this.#n.length;e<t;e++){let{line:t,points:n}=this.#n[e];this.#t=t,this.#a=n,this.#s=0,this.toSVGPath()}return{path:{d:this.#o}}}toSVGPath(){let e=q.svgRound(this.#t[4]),t=q.svgRound(this.#t[5]);if(this.#a.length===2)return this.#o=`${this.#o} M ${e} ${t} Z`,this.#o;if(this.#a.length<=6){let n=this.#o.lastIndexOf(`M`);this.#o=`${this.#o.slice(0,n)} M ${e} ${t}`,this.#s=6}if(this.#a.length===4){let e=q.svgRound(this.#t[10]),t=q.svgRound(this.#t[11]);return this.#o=`${this.#o} L ${e} ${t}`,this.#s=12,this.#o}let n=[];this.#s===0&&(n.push(`M ${e} ${t}`),this.#s=6);for(let e=this.#s,t=this.#t.length;e<t;e+=6){let[t,r,i,a,o,s]=this.#t.slice(e,e+6).map(q.svgRound);n.push(`C${t} ${r} ${i} ${a} ${o} ${s}`)}return this.#o+=n.join(` `),this.#s=this.#t.length,this.#o}getOutlines(e,t,n,r){let i=this.#n.at(-1);return i.line=new Float32Array(i.line),i.points=new Float32Array(i.points),this.#c.build(this.#n,e,t,n,this.#r,this.#i,r),this.#e=null,this.#t=null,this.#n=null,this.#o=null,this.#c}get defaultSVGProperties(){return{root:{viewBox:`0 0 10000 10000`},rootClass:{draw:!0},bbox:[0,0,1,1]}}},Nc=class extends q{#e;#t=0;#n;#r;#i;#a;#o;#s;#c;build(e,t,n,r,i,a,o){this.#i=t,this.#a=n,this.#o=r,this.#s=i,this.#c=a,this.#n=o??0,this.#r=e,this.#d()}get thickness(){return this.#c}setLastElement(e){return this.#r.push(e),{path:{d:this.toSVGPath()}}}removeLastElement(){return this.#r.pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){let e=[];for(let{line:t}of this.#r){if(e.push(`M${q.svgRound(t[4])} ${q.svgRound(t[5])}`),t.length===6){e.push(`Z`);continue}if(t.length===12&&isNaN(t[6])){e.push(`L${q.svgRound(t[10])} ${q.svgRound(t[11])}`);continue}for(let n=6,r=t.length;n<r;n+=6){let[r,i,a,o,s,c]=t.subarray(n,n+6).map(q.svgRound);e.push(`C${r} ${i} ${a} ${o} ${s} ${c}`)}}return e.join(``)}serialize([e,t,n,r],i){let a=[],o=[],[s,c,l,u]=this.#u(),d,f,p,m,h,g,_,v,y;switch(this.#s){case 0:y=q._rescale,d=e,f=t+r,p=n,m=-r,h=e+s*n,g=t+(1-c-u)*r,_=e+(s+l)*n,v=t+(1-c)*r;break;case 90:y=q._rescaleAndSwap,d=e,f=t,p=n,m=r,h=e+c*n,g=t+s*r,_=e+(c+u)*n,v=t+(s+l)*r;break;case 180:y=q._rescale,d=e+n,f=t,p=-n,m=r,h=e+(1-s-l)*n,g=t+c*r,_=e+(1-s)*n,v=t+(c+u)*r;break;case 270:y=q._rescaleAndSwap,d=e+n,f=t+r,p=-n,m=-r,h=e+(1-c-u)*n,g=t+(1-s-l)*r,_=e+(1-c)*n,v=t+(1-s)*r;break}for(let{line:e,points:t}of this.#r)a.push(y(e,d,f,p,m,i?Array(e.length):null)),o.push(y(t,d,f,p,m,i?Array(t.length):null));return{lines:a,points:o,rect:[h,g,_,v]}}static deserialize(e,t,n,r,i,{paths:{lines:a,points:o},rotation:s,thickness:c}){let l=[],u,d,f,p,m;switch(s){case 0:m=q._rescale,u=-e/n,d=t/r+1,f=1/n,p=-1/r;break;case 90:m=q._rescaleAndSwap,u=-t/r,d=-e/n,f=1/r,p=1/n;break;case 180:m=q._rescale,u=e/n+1,d=-t/r,f=-1/n,p=1/r;break;case 270:m=q._rescaleAndSwap,u=t/r+1,d=e/n+1,f=-1/r,p=-1/n;break}if(!a){a=[];for(let e of o){let t=e.length;if(t===2){a.push(new Float32Array([NaN,NaN,NaN,NaN,e[0],e[1]]));continue}if(t===4){a.push(new Float32Array([NaN,NaN,NaN,NaN,e[0],e[1],NaN,NaN,NaN,NaN,e[2],e[3]]));continue}let n=new Float32Array(3*(t-2));a.push(n);let[r,i,o,s]=e.subarray(0,4);n.set([NaN,NaN,NaN,NaN,r,i],0);for(let a=4;a<t;a+=2){let t=e[a],c=e[a+1];n.set(q.createBezierPoints(r,i,o,s,t,c),(a-2)*3),[r,i,o,s]=[o,s,t,c]}}}for(let e=0,t=a.length;e<t;e++)l.push({line:m(a[e].map(e=>e??NaN),u,d,f,p),points:m(o[e].map(e=>e??NaN),u,d,f,p)});let h=new this.prototype.constructor;return h.build(l,n,r,1,s,c,i),h}#l(e=this.#c){let t=this.#n+e/2*this.#o;return this.#s%180==0?[t/this.#i,t/this.#a]:[t/this.#a,t/this.#i]}#u(){let[e,t,n,r]=this.#e,[i,a]=this.#l(0);return[e+i,t+a,n-2*i,r-2*a]}#d(){let e=this.#e=new Float32Array([1/0,1/0,-1/0,-1/0]);for(let{line:t}of this.#r){if(t.length<=12){for(let n=4,r=t.length;n<r;n+=6)H.pointBoundingBox(t[n],t[n+1],e);continue}let n=t[4],r=t[5];for(let i=6,a=t.length;i<a;i+=6){let[a,o,s,c,l,u]=t.subarray(i,i+6);H.bezierBoundingBox(n,r,a,o,s,c,l,u,e),n=l,r=u}}let[t,n]=this.#l();e[0]=mi(e[0]-t,0,1),e[1]=mi(e[1]-n,0,1),e[2]=mi(e[2]+t,0,1),e[3]=mi(e[3]+n,0,1),e[2]-=e[0],e[3]-=e[1]}get box(){return this.#e}updateProperty(e,t){return e===`stroke-width`?this.#f(t):null}#f(e){let[t,n]=this.#l();this.#c=e;let[r,i]=this.#l(),[a,o]=[r-t,i-n],s=this.#e;return s[0]-=a,s[1]-=o,s[2]+=2*a,s[3]+=2*o,s}updateParentDimensions([e,t],n){let[r,i]=this.#l();this.#i=e,this.#a=t,this.#o=n;let[a,o]=this.#l(),s=a-r,c=o-i,l=this.#e;return l[0]-=s,l[1]-=c,l[2]+=2*s,l[3]+=2*c,l}updateRotation(e){return this.#t=e,{path:{transform:this.rotationTransform}}}get viewBox(){return this.#e.map(q.svgRound).join(` `)}get defaultProperties(){let[e,t]=this.#e;return{root:{viewBox:this.viewBox},path:{"transform-origin":`${q.svgRound(e)} ${q.svgRound(t)}`}}}get rotationTransform(){let[,,e,t]=this.#e,n=0,r=0,i=0,a=0,o=0,s=0;switch(this.#t){case 90:r=t/e,i=-e/t,o=e;break;case 180:n=-1,a=-1,o=e,s=t;break;case 270:r=-t/e,i=e/t,s=t;break;default:return``}return`matrix(${n} ${r} ${i} ${a} ${q.svgRound(o)} ${q.svgRound(s)})`}getPathResizingSVGProperties([e,t,n,r]){let[i,a]=this.#l(),[o,s,c,l]=this.#e;if(Math.abs(c-i)<=q.PRECISION||Math.abs(l-a)<=q.PRECISION){let i=e+n/2-(o+c/2),a=t+r/2-(s+l/2);return{path:{"transform-origin":`${q.svgRound(e)} ${q.svgRound(t)}`,transform:`${this.rotationTransform} translate(${i} ${a})`}}}let u=(n-2*i)/(c-2*i),d=(r-2*a)/(l-2*a),f=c/n,p=l/r;return{path:{"transform-origin":`${q.svgRound(o)} ${q.svgRound(s)}`,transform:`${this.rotationTransform} scale(${f} ${p}) translate(${q.svgRound(i)} ${q.svgRound(a)}) scale(${u} ${d}) translate(${q.svgRound(-i)} ${q.svgRound(-a)})`}}}getPathResizedSVGProperties([e,t,n,r]){let[i,a]=this.#l(),o=this.#e,[s,c,l,u]=o;if(o[0]=e,o[1]=t,o[2]=n,o[3]=r,Math.abs(l-i)<=q.PRECISION||Math.abs(u-a)<=q.PRECISION){let i=e+n/2-(s+l/2),a=t+r/2-(c+u/2);for(let{line:e,points:t}of this.#r)q._translate(e,i,a,e),q._translate(t,i,a,t);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${q.svgRound(e)} ${q.svgRound(t)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}let d=(n-2*i)/(l-2*i),f=(r-2*a)/(u-2*a),p=-d*(s+i)+e+i,m=-f*(c+a)+t+a;if(d!==1||f!==1||p!==0||m!==0)for(let{line:e,points:t}of this.#r)q._rescale(e,p,m,d,f,e),q._rescale(t,p,m,d,f,t);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${q.svgRound(e)} ${q.svgRound(t)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([e,t],n){let[r,i]=n,a=this.#e,o=e-a[0],s=t-a[1];if(this.#i===r&&this.#a===i)for(let{line:e,points:t}of this.#r)q._translate(e,o,s,e),q._translate(t,o,s,t);else{let e=this.#i/r,t=this.#a/i;this.#i=r,this.#a=i;for(let{line:n,points:r}of this.#r)q._rescale(n,o,s,e,t,n),q._rescale(r,o,s,e,t,r);a[2]*=e,a[3]*=t}return a[0]=e,a[1]=t,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":`${q.svgRound(e)} ${q.svgRound(t)}`}}}get defaultSVGProperties(){let e=this.#e;return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":`${q.svgRound(e[0])} ${q.svgRound(e[1])}`,transform:this.rotationTransform||null},bbox:e}}},Pc=class e extends Ac{constructor(e){super(),this._viewParameters=e,super.updateProperties({fill:`none`,stroke:ua._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":`round`,"stroke-linejoin":`round`,"stroke-miterlimit":10})}updateSVGProperty(e,t){e===`stroke-width`&&(t??=this[`stroke-width`],t*=this._viewParameters.realScale),super.updateSVGProperty(e,t)}clone(){let t=new e(this._viewParameters);return t.updateAll(this),t}},Fc=class e extends jc{static _type=`ink`;static _editorType=I.INK;static _defaultDrawingOptions=null;constructor(e){super({...e,name:`inkEditor`}),this._willKeepAspectRatio=!0,this.defaultL10nId=`pdfjs-editor-ink-editor`}static initialize(e,t){ua.initialize(e,t),this._defaultDrawingOptions=new Pc(t.viewParameters)}static getDefaultDrawingOptions(e){let t=this._defaultDrawingOptions.clone();return t.updateProperties(e),t}static get supportMultipleDrawings(){return!0}static get typesMap(){return B(this,`typesMap`,new Map([[L.INK_THICKNESS,`stroke-width`],[L.INK_COLOR,`stroke`],[L.INK_OPACITY,`stroke-opacity`]]))}static createDrawerInstance(e,t,n,r,i){return new Mc(e,t,n,r,i,this._defaultDrawingOptions[`stroke-width`])}static deserializeDraw(e,t,n,r,i,a){return Nc.deserialize(e,t,n,r,i,a)}static async deserialize(e,t,n){let r=null;if(e instanceof pc){let{data:{inkLists:t,rect:n,rotation:i,id:a,color:o,opacity:s,borderStyle:{rawWidth:c},popupRef:l,richText:u,contentsObj:d,creationDate:f,modificationDate:p},parent:{page:{pageNumber:m}}}=e;r=e={annotationType:I.INK,color:Array.from(o),thickness:c,opacity:s,paths:{points:t},boxes:null,pageIndex:m-1,rect:n.slice(0),rotation:i,annotationElementId:a,id:a,deleted:!1,popupRef:l,richText:u,comment:d?.str||null,creationDate:f,modificationDate:p}}let i=await super.deserialize(e,t,n);return i._initialData=r,e.comment&&i.setCommentData(e),i}get toolbarButtons(){return this._colorPicker||=new Ls(this),[[`colorPicker`,this._colorPicker]]}get colorType(){return L.INK_COLOR}get color(){return this._drawingOptions.stroke}get opacity(){return this._drawingOptions[`stroke-opacity`]}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();let{_drawId:e,_drawingOptions:t,parent:n}=this;t.updateSVGProperty(`stroke-width`),n.drawLayer.updateProperties(e,t.toSVGProperties())}static onScaleChangingWhenDrawing(){let e=this._currentParent;e&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty(`stroke-width`),e.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:t,thickness:n,opacity:r}){this._drawingOptions=e.getDefaultDrawingOptions({stroke:H.makeHexColor(...t),"stroke-width":n,"stroke-opacity":r})}serialize(e=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();let{lines:t,points:n}=this.serializeDraw(e),{_drawingOptions:{stroke:r,"stroke-opacity":i,"stroke-width":a}}=this,o=Object.assign(super.serialize(e),{color:ua._colorManager.convert(r),opacity:i,thickness:a,paths:{lines:t,points:n}});return this.addComment(o),e?(o.isCopy=!0,o):this.annotationElementId&&!this.#e(o)?null:(o.id=this.annotationElementId,o)}#e(e){let{color:t,thickness:n,opacity:r,pageIndex:i}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized||e.color.some((e,n)=>e!==t[n])||e.thickness!==n||e.opacity!==r||e.pageIndex!==i}renderAnnotationElement(e){if(this.deleted)return e.hide(),null;let{points:t,rect:n}=this.serializeDraw(!1);return e.updateEdited({rect:n,thickness:this._drawingOptions[`stroke-width`],points:t,popup:this.comment}),null}},Ic=class extends Nc{toSVGPath(){let e=super.toSVGPath();return e.endsWith(`Z`)||(e+=`Z`),e}},Lc=8,Rc=3,zc=class{static#e={maxDim:512,sigmaSFactor:.02,sigmaR:25,kernelSize:16};static#t(e,t,n,r){return n-=e,r-=t,n===0?r>0?0:4:n===1?r+6:2-r}static#n=new Int32Array([0,1,-1,1,-1,0,-1,-1,0,-1,1,-1,1,0,1,1]);static#r(e,t,n,r,i,a,o){let s=this.#t(n,r,i,a);for(let i=0;i<8;i++){let a=(-i+s-o+16)%8,c=this.#n[2*a],l=this.#n[2*a+1];if(e[(n+c)*t+(r+l)]!==0)return a}return-1}static#i(e,t,n,r,i,a,o){let s=this.#t(n,r,i,a);for(let i=0;i<8;i++){let a=(i+s+o+16)%8,c=this.#n[2*a],l=this.#n[2*a+1];if(e[(n+c)*t+(r+l)]!==0)return a}return-1}static#a(e,t,n,r){let i=e.length,a=new Int32Array(i);for(let t=0;t<i;t++)a[t]=e[t]<=r?1:0;for(let e=1;e<n-1;e++)a[e*t]=a[e*t+t-1]=0;for(let e=0;e<t;e++)a[e]=a[t*n-1-e]=0;let o=1,s,c=[];for(let e=1;e<n-1;e++){s=1;for(let n=1;n<t-1;n++){let r=e*t+n,i=a[r];if(i===0)continue;let l=e,u=n;if(i===1&&a[r-1]===0)o+=1,--u;else if(i>=1&&a[r+1]===0)o+=1,u+=1,i>1&&(s=i);else{i!==1&&(s=Math.abs(i));continue}let d=[n,e],f=u===n+1,p={isHole:f,points:d,id:o,parent:0};c.push(p);let m;for(let e of c)if(e.id===s){m=e;break}m?m.isHole?p.parent=f?m.parent:s:p.parent=f?s:m.parent:p.parent=f?s:0;let h=this.#r(a,t,e,n,l,u,0);if(h===-1){a[r]=-o,a[r]!==1&&(s=Math.abs(a[r]));continue}let g=this.#n[2*h],_=this.#n[2*h+1],v=e+g,y=n+_;l=v,u=y;let b=e,x=n;for(;;){let i=this.#i(a,t,b,x,l,u,1);g=this.#n[2*i],_=this.#n[2*i+1];let c=b+g,f=x+_;d.push(f,c);let p=b*t+x;if(a[p+1]===0?a[p]=-o:a[p]===1&&(a[p]=o),c===e&&f===n&&b===v&&x===y){a[r]!==1&&(s=Math.abs(a[r]));break}else l=b,u=x,b=c,x=f}}}return c}static#o(e,t,n,r){if(n-t<=4){for(let i=t;i<n-2;i+=2)r.push(e[i],e[i+1]);return}let i=e[t],a=e[t+1],o=e[n-4]-i,s=e[n-3]-a,c=Math.hypot(o,s),l=o/c,u=s/c,d=l*a-u*i,f=s/o,p=1/c,m=Math.atan(f),h=Math.cos(m),g=Math.sin(m),_=p*(Math.abs(h)+Math.abs(g)),v=p*(1-_+_**2),y=Math.max(Math.atan(Math.abs(g+h)*v),Math.atan(Math.abs(g-h)*v)),b=0,x=t;for(let r=t+2;r<n-2;r+=2){let t=Math.abs(d-l*e[r+1]+u*e[r]);t>b&&(x=r,b=t)}b>(c*y)**2?(this.#o(e,t,x+2,r),this.#o(e,x,n,r)):r.push(i,a)}static#s(e){let t=[],n=e.length;return this.#o(e,0,n,t),t.push(e[n-2],e[n-1]),t.length<=4?null:t}static#c(e,t,n,r,i,a){let o=new Float32Array(a**2),s=-2*r**2,c=a>>1;for(let e=0;e<a;e++){let t=(e-c)**2;for(let n=0;n<a;n++)o[e*a+n]=Math.exp((t+(n-c)**2)/s)}let l=new Float32Array(256),u=-2*i**2;for(let e=0;e<256;e++)l[e]=Math.exp(e**2/u);let d=e.length,f=new Uint8Array(d),p=new Uint32Array(256);for(let r=0;r<n;r++)for(let i=0;i<t;i++){let s=r*t+i,u=e[s],d=0,m=0;for(let s=0;s<a;s++){let f=r+s-c;if(!(f<0||f>=n))for(let n=0;n<a;n++){let r=i+n-c;if(r<0||r>=t)continue;let p=e[f*t+r],h=o[s*a+n]*l[Math.abs(p-u)];d+=p*h,m+=h}}let h=f[s]=Math.round(d/m);p[h]++}return[f,p]}static#l(e){let t=new Uint32Array(256);for(let n of e)t[n]++;return t}static#u(e){let t=e.length,n=new Uint8ClampedArray(t>>2),r=-1/0,i=1/0;for(let t=0,a=n.length;t<a;t++){let a=n[t]=e[t<<2];r=Math.max(r,a),i=Math.min(i,a)}let a=255/(r-i);for(let e=0,t=n.length;e<t;e++)n[e]=(n[e]-i)*a;return n}static#d(e){let t,n=-1/0,r=-1/0,i=e.findIndex(e=>e!==0),a=i,o=i;for(t=i;t<256;t++){let i=e[t];i>n&&(t-a>r&&(r=t-a,o=t-1),n=i,a=t)}for(t=o-1;t>=0&&!(e[t]>e[t+1]);t--);return t}static#f(e){let t=e,{width:n,height:r}=e,{maxDim:i}=this.#e,a=n,o=r;if(n>i||r>i){let s=n,c=r,l=Math.log2(Math.max(n,r)/i),u=Math.floor(l);l=l===u?u-1:u;for(let n=0;n<l;n++){a=Math.ceil(s/2),o=Math.ceil(c/2);let n=new OffscreenCanvas(a,o);n.getContext(`2d`).drawImage(e,0,0,s,c,0,0,a,o),s=a,c=o,e!==t&&e.close(),e=n.transferToImageBitmap()}let d=Math.min(i/a,i/o);a=Math.round(a*d),o=Math.round(o*d)}let s=new OffscreenCanvas(a,o).getContext(`2d`,{willReadFrequently:!0});s.fillStyle=`white`,s.fillRect(0,0,a,o),s.filter=`grayscale(1)`,s.drawImage(e,0,0,e.width,e.height,0,0,a,o);let c=s.getImageData(0,0,a,o).data;return[this.#u(c),a,o]}static extractContoursFromText(e,{fontFamily:t,fontStyle:n,fontWeight:r},i,a,o,s){let c=new OffscreenCanvas(1,1),l=c.getContext(`2d`,{alpha:!1}),u=l.font=`${n} ${r} 200px ${t}`,{actualBoundingBoxLeft:d,actualBoundingBoxRight:f,actualBoundingBoxAscent:p,actualBoundingBoxDescent:m,fontBoundingBoxAscent:h,fontBoundingBoxDescent:g,width:_}=l.measureText(e),v=1.5,y=Math.ceil(Math.max(Math.abs(d)+Math.abs(f)||0,_)*v),b=Math.ceil(Math.max(Math.abs(p)+Math.abs(m)||200,Math.abs(h)+Math.abs(g)||200)*v);c=new OffscreenCanvas(y,b),l=c.getContext(`2d`,{alpha:!0,willReadFrequently:!0}),l.font=u,l.filter=`grayscale(1)`,l.fillStyle=`white`,l.fillRect(0,0,y,b),l.fillStyle=`black`,l.fillText(e,y*(v-1)/2,b*(3-v)/2);let x=this.#u(l.getImageData(0,0,y,b).data),S=this.#l(x),C=this.#d(S),w=this.#a(x,y,b,C);return this.processDrawnLines({lines:{curves:w,width:y,height:b},pageWidth:i,pageHeight:a,rotation:o,innerMargin:s,mustSmooth:!0,areContours:!0})}static process(e,t,n,r,i){let[a,o,s]=this.#f(e),[c,l]=this.#c(a,o,s,Math.hypot(o,s)*this.#e.sigmaSFactor,this.#e.sigmaR,this.#e.kernelSize),u=this.#d(l),d=this.#a(c,o,s,u);return this.processDrawnLines({lines:{curves:d,width:o,height:s},pageWidth:t,pageHeight:n,rotation:r,innerMargin:i,mustSmooth:!0,areContours:!0})}static processDrawnLines({lines:e,pageWidth:t,pageHeight:n,rotation:r,innerMargin:i,mustSmooth:a,areContours:o}){r%180!=0&&([t,n]=[n,t]);let{curves:s,width:c,height:l}=e,u=e.thickness??0,d=[],f=Math.min(t/c,n/l),p=f/t,m=f/n,h=[];for(let{points:e}of s){let t=a?this.#s(e):e;if(!t)continue;h.push(t);let n=t.length,r=new Float32Array(n),i=new Float32Array(3*(n===2?2:n-2));if(d.push({line:i,points:r}),n===2){r[0]=t[0]*p,r[1]=t[1]*m,i.set([NaN,NaN,NaN,NaN,r[0],r[1]],0);continue}let[o,s,c,l]=t;o*=p,s*=m,c*=p,l*=m,r.set([o,s,c,l],0),i.set([NaN,NaN,NaN,NaN,o,s],0);for(let e=4;e<n;e+=2){let n=r[e]=t[e]*p,a=r[e+1]=t[e+1]*m;i.set(q.createBezierPoints(o,s,c,l,n,a),(e-2)*3),[o,s,c,l]=[c,l,n,a]}}if(d.length===0)return null;let g=o?new Ic:new Nc;return g.build(d,t,n,1,r,o?0:u,i),{outline:g,newCurves:h,areContours:o,thickness:u,width:c,height:l}}static async compressSignature({outlines:e,areContours:t,thickness:n,width:r,height:i}){let a=1/0,o=-1/0,s=0;for(let t of e){s+=t.length;for(let e=2,n=t.length;e<n;e++){let n=t[e]-t[e-2];a=Math.min(a,n),o=Math.max(o,n)}}let c;c=a>=-128&&o<=127?Int8Array:a>=-32768&&o<=32767?Int16Array:Int32Array;let l=e.length,u=Lc+Rc*l,d=new Uint32Array(u),f=0;d[f++]=u*Uint32Array.BYTES_PER_ELEMENT+(s-2*l)*c.BYTES_PER_ELEMENT,d[f++]=0,d[f++]=r,d[f++]=i,d[f++]=t?0:1,d[f++]=Math.max(0,Math.floor(n??0)),d[f++]=l,d[f++]=c.BYTES_PER_ELEMENT;for(let t of e)d[f++]=t.length-2,d[f++]=t[0],d[f++]=t[1];let p=new CompressionStream(`deflate-raw`),m=p.writable.getWriter();await m.ready,m.write(d);let h=c.prototype.constructor;for(let t of e){let e=new h(t.length-2);for(let n=2,r=t.length;n<r;n++)e[n-2]=t[n]-t[n-2];m.write(e)}m.close();let g=await new Response(p.readable).arrayBuffer();return hi(new Uint8Array(g))}static async decompressSignature(e){try{let t=gi(e),{readable:n,writable:r}=new DecompressionStream(`deflate-raw`),i=r.getWriter();await i.ready,i.write(t).then(async()=>{await i.ready,await i.close()}).catch(()=>{});let a=null,o=0;for await(let e of n)a||=new Uint8Array(new Uint32Array(e.buffer,0,4)[0]),a.set(e,o),o+=e.length;let s=new Uint32Array(a.buffer,0,a.length>>2),c=s[1];if(c!==0)throw Error(`Invalid version: ${c}`);let l=s[2],u=s[3],d=s[4]===0,f=s[5],p=s[6],m=s[7],h=[],g=(Lc+Rc*p)*Uint32Array.BYTES_PER_ELEMENT,_;switch(m){case Int8Array.BYTES_PER_ELEMENT:_=new Int8Array(a.buffer,g);break;case Int16Array.BYTES_PER_ELEMENT:_=new Int16Array(a.buffer,g);break;case Int32Array.BYTES_PER_ELEMENT:_=new Int32Array(a.buffer,g);break}o=0;for(let e=0;e<p;e++){let t=s[Rc*e+Lc],n=new Float32Array(t+2);h.push(n);for(let t=0;t<Rc-1;t++)n[t]=s[Rc*e+Lc+t+1];for(let e=0;e<t;e++)n[e+2]=n[e]+_[o++]}return{areContours:d,thickness:f,outlines:h,width:l,height:u}}catch(e){return R(`decompressSignature: ${e}`),null}}},Bc=class e extends Ac{constructor(){super(),super.updateProperties({fill:ua._defaultLineColor,"stroke-width":0})}clone(){let t=new e;return t.updateAll(this),t}},Vc=class e extends Pc{constructor(e){super(e),super.updateProperties({stroke:ua._defaultLineColor,"stroke-width":1})}clone(){let t=new e(this._viewParameters);return t.updateAll(this),t}},Hc=class e extends jc{#e=!1;#t=null;#n=null;#r=null;static _type=`signature`;static _editorType=I.SIGNATURE;static _defaultDrawingOptions=null;constructor(e){super({...e,mustBeCommitted:!0,name:`signatureEditor`}),this._willKeepAspectRatio=!0,this.#n=e.signatureData||null,this.#t=null,this.defaultL10nId=`pdfjs-editor-signature-editor1`}static initialize(e,t){ua.initialize(e,t),this._defaultDrawingOptions=new Bc,this._defaultDrawnSignatureOptions=new Vc(t.viewParameters)}static getDefaultDrawingOptions(e){let t=this._defaultDrawingOptions.clone();return t.updateProperties(e),t}static get supportMultipleDrawings(){return!1}static get typesMap(){return B(this,`typesMap`,new Map)}static get isDrawer(){return!1}get telemetryFinalData(){return{type:`signature`,hasDescription:!!this.#t}}static computeTelemetryFinalData(e){let t=e.get(`hasDescription`);return{hasAltText:t.get(!0)??0,hasNoAltText:t.get(!1)??0}}get isResizable(){return!0}onScaleChanging(){this._drawId!==null&&super.onScaleChanging()}render(){if(this.div)return this.div;let t,n,{_isCopy:r}=this;if(r&&(this._isCopy=!1,t=this.x,n=this.y),super.render(),this._drawId===null)if(this.#n){let{lines:t,mustSmooth:n,areContours:r,description:i,uuid:a,heightInPage:o}=this.#n,{rawDims:{pageWidth:s,pageHeight:c},rotation:l}=this.parent.viewport,u=zc.processDrawnLines({lines:t,pageWidth:s,pageHeight:c,rotation:l,innerMargin:e._INNER_MARGIN,mustSmooth:n,areContours:r});this.addSignature(u,o,i,a)}else this.div.setAttribute(`data-l10n-args`,JSON.stringify({description:``})),this.div.hidden=!0,this._uiManager.getSignature(this);else this.div.setAttribute(`data-l10n-args`,JSON.stringify({description:this.#t||``}));return r&&(this._isCopy=!0,this._moveAfterPaste(t,n)),this.div}setUuid(e){this.#r=e,this.addEditToolbar()}getUuid(){return this.#r}get description(){return this.#t}set description(e){this.#t=e,this.div&&(this.div.setAttribute(`data-l10n-args`,JSON.stringify({description:e})),super.addEditToolbar().then(t=>{t?.updateEditSignatureButton(e)}))}getSignaturePreview(){let{newCurves:e,areContours:t,thickness:n,width:r,height:i}=this.#n,a=Math.max(r,i);return{areContours:t,outline:zc.processDrawnLines({lines:{curves:e.map(e=>({points:e})),thickness:n,width:r,height:i},pageWidth:a,pageHeight:a,rotation:0,innerMargin:0,mustSmooth:!1,areContours:t}).outline}}get toolbarButtons(){return this._uiManager.signatureManager?[[`editSignature`,this._uiManager.signatureManager]]:super.toolbarButtons}addSignature(t,n,r,i){let{x:a,y:o}=this,{outline:s}=this.#n=t;this.#e=s instanceof Ic,this.description=r;let c;this.#e?c=e.getDefaultDrawingOptions():(c=e._defaultDrawnSignatureOptions.clone(),c.updateProperties({"stroke-width":s.thickness})),this._addOutlines({drawOutlines:s,drawingOptions:c});let[,l]=this.pageDimensions,u=n/l;u=u>=1?.5:u,this.width*=u/this.height,this.width>=1&&(u*=.9/this.width,this.width=.9),this.height=u,this.setDims(),this.x=a,this.y=o,this.center(),this._onResized(),this.onScaleChanging(),this.rotate(),this._uiManager.addToAnnotationStorage(this),this.setUuid(i),this._reportTelemetry({action:`pdfjs.signature.inserted`,data:{hasBeenSaved:!!i,hasDescription:!!r}}),this.div.hidden=!1}getFromImage(t){let{rawDims:{pageWidth:n,pageHeight:r},rotation:i}=this.parent.viewport;return zc.process(t,n,r,i,e._INNER_MARGIN)}getFromText(t,n){let{rawDims:{pageWidth:r,pageHeight:i},rotation:a}=this.parent.viewport;return zc.extractContoursFromText(t,n,r,i,a,e._INNER_MARGIN)}getDrawnSignature(t){let{rawDims:{pageWidth:n,pageHeight:r},rotation:i}=this.parent.viewport;return zc.processDrawnLines({lines:t,pageWidth:n,pageHeight:r,rotation:i,innerMargin:e._INNER_MARGIN,mustSmooth:!1,areContours:!1})}createDrawingOptions({areContours:t,thickness:n}){t?this._drawingOptions=e.getDefaultDrawingOptions():(this._drawingOptions=e._defaultDrawnSignatureOptions.clone(),this._drawingOptions.updateProperties({"stroke-width":n}))}serialize(e=!1){if(this.isEmpty())return null;let{lines:t,points:n}=this.serializeDraw(e),{_drawingOptions:{"stroke-width":r}}=this,i=Object.assign(super.serialize(e),{isSignature:!0,areContours:this.#e,color:[0,0,0],thickness:this.#e?0:r});return this.addComment(i),e?(i.paths={lines:t,points:n},i.uuid=this.#r,i.isCopy=!0):i.lines=t,this.#t&&(i.accessibilityData={type:`Figure`,alt:this.#t}),i}static deserializeDraw(e,t,n,r,i,a){return a.areContours?Ic.deserialize(e,t,n,r,i,a):Nc.deserialize(e,t,n,r,i,a)}static async deserialize(e,t,n){let r=await super.deserialize(e,t,n);return r.#e=e.areContours,r.description=e.accessibilityData?.alt||``,r.#r=e.uuid,r}},Uc=class extends ua{#e=null;#t=null;#n=null;#r=null;#i=null;#a=``;#o=null;#s=!1;#c=null;#l=!1;#u=!1;static _type=`stamp`;static _editorType=I.STAMP;constructor(e){super({...e,name:`stampEditor`}),this.#r=e.bitmapUrl,this.#i=e.bitmapFile,this.defaultL10nId=`pdfjs-editor-stamp-editor`}static initialize(e,t){ua.initialize(e,t)}static isHandlingMimeForPasting(e){return zi.includes(e)}static paste(e,t){t.pasteEditor({mode:I.STAMP},{bitmapFile:e.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){return{type:`stamp`,hasAltText:!!this.altTextData?.altText}}static computeTelemetryFinalData(e){let t=e.get(`hasAltText`);return{hasAltText:t.get(!0)??0,hasNoAltText:t.get(!1)??0}}#d(e,t=!1){if(!e){this.remove();return}this.#e=e.bitmap,t||(this.#t=e.id,this.#l=e.isSvg),e.file&&(this.#a=e.file.name),this.#m()}#f(){if(this.#n=null,this._uiManager.enableWaiting(!1),this.#o){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&this.#e){this.addEditToolbar().then(()=>{this._editToolbar.hide(),this._uiManager.editAltText(this,!0)});return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&this.#e){this._reportTelemetry({action:`pdfjs.image.image_added`,data:{alt_text_modal:!1,alt_text_type:`empty`}});try{this.mlGuessAltText()}catch{}}this.div.focus()}}async mlGuessAltText(e=null,t=!0){if(this.hasAltTextData())return null;let{mlManager:n}=this._uiManager;if(!n)throw Error(`No ML.`);if(!await n.isEnabledFor(`altText`))throw Error(`ML isn't enabled for alt text.`);let{data:r,width:i,height:a}=e||this.copyCanvas(null,null,!0).imageData,o=await n.guess({name:`altText`,request:{data:r,width:i,height:a,channels:r.length/(i*a)}});if(!o)throw Error(`No response from the AI service.`);if(o.error)throw Error(`Error from the AI service.`);if(o.cancel)return null;if(!o.output)throw Error(`No valid response from the AI service.`);let s=o.output;return await this.setGuessedAltText(s),t&&!this.hasAltTextData()&&(this.altTextData={alt:s,decorative:!1}),s}#p(){if(this.#t){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(this.#t).then(e=>this.#d(e,!0)).finally(()=>this.#f());return}if(this.#r){let e=this.#r;this.#r=null,this._uiManager.enableWaiting(!0),this.#n=this._uiManager.imageManager.getFromUrl(e).then(e=>this.#d(e)).finally(()=>this.#f());return}if(this.#i){let e=this.#i;this.#i=null,this._uiManager.enableWaiting(!0),this.#n=this._uiManager.imageManager.getFromFile(e).then(e=>this.#d(e)).finally(()=>this.#f());return}let e=document.createElement(`input`);e.type=`file`,e.accept=zi.join(`,`);let t=this._uiManager._signal;this.#n=new Promise(n=>{e.addEventListener(`change`,async()=>{if(!e.files||e.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);let t=await this._uiManager.imageManager.getFromFile(e.files[0]);this._reportTelemetry({action:`pdfjs.image.image_selected`,data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),this.#d(t)}n()},{signal:t}),e.addEventListener(`cancel`,()=>{this.remove(),n()},{signal:t})}).finally(()=>this.#f()),e.click()}remove(){this.#t&&(this.#e=null,this._uiManager.imageManager.deleteId(this.#t),this.#o?.remove(),this.#o=null,this.#c&&=(clearTimeout(this.#c),null)),super.remove()}rebuild(){if(!this.parent){this.#t&&this.#p();return}super.rebuild(),this.div!==null&&(this.#t&&this.#o===null&&this.#p(),this.isAttachedToDOM||this.parent.add(this))}onceAdded(e){this._isDraggable=!0,e&&this.div.focus()}isEmpty(){return!(this.#n||this.#e||this.#r||this.#i||this.#t||this.#s)}get toolbarButtons(){return[[`altText`,this.createAltText()]]}get isResizable(){return!0}render(){if(this.div)return this.div;let e,t;return this._isCopy&&(e=this.x,t=this.y),super.render(),this.div.hidden=!0,this.createAltText(),this.#s||(this.#e?this.#m():this.#p()),this._isCopy&&this._moveAfterPaste(e,t),this._uiManager.addShouldRescale(this),this.div}setCanvas(e,t){let{id:n,bitmap:r}=this._uiManager.imageManager.getFromCanvas(e,t);t.remove(),n&&this._uiManager.imageManager.isValidId(n)&&(this.#t=n,r&&(this.#e=r),this.#s=!1,this.#m())}_onResized(){this.onScaleChanging()}onScaleChanging(){this.parent&&(this.#c!==null&&clearTimeout(this.#c),this.#c=setTimeout(()=>{this.#c=null,this.#g()},200))}#m(){let{div:e}=this,{width:t,height:n}=this.#e,[r,i]=this.pageDimensions,a=.75;if(this.width)t=this.width*r,n=this.height*i;else if(t>a*r||n>a*i){let e=Math.min(a*r/t,a*i/n);t*=e,n*=e}this._uiManager.enableWaiting(!1);let o=this.#o=document.createElement(`canvas`);o.setAttribute(`role`,`img`),this.addContainer(o),this.width=t/r,this.height=n/i,this.setDims(),this._initialOptions?.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(e.hidden=!1),this.#g(),this.#u||=(this.parent.addUndoableEditor(this),!0),this._reportTelemetry({action:`inserted_image`}),this.#a&&this.div.setAttribute(`aria-description`,this.#a),this.annotationElementId||this._uiManager.a11yAlert(`pdfjs-editor-stamp-added-alert`)}copyCanvas(e,t,n=!1){e||=224;let{width:r,height:i}=this.#e,a=new Ri,o=this.#e,s=r,c=i,l=null;if(t){if(r>t||i>t){let e=Math.min(t/r,t/i);s=Math.floor(r*e),c=Math.floor(i*e)}l=document.createElement(`canvas`);let e=l.width=Math.ceil(s*a.sx),n=l.height=Math.ceil(c*a.sy);this.#l||(o=this.#h(e,n));let u=l.getContext(`2d`);u.filter=this._uiManager.hcmFilter;let d=`white`,f=`#cfcfd8`;this._uiManager.hcmFilter===`none`?Bi.isDarkMode&&(d=`#8f8f9d`,f=`#42414d`):f=`black`;let p=15*a.sx,m=15*a.sy,h=new OffscreenCanvas(p*2,m*2),g=h.getContext(`2d`);g.fillStyle=d,g.fillRect(0,0,p*2,m*2),g.fillStyle=f,g.fillRect(0,0,p,m),g.fillRect(p,m,p,m),u.fillStyle=u.createPattern(h,`repeat`),u.fillRect(0,0,e,n),u.drawImage(o,0,0,o.width,o.height,0,0,e,n)}let u=null;if(n){let t,n;if(a.symmetric&&o.width<e&&o.height<e)t=o.width,n=o.height;else if(o=this.#e,r>e||i>e){let a=Math.min(e/r,e/i);t=Math.floor(r*a),n=Math.floor(i*a),this.#l||(o=this.#h(t,n))}let s=new OffscreenCanvas(t,n).getContext(`2d`,{willReadFrequently:!0});s.drawImage(o,0,0,o.width,o.height,0,0,t,n),u={width:t,height:n,data:s.getImageData(0,0,t,n).data}}return{canvas:l,width:s,height:c,imageData:u}}#h(e,t){let{width:n,height:r}=this.#e,i=n,a=r,o=this.#e;for(;i>2*e||a>2*t;){let n=i,r=a;i>2*e&&(i=i>=16384?Math.floor(i/2)-1:Math.ceil(i/2)),a>2*t&&(a=a>=16384?Math.floor(a/2)-1:Math.ceil(a/2));let s=new OffscreenCanvas(i,a);s.getContext(`2d`).drawImage(o,0,0,n,r,0,0,i,a),o=s.transferToImageBitmap()}return o}#g(){let[e,t]=this.parentDimensions,{width:n,height:r}=this,i=new Ri,a=Math.ceil(n*e*i.sx),o=Math.ceil(r*t*i.sy),s=this.#o;if(!s||s.width===a&&s.height===o)return;s.width=a,s.height=o;let c=this.#l?this.#e:this.#h(a,o),l=s.getContext(`2d`);l.filter=this._uiManager.hcmFilter,l.drawImage(c,0,0,c.width,c.height,0,0,a,o)}#_(e){if(e){if(this.#l){let e=this._uiManager.imageManager.getSvgUrl(this.#t);if(e)return e}let e=document.createElement(`canvas`);return{width:e.width,height:e.height}=this.#e,e.getContext(`2d`).drawImage(this.#e,0,0),e.toDataURL()}if(this.#l){let[e,t]=this.pageDimensions,n=Math.round(this.width*e*bi.PDF_TO_CSS_UNITS),r=Math.round(this.height*t*bi.PDF_TO_CSS_UNITS),i=new OffscreenCanvas(n,r);return i.getContext(`2d`).drawImage(this.#e,0,0,this.#e.width,this.#e.height,0,0,n,r),i.transferToImageBitmap()}return structuredClone(this.#e)}static async deserialize(e,t,n){let r=null,i=!1;if(e instanceof vc){let{data:{rect:a,rotation:o,id:s,structParent:c,popupRef:l,richText:u,contentsObj:d,creationDate:f,modificationDate:p},container:m,parent:{page:{pageNumber:h}},canvas:g}=e,_,v;g?(delete e.canvas,{id:_,bitmap:v}=n.imageManager.getFromCanvas(m.id,g),g.remove()):(i=!0,e._hasNoCanvas=!0);let y=(await t._structTree.getAriaAttributes(`${fi}${s}`))?.get(`aria-label`)||``;r=e={annotationType:I.STAMP,bitmapId:_,bitmap:v,pageIndex:h-1,rect:a.slice(0),rotation:o,annotationElementId:s,id:s,deleted:!1,accessibilityData:{decorative:!1,altText:y},isSvg:!1,structParent:c,popupRef:l,richText:u,comment:d?.str||null,creationDate:f,modificationDate:p}}let a=await super.deserialize(e,t,n),{rect:o,bitmap:s,bitmapUrl:c,bitmapId:l,isSvg:u,accessibilityData:d}=e;i?(n.addMissingCanvas(e.id,a),a.#s=!0):l&&n.imageManager.isValidId(l)?(a.#t=l,s&&(a.#e=s)):a.#r=c,a.#l=u;let[f,p]=a.pageDimensions;return a.width=(o[2]-o[0])/f,a.height=(o[3]-o[1])/p,d&&(a.altTextData=d),a._initialData=r,e.comment&&a.setCommentData(e),a.#u=!!r,a}serialize(e=!1,t=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();let n=Object.assign(super.serialize(e),{bitmapId:this.#t,isSvg:this.#l});if(this.addComment(n),e)return n.bitmapUrl=this.#_(!0),n.accessibilityData=this.serializeAltText(!0),n.isCopy=!0,n;let{decorative:r,altText:i}=this.serializeAltText(!1);if(!r&&i&&(n.accessibilityData={type:`Figure`,alt:i}),this.annotationElementId){let e=this.#v(n);return e.isSame?null:(e.isSameAltText?delete n.accessibilityData:n.accessibilityData.structParent=this._initialData.structParent??-1,n.id=this.annotationElementId,delete n.bitmapId,n)}if(t===null)return n;t.stamps||=new Map;let a=this.#l?(n.rect[2]-n.rect[0])*(n.rect[3]-n.rect[1]):null;if(!t.stamps.has(this.#t))t.stamps.set(this.#t,{area:a,serialized:n}),n.bitmap=this.#_(!1);else if(this.#l){let e=t.stamps.get(this.#t);a>e.area&&(e.area=a,e.serialized.bitmap.close(),e.serialized.bitmap=this.#_(!1))}return n}#v(e){let{pageIndex:t,accessibilityData:{altText:n}}=this._initialData,r=e.pageIndex===t,i=(e.accessibilityData?.alt||``)===n;return{isSame:!this.hasEditedComment&&!this._hasBeenMoved&&!this._hasBeenResized&&r&&i,isSameAltText:i}}renderAnnotationElement(e){return this.deleted?(e.hide(),null):(e.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}},Wc=class e{#e;#t=!1;#n=null;#r=null;#i=null;#a=new Map;#o=!1;#s=!1;#c=!1;#l=null;#u=null;#d=null;#f=null;#p=null;#m=-1;#h;static _initialized=!1;static#g=new Map([Sc,Fc,Uc,kc,Hc].map(e=>[e._editorType,e]));constructor({uiManager:t,pageIndex:n,div:r,structTreeLayer:i,accessibilityManager:a,annotationLayer:o,drawLayer:s,textLayer:c,viewport:l,l10n:u}){let d=[...e.#g.values()];if(!e._initialized){e._initialized=!0;for(let e of d)e.initialize(u,t)}t.registerEditorTypes(d),this.#h=t,this.pageIndex=n,this.div=r,this.#e=a,this.#n=o,this.viewport=l,this.#d=c,this.drawLayer=s,this._structTree=i,this.#h.addLayer(this)}get isEmpty(){return this.#a.size===0}get isInvisible(){return this.isEmpty&&this.#h.getMode()===I.NONE}updateToolbar(e){this.#h.updateToolbar(e)}updateMode(t=this.#h.getMode()){switch(this.#S(),t){case I.NONE:this.div.classList.toggle(`nonEditing`,!0),this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case I.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case I.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);let{classList:n}=this.div;if(n.toggle(`nonEditing`,!1),t===I.POPUP)n.toggle(`commentEditing`,!0);else{n.toggle(`commentEditing`,!1);for(let r of e.#g.values())n.toggle(`${r._type}Editing`,t===r._editorType)}this.div.hidden=!1}hasTextLayer(e){return e===this.#d?.div}setEditingState(e){this.#h.setEditingState(e)}addCommands(e){this.#h.addCommands(e)}cleanUndoStack(e){this.#h.cleanUndoStack(e)}toggleDrawing(e=!1){this.div.classList.toggle(`drawing`,!e)}togglePointerEvents(e=!1){this.div.classList.toggle(`disabled`,!e)}toggleAnnotationLayerPointerEvents(e=!1){this.#n?.togglePointerEvents(e)}get#_(){return this.#a.size===0?this.#h.getEditors(this.pageIndex):this.#a.values()}async enable(){this.#c=!0,this.div.tabIndex=0,this.togglePointerEvents(!0),this.div.classList.toggle(`nonEditing`,!1),this.#p?.abort(),this.#p=null;let e=new Set;for(let t of this.#_)t.enableEditing(),t.show(!0),t.annotationElementId&&(this.#h.removeChangedExistingAnnotation(t),e.add(t.annotationElementId));let t=this.#n;if(t)for(let n of t.getEditableAnnotations()){if(n.hide(),this.#h.isDeletedAnnotationElement(n.data.id)||e.has(n.data.id))continue;let t=await this.deserialize(n);t&&(this.addOrRebuild(t),t.enableEditing())}this.#c=!1,this.#h._eventBus.dispatch(`editorsrendered`,{source:this,pageNumber:this.pageIndex+1})}disable(){if(this.#s=!0,this.div.tabIndex=-1,this.togglePointerEvents(!1),this.div.classList.toggle(`nonEditing`,!0),this.#d&&!this.#p){this.#p=new AbortController;let e=this.#h.combinedSignal(this.#p);this.#d.div.addEventListener(`pointerdown`,e=>{let{clientX:t,clientY:n,timeStamp:r}=e;if(r-this.#m>500){this.#m=r;return}this.#m=-1;let{classList:i}=this.div;i.toggle(`getElements`,!0);let a=document.elementsFromPoint(t,n);if(i.toggle(`getElements`,!1),!this.div.contains(a[0]))return;let o,s=RegExp(`^${kr}[0-9]+$`);for(let e of a)if(s.test(e.id)){o=e.id;break}if(!o)return;let c=this.#a.get(o);c?.annotationElementId===null&&(e.stopPropagation(),e.preventDefault(),c.dblclick(e))},{signal:e,capture:!0})}let t=this.#n,n=[];if(t){let e=new Map,r=new Map;for(let t of this.#_){if(t.disableEditing(),!t.annotationElementId){n.push(t);continue}if(t.serialize()!==null){e.set(t.annotationElementId,t);continue}else r.set(t.annotationElementId,t);this.getEditableAnnotation(t.annotationElementId)?.show(),t.remove()}let i=t.getEditableAnnotations();for(let t of i){let{id:n}=t.data;if(this.#h.isDeletedAnnotationElement(n)){t.updateEdited({deleted:!0});continue}let i=r.get(n);if(i){i.resetAnnotationElement(t),i.show(!1),t.show();continue}i=e.get(n),i&&(this.#h.addChangedExistingAnnotation(i),i.renderAnnotationElement(t)&&i.show(!1)),t.show()}}this.#S(),this.isEmpty&&(this.div.hidden=!0);let{classList:r}=this.div;for(let t of e.#g.values())r.remove(`${t._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),t?.updateFakeAnnotations(n),this.#s=!1}getEditableAnnotation(e){return this.#n?.getEditableAnnotation(e)||null}setActiveEditor(e){this.#h.getActive()!==e&&this.#h.setActiveEditor(e)}enableTextSelection(){if(this.div.tabIndex=-1,this.#d?.div&&!this.#f){this.#f=new AbortController;let e=this.#h.combinedSignal(this.#f);this.#d.div.addEventListener(`pointerdown`,this.#v.bind(this),{signal:e}),this.#d.div.classList.add(`highlighting`)}}disableTextSelection(){this.div.tabIndex=0,this.#d?.div&&this.#f&&(this.#f.abort(),this.#f=null,this.#d.div.classList.remove(`highlighting`))}#v(e){this.#h.unselectAll();let{target:t}=e;if(t===this.#d.div||(t.getAttribute(`role`)===`img`||t.classList.contains(`endOfContent`))&&this.#d.div.contains(t)){let{isMac:t}=V.platform;if(e.button!==0||e.ctrlKey&&t)return;this.#h.showAllEditors(`highlight`,!0,!0),this.#d.div.classList.add(`free`),this.toggleDrawing(),kc.startHighlighting(this,this.#h.direction===`ltr`,{target:this.#d.div,x:e.x,y:e.y}),this.#d.div.addEventListener(`pointerup`,()=>{this.#d.div.classList.remove(`free`),this.toggleDrawing(!0)},{once:!0,signal:this.#h._signal}),e.preventDefault()}}enableClick(){if(this.#r)return;this.#r=new AbortController;let e=this.#h.combinedSignal(this.#r);this.div.addEventListener(`pointerdown`,this.pointerdown.bind(this),{signal:e});let t=this.pointerup.bind(this);this.div.addEventListener(`pointerup`,t,{signal:e}),this.div.addEventListener(`pointercancel`,t,{signal:e})}disableClick(){this.#r?.abort(),this.#r=null}attach(e){this.#a.set(e.id,e);let{annotationElementId:t}=e;t&&this.#h.isDeletedAnnotationElement(t)&&this.#h.removeDeletedAnnotationElement(e)}detach(e){this.#a.delete(e.id),this.#e?.removePointerInTextLayer(e.contentDiv),!this.#s&&e.annotationElementId&&this.#h.addDeletedAnnotationElement(e)}remove(e){this.detach(e),this.#h.removeEditor(e),e.div.remove(),e.isAttachedToDOM=!1}changeParent(e){e.parent!==this&&(e.parent&&e.annotationElementId&&(this.#h.addDeletedAnnotationElement(e.annotationElementId),ua.deleteAnnotationElement(e),e.annotationElementId=null),this.attach(e),e.parent?.detach(e),e.setParent(this),e.div&&e.isAttachedToDOM&&(e.div.remove(),this.div.append(e.div)))}add(e){if(!(e.parent===this&&e.isAttachedToDOM)){if(this.changeParent(e),this.#h.addEditor(e),this.attach(e),!e.isAttachedToDOM){let t=e.render();this.div.append(t),e.isAttachedToDOM=!0}e.fixAndSetPosition(),e.onceAdded(!this.#c),this.#h.addToAnnotationStorage(e),e._reportTelemetry(e.telemetryInitialData)}}moveEditorInDOM(e){if(!e.isAttachedToDOM)return;let{activeElement:t}=document;e.div.contains(t)&&!this.#i&&(e._focusEventsAllowed=!1,this.#i=setTimeout(()=>{this.#i=null,e.div.contains(document.activeElement)?e._focusEventsAllowed=!0:(e.div.addEventListener(`focusin`,()=>{e._focusEventsAllowed=!0},{once:!0,signal:this.#h._signal}),t.focus())},0)),e._structTreeParentId=this.#e?.moveElementInDOM(this.div,e.div,e.contentDiv,!0)}addOrRebuild(e){e.needsToBeRebuilt()?(e.parent||=this,e.rebuild(),e.show()):this.add(e)}addUndoableEditor(e){this.addCommands({cmd:()=>e._uiManager.rebuild(e),undo:()=>{e.remove()},mustExec:!1})}getEditorByUID(e){for(let t of this.#a.values())if(t.uid===e)return t;return null}getNextId(){return this.#h.getId()}get#y(){return e.#g.get(this.#h.getMode())}combinedSignal(e){return this.#h.combinedSignal(e)}#b(e){let t=this.#y;return t?new t.prototype.constructor(e):null}canCreateNewEmptyEditor(){return this.#y?.canCreateNewEmptyEditor()}async pasteEditor(e,t){this.updateToolbar(e),await this.#h.updateMode(e.mode);let{offsetX:n,offsetY:r}=this.#x(),i=this.getNextId(),a=this.#b({parent:this,id:i,x:n,y:r,uiManager:this.#h,isCentered:!0,...t});a&&this.add(a)}async deserialize(t){return await e.#g.get(t.annotationType??t.annotationEditorType)?.deserialize(t,this,this.#h)||null}createAndAddNewEditor(e,t,n={}){let r=this.getNextId(),i=this.#b({parent:this,id:r,x:e.offsetX,y:e.offsetY,uiManager:this.#h,isCentered:t,...n});return i&&this.add(i),i}get boundingClientRect(){return this.div.getBoundingClientRect()}#x(){let{x:e,y:t,width:n,height:r}=this.boundingClientRect,i=Math.max(0,e),a=Math.max(0,t),o=Math.min(window.innerWidth,e+n),s=Math.min(window.innerHeight,t+r),c=(i+o)/2-e,l=(a+s)/2-t,[u,d]=this.viewport.rotation%180==0?[c,l]:[l,c];return{offsetX:u,offsetY:d}}addNewEditor(e={}){this.createAndAddNewEditor(this.#x(),!0,e)}setSelected(e){this.#h.setSelected(e)}toggleSelected(e){this.#h.toggleSelected(e)}unselect(e){this.#h.unselect(e)}pointerup(e){let{isMac:t}=V.platform;if(e.button!==0||e.ctrlKey&&t||e.target!==this.div||!this.#o||(this.#o=!1,this.#y?.isDrawer&&this.#y.supportMultipleDrawings))return;if(!this.#t){this.#t=!0;return}let n=this.#h.getMode();if(n===I.STAMP||n===I.SIGNATURE){this.#h.unselectAll();return}this.createAndAddNewEditor(e,!1)}pointerdown(e){if(this.#h.getMode()===I.HIGHLIGHT&&this.enableTextSelection(),this.#o){this.#o=!1;return}let{isMac:t}=V.platform;if(e.button!==0||e.ctrlKey&&t||e.target!==this.div)return;if(this.#o=!0,this.#y?.isDrawer){this.startDrawingSession(e);return}let n=this.#h.getActive();this.#t=!n||n.isEmpty()}startDrawingSession(e){if(this.div.focus({preventScroll:!0}),this.#l){this.#y.startDrawing(this,this.#h,!1,e);return}this.#h.setCurrentDrawingSession(this),this.#l=new AbortController;let t=this.#h.combinedSignal(this.#l);this.div.addEventListener(`blur`,({relatedTarget:e})=>{e&&!this.div.contains(e)&&(this.#u=null,this.commitOrRemove())},{signal:t}),this.#y.startDrawing(this,this.#h,!1,e)}pause(e){if(e){let{activeElement:e}=document;this.div.contains(e)&&(this.#u=e);return}this.#u&&setTimeout(()=>{this.#u?.focus(),this.#u=null},0)}endDrawingSession(e=!1){return this.#l?(this.#h.setCurrentDrawingSession(null),this.#l.abort(),this.#l=null,this.#u=null,this.#y.endDrawing(e)):null}findNewParent(e,t,n){let r=this.#h.findParent(t,n);return r===null||r===this?!1:(r.changeParent(e),!0)}commitOrRemove(){return this.#l?(this.endDrawingSession(),!0):!1}onScaleChanging(){this.#l&&this.#y.onScaleChangingWhenDrawing(this)}destroy(){this.commitOrRemove(),this.#h.getActive()?.parent===this&&(this.#h.commitOrRemove(),this.#h.setActiveEditor(null)),this.#i&&=(clearTimeout(this.#i),null);for(let e of this.#a.values())this.#e?.removePointerInTextLayer(e.contentDiv),e.setParent(null),e.isAttachedToDOM=!1,e.div.remove();this.div=null,this.#a.clear(),this.#h.removeLayer(this)}#S(){for(let e of this.#a.values())e.isEmpty()&&e.remove()}render({viewport:e}){this.viewport=e,Li(this.div,e);for(let e of this.#h.getEditors(this.pageIndex))this.add(e),e.rebuild();this.updateMode()}update({viewport:e}){this.#h.commitOrRemove(),this.#S();let t=this.viewport.rotation,n=e.rotation;if(this.viewport=e,Li(this.div,{rotation:n}),t!==n)for(let e of this.#a.values())e.rotate(n)}get pageDimensions(){let{pageWidth:e,pageHeight:t}=this.viewport.rawDims;return[e,t]}get scale(){return this.#h.viewParameters.realScale}},Gc=class e{#e=null;#t=new Map;#n=new Map;static#r=0;constructor({pageIndex:e}){this.pageIndex=e}setParent(e){if(!this.#e){this.#e=e;return}if(this.#e!==e){if(this.#t.size>0)for(let t of this.#t.values())t.remove(),e.append(t);this.#e=e}}static get _svgFactory(){return B(this,`_svgFactory`,new Hs)}static#i(e,[t,n,r,i]){let{style:a}=e;a.top=`${100*n}%`,a.left=`${100*t}%`,a.width=`${100*r}%`,a.height=`${100*i}%`}#a(){let t=e._svgFactory.create(1,1,!0);return this.#e.append(t),t.setAttribute(`aria-hidden`,!0),t}#o(t,n){let r=e._svgFactory.createElement(`clipPath`);t.append(r);let i=`clip_${n}`;r.setAttribute(`id`,i),r.setAttribute(`clipPathUnits`,`objectBoundingBox`);let a=e._svgFactory.createElement(`use`);return r.append(a),a.setAttribute(`href`,`#${n}`),a.classList.add(`clip`),i}#s(e,t){for(let[n,r]of Object.entries(t))r===null?e.removeAttribute(n):e.setAttribute(n,r)}draw(t,n=!1,r=!1){let i=e.#r++,a=this.#a(),o=e._svgFactory.createElement(`defs`);a.append(o);let s=e._svgFactory.createElement(`path`);o.append(s);let c=`path_p${this.pageIndex}_${i}`;s.setAttribute(`id`,c),s.setAttribute(`vector-effect`,`non-scaling-stroke`),n&&this.#n.set(i,s);let l=r?this.#o(o,c):null,u=e._svgFactory.createElement(`use`);return a.append(u),u.setAttribute(`href`,`#${c}`),this.updateProperties(a,t),this.#t.set(i,a),{id:i,clipPathId:`url(#${l})`}}drawOutline(t,n){let r=e.#r++,i=this.#a(),a=e._svgFactory.createElement(`defs`);i.append(a);let o=e._svgFactory.createElement(`path`);a.append(o);let s=`path_p${this.pageIndex}_${r}`;o.setAttribute(`id`,s),o.setAttribute(`vector-effect`,`non-scaling-stroke`);let c;if(n){let t=e._svgFactory.createElement(`mask`);a.append(t),c=`mask_p${this.pageIndex}_${r}`,t.setAttribute(`id`,c),t.setAttribute(`maskUnits`,`objectBoundingBox`);let n=e._svgFactory.createElement(`rect`);t.append(n),n.setAttribute(`width`,`1`),n.setAttribute(`height`,`1`),n.setAttribute(`fill`,`white`);let i=e._svgFactory.createElement(`use`);t.append(i),i.setAttribute(`href`,`#${s}`),i.setAttribute(`stroke`,`none`),i.setAttribute(`fill`,`black`),i.setAttribute(`fill-rule`,`nonzero`),i.classList.add(`mask`)}let l=e._svgFactory.createElement(`use`);i.append(l),l.setAttribute(`href`,`#${s}`),c&&l.setAttribute(`mask`,`url(#${c})`);let u=l.cloneNode();return i.append(u),l.classList.add(`mainOutline`),u.classList.add(`secondaryOutline`),this.updateProperties(i,t),this.#t.set(r,i),r}finalizeDraw(e,t){this.#n.delete(e),this.updateProperties(e,t)}updateProperties(t,n){if(!n)return;let{root:r,bbox:i,rootClass:a,path:o}=n,s=typeof t==`number`?this.#t.get(t):t;if(s){if(r&&this.#s(s,r),i&&e.#i(s,i),a){let{classList:e}=s;for(let[t,n]of Object.entries(a))e.toggle(t,n)}if(o){let e=s.firstChild.firstChild;this.#s(e,o)}}}updateParent(e,t){if(t===this)return;let n=this.#t.get(e);n&&(t.#e.append(n),this.#t.delete(e),t.#t.set(e,n))}remove(e){this.#n.delete(e),this.#e!==null&&(this.#t.get(e).remove(),this.#t.delete(e))}destroy(){this.#e=null;for(let e of this.#t.values())e.remove();this.#t.clear(),this.#n.clear()}};globalThis._pdfjsTestingUtils={HighlightOutliner:Tc},globalThis.pdfjsLib={AbortException:ei,AnnotationEditorLayer:Wc,AnnotationEditorParamsType:L,AnnotationEditorType:I,AnnotationEditorUIManager:oa,AnnotationLayer:bc,AnnotationMode:Or,AnnotationType:Pr,applyOpacity:Hi,build:Fs,ColorPicker:Is,createValidAbsoluteUrl:Kr,CSSConstants:Vi,DOMSVGFactory:Hs,DrawLayer:Gc,FeatureTest:V,fetchData:xi,findContrastColor:Ji,getDocument:Ts,getFilenameFromUrl:Ei,getPdfFilenameFromUrl:Di,getRGB:Ni,getUuid:di,getXfaPageViewport:Mi,GlobalWorkerOptions:Vo,ImageKind:Nr,InvalidPDFException:Zr,isDataScheme:wi,isPdfFile:Ti,isValidExplicitDest:ka,MathClamp:mi,noContextMenu:U,normalizeUnicode:ui,OPS:Lr,OutputScale:Ri,PasswordResponses:zr,PDFDataRangeTransport:Ds,PDFDateString:ji,PDFWorker:As,PermissionFlag:Ar,PixelsPerInch:bi,RenderingCancelledException:Ci,renderRichText:Yi,ResponseException:Qr,setLayerDimensions:Li,shadow:B,SignatureExtractor:zc,stopEvent:W,SupportedImageMimeTypes:zi,TextLayer:Cs,TouchManager:la,updateUrlHash:qr,Util:H,VerbosityLevel:Ir,version:Ps,XfaLayer:vi};var Kc=`/TTP_IML_1/assets/design1-B_W1SFyZ.pdf`,qc=`/TTP_IML_1/assets/design2-CsPNacYJ.pdf`,Jc=`/TTP_IML_1/assets/design3-DxIv5LUo.pdf`;Vo.workerSrc=new URL(`/TTP_IML_1/assets/pdf.worker.min-Cpi8b8z3.mjs`,``+import.meta.url).toString();var Yc=[{company:`ABC Industries`,contactName:`John Smith`,phone:`9876543210`},{company:`XYZ Corporation`,contactName:`Jane Doe`,phone:`9123456780`},{company:`Tech Solutions Ltd`,contactName:`Robert Brown`,phone:`9988776655`},{company:`Global Packaging`,contactName:`Emily Davis`,phone:`9765432100`},{company:`Prime Manufacturing`,contactName:`Michael Wilson`,phone:`9456789012`}];function Xc({existingOrder:e,onSubmit:t,onCancel:n,onBack:r}){let[i,a]=(0,_.useState)({company:``,contactName:``,phone:``,imlName:``,priority:`medium`}),[o,s]=(0,_.useState)([]),[c,l]=(0,_.useState)(!1),[u,d]=(0,_.useState)(!1),f=(0,_.useRef)(null),p={Round:[`120ml`,`250ml`,`300ml`,`500ml`,`1000ml`],"Round Square":[`450ml`,`500ml`],Rectangle:[`500ml`,`650ml`,`750ml`],"Sweet Box":[`250gms`,`500gms`],"Sweet Box TE":[`TE 250gms`,`TE 500gms`]},m=[{id:1,name:`Design 1`,path:Kc,type:`pdf`},{id:2,name:`Design 2`,path:qc,type:`pdf`},{id:3,name:`Design 3`,path:Jc,type:`pdf`}],h=()=>new Date().toISOString().split(`T`)[0];function g(){return`ORD-${Date.now()}-${Math.floor(Math.random()*1e3)}`}let[v,y]=(0,_.useState)([{id:1,orderNumber:g(),productName:``,size:``,lidColor:{r:255,g:255,b:255,a:1},tubColor:{r:255,g:255,b:255,a:1},imlType:`LID`,lidLabelQty:``,lidProductionQty:``,lidStock:0,tubLabelQty:``,tubProductionQty:``,tubStock:0,budget:0,lidDesignFile:null,lidSelectedOldDesign:null,tubDesignFile:null,tubSelectedOldDesign:null,approvedDate:h(),designSharedMail:!1,designStatus:`pending`,showLidColorPicker:!1,showTubColorPicker:!1,designType:`new`,moveToPurchase:!1,isCollapsed:!1}]),[b,x]=(0,_.useState)({totalEstimated:``,remarks:``}),[S,C]=(0,_.useState)({}),[w,T]=(0,_.useState)({isOpen:!1,type:null,path:null,name:null}),[E,D]=(0,_.useState)([]),[O,k]=(0,_.useState)({paymentType:null,method:``,amount:``,remarks:``}),[A,ee]=(0,_.useState)([]);(0,_.useEffect)(()=>{e&&(a(e.contact),y(e.products),x(e.payment),ee(e.paymentRecords||[]))},[e]);let te=e=>{if(a({...i,company:e}),e.trim()===``){a({company:``,contactName:``,phone:``,imlName:i.imlName,priority:i.priority}),d(!1),s([]),l(!1);return}let t=Yc.filter(t=>t.company.toLowerCase().includes(e.toLowerCase()));s(t),l(t.length>0)},j=e=>{a({...i,company:e.company,contactName:e.contactName,phone:e.phone}),d(!0),l(!1)};(0,_.useEffect)(()=>{i.company.trim()===``&&i.contactName.trim()===``&&d(!1)},[i.company,i.contactName]),(0,_.useEffect)(()=>{let e=e=>{f.current&&!f.current.contains(e.target)&&l(!1)};return document.addEventListener(`mousedown`,e),()=>document.removeEventListener(`mousedown`,e)},[]);let M=(e,t,n)=>{y(v.map(r=>r.id===e?{...r,[t]:n}:r))},ne=(e,t,n,r)=>{y(v.map(i=>{if(i.id===e){let e={...i,[`${t}${n}`]:r},a=(parseInt(e[`${t}LabelQty`])||0)-(parseInt(e[`${t}ProductionQty`])||0);return e[`${t}Stock`]=Math.max(a,0),e}return i}))},N=(e,t,n)=>v.some(r=>r.productName===e&&r.size===t&&r.imlType===n),P=()=>{y(v.map(e=>({...e,isCollapsed:!0})));let e={id:v.length+1,orderNumber:g(),productName:``,size:``,lidColor:{r:255,g:255,b:255,a:1},tubColor:{r:255,g:255,b:255,a:1},imlType:`LID`,lidLabelQty:``,lidProductionQty:``,lidStock:0,tubLabelQty:``,tubProductionQty:``,tubStock:0,budget:0,lidDesignFile:null,lidSelectedOldDesign:null,tubDesignFile:null,tubSelectedOldDesign:null,approvedDate:h(),designSharedMail:!1,designStatus:`pending`,showLidColorPicker:!1,showTubColorPicker:!1,designType:`new`,moveToPurchase:!1,isCollapsed:!1};y([...v,e])},re=e=>{v.length>1&&y(v.filter(t=>t.id!==e))},ie=e=>{y(v.map(t=>t.id===e?{...t,isCollapsed:!t.isCollapsed}:t))},ae=()=>{let n={contact:i,products:v,payment:b,paymentRecords:A,status:e?.status||`pending`};t?t(n):(console.log(n),alert(`Form submitted successfully!`))},oe=async(e,t)=>{try{let n=new FileReader;n.onload=async function(){try{let e=await(await Ts({data:new Uint8Array(this.result),cMapUrl:`https://cdn.jsdelivr.net/npm/pdfjs-dist@3.11.174/cmaps/`,cMapPacked:!0}).promise).getPage(1),n=e.getViewport({scale:1.5}),r=document.createElement(`canvas`),i=r.getContext(`2d`);r.height=n.height,r.width=n.width;let a={canvasContext:i,viewport:n};await e.render(a).promise;let o=r.toDataURL(`image/png`);C(e=>({...e,[t]:o}))}catch(e){console.error(`Error rendering PDF:`,e),C(e=>({...e,[t]:`error`}))}},n.onerror=function(e){console.error(`FileReader error:`,e)},n.readAsArrayBuffer(e)}catch(e){console.error(`Error generating PDF thumbnail:`,e)}},se=async(e,t)=>{try{let n=await(await fetch(e)).blob(),r=new FileReader;r.onload=async function(){try{let e=await(await Ts({data:new Uint8Array(this.result),cMapUrl:`https://cdn.jsdelivr.net/npm/pdfjs-dist@3.11.174/cmaps/`,cMapPacked:!0}).promise).getPage(1),n=e.getViewport({scale:1.5}),r=document.createElement(`canvas`),i=r.getContext(`2d`);r.height=n.height,r.width=n.width;let a={canvasContext:i,viewport:n};await e.render(a).promise;let o=r.toDataURL(`image/png`);C(e=>({...e,[t]:o}))}catch(e){console.error(`Error rendering PDF:`,e),C(e=>({...e,[t]:`error`}))}},r.onerror=function(e){console.error(`FileReader error:`,e)},r.readAsArrayBuffer(n)}catch(e){console.error(`Error fetching PDF:`,e)}};(0,_.useEffect)(()=>{m.filter(e=>e.type===`pdf`).forEach(e=>{S[`old-${e.id}`]||se(e.path,`old-${e.id}`)})},[]);let ce=()=>w.isOpen?(0,F.jsx)(`div`,{className:`fixed inset-0 bg-[#000000ad] bg-opacity-70 z-50 flex items-center justify-center p-4`,children:(0,F.jsxs)(`div`,{className:`bg-white rounded-lg overflow-hidden max-w-6xl w-full max-h-90vh flex flex-col`,children:[(0,F.jsxs)(`div`,{className:`flex items-center justify-between p-4 border-b border-gray-300 bg-gray-50`,children:[(0,F.jsxs)(`h2`,{className:`text-[1.25vw] font-semibold text-gray-800`,children:[`Preview: `,w.name]}),(0,F.jsx)(`button`,{onClick:()=>T({isOpen:!1,type:null,path:null,name:null}),className:`text-gray-500 hover:text-gray-800 text-2vw font-bold cursor-pointer`,children:``})]}),(0,F.jsx)(`div`,{className:`flex-1 overflow-auto flex items-center justify-center p-4`,children:w.type===`pdf`?(0,F.jsx)(`iframe`,{src:`${w.path}#toolbar=1&navpanes=0`,title:w.name,className:`w-full h-full border-0`,style:{minHeight:`60vh`}}):(0,F.jsx)(`img`,{src:w.path,alt:w.name,className:`max-w-full max-h-[70vh] object-contain`})}),(0,F.jsxs)(`div`,{className:`flex justify-end gap-2 p-4 border-t border-gray-300 bg-gray-50`,children:[(0,F.jsx)(`button`,{onClick:()=>T({isOpen:!1,type:null,path:null,name:null}),className:`px-4 py-2 bg-gray-300 text-gray-700 rounded-[0.4vw] cursor-pointer hover:bg-gray-400 hover:text-white font-medium text-0.9vw`,children:`Close`}),(0,F.jsx)(`a`,{href:w.path,download:w.name,className:`px-4 py-2 bg-blue-600 text-white rounded-[0.4vw] hover:bg-blue-700 font-medium text-0.9vw`,children:`Download`})]})]})}):null,le=e=>A.some(t=>t.productIds.includes(e)),ue=e=>{D(e?v.filter(e=>!le(e.id)).map(e=>e.id):[])},de=(e,t)=>{D(t?[...E,e]:E.filter(t=>t!==e))},fe=()=>{if(E.length===0){alert(`Please select at least one product`);return}if(!O.paymentType){alert(`Please select payment type (Advance or PO)`);return}if(O.paymentType===`advance`&&(!O.method||!O.amount)){alert(`Please fill in payment method and amount for Advance payment`);return}let e={id:Date.now(),productIds:[...E],paymentType:O.paymentType,method:O.method,amount:O.amount,remarks:O.remarks,timestamp:new Date().toISOString()};ee([...A,e]),D([]),k({paymentType:null,method:``,amount:``,remarks:``}),alert(`Payment record added successfully!`)},pe=e=>{confirm(`Are you sure you want to remove this payment record?`)&&ee(A.filter(t=>t.id!==e))},me=e=>A.find(t=>t.productIds.includes(e)),he=()=>{let e=v.reduce((e,t)=>e+(parseFloat(t.budget)||0),0),t=A.filter(e=>e.paymentType===`advance`).reduce((e,t)=>e+(parseFloat(t.amount)||0),0),n=new Set(A.flatMap(e=>e.productIds)).size;return{totalBudget:e,totalPaid:t,productsWithPayment:n,productsWithoutPayment:v.length-n,balance:e-t}};return(0,F.jsxs)(`div`,{className:`bg-gray-50 p-0`,children:[(0,F.jsxs)(`div`,{className:`max-w-[90vw] mx-auto bg-white rounded-[0.8vw] shadow-sm pb-[.75vw]`,children:[(0,F.jsxs)(`div`,{className:`flex justify-between items-baseline p-[1vw_1.5vw] border-b border-gray-200`,children:[(0,F.jsxs)(`button`,{className:`flex gap-[.5vw] items-center cursor-pointer`,onClick:()=>{r&&r()},children:[(0,F.jsx)(`svg`,{xmlns:`http://www.w3.org/2000/svg`,viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,strokeWidth:`2`,strokeLinecap:`round`,strokeLinejoin:`round`,className:`w-[1vw] h-[1vw]`,children:(0,F.jsx)(`path`,{d:`M15 18l-6-6 6-6`})}),(0,F.jsx)(`span`,{className:`text-[1vw]`,children:`Back`})]}),(0,F.jsx)(`h1`,{className:`text-[1.5vw] font-semibold text-gray-800 m-0`,children:`Orders/IML Details`})]}),(0,F.jsxs)(`div`,{className:`px-[1.5vw] max-h-[65vh] overflow-auto`,children:[(0,F.jsx)(el,{title:`Contact Details`,children:(0,F.jsxs)(`div`,{className:`grid grid-cols-5 gap-[1.5vw]`,children:[(0,F.jsxs)(`div`,{className:`relative`,ref:f,children:[(0,F.jsx)(J,{label:`Company Name`,required:!0,placeholder:`Enter Company Name`,value:i.company,onChange:e=>te(e.target.value)}),c&&o.length>0&&(0,F.jsx)(`div`,{className:`absolute z-50 w-full bg-white border border-gray-300 rounded-[0.5vw] mt-[0.25vw] shadow-lg max-h-[15vw] overflow-y-auto`,children:o.map((e,t)=>(0,F.jsxs)(`div`,{onClick:()=>j(e),className:`px-[1vw] py-[0.6vw] hover:bg-blue-50 cursor-pointer border-b border-gray-100 last:border-b-0`,children:[(0,F.jsx)(`p`,{className:`text-[0.85vw] font-medium text-gray-800`,children:e.company}),(0,F.jsxs)(`p`,{className:`text-[0.75vw] text-gray-500`,children:[e.contactName,`  `,e.phone]})]},t))})]}),(0,F.jsx)(J,{label:`Contact Name`,required:!0,placeholder:`Enter Contact Name`,value:i.contactName,onChange:e=>a({...i,contactName:e.target.value})}),(0,F.jsx)(J,{label:`Contact Number`,required:!0,placeholder:`Enter Contact Number`,value:i.phone,onChange:e=>a({...i,phone:e.target.value})}),(0,F.jsx)(J,{label:`IML Name`,required:!0,placeholder:`Enter IML Name`,value:i.imlName,onChange:e=>a({...i,imlName:e.target.value})}),(0,F.jsx)(tl,{label:`Priority`,required:!0,placeholder:`Select Priority`,options:[`Low`,`Medium`,`High`],value:i.priority.charAt(0).toUpperCase()+i.priority.slice(1),onChange:e=>a({...i,priority:e.target.value.toLowerCase()})})]})}),v.map((e,t)=>(0,F.jsx)(`div`,{className:`mt-[1vw]`,children:(0,F.jsx)(el,{title:(0,F.jsxs)(`div`,{className:`flex justify-between items-center w-full`,children:[(0,F.jsx)(`span`,{children:e.isCollapsed&&e.productName&&e.size?`Order ${t+1}: ${e.productName} - ${e.size}`:`Order & Design Details ${t+1}`}),(0,F.jsx)(`svg`,{className:`w-[1.2vw] h-[1.2vw] transition-transform duration-200 ${e.isCollapsed?`rotate-180`:``}`,fill:`none`,stroke:`currentColor`,viewBox:`0 0 24 24`,children:(0,F.jsx)(`path`,{strokeLinecap:`round`,strokeLinejoin:`round`,strokeWidth:2,d:`M19 9l-7 7-7-7`})})]}),onClick:()=>ie(e.id),isCollapsed:e.isCollapsed,children:!e.isCollapsed&&(0,F.jsxs)(F.Fragment,{children:[(0,F.jsxs)(`div`,{className:`bg-white rounded-[0.6vw] border-2 border-blue-200 p-[1vw] mb-[1vw]`,children:[(0,F.jsx)(`h3`,{className:`text-[1vw] font-semibold text-blue-900 mb-[1vw]`,children:`Product Basic Details`}),(0,F.jsxs)(`div`,{className:`grid grid-cols-4 gap-[1.5vw]`,children:[(0,F.jsx)(J,{label:`Order Number`,required:!0,placeholder:``,value:e.orderNumber,onChange:e=>{},disabled:!0}),(0,F.jsx)(tl,{label:`Product Name`,required:!0,placeholder:`Select Product`,options:[`Round`,`Round Square`,`Rectangle`,`Sweet Box`,`Sweet Box TE`],value:e.productName,onChange:t=>{y(v.map(n=>n.id===e.id?{...n,productName:t.target.value,size:``}:n))}}),(0,F.jsx)(tl,{label:`Size`,required:!0,placeholder:`Select Size`,options:e.productName&&p[e.productName]||[],value:e.size,onChange:t=>{let n=t.target.value;if(N(e.productName,n,e.imlType)){alert(`This product combination (${e.productName} - ${n} - ${e.imlType}) already exists!`);return}M(e.id,`size`,n)},disabled:!e.productName}),(0,F.jsx)(tl,{label:`IML Type`,required:!0,placeholder:`Select Type`,options:[`LID`,`TUB`,`LID & TUB`],value:e.imlType,onChange:t=>{let n=t.target.value;if(e.productName&&e.size&&N(e.productName,e.size,n)){alert(`This product combination (${e.productName} - ${e.size} - ${n}) already exists!`);return}y(v.map(t=>t.id===e.id?{...t,imlType:n,showLidColorPicker:!1,showTubColorPicker:!1}:t))}})]}),(0,F.jsxs)(`div`,{className:`grid grid-cols-4 gap-[1.5vw] mt-[1vw]`,children:[(e.imlType===`LID`||e.imlType===`LID & TUB`)&&(0,F.jsx)(Qc,{label:`LID Color`,value:e.lidColor,onChange:t=>M(e.id,`lidColor`,t),showPicker:e.showLidColorPicker,setShowPicker:t=>M(e.id,`showLidColorPicker`,t)}),(e.imlType===`TUB`||e.imlType===`LID & TUB`)&&(0,F.jsx)(Qc,{label:`TUB Color`,value:e.tubColor,onChange:t=>M(e.id,`tubColor`,t),showPicker:e.showTubColorPicker,setShowPicker:t=>M(e.id,`showTubColorPicker`,t)})]}),e.imlType===`LID & TUB`?(0,F.jsxs)(F.Fragment,{children:[(0,F.jsxs)(`div`,{className:`mt-[1vw]`,children:[(0,F.jsx)(`h4`,{className:`text-[0.9vw] font-semibold text-blue-800 mb-[0.75vw]`,children:`LID Quantities`}),(0,F.jsxs)(`div`,{className:`grid grid-cols-3 gap-[1.5vw]`,children:[(0,F.jsx)(J,{label:`Labels Qty (LID)`,required:!0,placeholder:`Enter Label Quantity`,value:e.lidLabelQty,onChange:t=>ne(e.id,`lid`,`LabelQty`,t.target.value)}),(0,F.jsx)(J,{label:`Production Qty (LID)`,required:!0,placeholder:`Enter Production Quantity`,value:e.lidProductionQty,onChange:t=>ne(e.id,`lid`,`ProductionQty`,t.target.value)}),(0,F.jsx)(J,{label:`Stock (LID)`,required:!0,placeholder:`Stock`,value:e.lidStock,onChange:e=>{},disabled:!0})]})]}),(0,F.jsxs)(`div`,{className:`mt-[1vw]`,children:[(0,F.jsx)(`h4`,{className:`text-[0.9vw] font-semibold text-blue-800 mb-[0.75vw]`,children:`TUB Quantities`}),(0,F.jsxs)(`div`,{className:`grid grid-cols-3 gap-[1.5vw]`,children:[(0,F.jsx)(J,{label:`Labels Qty (TUB)`,required:!0,placeholder:`Enter Label Quantity`,value:e.tubLabelQty,onChange:t=>ne(e.id,`tub`,`LabelQty`,t.target.value)}),(0,F.jsx)(J,{label:`Production Qty (TUB)`,required:!0,placeholder:`Enter Production Quantity`,value:e.tubProductionQty,onChange:t=>ne(e.id,`tub`,`ProductionQty`,t.target.value)}),(0,F.jsx)(J,{label:`Stock (TUB)`,required:!0,placeholder:`Stock`,value:e.tubStock,onChange:e=>{},disabled:!0})]})]})]}):(0,F.jsxs)(`div`,{className:`grid grid-cols-4 gap-[1.5vw] mt-[1vw]`,children:[(0,F.jsx)(J,{label:`Labels Qty${e.imlType!==`LID`&&e.imlType!==`TUB`?``:` (${e.imlType})`}`,required:!0,placeholder:`Enter Label Quantity`,value:e.imlType===`LID`?e.lidLabelQty:e.tubLabelQty,onChange:t=>{let n=e.imlType===`LID`?`lid`:`tub`;ne(e.id,n,`LabelQty`,t.target.value)}}),(0,F.jsx)(J,{label:`Production Qty${e.imlType!==`LID`&&e.imlType!==`TUB`?``:` (${e.imlType})`}`,required:!0,placeholder:`Enter Production Quantity`,value:e.imlType===`LID`?e.lidProductionQty:e.tubProductionQty,onChange:t=>{let n=e.imlType===`LID`?`lid`:`tub`;ne(e.id,n,`ProductionQty`,t.target.value)}}),(0,F.jsx)(J,{label:`Stock${e.imlType!==`LID`&&e.imlType!==`TUB`?``:` (${e.imlType})`}`,required:!0,placeholder:`Stock`,value:e.imlType===`LID`?e.lidStock:e.tubStock,onChange:e=>{},disabled:!0}),(0,F.jsx)(J,{label:`Budget (in Rs.)`,required:!0,placeholder:`Enter Budget`,value:e.budget,onChange:t=>{M(e.id,`budget`,t.target.value)}})]}),e.imlType===`LID & TUB`&&(0,F.jsx)(`div`,{className:`grid grid-cols-4 gap-[1.5vw] mt-[1vw]`,children:(0,F.jsx)(J,{label:`Budget (in Rs.)`,required:!0,placeholder:`Enter Budget`,value:e.budget,onChange:t=>{M(e.id,`budget`,t.target.value)}})})]}),(0,F.jsxs)(`div`,{className:`flex justify-end gap-[0.8vw] mb-[1vw]`,children:[u&&(0,F.jsx)(`button`,{onClick:()=>M(e.id,`designType`,`existing`),className:`px-[2vw] py-[0.6vw] rounded-[0.4vw] cursor-pointer text-[0.85vw] font-medium transition-all duration-200 ${e.designType===`existing`?`bg-blue-600 text-white shadow-md`:`bg-gray-200 text-gray-700 hover:bg-gray-300`}`,children:`Existing Design`}),(0,F.jsx)(`button`,{onClick:()=>M(e.id,`designType`,`new`),className:`px-[2vw] py-[0.6vw] rounded-[0.4vw] cursor-pointer text-[0.85vw] font-medium transition-all duration-200 ${e.designType===`new`?`bg-blue-600 text-white shadow-md`:`bg-gray-200 text-gray-700 hover:bg-gray-300`}`,children:`New Design`})]}),(0,F.jsxs)(`div`,{className:`bg-gradient-to-br from-purple-50 to-blue-50 rounded-[0.6vw] border-2 border-purple-200 p-[1vw] mb-[0]`,children:[(0,F.jsx)(`h3`,{className:`text-[1vw] font-semibold text-purple-900 mb-[1vw]`,children:`Design Selection`}),e.designType===`existing`?(0,F.jsxs)(`div`,{className:`grid grid-cols-2 gap-[2vw]`,children:[(0,F.jsxs)(`div`,{children:[(0,F.jsx)(`label`,{className:`block text-[0.85vw] font-medium text-gray-700 mb-[0.5vw]`,children:`Old Design Files`}),(0,F.jsx)(`div`,{className:`border-2 border-dashed border-gray-300 rounded-[0.6vw] p-[1vw] min-h-[11vw] bg-white mb-[1vw]`,children:(0,F.jsx)(`div`,{className:`grid grid-cols-3 gap-[1.5vw]`,children:m.map(t=>(0,F.jsxs)(`div`,{className:`text-center`,children:[(0,F.jsx)(`div`,{className:`w-[6vw] h-[6vw] mx-auto bg-gray-100 rounded-[0.6vw] flex items-center justify-center text-[3vw] mb-[0.8vw] border-2 border-gray-300 overflow-hidden`,children:t.type===`pdf`?S[`old-${t.id}`]?(0,F.jsx)(`img`,{src:S[`old-${t.id}`],alt:t.name,className:`w-full h-full object-cover`}):(0,F.jsxs)(`div`,{className:`flex flex-col items-center`,children:[(0,F.jsxs)(`svg`,{className:`w-[3vw] h-[3vw] text-red-500`,fill:`currentColor`,viewBox:`0 0 24 24`,children:[(0,F.jsx)(`path`,{d:`M14 2H6a2 2 0 00-2 2v16a2 2 0 002 2h12a2 2 0 002-2V8l-6-6z`}),(0,F.jsx)(`path`,{d:`M14 2v6h6M10 13h4m-4 4h4`,stroke:`white`,strokeWidth:`1`})]}),(0,F.jsx)(`span`,{className:`text-[0.6vw] text-gray-500 mt-1`,children:`Loading...`})]}):(0,F.jsx)(`img`,{src:t.path,alt:t.name,className:`w-full h-full object-cover`})}),(0,F.jsxs)(`label`,{className:`flex items-center justify-center gap-[0.4vw] text-[0.75vw] text-gray-500 cursor-pointer`,children:[(0,F.jsx)(`input`,{type:`radio`,name:`design-${e.id}`,checked:e.selectedOldDesign===t.id,onChange:()=>{M(e.id,`selectedOldDesign`,t.id),t.type===`pdf`&&!S[`old-${t.id}`]&&se(t.path,`old-${t.id}`)},className:`w-[0.9vw] h-[0.9vw] cursor-pointer`}),(0,F.jsx)(`span`,{className:`text-[0.75vw] font-medium`,children:t.name})]})]},t.id))})}),(0,F.jsxs)(`div`,{className:`w-[50%]`,children:[(0,F.jsx)(`label`,{className:`block text-[0.85vw] font-medium text-gray-700 mb-[0.5vw]`,children:`Approve Date`}),(0,F.jsx)(`input`,{type:`date`,value:e.approvedDate,onChange:t=>M(e.id,`approvedDate`,t.target.value),className:`w-full px-[1vw] py-[0.8vw] border border-gray-300 bg-white rounded-[0.5vw] text-[0.85vw] outline-none box-border focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all`})]})]}),(0,F.jsxs)(`div`,{children:[(0,F.jsx)(`label`,{className:`block text-[0.85vw] font-medium text-gray-700 mb-[0.5vw]`,children:`Selected Design Preview`}),(0,F.jsx)(`div`,{className:`border-2 relative border-gray-300 rounded-[0.6vw] p-[1vw] min-h-[11vw] bg-white flex items-center justify-center`,children:e.selectedOldDesign?(()=>{let t=m.find(t=>t.id===e.selectedOldDesign);return(0,F.jsxs)(`div`,{className:`text-center w-full`,children:[(0,F.jsx)(`div`,{className:`w-full h-auto max-h-[12vw] mx-auto rounded-[0.6vw] flex items-center justify-center mb-[1vw] overflow-hidden`,children:t.type===`pdf`?S[`old-${t.id}`]?(0,F.jsx)(`img`,{src:S[`old-${t.id}`],alt:t.name,className:`w-full h-auto max-h-[4.5vw] object-contain`}):(0,F.jsxs)(`div`,{className:`flex flex-col items-center py-4`,children:[(0,F.jsx)(`div`,{className:`animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mb-2`}),(0,F.jsx)(`p`,{className:`text-gray-500 text-[0.8vw]`,children:`Loading PDF preview...`})]}):(0,F.jsx)(`img`,{src:t.path,alt:t.name,className:`w-full h-auto max-h-[12vw] object-contain`})}),(0,F.jsxs)(`div`,{className:`flex justify-center align-center gap-[.5vw]`,children:[(0,F.jsx)(`p`,{className:`text-[0.85vw] text-gray-700 font-medium`,children:t.name}),(0,F.jsx)(`span`,{className:`inline-block px-3 py-1 rounded text-[0.75vw] font-medium ${t.type===`pdf`?`bg-red-100 text-red-700`:`bg-blue-100 text-blue-700`}`,children:t.type===`pdf`?`PDF`:`Image`})]}),(0,F.jsx)(`div`,{className:`flex justify-end gap-[1vw] mt-[2vw]`,children:(0,F.jsxs)(`button`,{onClick:()=>{let t=m.find(t=>t.id===e.selectedOldDesign);t&&T({isOpen:!0,type:t.type,path:t.path,name:t.name})},className:`px-[1vw] py-[0.4vw] cursor-pointer bg-blue-600 text-white rounded-[0.4vw] hover:bg-blue-700 font-medium text-[0.85vw] transition-all duration-200 shadow-sm hover:shadow-md flex items-center gap-[0.4vw] justify-center absolute right-[.5vw] bottom-[.5vw]`,children:[(0,F.jsxs)(`svg`,{className:`w-[1vw] h-[1vw]`,fill:`none`,stroke:`currentColor`,viewBox:`0 0 24 24`,children:[(0,F.jsx)(`path`,{strokeLinecap:`round`,strokeLinejoin:`round`,strokeWidth:2,d:`M15 12a3 3 0 11-6 0 3 3 0 016 0z`}),(0,F.jsx)(`path`,{strokeLinecap:`round`,strokeLinejoin:`round`,strokeWidth:2,d:`M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z`})]}),`Preview Full`]})})]})})():(0,F.jsx)(`p`,{className:`text-[0.85vw] text-gray-400`,children:`No design selected`})})]})]}):(0,F.jsxs)(`div`,{children:[(0,F.jsx)(`div`,{className:`mb-[1.25vw]`,children:(0,F.jsxs)(`label`,{className:`flex items-center gap-[0.6vw] text-[0.85vw] text-gray-700 cursor-pointer`,children:[(0,F.jsx)(`input`,{type:`checkbox`,checked:e.designSharedMail,onChange:t=>M(e.id,`designSharedMail`,t.target.checked),className:`w-[1.1vw] h-[1.1vw] cursor-pointer`}),(0,F.jsx)(`span`,{className:`text-[0.85vw] font-medium`,children:`Design Shared In Mail On Last Meeting`})]})}),(0,F.jsxs)(`div`,{className:`grid grid-cols-3 gap-[2vw]`,children:[(0,F.jsx)(`div`,{children:(0,F.jsx)(tl,{label:`Design Status`,required:!0,placeholder:`Select Status`,options:[`Pending`,`Approved`],value:e.designStatus===`pending`?`Pending`:e.designStatus===`approved`?`Approved`:``,onChange:t=>{let n=t.target.value.toLowerCase();M(e.id,`designStatus`,n)}})}),e.designStatus===`approved`&&(0,F.jsxs)(`div`,{children:[(0,F.jsxs)(`label`,{className:`block text-[0.85vw] font-medium text-gray-700 mb-[0.5vw]`,children:[`Approve Date`,` `,(0,F.jsx)(`span`,{className:`text-red-500`,children:`*`})]}),(0,F.jsx)(`input`,{type:`date`,value:e.approvedDate,onChange:t=>M(e.id,`approvedDate`,t.target.value),className:`w-full px-[0.75vw] py-[0.45vw] border border-gray-300 bg-white rounded-[0.5vw] text-[0.85vw] outline-none box-border focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all`})]})]}),e.designStatus===`approved`&&(0,F.jsxs)(`div`,{className:`mt-[1vw]`,children:[(0,F.jsxs)(`label`,{className:`block text-0.9vw font-medium text-gray-700 mb-[0.5vw]`,children:[`Upload New Design File`,` `,(0,F.jsx)(`span`,{className:`text-red-500`,children:`*`})]}),(0,F.jsxs)(`div`,{className:`grid grid-cols-2 gap-[2vw]`,children:[(0,F.jsx)(`div`,{children:(0,F.jsx)($c,{file:e.designFile,onFileChange:t=>{M(e.id,`designFile`,t),t&&t.type===`application/pdf`&&oe(t,e.id)},productId:e.id,small:!0})}),(0,F.jsx)(`div`,{children:e.designFile&&(0,F.jsx)(Zc,{file:e.designFile,productId:e.id,pdfPreviews:S,setPreviewModal:T})})]})]})]})]}),v.length>1&&(0,F.jsx)(`div`,{className:`flex justify-end`,children:(0,F.jsx)(`button`,{onClick:()=>re(e.id),className:`px-[2vw] py-[0.7vw] border border-red-500 text-red-500 bg-white rounded-[0.5vw] text-[0.85vw] cursor-pointer transition-all duration-200 hover:bg-red-50`,children:`Remove Product`})})]})})},e.id)),(0,F.jsx)(`div`,{className:`flex justify-end mt-[1vw]`,children:(0,F.jsxs)(`button`,{onClick:P,className:`px-[1vw] py-[0.5vw] bg-blue-600 text-white border-none rounded-[0.5vw] text-[0.85vw] font-medium cursor-pointer flex items-center gap-[0.6vw] transition-all duration-200 hover:bg-blue-700 shadow-md hover:shadow-lg`,children:[(0,F.jsx)(`span`,{className:`text-[1.2vw]`,children:`+`}),` Add Another Product`]})}),(0,F.jsxs)(el,{title:`Payment Details - Client Payments`,children:[(0,F.jsx)(`div`,{className:`flex items-center justify-between bg-gradient-to-r from-blue-50 to-indigo-50 border-2 border-blue-200 rounded-[0.5vw] p-[1vw] mb-[1.25vw]`,children:(0,F.jsxs)(`div`,{className:`flex items-center gap-[2vw]`,children:[(0,F.jsxs)(`div`,{children:[(0,F.jsx)(`p`,{className:`text-[0.7vw] text-blue-600 font-medium`,children:`Total Products`}),(0,F.jsx)(`p`,{className:`text-[1.4vw] font-bold text-blue-700`,children:v.length})]}),(0,F.jsxs)(`div`,{className:`border-l-2 border-blue-300 pl-[2vw]`,children:[(0,F.jsx)(`p`,{className:`text-[0.7vw] text-green-600 font-medium`,children:`Payment Received`}),(0,F.jsx)(`p`,{className:`text-[1.4vw] font-bold text-green-700`,children:he().productsWithPayment})]}),(0,F.jsxs)(`div`,{className:`border-l-2 border-blue-300 pl-[2vw]`,children:[(0,F.jsx)(`p`,{className:`text-[0.7vw] text-orange-600 font-medium`,children:`Pending`}),(0,F.jsx)(`p`,{className:`text-[1.4vw] font-bold text-orange-700`,children:he().productsWithoutPayment})]}),(0,F.jsxs)(`div`,{className:`border-l-2 border-blue-300 pl-[2vw]`,children:[(0,F.jsx)(`p`,{className:`text-[0.7vw] text-purple-600 font-medium`,children:`Total Amount`}),(0,F.jsxs)(`p`,{className:`text-[1.4vw] font-bold text-purple-700`,children:[``,he().totalBudget.toFixed(2)]})]}),(0,F.jsxs)(`div`,{className:`border-l-2 border-blue-300 pl-[2vw]`,children:[(0,F.jsx)(`p`,{className:`text-[0.7vw] text-green-600 font-medium`,children:`Received`}),(0,F.jsxs)(`p`,{className:`text-[1.4vw] font-bold text-green-700`,children:[``,he().totalPaid.toFixed(2)]})]})]})}),(0,F.jsxs)(`div`,{className:`grid grid-cols-2 gap-[1.5vw]`,children:[(0,F.jsxs)(`div`,{children:[(0,F.jsx)(`div`,{className:`flex items-center justify-between mb-[0.75vw]`,children:(0,F.jsxs)(`label`,{className:`flex items-center gap-[0.5vw] cursor-pointer`,children:[(0,F.jsx)(`input`,{type:`checkbox`,checked:E.length>0&&E.length===v.filter(e=>!le(e.id)).length,onChange:e=>ue(e.target.checked),disabled:v.every(e=>le(e.id)),className:`w-[1vw] h-[1vw] cursor-pointer`}),(0,F.jsxs)(`span`,{className:`text-[0.85vw] font-semibold text-gray-700`,children:[`Select Products (`,E.length,` selected)`]})]})}),(0,F.jsx)(`div`,{className:`border-2 border-gray-200 rounded-[0.5vw] max-h-[22vw] overflow-y-auto`,children:v.map(e=>{let t=me(e.id),n=!!t;return(0,F.jsx)(`div`,{className:`p-[0.75vw] border-b border-gray-200 last:border-b-0 transition-colors ${n?`bg-green-50`:E.includes(e.id)?`bg-blue-50`:`bg-white hover:bg-gray-50`}`,children:(0,F.jsxs)(`div`,{className:`flex items-center gap-[0.75vw]`,children:[(0,F.jsx)(`input`,{type:`checkbox`,checked:E.includes(e.id),onChange:t=>de(e.id,t.target.checked),disabled:n,className:`w-[0.9vw] h-[0.9vw] cursor-pointer disabled:cursor-not-allowed flex-shrink-0`}),(0,F.jsxs)(`div`,{className:`flex-1 min-w-0`,children:[(0,F.jsxs)(`div`,{className:`flex items-center justify-between gap-[0.5vw]`,children:[(0,F.jsx)(`span`,{className:`text-[0.75vw] font-mono text-gray-600 truncate`,children:e.orderNumber}),n&&(0,F.jsx)(`span`,{className:`text-[0.65vw] bg-green-100 text-green-700 px-[0.5vw] py-[0.15vw] rounded font-medium flex-shrink-0`,children:` Received`})]}),(0,F.jsxs)(`p`,{className:`text-[0.8vw] font-medium text-gray-800 truncate`,children:[e.productName||`Not Selected`,` `,e.size&&`(${e.size})`]}),(0,F.jsxs)(`div`,{className:`flex items-center justify-between mt-[0.25vw]`,children:[(0,F.jsxs)(`span`,{className:`text-[0.75vw] text-gray-600`,children:[`Budget:`,` `,(0,F.jsxs)(`span`,{className:`font-semibold text-gray-800`,children:[``,e.budget||`0`]})]}),n&&t.paymentType===`advance`&&(0,F.jsxs)(`span`,{className:`text-[0.7vw] text-green-600 font-semibold`,children:[`Received: `,t.amount]}),n&&t.paymentType===`po`&&(0,F.jsx)(`span`,{className:`text-[0.7vw] bg-blue-100 text-blue-700 px-[0.5vw] py-[0.15vw] rounded font-medium`,children:`PO`})]})]})]})},e.id)})})]}),(0,F.jsx)(`div`,{children:E.length>0?(0,F.jsxs)(`div`,{className:`bg-gradient-to-br from-green-50 to-emerald-50 border-2 border-green-300 rounded-[0.6vw] p-[1.25vw] h-full`,children:[(0,F.jsxs)(`h3`,{className:`text-[0.95vw] font-semibold text-green-900 mb-[1vw]`,children:[`Record Payment - `,E.length,` Product(s)`]}),(0,F.jsxs)(`div`,{className:`flex gap-[1.5vw] mb-[1vw]`,children:[(0,F.jsxs)(`label`,{className:`flex items-center gap-[0.4vw] cursor-pointer`,children:[(0,F.jsx)(`input`,{type:`radio`,name:`bulkPaymentType`,value:`advance`,checked:O.paymentType===`advance`,onChange:e=>k({...O,paymentType:e.target.value}),className:`w-[1vw] h-[1vw] cursor-pointer`}),(0,F.jsx)(`span`,{className:`text-[0.85vw] font-medium text-gray-700`,children:`Advance Received`})]}),(0,F.jsxs)(`label`,{className:`flex items-center gap-[0.4vw] cursor-pointer`,children:[(0,F.jsx)(`input`,{type:`radio`,name:`bulkPaymentType`,value:`po`,checked:O.paymentType===`po`,onChange:e=>k({...O,paymentType:e.target.value}),className:`w-[1vw] h-[1vw] cursor-pointer`}),(0,F.jsx)(`span`,{className:`text-[0.85vw] font-medium text-gray-700`,children:`PO`})]})]}),O.paymentType===`advance`&&(0,F.jsxs)(`div`,{className:`space-y-[1vw]`,children:[(0,F.jsxs)(`div`,{className:`grid grid-cols-2 gap-[1vw]`,children:[(0,F.jsxs)(`div`,{children:[(0,F.jsxs)(`label`,{className:`block text-[0.8vw] font-medium text-gray-700 mb-[0.4vw]`,children:[`Payment Method`,` `,(0,F.jsx)(`span`,{className:`text-red-500`,children:`*`})]}),(0,F.jsxs)(`select`,{value:O.method,onChange:e=>k({...O,method:e.target.value}),className:`w-full px-[0.75vw] py-[0.6vw] border border-gray-300 bg-white rounded-[0.4vw] text-[0.8vw] outline-none focus:ring-2 focus:ring-green-500 focus:border-green-500`,children:[(0,F.jsx)(`option`,{value:``,children:`Select Method`}),(0,F.jsx)(`option`,{value:`Cash`,children:`Cash`}),(0,F.jsx)(`option`,{value:`UPI`,children:`UPI`}),(0,F.jsx)(`option`,{value:`Bank Transfer`,children:`Bank Transfer`}),(0,F.jsx)(`option`,{value:`Cheque`,children:`Cheque`}),(0,F.jsx)(`option`,{value:`Card`,children:`Card`})]})]}),(0,F.jsxs)(`div`,{children:[(0,F.jsxs)(`label`,{className:`block text-[0.8vw] font-medium text-gray-700 mb-[0.4vw]`,children:[`Amount Received`,` `,(0,F.jsx)(`span`,{className:`text-red-500`,children:`*`})]}),(0,F.jsx)(`input`,{type:`number`,placeholder:` 0.00`,value:O.amount,onChange:e=>k({...O,amount:e.target.value}),className:`w-full px-[0.75vw] py-[0.6vw] border border-gray-300 bg-white rounded-[0.4vw] text-[0.8vw] outline-none focus:ring-2 focus:ring-green-500 focus:border-green-500`})]})]}),(0,F.jsxs)(`div`,{children:[(0,F.jsx)(`label`,{className:`block text-[0.8vw] font-medium text-gray-700 mb-[0.4vw]`,children:`Payment Remarks`}),(0,F.jsx)(`textarea`,{placeholder:`Enter payment notes or reference...`,value:O.remarks,onChange:e=>k({...O,remarks:e.target.value}),rows:`2`,className:`w-full px-[0.75vw] py-[0.6vw] border border-gray-300 bg-white rounded-[0.4vw] text-[0.8vw] outline-none focus:ring-2 focus:ring-green-500 focus:border-green-500 resize-none`})]})]}),O.paymentType===`po`&&(0,F.jsxs)(`div`,{children:[(0,F.jsx)(`label`,{className:`block text-[0.8vw] font-medium text-gray-700 mb-[0.4vw]`,children:`PO Details / Reference`}),(0,F.jsx)(`textarea`,{placeholder:`Enter PO number, date, or other details...`,value:O.remarks,onChange:e=>k({...O,remarks:e.target.value}),rows:`3`,className:`w-full px-[0.75vw] py-[0.6vw] border border-gray-300 bg-white rounded-[0.4vw] text-[0.8vw] outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 resize-none`})]}),(0,F.jsxs)(`div`,{className:`bg-white rounded-[0.4vw] p-[0.75vw] mt-[1vw] border border-gray-200`,children:[(0,F.jsx)(`p`,{className:`text-[0.75vw] font-semibold text-gray-700 mb-[0.5vw]`,children:`Selected Products:`}),(0,F.jsx)(`div`,{className:`max-h-[8vw] overflow-y-auto space-y-[0.3vw]`,children:E.map(e=>{let t=v.find(t=>t.id===e);return(0,F.jsxs)(`div`,{className:`flex items-center justify-between text-[0.7vw] py-[0.25vw] border-b border-gray-100 last:border-b-0`,children:[(0,F.jsx)(`span`,{className:`text-gray-600 font-mono`,children:t.orderNumber}),(0,F.jsxs)(`span`,{className:`text-gray-800 font-medium`,children:[``,t.budget||`0`]})]},e)})}),(0,F.jsxs)(`div`,{className:`mt-[0.5vw] pt-[0.5vw] border-t-2 border-gray-300`,children:[(0,F.jsxs)(`div`,{className:`flex items-center justify-between mb-[0.25vw]`,children:[(0,F.jsx)(`span`,{className:`text-[0.8vw] font-semibold text-gray-700`,children:`Total Estimate:`}),(0,F.jsxs)(`span`,{className:`text-[0.9vw] font-bold text-purple-700`,children:[``,(()=>E.reduce((e,t)=>{let n=v.find(e=>e.id===t);return e+(parseFloat(n?.budget)||0)},0))().toFixed(2)]})]}),O.paymentType===`advance`&&O.amount&&(0,F.jsxs)(`div`,{className:`flex items-center justify-between`,children:[(0,F.jsx)(`span`,{className:`text-[0.75vw] text-gray-600`,children:`Receiving Now:`}),(0,F.jsxs)(`span`,{className:`text-[0.85vw] font-bold text-green-600`,children:[``,parseFloat(O.amount||0).toFixed(2)]})]})]})]}),(0,F.jsxs)(`div`,{className:`flex gap-[0.75vw] mt-[1vw]`,children:[(0,F.jsx)(`button`,{onClick:()=>{D([]),k({paymentType:null,method:``,amount:``,remarks:``})},className:`flex-1 px-[1vw] py-[0.6vw] border-2 border-gray-300 text-gray-700 bg-white rounded-[0.4vw] text-[0.8vw] font-medium cursor-pointer transition-all duration-200 hover:bg-gray-50`,children:`Cancel`}),(0,F.jsx)(`button`,{onClick:fe,className:`flex-1 px-[1vw] py-[0.6vw] bg-green-600 text-white border-none rounded-[0.4vw] text-[0.8vw] font-semibold cursor-pointer transition-all duration-200 hover:bg-green-700 shadow-md`,children:`Record Payment`})]})]}):(0,F.jsxs)(`div`,{className:`bg-gray-50 border-2 border-dashed border-gray-300 rounded-[0.6vw] p-[2vw] h-full flex flex-col items-center justify-center text-center`,children:[(0,F.jsx)(`svg`,{className:`w-[3vw] h-[3vw] text-gray-400 mb-[1vw]`,fill:`none`,stroke:`currentColor`,viewBox:`0 0 24 24`,children:(0,F.jsx)(`path`,{strokeLinecap:`round`,strokeLinejoin:`round`,strokeWidth:2,d:`M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2`})}),(0,F.jsx)(`p`,{className:`text-[0.85vw] font-medium text-gray-600 mb-[0.25vw]`,children:`No Products Selected`}),(0,F.jsx)(`p`,{className:`text-[0.75vw] text-gray-500`,children:`Select products from the left to record payment`})]})})]}),A.length>0&&(0,F.jsxs)(`div`,{className:`mt-[1.25vw]`,children:[(0,F.jsxs)(`h3`,{className:`text-[0.85vw] font-semibold text-gray-800 mb-[0.75vw]`,children:[`Payment History (`,A.length,` records)`]}),(0,F.jsx)(`div`,{className:`border-2 border-gray-200 rounded-[0.5vw] overflow-hidden max-h-[15vw] overflow-y-auto`,children:(0,F.jsxs)(`table`,{className:`w-full`,children:[(0,F.jsx)(`thead`,{className:`bg-gray-100 sticky top-0`,children:(0,F.jsxs)(`tr`,{children:[(0,F.jsx)(`th`,{className:`text-left px-[1vw] py-[0.6vw] text-[0.75vw] font-semibold text-gray-700 border-b-2 border-gray-300`,children:`Date & Time`}),(0,F.jsx)(`th`,{className:`text-left px-[1vw] py-[0.6vw] text-[0.75vw] font-semibold text-gray-700 border-b-2 border-gray-300`,children:`Type`}),(0,F.jsx)(`th`,{className:`text-left px-[1vw] py-[0.6vw] text-[0.75vw] font-semibold text-gray-700 border-b-2 border-gray-300`,children:`Method / Details`}),(0,F.jsx)(`th`,{className:`text-right px-[1vw] py-[0.6vw] text-[0.75vw] font-semibold text-gray-700 border-b-2 border-gray-300`,children:`Amount`}),(0,F.jsx)(`th`,{className:`text-center px-[1vw] py-[0.6vw] text-[0.75vw] font-semibold text-gray-700 border-b-2 border-gray-300`,children:`Products`}),(0,F.jsx)(`th`,{className:`text-center px-[1vw] py-[0.6vw] text-[0.75vw] font-semibold text-gray-700 border-b-2 border-gray-300`,children:`Action`})]})}),(0,F.jsx)(`tbody`,{children:A.map(e=>(0,F.jsxs)(`tr`,{className:`border-b border-gray-200 hover:bg-gray-50`,children:[(0,F.jsx)(`td`,{className:`px-[1vw] py-[0.7vw] text-[0.7vw] text-gray-600`,children:new Date(e.timestamp).toLocaleString(`en-IN`,{day:`2-digit`,month:`short`,year:`numeric`,hour:`2-digit`,minute:`2-digit`})}),(0,F.jsx)(`td`,{className:`px-[1vw] py-[0.7vw]`,children:(0,F.jsx)(`span`,{className:`inline-block px-[0.6vw] py-[0.25vw] rounded-[0.3vw] text-[0.7vw] font-semibold ${e.paymentType===`advance`?`bg-green-100 text-green-700`:`bg-blue-100 text-blue-700`}`,children:e.paymentType===`advance`?`Advance`:`PO`})}),(0,F.jsx)(`td`,{className:`px-[1vw] py-[0.7vw] text-[0.75vw] text-gray-700`,children:e.paymentType===`advance`?(0,F.jsxs)(`div`,{children:[(0,F.jsx)(`span`,{className:`font-medium`,children:e.method}),e.remarks&&(0,F.jsx)(`p`,{className:`text-[0.7vw] text-gray-500 mt-[0.15vw] truncate max-w-[12vw]`,children:e.remarks})]}):(0,F.jsx)(`span`,{className:`text-[0.7vw] text-gray-500 truncate max-w-[12vw] block`,children:e.remarks||`PO Payment`})}),(0,F.jsx)(`td`,{className:`px-[1vw] py-[0.7vw] text-right text-[0.8vw] font-bold text-green-700`,children:e.paymentType===`advance`?`${e.amount}`:`-`}),(0,F.jsx)(`td`,{className:`px-[1vw] py-[0.7vw] text-center`,children:(0,F.jsxs)(`span`,{className:`inline-block bg-gray-100 px-[0.6vw] py-[0.25vw] rounded-[0.3vw] text-[0.7vw] text-gray-700 font-medium`,children:[e.productIds.length,` `,e.productIds.length===1?`Product`:`Products`]})}),(0,F.jsx)(`td`,{className:`px-[1vw] py-[0.7vw] text-center`,children:(0,F.jsx)(`button`,{onClick:()=>pe(e.id),className:`px-[0.75vw] py-[0.35vw] bg-red-500 text-white rounded-[0.3vw] text-[0.7vw] font-medium cursor-pointer hover:bg-red-600 transition-all`,children:`Remove`})})]},e.id))})]})})]}),(0,F.jsxs)(`div`,{className:`grid grid-cols-3 gap-[1vw] mt-[1.25vw]`,children:[(0,F.jsxs)(`div`,{className:`bg-gradient-to-br from-purple-50 to-pink-50 border-2 border-purple-200 rounded-[0.5vw] p-[1vw]`,children:[(0,F.jsx)(`label`,{className:`block text-[0.75vw] font-medium text-gray-700 mb-[0.4vw]`,children:`Total Estimated Amount`}),(0,F.jsx)(`input`,{type:`number`,placeholder:` 0.00`,value:b.totalEstimated,onChange:e=>x({...b,totalEstimated:e.target.value}),className:`w-full px-[0.75vw] py-[0.6vw] border border-gray-300 bg-white rounded-[0.4vw] text-[0.85vw] font-semibold outline-none focus:ring-2 focus:ring-purple-500 focus:border-purple-500`})]}),(0,F.jsxs)(`div`,{className:`bg-gradient-to-br from-green-50 to-emerald-50 border-2 border-green-200 rounded-[0.5vw] p-[1vw]`,children:[(0,F.jsx)(`p`,{className:`text-[0.75vw] font-medium text-gray-700 mb-[0.4vw]`,children:`Total Received`}),(0,F.jsxs)(`p`,{className:`text-[1.5vw] font-bold text-green-700`,children:[``,he().totalPaid.toFixed(2)]})]}),(0,F.jsxs)(`div`,{className:`bg-gradient-to-br from-orange-50 to-amber-50 border-2 border-orange-200 rounded-[0.5vw] p-[1vw]`,children:[(0,F.jsx)(`p`,{className:`text-[0.75vw] font-medium text-gray-700 mb-[0.4vw]`,children:`Balance Due`}),(0,F.jsxs)(`p`,{className:`text-[1.5vw] font-bold text-orange-700`,children:[``,he().balance.toFixed(2)]})]})]})]})]}),(0,F.jsxs)(`div`,{className:`flex justify-end gap-[1vw] mt-[1.25vw] px-[1.5vw]`,children:[(0,F.jsx)(`button`,{className:`px-[1.5vw] py-[0.65vw] border-2 border-gray-300 text-gray-700 bg-white rounded-[0.5vw] text-[0.85vw] font-medium cursor-pointer transition-all duration-200 hover:bg-gray-50`,onClick:()=>{n&&n()},children:`Cancel`}),(0,F.jsx)(`button`,{onClick:ae,className:`px-[1.5vw] py-[0.65vw] bg-green-600 text-white border-none rounded-[0.5vw] text-[0.85vw] font-semibold cursor-pointer transition-all duration-200 hover:bg-green-700 shadow-md`,children:`Submit Order`})]})]}),(0,F.jsx)(ce,{})]})}function Zc({file:e,productId:t,pdfPreviews:n,setPreviewModal:r}){return(0,F.jsxs)(`div`,{className:`p-[1vw] bg-gray-50 rounded-[0.5vw] border-2 border-gray-300 h-full relative`,children:[(0,F.jsx)(`p`,{className:`text-[0.85vw] font-medium text-gray-700 mb-[0.5vw]`,children:`Preview:`}),e.type===`application/pdf`?(0,F.jsx)(`div`,{className:`mb-[1vw]`,children:n[t]?(0,F.jsx)(`img`,{src:n[t],alt:`PDF Preview`,className:`w-full h-auto border border-gray-300 rounded`,style:{maxHeight:`150px`,objectFit:`contain`}}):(0,F.jsxs)(`div`,{className:`flex flex-col items-center justify-center h-32 bg-gray-200 rounded`,children:[(0,F.jsx)(`div`,{className:`animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mb-2`}),(0,F.jsx)(`p`,{className:`text-gray-500 text-0.8vw`,children:`Generating preview...`})]})}):e.type.startsWith(`image/`)&&(0,F.jsx)(`img`,{src:URL.createObjectURL(e),alt:`Design Preview`,className:`w-full h-auto mb-1vw border border-gray-300 rounded`,style:{maxHeight:`9vw`,objectFit:`contain`}}),(0,F.jsxs)(`div`,{className:`mt-2`,children:[(0,F.jsx)(`div`,{className:`flex items-center justify-between text-0.75vw`,children:(0,F.jsx)(`span`,{className:`text-gray-600 truncate pr-2`,children:e.name})}),(0,F.jsxs)(`div`,{className:`flex items-center justify-between text-0.7vw mt-1`,children:[(0,F.jsxs)(`span`,{className:`text-gray-500`,children:[(e.size/1024).toFixed(2),` KB`]}),(0,F.jsx)(`span`,{className:`px-2 py-0.5 rounded text-0.65vw font-medium ${e.type===`application/pdf`?`bg-red-100 text-red-700`:`bg-blue-100 text-blue-700`}`,children:e.type===`application/pdf`?`PDF`:`Image`})]})]}),(0,F.jsxs)(`button`,{onClick:()=>{let t=URL.createObjectURL(e);r({isOpen:!0,type:e.type===`application/pdf`?`pdf`:`image`,path:t,name:e.name})},className:`px-[1vw] py-[0.4vw] bg-green-600 text-white rounded-[0.4vw] hover:bg-green-700 font-medium text-[0.75vw] transition-all duration-200 shadow-sm hover:shadow-md flex items-center gap-[0.3vw] justify-center ml-[auto] mt-[.75vw] absolute top-[-.30vw] right-[1vw]`,children:[(0,F.jsxs)(`svg`,{className:`w-[0.9vw] h-[0.9vw]`,fill:`none`,stroke:`currentColor`,viewBox:`0 0 24 24`,children:[(0,F.jsx)(`path`,{strokeLinecap:`round`,strokeLinejoin:`round`,strokeWidth:2,d:`M15 12a3 3 0 11-6 0 3 3 0 016 0z`}),(0,F.jsx)(`path`,{strokeLinecap:`round`,strokeLinejoin:`round`,strokeWidth:2,d:`M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z`})]}),`Preview`]})]})}function Qc({label:e,value:t,onChange:n,showPicker:r,setShowPicker:i}){let a=(0,_.useRef)(null);(0,_.useEffect)(()=>{let e=e=>{a.current&&!a.current.contains(e.target)&&i(!1)};return r&&document.addEventListener(`mousedown`,e),()=>{document.removeEventListener(`mousedown`,e)}},[r,i]);let o=e=>`rgba(${e.r}, ${e.g}, ${e.b}, ${e.a})`,s=e=>`#${e.r.toString(16).padStart(2,`0`)}${e.g.toString(16).padStart(2,`0`)}${e.b.toString(16).padStart(2,`0`)}${Math.round(e.a*255).toString(16).padStart(2,`0`)}`,c=e=>{e=e.replace(`#`,``);let t,n,r,i;if(e.length===8)t=parseInt(e.substring(0,2),16),n=parseInt(e.substring(2,4),16),r=parseInt(e.substring(4,6),16),i=parseInt(e.substring(6,8),16)/255;else if(e.length===6)t=parseInt(e.substring(0,2),16),n=parseInt(e.substring(2,4),16),r=parseInt(e.substring(4,6),16),i=1;else return{r:255,g:255,b:255,a:1};return{r:t,g:n,b:r,a:i}},l=e=>{let t=e.target.value;/^#?[0-9A-Fa-f]{0,8}$/.test(t)&&(t.length===7||t.length===9)&&n(c(t))};return(0,F.jsxs)(`div`,{className:`relative`,children:[(0,F.jsx)(`label`,{className:`block text-[0.85vw] font-medium text-gray-700 mb-[0.5vw]`,children:e}),(0,F.jsxs)(`div`,{className:`relative`,children:[(0,F.jsx)(`input`,{type:`text`,placeholder:`#RRGGBBAA`,value:s(t),onChange:l,className:`w-full px-[0.75vw] py-[0.45vw] pr-[3.5vw] border border-gray-300 bg-white rounded-[0.5vw] text-[0.85vw] outline-none box-border focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all uppercase font-mono`,onClick:()=>i(!r)}),(0,F.jsx)(`button`,{type:`button`,onClick:()=>i(!r),className:`absolute right-[0.5vw] top-1/2 -translate-y-1/2 w-[2.5vw] h-[2vw] rounded border-2 border-gray-300 cursor-pointer transition-all hover:border-blue-500 overflow-hidden`,style:{background:`
              linear-gradient(${o(t)}, ${o(t)}),
              repeating-conic-gradient(#ddd 0% 25%, white 0% 50%) 50% / 10px 10px
            `},title:`Pick a color`})]}),r&&(0,F.jsxs)(`div`,{ref:a,className:`absolute top-[4.5vw] left-0 z-50 p-4 bg-white rounded-lg shadow-2xl border border-gray-200`,children:[(0,F.jsx)(`div`,{className:`mb-3`,children:(0,F.jsx)(Sr,{color:t,onChange:n,style:{width:`100%`}})}),(0,F.jsxs)(`div`,{className:`flex items-center gap-2 mb-3`,children:[(0,F.jsx)(`span`,{className:`text-[0.75vw] text-gray-600 font-medium`,children:`Selected:`}),(0,F.jsx)(`div`,{className:`w-10 h-10 rounded border-2 border-gray-300 overflow-hidden`,style:{background:`
                  linear-gradient(${o(t)}, ${o(t)}),
                  repeating-conic-gradient(#ddd 0% 25%, white 0% 50%) 50% / 10px 10px
                `}}),(0,F.jsxs)(`div`,{className:`flex flex-col`,children:[(0,F.jsx)(`span`,{className:`text-[0.8vw] text-gray-700 font-mono font-semibold`,children:s(t).toUpperCase()}),(0,F.jsxs)(`span`,{className:`text-[0.7vw] text-gray-500`,children:[`Opacity: `,Math.round(t.a*100),`%`]})]})]}),(0,F.jsxs)(`div`,{className:`mb-3`,children:[(0,F.jsx)(`label`,{className:`text-[0.75vw] text-gray-600 font-medium block mb-1`,children:`HEX Color Code`}),(0,F.jsx)(`input`,{type:`text`,value:s(t),onChange:l,className:`w-full px-3 py-2 border border-gray-300 rounded text-[0.85vw] font-mono uppercase focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none`,placeholder:`#RRGGBBAA`})]}),(0,F.jsxs)(`div`,{className:`mb-3`,children:[(0,F.jsx)(`label`,{className:`text-[0.75vw] text-gray-600 font-medium block mb-2`,children:`RGBA Values`}),(0,F.jsxs)(`div`,{className:`grid grid-cols-4 gap-2 text-[0.7vw]`,children:[(0,F.jsxs)(`div`,{children:[(0,F.jsx)(`label`,{className:`text-gray-600 block mb-1`,children:`R`}),(0,F.jsx)(`input`,{type:`number`,min:`0`,max:`255`,value:t.r,onChange:e=>n({...t,r:parseInt(e.target.value)||0}),className:`w-full px-2 py-1 border rounded text-center focus:ring-1 focus:ring-blue-500 outline-none`})]}),(0,F.jsxs)(`div`,{children:[(0,F.jsx)(`label`,{className:`text-gray-600 block mb-1`,children:`G`}),(0,F.jsx)(`input`,{type:`number`,min:`0`,max:`255`,value:t.g,onChange:e=>n({...t,g:parseInt(e.target.value)||0}),className:`w-full px-2 py-1 border rounded text-center focus:ring-1 focus:ring-blue-500 outline-none`})]}),(0,F.jsxs)(`div`,{children:[(0,F.jsx)(`label`,{className:`text-gray-600 block mb-1`,children:`B`}),(0,F.jsx)(`input`,{type:`number`,min:`0`,max:`255`,value:t.b,onChange:e=>n({...t,b:parseInt(e.target.value)||0}),className:`w-full px-2 py-1 border rounded text-center focus:ring-1 focus:ring-blue-500 outline-none`})]}),(0,F.jsxs)(`div`,{children:[(0,F.jsx)(`label`,{className:`text-gray-600 block mb-1`,children:`A`}),(0,F.jsx)(`input`,{type:`number`,min:`0`,max:`1`,step:`0.01`,value:t.a,onChange:e=>n({...t,a:parseFloat(e.target.value)||0}),className:`w-full px-2 py-1 border rounded text-center focus:ring-1 focus:ring-blue-500 outline-none`})]})]})]}),(0,F.jsx)(`button`,{type:`button`,onClick:()=>i(!1),className:`w-full px-3 py-2 bg-blue-600 text-white rounded text-[0.85vw] hover:bg-blue-700 transition-all font-medium`,children:`Done`})]})]})}function $c({file:e,onFileChange:t,productId:n,small:r}){let[i,a]=(0,_.useState)(!1),[o,s]=(0,_.useState)(null),[c,l]=(0,_.useState)(null),u=e=>{if(e){t(e);let n=e.type;if(l(n),n.startsWith(`image/`)){let t=new FileReader;t.onloadend=()=>{s(t.result)},t.readAsDataURL(e)}else s(null)}},d=e=>{e.preventDefault(),e.stopPropagation(),a(!0)},f=e=>{e.preventDefault(),e.stopPropagation(),a(!1)},p=e=>{e.preventDefault(),e.stopPropagation()},m=e=>{e.preventDefault(),e.stopPropagation(),a(!1);let t=e.dataTransfer.files[0];t&&([`image/jpeg`,`image/jpg`,`image/png`,`image/gif`,`image/webp`,`application/pdf`].includes(t.type)?u(t):alert(`Please upload only images (JPEG, PNG, GIF, WebP) or PDF files`))},h=e=>{e.stopPropagation(),t(null),s(null),l(null)};return(0,F.jsx)(`div`,{className:`border-2 ${i?`border-blue-500 bg-blue-50`:`border-dashed border-gray-300`} rounded-[0.6vw] p-[2vw] bg-white ${r?`min-h-[10vw]`:`min-h-[15vw]`} transition-all duration-200`,onDragEnter:d,onDragOver:p,onDragLeave:f,onDrop:m,children:(0,F.jsxs)(`div`,{className:`flex flex-col items-center justify-center h-full`,children:[(0,F.jsx)(`input`,{type:`file`,accept:`image/*,application/pdf`,onChange:e=>{let n=e.target.files[0];n&&t(n)},className:`hidden`,id:`file-upload-${n}`}),e?(0,F.jsxs)(`div`,{className:`w-full`,children:[c&&c.startsWith(`image/`)&&o?(0,F.jsxs)(`div`,{className:`relative`,children:[(0,F.jsx)(`img`,{src:o,alt:`Preview`,className:`w-full h-auto max-h-[12vw] object-contain rounded-[0.4vw] border border-gray-200`}),(0,F.jsx)(`button`,{onClick:h,className:`absolute top-2 right-2 bg-red-500 text-white rounded-full w-6 h-6 flex items-center justify-center hover:bg-red-600 transition-all shadow-md`,title:`Remove file`,children:``}),(0,F.jsxs)(`div`,{className:`mt-2 text-center`,children:[(0,F.jsx)(`p`,{className:`text-[0.8vw] text-gray-700 font-medium truncate`,children:e.name}),(0,F.jsxs)(`p`,{className:`text-[0.7vw] text-gray-500`,children:[(e.size/1024).toFixed(2),` KB`]})]})]}):c===`application/pdf`?(0,F.jsxs)(`div`,{className:`flex flex-col items-center`,children:[(0,F.jsxs)(`div`,{className:`relative`,children:[(0,F.jsxs)(`div`,{className:`w-[8vw] h-[10vw] bg-red-50 rounded-[0.4vw] border-2 border-red-200 flex flex-col items-center justify-center`,children:[(0,F.jsxs)(`svg`,{className:`w-[4vw] h-[4vw] text-red-500`,fill:`currentColor`,viewBox:`0 0 24 24`,children:[(0,F.jsx)(`path`,{d:`M14 2H6a2 2 0 00-2 2v16a2 2 0 002 2h12a2 2 0 002-2V8l-6-6z`}),(0,F.jsx)(`path`,{d:`M14 2v6h6M10 13h4m-4 4h4`,stroke:`white`,strokeWidth:`1`})]}),(0,F.jsx)(`span`,{className:`text-[0.85vw] font-bold text-red-600 mt-1`,children:`PDF`})]}),(0,F.jsx)(`button`,{onClick:h,className:`absolute -top-2 -right-2 bg-red-500 text-white rounded-full w-6 h-6 flex items-center justify-center hover:bg-red-600 transition-all shadow-md`,title:`Remove file`,children:``})]}),(0,F.jsxs)(`div`,{className:`mt-2 text-center max-w-full`,children:[(0,F.jsx)(`p`,{className:`text-[0.8vw] text-gray-700 font-medium truncate px-2`,children:e.name}),(0,F.jsxs)(`p`,{className:`text-[0.7vw] text-gray-500`,children:[(e.size/1024).toFixed(2),` KB`]})]})]}):(0,F.jsxs)(`div`,{className:`flex flex-col items-center`,children:[(0,F.jsxs)(`div`,{className:`relative`,children:[(0,F.jsx)(`div`,{className:`w-[6.5vw] h-[8vw] bg-gray-100 rounded-[0.4vw] border-2 border-gray-300 flex flex-col items-center justify-center`,children:(0,F.jsx)(`svg`,{className:`w-[4vw] h-[4vw] text-gray-400`,fill:`currentColor`,viewBox:`0 0 24 24`,children:(0,F.jsx)(`path`,{d:`M14 2H6a2 2 0 00-2 2v16a2 2 0 002 2h12a2 2 0 002-2V8l-6-6z`})})}),(0,F.jsx)(`button`,{onClick:h,className:`absolute -top-2 -right-2 bg-red-500 text-white rounded-full w-6 h-6 flex items-center justify-center hover:bg-red-600 transition-all shadow-md`,title:`Remove file`,children:``})]}),(0,F.jsxs)(`div`,{className:`mt-2 text-center`,children:[(0,F.jsx)(`p`,{className:`text-[0.8vw] text-gray-700 font-medium truncate`,children:e.name}),(0,F.jsxs)(`p`,{className:`text-[0.7vw] text-gray-500`,children:[(e.size/1024).toFixed(2),` KB`]})]})]}),(0,F.jsx)(`label`,{htmlFor:`file-upload-${n}`,className:`mt-3 block w-full`,children:(0,F.jsx)(`div`,{className:`cursor-pointer text-center px-3 py-2 border border-blue-500 text-blue-600 rounded-[0.4vw] text-[0.8vw] font-medium hover:bg-blue-50 transition-all`,children:`Change File`})})]}):(0,F.jsxs)(`label`,{htmlFor:`file-upload-${n}`,className:`cursor-pointer flex flex-col items-center w-full`,children:[(0,F.jsx)(`div`,{className:`w-[3.5vw] h-[3.5vw] ${i?`bg-blue-200`:`bg-gray-200`} rounded-full flex items-center justify-center mb-[0.8vw] transition-all`,children:(0,F.jsx)(`svg`,{className:`w-[2vw] h-[2vw] ${i?`text-blue-600`:`text-gray-500`}`,fill:`none`,stroke:`currentColor`,viewBox:`0 0 24 24`,children:(0,F.jsx)(`path`,{strokeLinecap:`round`,strokeLinejoin:`round`,strokeWidth:2,d:`M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12`})})}),(0,F.jsx)(`p`,{className:`text-[0.85vw] ${i?`text-blue-600 font-medium`:`text-gray-500`} my-[0.2vw]`,children:i?`Drop file here`:`Upload Design File`}),(0,F.jsx)(`p`,{className:`text-[0.75vw] text-gray-400 my-[0.2vw]`,children:`Click to browse or drag & drop`}),(0,F.jsx)(`p`,{className:`text-[0.7vw] text-gray-400 mt-[0.5vw]`,children:`Supports: JPG, PNG, GIF, WebP, PDF`})]})]})})}function el({title:e,children:t,onClick:n,isCollapsed:r}){return(0,F.jsxs)(`div`,{className:`mt-[1vw]`,children:[(0,F.jsx)(`div`,{className:`bg-blue-600 text-white px-[1.5vw] py-[0.8vw] rounded-t-[0.6vw] text-[1vw] font-medium ${n?`cursor-pointer`:``}`,onClick:n,children:e}),(0,F.jsx)(`div`,{className:`bg-gray-50 p-[1.25vw] rounded-b-[0.6vw] border border-gray-200 border-t-0`,children:t})]})}function J({label:e,required:t,placeholder:n,value:r,onChange:i,disabled:a,onBlur:o,type:s=`text`}){return(0,F.jsxs)(`div`,{children:[(0,F.jsxs)(`label`,{className:`block text-[0.85vw] font-medium text-gray-700 mb-[0.5vw]`,children:[e,` `,t]}),(0,F.jsx)(`input`,{type:s,placeholder:n,value:r,onChange:i,onBlur:o,disabled:a,className:`w-full text-[.8vw] px-[0.75vw] py-[0.45vw] border border-gray-300 bg-white rounded-[0.5vw] text-[0.85vw] outline-none box-border focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all disabled:bg-gray-100 disabled:cursor-not-allowed`})]})}function tl({label:e,required:t,placeholder:n,options:r,value:i,onChange:a,disabled:o}){return(0,F.jsxs)(`div`,{children:[(0,F.jsxs)(`label`,{className:`block text-[0.85vw] font-medium text-gray-700 mb-[0.5vw]`,children:[e,` `,t]}),(0,F.jsxs)(`div`,{className:`relative`,children:[(0,F.jsxs)(`select`,{value:i,onChange:a,disabled:o,className:`w-full text-[.9vw] px-[0.75vw] py-[0.45vw] pr-[2.5vw] border border-gray-300 rounded-[0.5vw] text-[0.85vw] outline-none bg-white box-border appearance-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all cursor-pointer ${o?`bg-gray-100 cursor-not-allowed opacity-60`:``}`,children:[(0,F.jsx)(`option`,{value:``,disabled:!0,children:n}),r.map(e=>(0,F.jsx)(`option`,{value:e,children:e},e))]}),(0,F.jsx)(`div`,{className:`absolute right-[1vw] top-1/2 -translate-y-1/2 pointer-events-none`,children:(0,F.jsx)(`svg`,{className:`w-[1vw] h-[1vw] text-gray-500`,fill:`none`,stroke:`currentColor`,viewBox:`0 0 24 24`,children:(0,F.jsx)(`path`,{strokeLinecap:`round`,strokeLinejoin:`round`,strokeWidth:2,d:`M19 9l-7 7-7-7`})})})]})]})}var nl=`iml_orders`;function rl(){let[e,t]=(0,_.useState)(`dashboard`),[n,r]=(0,_.useState)([]),[i,a]=(0,_.useState)(null),[o,s]=(0,_.useState)(``),[c,l]=(0,_.useState)(`all`);Ge(),(0,_.useEffect)(()=>{let e=localStorage.getItem(nl);e&&r(JSON.parse(e))},[]),(0,_.useEffect)(()=>{n.length>0&&localStorage.setItem(nl,JSON.stringify(n))},[n]);let u=()=>{a(null),t(`form`)},d=e=>{a(e),t(`form`)},f=e=>{window.confirm(`Are you sure you want to delete this order?`)&&(r(n.filter(t=>t.id!==e)),localStorage.setItem(nl,JSON.stringify(n.filter(t=>t.id!==e))))},p=e=>{if(i)r(n.map(t=>t.id===i.id?{...e,id:i.id}:t));else{let t={...e,id:Date.now(),createdAt:new Date().toISOString()};r([...n,t])}t(`dashboard`),a(null)},m=()=>{t(`dashboard`),a(null)},h=n.filter(e=>{let t=e.contact.company.toLowerCase().includes(o.toLowerCase())||e.contact.contactName.toLowerCase().includes(o.toLowerCase())||e.contact.imlName.toLowerCase().includes(o.toLowerCase()),n=c===`all`||e.status===c;return t&&n}),g={total:n.length,pending:n.filter(e=>e.status===`pending`).length,inProgress:n.filter(e=>e.status===`in-progress`).length,completed:n.filter(e=>e.status===`completed`).length};return e===`form`?(0,F.jsx)(Xc,{existingOrder:i,onSubmit:p,onCancel:m}):(0,F.jsx)(`div`,{className:`p-0`,children:(0,F.jsxs)(`div`,{className:`max-w-[95vw] mx-auto rounded-[1.5vw] overflow-hidden`,children:[(0,F.jsxs)(`div`,{className:`bg-white shadow-sm p-[1.5vw] `,children:[(0,F.jsxs)(`div`,{className:`flex items-center justify-between mb-[1.25vw]`,children:[(0,F.jsxs)(`div`,{children:[(0,F.jsx)(`h1`,{className:`text-[1.5vw] font-bold text-black mb-[0.3vw]`,children:`IML Orders Management`}),(0,F.jsx)(`p`,{className:`text-[0.85vw] text-gray-500`,children:`Manage all your orders, designs, and client information`})]}),(0,F.jsxs)(`button`,{onClick:u,className:`flex items-center gap-[0.5vw] px-[1.5vw] py-[0.75vw] bg-blue-600 text-white rounded-[0.5vw] text-[0.9vw] font-semibold cursor-pointer transition-all duration-200 hover:bg-blue-700 shadow-md hover:shadow-lg`,children:[(0,F.jsx)(`svg`,{className:`w-[1.2vw] h-[1.2vw]`,fill:`none`,stroke:`currentColor`,viewBox:`0 0 24 24`,children:(0,F.jsx)(`path`,{strokeLinecap:`round`,strokeLinejoin:`round`,strokeWidth:2,d:`M12 4v16m8-8H4`})}),`Create New Order`]})]}),(0,F.jsxs)(`div`,{className:`grid grid-cols-4 gap-[1.5vw]`,children:[(0,F.jsx)(il,{title:`Total Orders`,value:g.total,color:`blue`,icon:(0,F.jsx)(`svg`,{fill:`none`,stroke:`currentColor`,viewBox:`0 0 24 24`,children:(0,F.jsx)(`path`,{strokeLinecap:`round`,strokeLinejoin:`round`,strokeWidth:2,d:`M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z`})})}),(0,F.jsx)(il,{title:`Pending`,value:g.pending,color:`orange`,icon:(0,F.jsx)(`svg`,{fill:`none`,stroke:`currentColor`,viewBox:`0 0 24 24`,children:(0,F.jsx)(`path`,{strokeLinecap:`round`,strokeLinejoin:`round`,strokeWidth:2,d:`M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z`})})}),(0,F.jsx)(il,{title:`In Progress`,value:g.inProgress,color:`yellow`,icon:(0,F.jsx)(`svg`,{fill:`none`,stroke:`currentColor`,viewBox:`0 0 24 24`,children:(0,F.jsx)(`path`,{strokeLinecap:`round`,strokeLinejoin:`round`,strokeWidth:2,d:`M13 10V3L4 14h7v7l9-11h-7z`})})}),(0,F.jsx)(il,{title:`Completed`,value:g.completed,color:`green`,icon:(0,F.jsx)(`svg`,{fill:`none`,stroke:`currentColor`,viewBox:`0 0 24 24`,children:(0,F.jsx)(`path`,{strokeLinecap:`round`,strokeLinejoin:`round`,strokeWidth:2,d:`M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z`})})})]})]}),(0,F.jsx)(`div`,{className:`bg-white shadow-sm p-[.5vw_1.25vw]`,children:(0,F.jsxs)(`div`,{className:`flex items-center gap-[1.5vw]`,children:[(0,F.jsxs)(`div`,{className:`flex-1 relative`,children:[(0,F.jsx)(`svg`,{className:`absolute left-[0.75vw] top-1/2 -translate-y-1/2 w-[1.1vw] h-[1.1vw] text-gray-400`,fill:`none`,stroke:`currentColor`,viewBox:`0 0 24 24`,children:(0,F.jsx)(`path`,{strokeLinecap:`round`,strokeLinejoin:`round`,strokeWidth:2,d:`M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z`})}),(0,F.jsx)(`input`,{type:`text`,placeholder:`Search by company, contact name, or IML name...`,value:o,onChange:e=>s(e.target.value),className:`w-full pl-[2.5vw] pr-[1vw] py-[0.65vw] border border-gray-300 rounded-[0.5vw] text-[0.9vw] outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500`})]}),(0,F.jsxs)(`div`,{className:`flex items-center gap-[0.5vw]`,children:[(0,F.jsx)(`label`,{className:`text-[0.9vw] font-medium text-black`,children:`Status:`}),(0,F.jsxs)(`select`,{value:c,onChange:e=>l(e.target.value),className:`px-[1vw] py-[0.65vw] border border-gray-300 rounded-[0.5vw] text-[0.9vw] outline-none focus:ring-2 focus:ring-blue-500 cursor-pointer bg-white`,children:[(0,F.jsx)(`option`,{value:`all`,children:`All`}),(0,F.jsx)(`option`,{value:`pending`,children:`Pending`}),(0,F.jsx)(`option`,{value:`in-progress`,children:`In Progress`}),(0,F.jsx)(`option`,{value:`completed`,children:`Completed`})]})]}),(0,F.jsxs)(`div`,{className:`text-[0.85vw] text-gray-600 font-medium whitespace-nowrap`,children:[h.length,` `,h.length===1?`order`:`orders`]})]})}),(0,F.jsx)(`div`,{className:`bg-white shadow-sm overflow-hidden`,children:h.length===0?(0,F.jsxs)(`div`,{className:`flex flex-col items-center justify-center py-[1vw] text-center h-[50vh] overflow-auto`,children:[(0,F.jsx)(`svg`,{className:`w-[6vw] h-[6vw] text-gray-300 mb-[1vw]`,fill:`none`,stroke:`currentColor`,viewBox:`0 0 24 24`,children:(0,F.jsx)(`path`,{strokeLinecap:`round`,strokeLinejoin:`round`,strokeWidth:2,d:`M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z`})}),(0,F.jsx)(`h3`,{className:`text-[1.2vw] font-semibold text-black mb-[0.5vw]`,children:`No orders found`}),(0,F.jsx)(`p`,{className:`text-[0.9vw] text-gray-800 mb-[1.5vw]`,children:o||c!==`all`?`Try adjusting your filters`:`Get started by creating your first order`}),!o&&c===`all`&&(0,F.jsx)(`button`,{onClick:u,className:`px-[1.5vw] py-[0.75vw] bg-blue-600 text-white rounded-[0.5vw] text-[0.9vw] font-semibold cursor-pointer hover:bg-blue-700 transition-all`,children:`Create New Order`})]}):(0,F.jsx)(`div`,{className:`pt-[1vw] px-[1.25vw] pb-[1vw] overflow-hidden`,children:(0,F.jsxs)(`div`,{className:`border-2 border-gray-300 rounded-[0.5vw] overflow-hidden`,children:[(0,F.jsx)(`div`,{className:`overflow-hidden bg-gradient-to-r from-blue-50 to-indigo-50 pr-[.95%]`,children:(0,F.jsx)(`table`,{className:`w-full table-fixed border-collapse`,children:(0,F.jsx)(`thead`,{children:(0,F.jsxs)(`tr`,{children:[(0,F.jsx)(`th`,{className:`text-left px-[1vw] py-[1vw] text-[0.85vw] border-r border-gray-300 font-semibold text-black`,style:{width:`15%`},children:`Company`}),(0,F.jsx)(`th`,{className:`text-left px-[1vw] py-[1vw] text-[0.85vw] border-r border-gray-300 font-semibold text-black`,style:{width:`15%`},children:`Contact`}),(0,F.jsx)(`th`,{className:`text-left px-[1vw] py-[1vw] text-[0.85vw] border-r border-gray-300 font-semibold text-black`,style:{width:`12%`},children:`IML Name`}),(0,F.jsx)(`th`,{className:`text-center px-[1vw] py-[1vw] text-[0.85vw] border-r border-gray-300 font-semibold text-black`,style:{width:`10%`},children:`Products`}),(0,F.jsx)(`th`,{className:`text-center px-[1vw] py-[1vw] text-[0.85vw] border-r border-gray-300 font-semibold text-black`,style:{width:`10%`},children:`Status`}),(0,F.jsx)(`th`,{className:`text-right px-[1vw] py-[1vw] text-[0.85vw] border-r border-gray-300 font-semibold text-black`,style:{width:`11%`},children:`Total Budget`}),(0,F.jsx)(`th`,{className:`text-center px-[1vw] py-[1vw] text-[0.85vw] border-r border-gray-300 font-semibold text-black`,style:{width:`10%`},children:`Created`}),(0,F.jsx)(`th`,{className:`text-center px-[1vw] py-[1vw] text-[0.85vw] font-semibold text-black`,style:{width:`17%`},children:`Actions`})]})})})}),(0,F.jsx)(`div`,{className:`overflow-y-auto overflow-x-hidden max-h-[40vh] border-t border-gray-300`,children:(0,F.jsx)(`table`,{className:`w-full table-fixed border-collapse`,children:(0,F.jsx)(`tbody`,{children:h.map((e,t)=>(0,F.jsx)(al,{order:e,index:t,onEdit:()=>d(e),onDelete:()=>f(e.id)},e.id))})})})]})})})]})})}function il({title:e,value:t,color:n,icon:r}){return(0,F.jsxs)(`div`,{className:`bg-gradient-to-br ${{blue:`from-blue-50 to-blue-100 border-blue-200 text-blue-700`,orange:`from-orange-50 to-orange-100 border-orange-200 text-orange-700`,yellow:`from-yellow-50 to-yellow-100 border-yellow-200 text-yellow-700`,green:`from-green-50 to-green-100 border-green-200 text-green-700`}[n]} border-2 rounded-[0.6vw] p-[.9vw] transition-all duration-200 hover:shadow-md`,children:[(0,F.jsxs)(`div`,{className:`flex items-center justify-between mb-[0.25vw]`,children:[(0,F.jsx)(`p`,{className:`text-[0.8vw] font-medium opacity-80`,children:e}),(0,F.jsx)(`div`,{className:`w-[1.5vw] h-[1.5vw] opacity-60`,children:r})]}),(0,F.jsx)(`p`,{className:`text-[1.5vw] font-bold`,children:t})]})}function al({order:e,index:t,onEdit:n,onDelete:r}){let i={pending:`bg-orange-100 text-orange-700 border-orange-200`,"in-progress":`bg-blue-100 text-blue-700 border-blue-200`,completed:`bg-green-100 text-green-700 border-green-200`},a=e.products?.reduce((e,t)=>e+(parseFloat(t.budget)||0),0);return(0,F.jsxs)(`tr`,{className:`border-b border-gray-300 last:border-b-0 hover:bg-blue-50 transition-colors ${t%2==0?`bg-white`:`bg-gray-50`}`,children:[(0,F.jsx)(`td`,{className:`px-[1vw] py-[1vw] border-r border-gray-300`,style:{width:`15%`},children:(0,F.jsx)(`p`,{className:`text-[0.85vw] font-semibold text-black truncate`,children:e.contact.company})}),(0,F.jsxs)(`td`,{className:`px-[1vw] py-[1vw] border-r border-gray-300`,style:{width:`15%`},children:[(0,F.jsx)(`p`,{className:`text-[0.85vw] text-black truncate`,children:e.contact.contactName}),(0,F.jsxs)(`p`,{className:`text-[0.75vw] text-gray-800 truncate`,children:[`( `,e.contact.phone,` )`]})]}),(0,F.jsx)(`td`,{className:`px-[1vw] py-[1vw] border-r border-gray-300`,style:{width:`12%`},children:(0,F.jsx)(`p`,{className:`text-[0.85vw] text-black truncate`,children:e.contact.imlName})}),(0,F.jsx)(`td`,{className:`text-center px-[1vw] py-[1vw] border-r border-gray-300`,style:{width:`10%`},children:(0,F.jsx)(`span`,{className:`inline-block bg-gray-200 text-black px-[0.75vw] py-[0.3vw] rounded-full text-[0.8vw] font-medium`,children:e.products?.length||0})}),(0,F.jsx)(`td`,{className:`text-center px-[1vw] py-[1vw] border-r border-gray-300`,style:{width:`10%`},children:(0,F.jsx)(`span`,{className:`inline-block border px-[0.75vw] py-[0.3vw] rounded-[0.4vw] text-[0.75vw] font-semibold ${i[e.status||`pending`]}`,children:(e.status||`pending`).replace(`-`,` `).toUpperCase()})}),(0,F.jsx)(`td`,{className:`text-right px-[1vw] py-[1vw] border-r border-gray-300`,style:{width:`11%`},children:(0,F.jsxs)(`p`,{className:`text-[0.9vw] font-bold text-black`,children:[``,a?.toFixed(2)||`0.00`]})}),(0,F.jsx)(`td`,{className:`text-center px-[1vw] py-[1vw] border-r border-gray-300`,style:{width:`10%`},children:(0,F.jsx)(`p`,{className:`text-[0.8vw] text-gray-600`,children:new Date(e.createdAt).toLocaleDateString(`en-IN`,{day:`2-digit`,month:`short`,year:`numeric`})})}),(0,F.jsx)(`td`,{className:`text-center px-[1vw] py-[1vw]`,style:{width:`17%`},children:(0,F.jsxs)(`div`,{className:`flex items-center justify-center gap-[0.5vw]`,children:[(0,F.jsxs)(`button`,{onClick:n,className:`px-[0.75vw] py-[0.4vw] bg-blue-600 text-white rounded-[0.4vw] text-[0.75vw] font-medium cursor-pointer hover:bg-blue-700 transition-all flex items-center gap-[0.3vw]`,title:`View/Edit`,children:[(0,F.jsxs)(`svg`,{className:`w-[0.9vw] h-[0.9vw]`,fill:`none`,stroke:`currentColor`,viewBox:`0 0 24 24`,children:[(0,F.jsx)(`path`,{strokeLinecap:`round`,strokeLinejoin:`round`,strokeWidth:2,d:`M15 12a3 3 0 11-6 0 3 3 0 016 0z`}),(0,F.jsx)(`path`,{strokeLinecap:`round`,strokeLinejoin:`round`,strokeWidth:2,d:`M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z`})]}),`View`]}),(0,F.jsx)(`button`,{onClick:r,className:`px-[0.75vw] py-[0.4vw] bg-red-500 text-white rounded-[0.4vw] text-[0.75vw] font-medium cursor-pointer hover:bg-red-600 transition-all`,title:`Delete`,children:(0,F.jsx)(`svg`,{className:`w-[0.9vw] h-[0.9vw]`,fill:`none`,stroke:`currentColor`,viewBox:`0 0 24 24`,children:(0,F.jsx)(`path`,{strokeLinecap:`round`,strokeLinejoin:`round`,strokeWidth:2,d:`M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16`})})})]})})]})}var ol=`iml_orders`,sl={Round:[`120ml`,`250ml`,`300ml`,`500ml`,`1000ml`],"Round Square":[`450ml`,`500ml`],Rectangle:[`500ml`,`650ml`,`750ml`],"Sweet Box":[`250gms`,`500gms`],"Sweet Box TE":[`TE 250gms`,`TE 500gms`]};function cl(){console.log(`OrdersManagement2 component rendered`);let[e,t]=(0,_.useState)(`dashboard`),[n,r]=(0,_.useState)([]),[i,a]=(0,_.useState)(null),[o,s]=(0,_.useState)(``),[c,l]=(0,_.useState)(`all`),[u,d]=(0,_.useState)(``),[f,p]=(0,_.useState)(``),[m,h]=(0,_.useState)({}),[g,v]=(0,_.useState)({});Ge(),(0,_.useEffect)(()=>{let e=localStorage.getItem(ol);if(e){let t=JSON.parse(e);r(t),t.length===0&&y()}else y()},[]);let y=()=>{let e=[{id:1702456789001,contact:{company:`ABC Industries`,contactName:`John Smith`,phone:`9876543210`,imlName:`Premium IML Labels`,priority:`high`},products:[{id:1,orderNumber:`ORD-1702456789001-123`,productName:`Round`,size:`500ml`,lidColor:{r:255,g:100,b:100,a:1},tubColor:{r:100,g:150,b:255,a:1},imlType:`LID`,lidLabelQty:`10000`,lidProductionQty:`9500`,lidStock:500,tubLabelQty:``,tubProductionQty:``,tubStock:0,budget:25e3,approvedDate:`2025-12-10`,designSharedMail:!0,designStatus:`approved`}],payment:{totalEstimated:`25000`,remarks:`First payment received`},paymentRecords:[{timestamp:`2025-12-10T10:30:00.000Z`,paymentType:`advance`,method:`UPI`,amount:`10000`,remarks:`Advance payment`,productIds:[1]}],status:`pending`,createdAt:`2025-12-10T08:00:00.000Z`},{id:1702456789002,contact:{company:`XYZ Corporation`,contactName:`Jane Doe`,phone:`9123456780`,imlName:`Quality IML Solutions`,priority:`medium`},products:[{id:1,orderNumber:`ORD-1702456789002-456`,productName:`Rectangle`,size:`750ml`,lidColor:{r:100,g:255,b:100,a:1},tubColor:{r:255,g:200,b:50,a:1},imlType:`TUB`,lidLabelQty:``,lidProductionQty:``,lidStock:0,tubLabelQty:`15000`,tubProductionQty:`14500`,tubStock:500,budget:35e3,approvedDate:`2025-12-11`,designSharedMail:!0,designStatus:`pending`}],payment:{totalEstimated:`35000`,remarks:``},paymentRecords:[],status:`pending`,createdAt:`2025-12-11T09:30:00.000Z`}];r(e),localStorage.setItem(ol,JSON.stringify(e))};(0,_.useEffect)(()=>{n.length>0&&localStorage.setItem(ol,JSON.stringify(n))},[n]),(0,_.useEffect)(()=>{if(n.length>0){let e=k(),t={},n={};Object.entries(e).forEach(([e,r])=>{t[e]=!0;let i=Object.keys(r);if(i.length>0){let t=i[0];n[`${e}-${t}`]=!0}}),h(t),v(n)}},[n.length]),(0,_.useEffect)(()=>{if(o.trim()){let e={},t={},n=k();Object.entries(n).forEach(([n,r])=>{let i=!1;Object.entries(r).forEach(([e,r])=>{r.some(e=>e.contact.company.toLowerCase().includes(o.toLowerCase())||e.contact.contactName.toLowerCase().includes(o.toLowerCase())||e.contact.imlName.toLowerCase().includes(o.toLowerCase()))&&(i=!0,t[`${n}-${e}`]=!0)}),i&&(e[n]=!0)}),h(e),v(t)}},[o,n]);let b=()=>{a(null),t(`form`)},x=e=>{a(e),t(`form`)},S=e=>{window.confirm(`Are you sure you want to delete this order?`)&&(r(n.filter(t=>t.id!==e)),localStorage.setItem(ol,JSON.stringify(n.filter(t=>t.id!==e))))},C=e=>{if(!e.products||e.products.length===0){alert(`This order has no products to move.`);return}if(e.products.some(e=>e.moveToPurchase===!0)){alert(`This order has already been moved to Purchase Management.`);return}let t=`Are you sure you want to move this order to Purchase Management?\n\nCompany: ${e.contact.company}\nProducts: ${e.products.length}`;if(window.confirm(t)){let t=n.map(t=>t.id===e.id?{...t,products:t.products.map(e=>({...e,moveToPurchase:!0}))}:t);r(t),localStorage.setItem(ol,JSON.stringify(t)),alert(`Order successfully moved to Purchase Management!`)}},w=e=>{if(i)r(n.map(t=>t.id===i.id?{...e,id:i.id}:t));else{let t={...e,id:Date.now(),createdAt:new Date().toISOString()};r([...n,t])}t(`dashboard`),a(null)},T=()=>{t(`dashboard`),a(null)},E=()=>{t(`dashboard`),a(null)},D=e=>{h(t=>({...t,[e]:!t[e]}))},O=(e,t)=>{let n=`${e}-${t}`;v(e=>({...e,[n]:!e[n]}))},k=()=>{let e={};return n.forEach(t=>{t.products&&t.products.length>0?t.products.forEach(n=>{let r=n.productName||`Uncategorized`,i=n.size||`No Size`;e[r]||(e[r]={}),e[r][i]||(e[r][i]=[]),e[r][i].push(t)}):(e.Uncategorized||={},e.Uncategorized[`No Products`]||(e.Uncategorized[`No Products`]=[]),e.Uncategorized[`No Products`].push(t))}),e},A=()=>{let e=new Set;return n.forEach(t=>{t.products&&t.products.length>0&&t.products.forEach(t=>{e.add(t.productName||`Uncategorized`)})}),Array.from(e).sort()},ee=e=>{let t=new Set;return n.forEach(n=>{n.products&&n.products.length>0&&n.products.forEach(n=>{n.productName===e&&t.add(n.size||`No Size`)})}),Array.from(t).sort()},te=e=>e.filter(e=>{let t=e.contact.company.toLowerCase().includes(o.toLowerCase())||e.contact.contactName.toLowerCase().includes(o.toLowerCase())||e.contact.imlName.toLowerCase().includes(o.toLowerCase()),n=c===`all`||e.status===c;return t&&n}),j=()=>{let e=k(),t={};return Object.entries(e).forEach(([e,n])=>{u&&e!==u||Object.entries(n).forEach(([n,r])=>{if(f&&n!==f)return;let i=te(r);i.length>0&&(t[e]||(t[e]={}),t[e][n]=i)})}),t},M=e=>{if(!e.products||e.products.length===0)return`pending`;let t=e.products.map(e=>(e.designStatus||`pending`).toLowerCase());return t.includes(`in-progress`)?`in-progress`:t.includes(`approved`)?`approved`:`pending`},ne={total:n.length,pending:n.filter(e=>e.status===`pending`).length,movedToPurchase:n.reduce((e,t)=>t.products&&t.products.some(e=>e.moveToPurchase===!0)?e+1:e,0),artworkPending:n.filter(e=>M(e)===`pending`).length,artworkInProgress:n.filter(e=>M(e)===`in-progress`).length,artworkApproved:n.filter(e=>M(e)===`approved`).length};if((0,_.useEffect)(()=>{p(``)},[u]),e===`form`)return(0,F.jsx)(`div`,{className:`min-h-screen bg-gray-50 p-[1vw]`,children:(0,F.jsx)(Xc,{existingOrder:i,onSubmit:w,onCancel:T,onBack:E})});let N=j(),P=Object.keys(N).length>0;return(0,F.jsxs)(`div`,{className:`min-h-screen bg-gray-50 p-[1vw]`,children:[(0,F.jsxs)(`div`,{className:`mb-[1.25vw]`,children:[(0,F.jsxs)(`div`,{className:`flex justify-between items-center mb-[.25vw]`,children:[(0,F.jsx)(`h1`,{className:`text-[1.6vw] font-bold text-gray-900`,children:`Orders Management`}),(0,F.jsx)(`button`,{onClick:b,className:`bg-blue-600 hover:bg-blue-700 text-white px-[.85vw] py-[0.45vw] rounded-[0.6vw] font-medium shadow-md hover:shadow-lg transition-all text-[0.9vw] cursor-pointer`,children:`+ New Order`})]}),(0,F.jsx)(`p`,{className:`text-gray-600 text-[.9vw]`,children:`Manage all your orders, designs, and client information`})]}),(0,F.jsxs)(`div`,{className:`grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-[1vw]`,children:[(0,F.jsxs)(`div`,{className:`bg-gradient-to-br from-blue-50 to-blue-100 rounded-xl p-[0.75vw] border border-blue-200 shadow-sm hover:shadow-md transition-shadow`,children:[(0,F.jsxs)(`div`,{className:`flex items-center justify-between`,children:[(0,F.jsx)(`span`,{className:`text-blue-700 font-medium text-[.9vw]`,children:`Total Orders`}),(0,F.jsx)(`div`,{className:`w-[2vw] h-[2vw] bg-[#3d64bb] rounded-[0.5vw] flex items-center justify-center`,children:(0,F.jsx)(`svg`,{className:`w-[1.2vw] h-[1.2vw] text-white`,fill:`none`,stroke:`currentColor`,viewBox:`0 0 24 24`,children:(0,F.jsx)(`path`,{strokeLinecap:`round`,strokeLinejoin:`round`,strokeWidth:2,d:`M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z`})})})]}),(0,F.jsx)(`div`,{className:`text-[1.25vw] font-bold text-blue-900`,children:ne.total})]}),(0,F.jsxs)(`div`,{className:`bg-gradient-to-br from-orange-50 to-orange-100 rounded-xl p-[0.75vw] border border-orange-200 shadow-sm hover:shadow-md transition-shadow`,children:[(0,F.jsxs)(`div`,{className:`flex items-center justify-between`,children:[(0,F.jsx)(`span`,{className:`text-orange-700 font-medium text-[.9vw]`,children:`Artwork Pending`}),(0,F.jsx)(`div`,{className:`w-[2vw] h-[2vw] bg-orange-500 rounded-[0.5vw] flex items-center justify-center`,children:(0,F.jsx)(`svg`,{className:`w-[1.2vw] h-[1.2vw] text-white`,fill:`none`,stroke:`currentColor`,viewBox:`0 0 24 24`,children:(0,F.jsx)(`path`,{strokeLinecap:`round`,strokeLinejoin:`round`,strokeWidth:2,d:`M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z`})})})]}),(0,F.jsx)(`div`,{className:`text-[1.25vw] font-bold text-orange-900`,children:ne.artworkPending})]}),(0,F.jsxs)(`div`,{className:`bg-gradient-to-br from-green-50 to-green-100 rounded-xl p-[0.75vw] border border-green-200 shadow-sm hover:shadow-md transition-shadow`,children:[(0,F.jsxs)(`div`,{className:`flex items-center justify-between`,children:[(0,F.jsx)(`span`,{className:`text-green-700 font-medium text-[.9vw]`,children:`Artwork Approved`}),(0,F.jsx)(`div`,{className:`w-[2vw] h-[2vw] bg-green-500 rounded-[0.5vw] flex items-center justify-center`,children:(0,F.jsx)(`svg`,{className:`w-[1.2vw] h-[1.2vw] text-white`,fill:`none`,stroke:`currentColor`,viewBox:`0 0 24 24`,children:(0,F.jsx)(`path`,{strokeLinecap:`round`,strokeLinejoin:`round`,strokeWidth:2,d:`M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z`})})})]}),(0,F.jsx)(`div`,{className:`text-[1.25vw] font-bold text-green-900`,children:ne.artworkApproved})]}),(0,F.jsxs)(`div`,{className:`bg-gradient-to-br from-yellow-50 to-yellow-100 rounded-xl p-[0.75vw] border border-yellow-200 shadow-sm hover:shadow-md transition-shadow`,children:[(0,F.jsxs)(`div`,{className:`flex items-center justify-between`,children:[(0,F.jsx)(`span`,{className:`text-yellow-700 font-medium text-[.9vw]`,children:`Moved to Purchase`}),(0,F.jsx)(`div`,{className:`w-[2vw] h-[2vw] bg-yellow-500 rounded-[0.5vw] flex items-center justify-center`,children:(0,F.jsx)(`svg`,{className:`w-[1.2vw] h-[1.2vw] text-white`,fill:`none`,stroke:`currentColor`,viewBox:`0 0 24 24`,children:(0,F.jsx)(`path`,{strokeLinecap:`round`,strokeLinejoin:`round`,strokeWidth:2,d:`M13 10V3L4 14h7v7l9-11h-7z`})})})]}),(0,F.jsx)(`div`,{className:`text-[1.25vw] font-bold text-yellow-900`,children:ne.movedToPurchase})]})]}),(0,F.jsx)(`div`,{className:`bg-white rounded-xl shadow-sm p-[1vw] mb-[1vw] border border-gray-200`,children:(0,F.jsxs)(`div`,{className:`grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4`,children:[(0,F.jsxs)(`div`,{children:[(0,F.jsx)(`label`,{className:`block text-[.8vw] font-medium text-gray-700 mb-2`,children:`Search Company`}),(0,F.jsxs)(`div`,{className:`relative`,children:[(0,F.jsx)(`input`,{type:`text`,value:o,onChange:e=>s(e.target.value),placeholder:`Search by company name...`,className:`w-full border border-gray-300 rounded-lg px-[.85vw] py-[0.6vw] focus:ring-2 focus:ring-blue-500 focus:border-transparent text-[.8vw]`}),o&&(0,F.jsx)(`button`,{onClick:()=>s(``),className:`absolute right-[0.9vw] top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600`,children:``})]})]}),(0,F.jsxs)(`div`,{children:[(0,F.jsx)(`label`,{className:`block text-[.8vw] font-medium text-gray-700 mb-2`,children:`Artwork Status`}),(0,F.jsxs)(`select`,{value:c,onChange:e=>l(e.target.value),className:`w-full border border-gray-300 rounded-lg px-[.85vw] py-[0.6vw] focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white text-[.8vw]`,children:[(0,F.jsx)(`option`,{value:`all`,children:`All Status`}),(0,F.jsx)(`option`,{value:`pending`,children:`Pending`}),(0,F.jsx)(`option`,{value:`approved`,children:`Approved`})]})]}),(0,F.jsxs)(`div`,{children:[(0,F.jsx)(`label`,{className:`block text-[.8vw] font-medium text-gray-700 mb-2`,children:`Filter by Product`}),(0,F.jsxs)(`select`,{value:u,onChange:e=>d(e.target.value),className:`w-full border border-gray-300 rounded-lg px-[.85vw] py-[0.6vw] focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white text-[.8vw]`,children:[(0,F.jsx)(`option`,{value:``,children:`All Products`}),A().map(e=>(0,F.jsx)(`option`,{value:e,children:e},e))]})]}),(0,F.jsxs)(`div`,{children:[(0,F.jsx)(`label`,{className:`block text-[.8vw] font-medium text-gray-700 mb-2`,children:`Filter by Size`}),(0,F.jsxs)(`select`,{value:f,onChange:e=>p(e.target.value),disabled:!u,className:`w-full border border-gray-300 rounded-lg px-[.85vw] py-[0.6vw] focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white disabled:bg-gray-100 disabled:cursor-not-allowed text-[.8vw]`,style:{maxWidth:`100%`},children:[(0,F.jsx)(`option`,{value:``,children:`All Sizes`}),u&&ee(u).map(e=>(0,F.jsx)(`option`,{value:e,children:e},e))]})]})]})}),P?(0,F.jsx)(`div`,{className:`space-y-[1.5vw] max-h-[38vh] overflow-y-auto`,children:Object.keys(sl).filter(e=>N[e]).map(e=>{let t=N[e];return(0,F.jsxs)(`div`,{className:`bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden`,children:[(0,F.jsxs)(`button`,{onClick:()=>D(e),className:`w-full bg-[#3d64bb] text-white px-[0.75vw] py-[0.35vw] flex items-center justify-between transition-colors border-b border-[#3555a0] cursor-pointer`,children:[(0,F.jsxs)(`div`,{className:`flex items-center gap-[0.8vw]`,children:[(0,F.jsx)(`div`,{className:`w-[2.6vw] h-[2.6vw] bg-[#3d64bb] rounded-[0.5vw] flex items-center justify-center`,children:(0,F.jsx)(`svg`,{className:`w-[1.5vw] h-[1.5vw] text-white`,fill:`none`,stroke:`currentColor`,viewBox:`0 0 24 24`,children:(0,F.jsx)(`path`,{strokeLinecap:`round`,strokeLinejoin:`round`,strokeWidth:2,d:`M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4`})})}),(0,F.jsx)(`span`,{className:`font-bold text-[1vw]`,children:e}),(0,F.jsxs)(`span`,{className:`bg-[#cfe0ff] text-[#3d64bb] px-[0.6vw] py-[0.35vw] rounded-full text-[0.8vw] font-medium`,children:[Object.keys(t).length,Object.keys(t).length===1?` Size`:` Sizes`]})]}),(0,F.jsx)(`svg`,{className:`w-[1.2vw] h-[1.2vw] text-white transition-transform ${m[e]?`rotate-180`:``}`,fill:`none`,stroke:`currentColor`,viewBox:`0 0 24 24`,children:(0,F.jsx)(`path`,{strokeLinecap:`round`,strokeLinejoin:`round`,strokeWidth:2,d:`M19 9l-7 7-7-7`})})]}),m[e]&&(0,F.jsx)(`div`,{className:`divide-y divide-gray-100`,children:sl[e].filter(e=>t[e]).map(n=>{let r=t[n];return(0,F.jsxs)(`div`,{className:`bg-gray-50`,children:[(0,F.jsxs)(`button`,{onClick:()=>O(e,n),className:`w-[98.5%] m-[.5vw] px-[.75vw] py-[0.6vw] flex items-center justify-between bg-[#e7e7e7] border border-[0.05px] border-gray-400 transition-colors rounded-xl cursor-pointer`,children:[(0,F.jsxs)(`div`,{className:`flex items-center gap-[0.7vw]`,children:[(0,F.jsx)(`div`,{className:`w-[2.2vw] h-[2.2vw] bg-[#333333] rounded-[0.45vw] flex items-center justify-center`,children:(0,F.jsx)(`svg`,{className:`w-[1vw] h-[1vw] text-white`,fill:`none`,stroke:`currentColor`,viewBox:`0 0 24 24`,children:(0,F.jsx)(`path`,{strokeLinecap:`round`,strokeLinejoin:`round`,strokeWidth:2,d:`M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z`})})}),(0,F.jsx)(`span`,{className:`font-semibold text-[0.95vw] text-[#333333]`,children:n}),(0,F.jsxs)(`span`,{className:`bg-[#ffffff] text-[#333333] px-[0.6vw] py-[0.35vw] rounded-full text-[0.8vw] font-medium`,children:[r.length,r.length===1?` Order`:` Orders`]})]}),(0,F.jsx)(`svg`,{className:`w-[1vw] h-[1vw] text-[#333333] transition-transform ${g[`${e}-${n}`]?`rotate-180`:``}`,fill:`none`,stroke:`currentColor`,viewBox:`0 0 24 24`,children:(0,F.jsx)(`path`,{strokeLinecap:`round`,strokeLinejoin:`round`,strokeWidth:2,d:`M19 9l-7 7-7-7`})})]}),g[`${e}-${n}`]&&(0,F.jsx)(`div`,{className:`px-[0.8vw] pb-[0.8vw]`,children:(0,F.jsx)(`div`,{className:`overflow-x-auto rounded-[0.5vw] border border-gray-300`,children:(0,F.jsxs)(`table`,{className:`w-full text-[0.9vw]`,children:[(0,F.jsx)(`thead`,{className:`bg-gray-100 border-b border-gray-300`,children:(0,F.jsxs)(`tr`,{children:[(0,F.jsx)(`th`,{className:`px-[0.8vw] py-[0.7vw] text-left font-semibold text-gray-700`,children:`Company`}),(0,F.jsx)(`th`,{className:`px-[0.8vw] py-[0.7vw] text-left font-semibold text-gray-700`,children:`Contact`}),(0,F.jsx)(`th`,{className:`px-[0.8vw] py-[0.7vw] text-left font-semibold text-gray-700`,children:`IML Name`}),(0,F.jsx)(`th`,{className:`px-[0.8vw] py-[0.7vw] text-left font-semibold text-gray-700`,children:`Status`}),(0,F.jsx)(`th`,{className:`px-[0.8vw] py-[0.7vw] text-left font-semibold text-gray-700`,children:`Total Budget`}),(0,F.jsx)(`th`,{className:`px-[0.8vw] py-[0.7vw] text-left font-semibold text-gray-700`,children:`Created`}),(0,F.jsx)(`th`,{className:`px-[0.8vw] py-[0.7vw] text-center font-semibold text-gray-700`,children:`Actions`})]})}),(0,F.jsx)(`tbody`,{className:`divide-y divide-gray-100 bg-white`,children:te(r).map(e=>{let t=e.products?.reduce((e,t)=>e+(parseFloat(t.budget)||0),0);return(0,F.jsxs)(`tr`,{className:`hover:bg-gray-50 transition-colors`,children:[(0,F.jsx)(`td`,{className:`px-[0.8vw] py-[0.65vw] font-medium text-gray-900`,children:e.contact.company}),(0,F.jsxs)(`td`,{className:`px-[0.8vw] py-[0.65vw]`,children:[(0,F.jsx)(`div`,{className:`text-gray-900`,children:e.contact.contactName}),(0,F.jsx)(`div`,{className:`text-gray-500 text-[0.85vw]`,children:e.contact.phone})]}),(0,F.jsx)(`td`,{className:`px-[0.8vw] py-[0.65vw] text-gray-700`,children:e.contact.imlName}),(0,F.jsx)(`td`,{className:`px-[0.8vw] py-[0.65vw]`,children:e.products&&e.products.length>0?(()=>{let t=M(e),n=t===`approved`?`bg-green-100 text-green-700`:t===`in-progress`?`bg-yellow-100 text-yellow-700`:`bg-orange-100 text-orange-700`,r=t===`in-progress`?`In Progress`:t.charAt(0).toUpperCase()+t.slice(1);return(0,F.jsx)(`span`,{className:`px-[0.7vw] py-[0.35vw] rounded-full text-[0.8vw] font-medium ${n}`,children:r})})():(0,F.jsx)(`span`,{className:`px-[0.7vw] py-[0.35vw] rounded-full text-[0.8vw] font-medium bg-gray-100 text-gray-500`,children:`N/A`})}),(0,F.jsxs)(`td`,{className:`px-[0.8vw] py-[0.65vw] font-semibold text-gray-900`,children:[``,t?.toFixed(2)||`0.00`]}),(0,F.jsx)(`td`,{className:`px-[0.8vw] py-[0.65vw] text-gray-600`,children:new Date(e.createdAt).toLocaleDateString(`en-IN`,{day:`2-digit`,month:`short`,year:`numeric`})}),(0,F.jsx)(`td`,{className:`px-[0.8vw] py-[0.65vw]`,children:(0,F.jsxs)(`div`,{className:`flex items-center justify-center gap-2`,children:[(0,F.jsx)(`button`,{onClick:()=>x(e),className:`bg-[#3d64bb] hover:bg-[#3350a9] text-white px-[0.6vw] py-[0.4vw] rounded-[0.5vw] text-[0.85vw] font-medium transition-colors cursor-pointer`,children:`Edit`}),(0,F.jsx)(`button`,{onClick:()=>S(e.id),className:`bg-red-500 hover:bg-red-600 text-white px-[0.6vw] py-[0.4vw] rounded-[0.5vw] text-[0.85vw] font-medium transition-colors cursor-pointer`,children:`Delete`}),(0,F.jsx)(`button`,{onClick:()=>C(e),className:`font-medium ${e.products?.some(e=>e.moveToPurchase===!0)?`text-green-600 cursor-not-allowed`:`text-purple-600 hover:text-purple-800 cursor-pointer`} `,disabled:e.products?.some(e=>e.moveToPurchase===!0),children:e.products?.some(e=>e.moveToPurchase===!0)?`Purchase `:`Move to Purchase`})]})})]},e.id)})})]})})})]},`${e}-${n}`)})})]},e)})}):(0,F.jsxs)(`div`,{className:`bg-white rounded-xl shadow-sm p-[2vw] text-center border border-gray-200`,children:[(0,F.jsx)(`div`,{className:`w-[4vw] h-[4vw] bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-[0.8vw]`,children:(0,F.jsx)(`svg`,{className:`w-[2vw] h-[2vw] text-gray-400`,fill:`none`,stroke:`currentColor`,viewBox:`0 0 24 24`,children:(0,F.jsx)(`path`,{strokeLinecap:`round`,strokeLinejoin:`round`,strokeWidth:2,d:`M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z`})})}),(0,F.jsx)(`h3`,{className:`text-xl font-semibold text-gray-900 mb-2`,children:`No Orders Found`}),(0,F.jsx)(`p`,{className:`text-gray-600 mb-6`,children:o||c!==`all`||u||f?`No orders found matching your filters`:`Get started by creating your first order`}),!o&&c===`all`&&!u&&!f&&(0,F.jsx)(`button`,{onClick:b,className:`bg-[#388ce3] hover:bg-[#2f74c9] text-white px-[1vw] py-[0.6vw] rounded-[0.6vw] font-medium text-[0.9vw]`,children:`Create New Order`})]}),o&&!P&&(0,F.jsx)(`div`,{className:`mt-6 text-center`,children:(0,F.jsxs)(`p`,{className:`text-gray-600`,children:[`No company found matching`,` `,(0,F.jsxs)(`span`,{className:`font-semibold`,children:[`"`,o,`"`]})]})})]})}var ll=`iml_purchase_entries`,ul=`iml_orders`,dl=`iml_tracking_followups`,fl=`iml_label_followups`,pl=`iml_purchase_metadata`,ml=[{id:1,date:`25/11/2025`,company:`Terra Tech Packs`,contact:`John Doe`,product:`Round`,size:`250ml`,qty:`26,500`,supplier:`Global Suppliers Inc.`,comments:`Urgent delivery`},{id:2,date:`24/11/2025`,company:`ABC Industries`,contact:`Emily Smith`,product:`Rectangle`,size:`500ml`,qty:`15,000`,supplier:`Prime Materials Ltd.`,comments:`Standard order`},{id:3,date:`23/11/2025`,company:`Terra Tech Packs`,contact:`John Doe`,product:`Sweet Box`,size:`250gms`,qty:`10,000`,supplier:`Quality Distributors`,comments:`Festival special`},{id:4,date:`22/11/2025`,company:`XYZ Corp`,contact:`Sarah Johnson`,product:`Round`,size:`500ml`,qty:`8,500`,supplier:`Global Suppliers Inc.`,comments:`Regular shipment`}],hl=({className:e})=>(0,F.jsx)(`svg`,{xmlns:`http://www.w3.org/2000/svg`,fill:`none`,viewBox:`0 0 24 24`,strokeWidth:2,stroke:`currentColor`,className:e,children:(0,F.jsx)(`path`,{strokeLinecap:`round`,strokeLinejoin:`round`,d:`m19.5 8.25-7.5 7.5-7.5-7.5`})}),gl=({className:e})=>(0,F.jsx)(`svg`,{xmlns:`http://www.w3.org/2000/svg`,fill:`none`,viewBox:`0 0 24 24`,strokeWidth:2,stroke:`currentColor`,className:e,children:(0,F.jsx)(`path`,{strokeLinecap:`round`,strokeLinejoin:`round`,d:`m4.5 15.75 7.5-7.5 7.5 7.5`})}),_l=e=>{let t=[];return e.forEach(e=>{e.products&&e.products.length>0&&e.products.forEach(n=>{if(n.moveToPurchase===!0){let r={id:`order-${e.id}-prod-${n.id}`,orderId:e.id,productId:n.id,date:new Date(e.createdAt).toLocaleDateString(`en-GB`),company:e.contact.company,contact:e.contact.contactName,product:n.productName,size:n.size,qty:n.imlType===`LID`?n.lidLabelQty:n.tubLabelQty,supplier:``,comments:``,labelType:``,lidColor:n.lidColor,tubColor:n.tubColor};t.push(r)}})}),t},vl=(e,t)=>{let n=t===`tracking`?dl:fl,r=localStorage.getItem(n),i=(r?JSON.parse(r):{})[e]||[];if(i.length===0)return{date:null,comment:null};let a=i[i.length-1];return{date:a.date||null,comment:a.comment||null}},yl=e=>{let t=localStorage.getItem(pl);return(t?JSON.parse(t):{})[e]||{supplier:``,labelType:``}},bl=()=>{let e=Ge(),[t,n]=(0,_.useState)([]),[r,i]=(0,_.useState)(``),[a,o]=(0,_.useState)(``),[s,c]=(0,_.useState)(``),[l,u]=(0,_.useState)(``),[d,f]=(0,_.useState)({}),[p,m]=(0,_.useState)({}),[h,g]=(0,_.useState)(`tracking`),[v,y]=(0,_.useState)(!1),[b,x]=(0,_.useState)([]),[S,C]=(0,_.useState)(``),[w,T]=(0,_.useState)(``),E=He();(0,_.useEffect)(()=>{if(E.state?.returnedFromSheet){let e=E.state.returnedFromSheet;g(e),window.history.replaceState({},document.title)}},[E.state]);let D=()=>{n(ml),localStorage.setItem(ll,JSON.stringify(ml))};(0,_.useEffect)(()=>{console.log(`=== PurchaseManagement Loading Data ===`);let e=localStorage.getItem(ul);if(console.log(`Stored Orders Raw:`,e),e){let t=JSON.parse(e);console.log(`Parsed Orders:`,t);let r=_l(t);if(console.log(`Converted Entries:`,r),r.length>0)console.log(` Using converted entries from orders`),n(r);else{console.log(` No products marked for purchase, checking fallback...`);let e=localStorage.getItem(ll);if(e){let t=JSON.parse(e);Array.isArray(t)&&t.length>0?(console.log(` Using purchase entries`),n(t)):(console.log(` Initializing dummy data`),D())}else console.log(` Initializing dummy data`),D()}}else{console.log(` No orders found, checking purchase entries...`);let e=localStorage.getItem(ll);if(e){let t=JSON.parse(e);Array.isArray(t)&&t.length>0?(console.log(` Using purchase entries`),n(t)):(console.log(` Initializing dummy data`),D())}else console.log(` Initializing dummy data`),D()}},[]),(0,_.useEffect)(()=>{if(t.length>0){let e={},n={},r={};t.forEach(e=>{let t=e.product||`Uncategorized`;r[t]||(r[t]=new Set),r[t].add(e.size||`No Size`)}),Object.keys(r).forEach(t=>{e[t]=!0;let i=Array.from(r[t]).sort();if(i.length>0){let e=i[0];n[`${t}-${e}`]=!0}}),f(e),m(n)}},[t]),(0,_.useEffect)(()=>{t.length>0&&(t.some(e=>e.orderId)||localStorage.setItem(ll,JSON.stringify(t)))},[t]),(0,_.useEffect)(()=>{let e=e=>{e.target.closest(`.relative`)||y(!1)};return document.addEventListener(`mousedown`,e),()=>document.removeEventListener(`mousedown`,e)},[]);let O=(t,n)=>{e(`/iml/purchase-details`,{state:{entry:{...t,quantity:t.qty},mode:n}})},k=(0,_.useMemo)(()=>{let e=new Set;return t.forEach(t=>e.add(t.product)),Array.from(e).sort()},[t]),A=(0,_.useMemo)(()=>{let e=new Set;return t.forEach(t=>{(!a||t.product===a)&&e.add(t.size)}),Array.from(e).sort()},[t,a]),ee=(0,_.useMemo)(()=>{let e=new Set;return t.forEach(t=>{t.supplier&&e.add(t.supplier);let n=yl(t.id);n.supplier&&e.add(n.supplier)}),Array.from(e).filter(e=>e.trim()!==``).sort()},[t]),te=(0,_.useMemo)(()=>{let e=r.trim().toLowerCase();return t.filter(t=>{let n=!e||t.company.toLowerCase().includes(e),r=!a||t.product===a,i=!s||t.size===s,o=(yl(t.id).supplier||t.supplier||``).toLowerCase(),c=!0;if(S||w){let e=vl(t.id,h);if(e.date){let[t,n,r]=e.date.split(`/`),i=new Date(r,n-1,t);if(S){let e=new Date(S);e.setHours(0,0,0,0),c&&=i>=e}if(w){let e=new Date(w);e.setHours(23,59,59,999),c&&=i<=e}}else c=!1}let u=!l||o.includes(l.toLowerCase());return n&&r&&i&&u&&c})},[t,r,a,s,l,S,w,h]),j=(0,_.useMemo)(()=>{let e={};return te.forEach(t=>{let n=t.product||`Uncategorized`,r=t.size||`No Size`;e[n]||(e[n]={}),e[n][r]||(e[n][r]=[]),e[n][r].push(t)}),e},[te]),M=Object.keys(j).length>0,ne=e=>{f(t=>({...t,[e]:!t[e]}))},N=(e,t)=>{let n=`${e}-${t}`;m(e=>({...e,[n]:!e[n]}))},P=e=>{if(u(e),e.trim()===``){x([]),y(!1);return}let t=ee.filter(t=>t.toLowerCase().includes(e.toLowerCase()));x(t),y(t.length>0)},re=e=>{u(e),y(!1),x([])};return(0,_.useEffect)(()=>{if(r||a||s||l){let e={},t={};Object.entries(j).forEach(([n,r])=>{e[n]=!0,Object.keys(r).forEach(e=>{let r=`${n}-${e}`;t[r]=!0})}),f(e),m(t)}},[r,a,s,l,j]),(0,F.jsxs)(`div`,{className:`p-[1vw] font-sans bg-gray-50 min-h-screen`,children:[(0,F.jsxs)(`div`,{className:`flex justify-between items-center mb-[1vw]`,children:[(0,F.jsxs)(`h1`,{className:`text-[1.6vw] text-gray-800 font-bold m-0`,children:[`Purchase Management`,` `,(0,F.jsxs)(`span`,{className:`text-[1.35vw]`,children:[`(`,h===`tracking`?`Tracking Sheet`:`Label Quantity`,`)`]})]}),(0,F.jsxs)(`div`,{className:`flex gap-[0.8vw] bg-white p-[0.5vw] rounded-full shadow-sm`,children:[(0,F.jsx)(`button`,{onClick:()=>g(`tracking`),className:`px-[1.5vw] py-[0.7vw] text-[0.95vw] rounded-full font-medium transition-all cursor-pointer border border-[2px] duration-300 ${h===`tracking`?`border-transparent bg-blue-600 text-white`:`border-blue-600 bg-transparent text-blue-600`}`,children:`Tracking Sheet`}),(0,F.jsx)(`button`,{onClick:()=>g(`label`),className:`px-[1.5vw] py-[0.7vw] text-[0.95vw] rounded-full font-medium transition-all cursor-pointer border border-[2px] duration-300 ${h===`label`?`border-transparent bg-blue-600 text-white`:`border-blue-600 bg-transparent text-blue-600`}`,children:`Label Quantity Sheet`})]})]}),(0,F.jsx)(`div`,{className:`bg-white px-[1.5vw] py-[1.2vw] rounded-lg shadow-sm border border-gray-200 mb-[1.25vw]`,children:(0,F.jsxs)(`div`,{className:`flex gap-[1vw] items-end`,children:[(0,F.jsxs)(`div`,{className:`flex-1 min-w-[12vw]`,children:[(0,F.jsx)(`label`,{className:`block mb-[0.5vw] text-[0.85vw] font-medium text-gray-700`,children:`Search by Company`}),(0,F.jsx)(`input`,{type:`text`,placeholder:`Enter company name...`,value:r,onChange:e=>i(e.target.value),className:`w-full px-[0.7vw] py-[0.7vw] text-[0.9vw] border border-gray-300 rounded-md outline-none focus:border-indigo-600 transition-colors`})]}),(0,F.jsxs)(`div`,{className:`flex-1 min-w-[10vw]`,children:[(0,F.jsx)(`label`,{className:`block mb-[0.5vw] text-[0.85vw] font-medium text-gray-700`,children:`Filter by Product`}),(0,F.jsxs)(`select`,{value:a,onChange:e=>{o(e.target.value),c(``)},className:`w-full px-[0.7vw] py-[0.7vw] text-[0.9vw] border border-gray-300 rounded-md outline-none bg-white cursor-pointer`,children:[(0,F.jsx)(`option`,{value:``,children:`All Products`}),k.map(e=>(0,F.jsx)(`option`,{value:e,children:e},e))]})]}),(0,F.jsxs)(`div`,{className:`flex-1 min-w-[8vw]`,children:[(0,F.jsx)(`label`,{className:`block mb-[0.5vw] text-[0.85vw] font-medium text-gray-700`,children:`Filter by Size`}),(0,F.jsxs)(`select`,{value:s,onChange:e=>c(e.target.value),className:`w-full px-[0.7vw] py-[0.7vw] text-[0.9vw] border border-gray-300 rounded-md outline-none bg-white cursor-pointer`,children:[(0,F.jsx)(`option`,{value:``,children:`All Sizes`}),A.map(e=>(0,F.jsx)(`option`,{value:e,children:e},e))]})]}),h===`tracking`&&(0,F.jsxs)(`div`,{className:`flex-1 min-w-[10vw] relative`,children:[(0,F.jsx)(`label`,{className:`block mb-[0.5vw] text-[0.85vw] font-medium text-gray-700`,children:`Filter by Supplier`}),(0,F.jsx)(`input`,{type:`text`,placeholder:`Search supplier...`,value:l,onChange:e=>P(e.target.value),onFocus:()=>{l.trim()!==``&&b.length>0&&y(!0)},className:`w-full px-[0.7vw] py-[0.7vw] text-[0.9vw] border border-gray-300 rounded-md outline-none focus:border-indigo-600 transition-colors`}),v&&b.length>0&&(0,F.jsx)(`div`,{className:`absolute z-10 w-full mt-[0.3vw] bg-white border border-gray-300 rounded-md shadow-lg max-h-[15vw] overflow-y-auto`,children:b.map((e,t)=>(0,F.jsx)(`div`,{onClick:()=>re(e),className:`px-[0.7vw] py-[0.6vw] text-[0.9vw] cursor-pointer hover:bg-blue-50 transition-colors border-b border-gray-100 last:border-b-0`,children:e},t))})]}),(0,F.jsxs)(`div`,{className:`flex-none w-[10vw]`,children:[(0,F.jsx)(`label`,{className:`block mb-[0.5vw] text-[0.85vw] font-medium text-gray-700`,children:`Start Date`}),(0,F.jsx)(`input`,{type:`date`,value:S,onChange:e=>C(e.target.value),className:`w-full px-[0.7vw] py-[0.7vw] text-[0.9vw] border border-gray-300 rounded-md outline-none focus:border-indigo-600 transition-colors`})]}),(0,F.jsxs)(`div`,{className:`flex-none w-[10vw]`,children:[(0,F.jsx)(`label`,{className:`block mb-[0.5vw] text-[0.85vw] font-medium text-gray-700`,children:`End Date`}),(0,F.jsx)(`input`,{type:`date`,value:w,onChange:e=>T(e.target.value),className:`w-full px-[0.7vw] py-[0.7vw] text-[0.9vw] border border-gray-300 rounded-md outline-none focus:border-indigo-600 transition-colors`})]}),(0,F.jsx)(`div`,{className:`flex-none`,children:(0,F.jsx)(`button`,{onClick:()=>{i(``),o(``),c(``),u(``),y(!1),x([]),C(``),T(``)},className:`px-[1.2vw] py-[0.7vw] text-[0.9vw] bg-red-500 text-white rounded-md font-medium hover:bg-red-600 transition-colors cursor-pointer whitespace-nowrap`,children:`Clear Filters`})})]})}),M?(0,F.jsx)(`div`,{className:`max-h-[50vh] overflow-y-auto`,children:Object.keys(j).sort().map(e=>{let t=j[e],n=d[e];return(0,F.jsxs)(`div`,{className:`mb-[1.5vw] rounded-lg overflow-hidden bg-white shadow-sm border border-gray-300`,children:[(0,F.jsxs)(`div`,{onClick:()=>ne(e),className:`px-[1vw] py-[0.5vw] bg-[#3d64bb] text-white text-[1.15vw] font-semibold cursor-pointer flex justify-between items-center transition-colors`,children:[(0,F.jsxs)(`div`,{className:`flex items-center gap-[0.1vw] text-[1vw]`,children:[(0,F.jsx)(`div`,{className:`w-[2.6vw] h-[2.6vw] bg-[#3d64bb] rounded-[0.5vw] flex items-center justify-center `,children:(0,F.jsx)(`svg`,{className:`w-[1.5vw] h-[1.5vw] text-white`,fill:`none`,stroke:`currentColor`,viewBox:`0 0 24 24`,children:(0,F.jsx)(`path`,{strokeLinecap:`round`,strokeLinejoin:`round`,strokeWidth:`2`,d:`M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4`})})}),(0,F.jsx)(`span`,{children:e}),(0,F.jsxs)(`span`,{className:`bg-white/20 px-[0.8vw] py-[0.3vw] rounded text-[0.85vw] font-medium ml-[.5vw]`,children:[Object.keys(t).length,` Size`,Object.keys(t).length>1?`s`:``]})]}),n?(0,F.jsx)(gl,{className:`w-[1.3vw] h-[1.3vw]`}):(0,F.jsx)(hl,{className:`w-[1.3vw] h-[1.3vw]`})]}),n&&(0,F.jsx)(`div`,{className:`p-[0.5vw]`,children:Object.keys(t).sort().map(n=>{let r=t[n],i=`${e}-${n}`,a=p[i];return(0,F.jsxs)(`div`,{className:`mb-[0.8vw] mx-[.5vw] my-[.25vw] border border-gray-200 rounded-lg overflow-hidden bg-gray-50`,children:[(0,F.jsxs)(`div`,{onClick:()=>N(e,n),className:`px-[1.2vw] py-[0.8vw] bg-gray-200 text-gray-900 text-[1vw] font-medium cursor-pointer flex justify-between items-center border border-gray-300 hover:bg-gray-200 transition-colors`,children:[(0,F.jsxs)(`div`,{className:`flex items-center gap-[0.6vw] text-[0.95vw]`,children:[(0,F.jsx)(`div`,{className:`w-[2.2vw] h-[2.2vw] bg-[#333333] rounded-[0.45vw] flex items-center justify-center `,children:(0,F.jsx)(`svg`,{className:`w-[1vw] h-[1vw] text-white`,fill:`none`,stroke:`currentColor`,viewBox:`0 0 24 24`,children:(0,F.jsx)(`path`,{strokeLinecap:`round`,strokeLinejoin:`round`,strokeWidth:`2`,d:`M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z`})})}),(0,F.jsx)(`span`,{children:n}),(0,F.jsxs)(`span`,{className:`bg-white text-gray-900 px-[0.7vw] py-[0.25vw] rounded text-[0.8vw] font-medium`,children:[r.length,` Order`,r.length>1?`s`:``]})]}),a?(0,F.jsx)(gl,{className:`w-[1.1vw] h-[1.1vw] text-gray-600`}):(0,F.jsx)(hl,{className:`w-[1.1vw] h-[1.1vw] text-gray-600`})]}),a&&(0,F.jsx)(`div`,{className:`p-0`,children:(0,F.jsxs)(`table`,{className:`w-full border-collapse text-[0.85vw]`,children:[(0,F.jsx)(`thead`,{children:(0,F.jsxs)(`tr`,{className:`bg-gray-100`,children:[(0,F.jsx)(`th`,{className:`px-[0.9vw] py-[0.9vw] text-left border-b border-gray-200 text-gray-700 font-semibold text-[0.85vw]`,children:`S. No.`}),(0,F.jsx)(`th`,{className:`px-[0.9vw] py-[0.9vw] text-left border-b border-gray-200 text-gray-700 font-semibold text-[0.85vw]`,children:`Last Update Date`}),(0,F.jsx)(`th`,{className:`px-[0.9vw] py-[0.9vw] text-left border-b border-gray-200 text-gray-700 font-semibold text-[0.85vw]`,children:`Company Name`}),(0,F.jsx)(`th`,{className:`px-[0.9vw] py-[0.9vw] text-left border-b border-gray-200 text-gray-700 font-semibold text-[0.85vw]`,children:`Contact Name`}),(0,F.jsx)(`th`,{className:`px-[0.9vw] py-[0.9vw] text-left border-b border-gray-200 text-gray-700 font-semibold text-[0.85vw]`,children:`Quantity`}),h===`tracking`&&(0,F.jsx)(`th`,{className:`px-[0.9vw] py-[0.9vw] text-left border-b border-gray-200 text-gray-700 font-semibold text-[0.85vw]`,children:`Supplier Name`}),(0,F.jsx)(`th`,{className:`px-[0.9vw] py-[0.9vw] text-left border-b border-gray-200 text-gray-700 font-semibold text-[0.85vw]`,children:`Comments`}),(0,F.jsx)(`th`,{className:`px-[0.9vw] py-[0.9vw] text-center border-b border-gray-200 text-gray-700 font-semibold text-[0.85vw]`,children:`Actions`})]})}),(0,F.jsx)(`tbody`,{children:r.map((e,t)=>{let n=vl(e.id,h),r=yl(e.id),i=n.date||`-`,a=n.comment||e.comments||`-`,o=r.supplier||e.supplier||`-`;return(0,F.jsxs)(`tr`,{className:`bg-white`,children:[(0,F.jsx)(`td`,{className:`px-4 py-3 whitespace-nowrap text-[.85vw] text-gray-900`,children:t+1}),(0,F.jsx)(`td`,{className:`px-4 py-3 whitespace-nowrap text-[.85vw] text-gray-900`,children:i}),(0,F.jsx)(`td`,{className:`px-[0.9vw] py-[0.9vw] text-[.85vw] border-b border-gray-100 text-gray-900 font-medium`,children:e.company}),(0,F.jsx)(`td`,{className:`px-[0.9vw] py-[0.9vw] text-[.85vw] border-b border-gray-100 text-gray-900`,children:e.contact}),(0,F.jsx)(`td`,{className:`px-[0.9vw] py-[0.9vw] text-[.85vw] border-b border-gray-100 text-gray-900 font-medium`,children:e.qty}),h===`tracking`&&(0,F.jsx)(`td`,{className:`px-[0.9vw] py-[0.9vw] text-[.85vw] border-b border-gray-100 text-gray-900`,children:o}),(0,F.jsx)(`td`,{className:`px-[0.9vw] py-[0.9vw] text-[.85vw] border-b border-gray-100 text-gray-900`,children:a}),(0,F.jsx)(`td`,{className:`px-4 py-3 whitespace-nowrap text-sm`,children:(0,F.jsx)(`button`,{onClick:()=>O(e,h),className:`px-[1.2vw] py-[0.45vw] text-[0.8vw] border border-blue-600 text-blue-600 rounded-full font-bold hover:bg-blue-600 hover:text-white transition-colors cursor-pointer block mx-auto`,children:`View`})})]},e.id)})})]})})]},i)})})]},e)})}):(0,F.jsx)(`div`,{className:`bg-white p-[3vw] rounded-lg shadow-sm text-center`,children:(0,F.jsx)(`p`,{className:`text-[1.1vw] text-gray-500 m-0`,children:r||a||s||l?`No entries found matching your filters.`:`Create purchase entries to see them listed here.`})})]})},xl=()=>{let e={Round:[`120ml`,`250ml`,`300ml`,`500ml`,`1000ml`],Rectangle:[`500ml`,`650ml`,`750ml`],"Sweet Box":[`250gms`,`500gms`],"Sweet Box TE":[`TE 250gms`,`TE 500gms`],"Round Square":[`450ml`,`500ml`]},t={Round:{"120ml":[{sNo:1,companyName:`XYZ Corp`,orderId:`ORD-1736373252-255`,labelQty:2e4,productionQty:11387,artwork:`Revision Required`,paymentStatus:`Advance`},{sNo:2,companyName:`Delta Foods`,orderId:`ORD-1739995980-466`,labelQty:2e4,productionQty:14563,artwork:`In Review`,paymentStatus:`Paid`},{sNo:3,companyName:`Sunshine Enterprises`,orderId:`ORD-1731876138-430`,labelQty:15e3,productionQty:10149,artwork:`Approved`,paymentStatus:`Advance`},{sNo:4,companyName:`Urban Packaging`,orderId:`ORD-1738161641-936`,labelQty:2e3,productionQty:11958,artwork:`In Review`,paymentStatus:`Advance`},{sNo:5,companyName:`ABC Industries`,orderId:`ORD-1735562017-793`,labelQty:5e3,productionQty:10623,artwork:`Pending`,paymentStatus:`Paid`}],"250ml":[{sNo:1,companyName:`Quality Containers`,orderId:`ORD-1737430713-764`,labelQty:15e3,productionQty:18748,artwork:`Pending`,paymentStatus:`Advance`},{sNo:2,companyName:`Metro Packaging`,orderId:`ORD-1731126724-843`,labelQty:15e3,productionQty:15635,artwork:`Approved`,paymentStatus:`Pending`},{sNo:3,companyName:`Golden Pack`,orderId:`ORD-1733609810-852`,labelQty:5e3,productionQty:11508,artwork:`Approved`,paymentStatus:`Paid`},{sNo:4,companyName:`Delta Foods`,orderId:`ORD-1734665671-851`,labelQty:3e3,productionQty:10021,artwork:`Pending`,paymentStatus:`Paid`}],"300ml":[{sNo:1,companyName:`Supreme Plastics`,orderId:`ORD-1738679152-768`,labelQty:1e4,productionQty:9083,artwork:`Approved`,paymentStatus:`Pending`},{sNo:2,companyName:`Delta Foods`,orderId:`ORD-1732252335-871`,labelQty:1e4,productionQty:17746,artwork:`Revision Required`,paymentStatus:`Pending`},{sNo:3,companyName:`Sunshine Enterprises`,orderId:`ORD-1731862547-445`,labelQty:1e4,productionQty:11784,artwork:`Approved`,paymentStatus:`Partial`},{sNo:4,companyName:`Golden Pack`,orderId:`ORD-1733866394-396`,labelQty:5e3,productionQty:5536,artwork:`Revision Required`,paymentStatus:`Paid`},{sNo:5,companyName:`XYZ Corp`,orderId:`ORD-1731578070-581`,labelQty:3e3,productionQty:8431,artwork:`Revision Required`,paymentStatus:`Partial`}],"500ml":[{sNo:1,companyName:`Sunshine Enterprises`,orderId:`ORD-1739004230-426`,labelQty:15e3,productionQty:14911,artwork:`Approved`,paymentStatus:`Pending`},{sNo:2,companyName:`Urban Packaging`,orderId:`ORD-1734340089-502`,labelQty:3e3,productionQty:16624,artwork:`Revision Required`,paymentStatus:`Partial`},{sNo:3,companyName:`Fresh Foods Inc`,orderId:`ORD-1736657752-248`,labelQty:5e3,productionQty:15855,artwork:`Pending`,paymentStatus:`Partial`}],"1000ml":[{sNo:1,companyName:`ABC Industries`,orderId:`ORD-1733695851-165`,labelQty:5e3,productionQty:14673,artwork:`In Review`,paymentStatus:`Pending`},{sNo:2,companyName:`Precision Pack`,orderId:`ORD-1738016423-888`,labelQty:3e3,productionQty:17889,artwork:`In Review`,paymentStatus:`Advance`},{sNo:3,companyName:`XYZ Corp`,orderId:`ORD-1734941736-371`,labelQty:2e3,productionQty:10946,artwork:`In Review`,paymentStatus:`Paid`},{sNo:4,companyName:`Urban Packaging`,orderId:`ORD-1735862685-175`,labelQty:15e3,productionQty:19282,artwork:`In Review`,paymentStatus:`Pending`},{sNo:5,companyName:`Silver Line Ltd`,orderId:`ORD-1733878468-924`,labelQty:7500,productionQty:14241,artwork:`Revision Required`,paymentStatus:`Advance`},{sNo:6,companyName:`Green Valley Foods`,orderId:`ORD-1737810993-196`,labelQty:5e3,productionQty:4581,artwork:`Pending`,paymentStatus:`Pending`}]},Rectangle:{"500ml":[{sNo:1,companyName:`Omega Packaging`,orderId:`ORD-1738744993-668`,labelQty:3e3,productionQty:9701,artwork:`Revision Required`,paymentStatus:`Pending`},{sNo:2,companyName:`Prime Containers`,orderId:`ORD-1732058656-343`,labelQty:5e3,productionQty:3099,artwork:`Approved`,paymentStatus:`Partial`},{sNo:3,companyName:`Precision Pack`,orderId:`ORD-1736891103-501`,labelQty:1e4,productionQty:12765,artwork:`Pending`,paymentStatus:`Pending`},{sNo:4,companyName:`Mountain View Corp`,orderId:`ORD-1733327963-715`,labelQty:1e4,productionQty:9882,artwork:`Pending`,paymentStatus:`Advance`},{sNo:5,companyName:`Fresh Foods Inc`,orderId:`ORD-1735764021-177`,labelQty:3e3,productionQty:16473,artwork:`Approved`,paymentStatus:`Partial`},{sNo:6,companyName:`Sunshine Enterprises`,orderId:`ORD-1739967845-407`,labelQty:3e3,productionQty:13649,artwork:`Approved`,paymentStatus:`Partial`}],"650ml":[{sNo:1,companyName:`ABC Industries`,orderId:`ORD-1732086653-624`,labelQty:3e3,productionQty:19248,artwork:`In Review`,paymentStatus:`Pending`},{sNo:2,companyName:`Royal Plastics`,orderId:`ORD-1732923124-964`,labelQty:15e3,productionQty:14180,artwork:`Pending`,paymentStatus:`Paid`},{sNo:3,companyName:`Galaxy Industries`,orderId:`ORD-1731900480-645`,labelQty:15e3,productionQty:14103,artwork:`Revision Required`,paymentStatus:`Partial`},{sNo:4,companyName:`Metro Packaging`,orderId:`ORD-1731945025-921`,labelQty:1e4,productionQty:8047,artwork:`In Review`,paymentStatus:`Advance`}],"750ml":[{sNo:1,companyName:`Sunshine Enterprises`,orderId:`ORD-1732507748-788`,labelQty:3e3,productionQty:13715,artwork:`Revision Required`,paymentStatus:`Partial`},{sNo:2,companyName:`Quality Containers`,orderId:`ORD-1736117534-707`,labelQty:1e4,productionQty:19584,artwork:`Approved`,paymentStatus:`Partial`},{sNo:3,companyName:`Omega Packaging`,orderId:`ORD-1732585284-730`,labelQty:2e3,productionQty:4735,artwork:`Approved`,paymentStatus:`Advance`},{sNo:4,companyName:`Green Valley Foods`,orderId:`ORD-1735984455-972`,labelQty:1e4,productionQty:9004,artwork:`Revision Required`,paymentStatus:`Paid`}]},"Sweet Box":{"250gms":[{sNo:1,companyName:`Coastal Industries`,orderId:`ORD-1733765258-706`,labelQty:7500,productionQty:18860,artwork:`Pending`,paymentStatus:`Paid`},{sNo:2,companyName:`XYZ Corp`,orderId:`ORD-1738243883-844`,labelQty:5e3,productionQty:6142,artwork:`Revision Required`,paymentStatus:`Advance`},{sNo:3,companyName:`Precision Pack`,orderId:`ORD-1732916390-149`,labelQty:2e3,productionQty:12860,artwork:`In Review`,paymentStatus:`Pending`}],"500gms":[{sNo:1,companyName:`Omega Packaging`,orderId:`ORD-1737045863-632`,labelQty:3e3,productionQty:8567,artwork:`Pending`,paymentStatus:`Partial`},{sNo:2,companyName:`Golden Pack`,orderId:`ORD-1739886796-464`,labelQty:7500,productionQty:1821,artwork:`Pending`,paymentStatus:`Pending`},{sNo:3,companyName:`Silver Line Ltd`,orderId:`ORD-1737266176-809`,labelQty:7500,productionQty:2017,artwork:`Pending`,paymentStatus:`Paid`}]},"Sweet Box TE":{"TE 250gms":[{sNo:1,companyName:`Golden Pack`,orderId:`ORD-1731261481-983`,labelQty:3e3,productionQty:9547,artwork:`Revision Required`,paymentStatus:`Paid`},{sNo:2,companyName:`ABC Industries`,orderId:`ORD-1734534340-587`,labelQty:7500,productionQty:14501,artwork:`Pending`,paymentStatus:`Paid`},{sNo:3,companyName:`Delta Foods`,orderId:`ORD-1739236019-515`,labelQty:2e4,productionQty:13823,artwork:`Revision Required`,paymentStatus:`Partial`}],"TE 500gms":[{sNo:1,companyName:`Mountain View Corp`,orderId:`ORD-1735509549-173`,labelQty:5e3,productionQty:10832,artwork:`In Review`,paymentStatus:`Pending`},{sNo:2,companyName:`Green Valley Foods`,orderId:`ORD-1738524997-398`,labelQty:1e4,productionQty:8884,artwork:`In Review`,paymentStatus:`Paid`},{sNo:3,companyName:`Quality Containers`,orderId:`ORD-1736389578-806`,labelQty:5e3,productionQty:8784,artwork:`Approved`,paymentStatus:`Partial`}]},"Round Square":{"450ml":[{sNo:1,companyName:`XYZ Corp`,orderId:`ORD-1735204456-420`,labelQty:2e3,productionQty:12298,artwork:`Approved`,paymentStatus:`Advance`},{sNo:2,companyName:`Blue Ocean Co`,orderId:`ORD-1738957234-984`,labelQty:5e3,productionQty:13472,artwork:`Revision Required`,paymentStatus:`Paid`},{sNo:3,companyName:`Galaxy Industries`,orderId:`ORD-1739279613-767`,labelQty:3e3,productionQty:18180,artwork:`In Review`,paymentStatus:`Partial`},{sNo:4,companyName:`ABC Industries`,orderId:`ORD-1732251338-946`,labelQty:7500,productionQty:6032,artwork:`Revision Required`,paymentStatus:`Paid`}],"500ml":[{sNo:1,companyName:`Coastal Industries`,orderId:`ORD-1732660499-107`,labelQty:5e3,productionQty:6797,artwork:`Approved`,paymentStatus:`Pending`},{sNo:2,companyName:`Fresh Foods Inc`,orderId:`ORD-1736524337-239`,labelQty:2e3,productionQty:15005,artwork:`Revision Required`,paymentStatus:`Pending`},{sNo:3,companyName:`Supreme Plastics`,orderId:`ORD-1735380602-160`,labelQty:1e4,productionQty:12221,artwork:`Approved`,paymentStatus:`Paid`},{sNo:4,companyName:`Prime Containers`,orderId:`ORD-1738916468-245`,labelQty:7500,productionQty:15336,artwork:`Revision Required`,paymentStatus:`Paid`},{sNo:5,companyName:`Blue Ocean Co`,orderId:`ORD-1739817122-866`,labelQty:7500,productionQty:17242,artwork:`Revision Required`,paymentStatus:`Partial`},{sNo:6,companyName:`Delta Foods`,orderId:`ORD-1732203508-247`,labelQty:7500,productionQty:10983,artwork:`Revision Required`,paymentStatus:`Advance`}]}},[n,r]=(0,_.useState)(``),[i,a]=(0,_.useState)(``),[o,s]=(0,_.useState)(``),[c,l]=(0,_.useState)({}),[u,d]=(0,_.useState)({});(0,_.useEffect)(()=>{if(n.trim()){let r={},i={};Object.entries(e).forEach(([e,a])=>{let o=!1;a.forEach(r=>{(t[e]?.[r]||[]).some(e=>e.companyName.toLowerCase().includes(n.toLowerCase()))&&(o=!0,i[`${e}-${r}`]=!0)}),o&&(r[e]=!0)}),l(r),d(i)}},[n]);let f=e=>{l(t=>({...t,[e]:!t[e]}))},p=(e,t)=>{let n=`${e}-${t}`;d(e=>({...e,[n]:!e[n]}))},m=e=>n.trim()?e.filter(e=>e.companyName.toLowerCase().includes(n.toLowerCase())):e,h=()=>i&&e[i]||[],g=()=>i?[i]:Object.keys(e),v=t=>{let n=e[t];return o?n.filter(e=>e===o):n};return(0,_.useEffect)(()=>{s(``)},[i]),(0,F.jsx)(`div`,{className:`min-h-screen bg-gray-50 p-0`,children:(0,F.jsxs)(`div`,{className:`max-w-[90vw] mx-auto bg-white rounded-[0.8vw] shadow-lg`,children:[(0,F.jsxs)(`div`,{className:`flex justify-between items-center p-[1vw_1.5vw] border-b-2 border-gray-300 bg-white`,children:[(0,F.jsx)(`h1`,{className:`text-[1.8vw] font-bold text-gray-800 m-0`,children:` Reports Dashboard`}),(0,F.jsxs)(`div`,{className:`relative w-[22vw]`,children:[(0,F.jsx)(`svg`,{className:`absolute left-[0.8vw] top-[50%] translate-y-[-50%] w-[1.2vw] h-[1.2vw] text-gray-400`,fill:`none`,stroke:`currentColor`,viewBox:`0 0 24 24`,children:(0,F.jsx)(`path`,{strokeLinecap:`round`,strokeLinejoin:`round`,strokeWidth:2,d:`M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z`})}),(0,F.jsx)(`input`,{type:`text`,placeholder:`Search by company name...`,value:n,onChange:e=>r(e.target.value),className:`w-full pl-[2.5vw] pr-[0.45vw] py-[0.45vw] border-2 border-gray-300 bg-white rounded-[0.5vw] text-[0.9vw] outline-none box-border focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition-all shadow-sm`})]})]}),(0,F.jsxs)(`div`,{className:`flex gap-[1.5vw] p-[1.5vw_2vw] bg-white border-b border-gray-300`,children:[(0,F.jsxs)(`div`,{className:`flex items-center gap-[0.8vw]`,children:[(0,F.jsx)(`label`,{className:`text-[0.9vw] font-semibold text-gray-700 whitespace-nowrap`,children:`Filter by Product:`}),(0,F.jsxs)(`select`,{value:i,onChange:e=>a(e.target.value),className:`px-[1vw] py-[0.6vw] border-2 border-gray-300 bg-white rounded-[0.5vw] text-[0.85vw] outline-none cursor-pointer focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition-all shadow-sm min-w-[12vw]`,children:[(0,F.jsx)(`option`,{value:``,children:`All Products`}),Object.keys(e).map(e=>(0,F.jsx)(`option`,{value:e,children:e},e))]})]}),(0,F.jsxs)(`div`,{className:`flex items-center gap-[0.8vw]`,children:[(0,F.jsx)(`label`,{className:`text-[0.9vw] font-semibold text-gray-700 whitespace-nowrap`,children:`Filter by Size:`}),(0,F.jsxs)(`select`,{value:o,onChange:e=>s(e.target.value),disabled:!i,className:`px-[1vw] py-[0.6vw] border-2 border-gray-300 bg-white rounded-[0.5vw] text-[0.85vw] outline-none cursor-pointer focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition-all shadow-sm min-w-[10vw] disabled:bg-gray-200 disabled:cursor-not-allowed`,children:[(0,F.jsx)(`option`,{value:``,children:`All Sizes`}),h().map(e=>(0,F.jsx)(`option`,{value:e,children:e},e))]})]}),(i||o)&&(0,F.jsx)(`button`,{onClick:()=>{a(``),s(``)},className:`ml-auto px-[1.2vw] py-[0.6vw] bg-red-500 hover:bg-red-600 text-white rounded-[0.5vw] text-[0.85vw] font-medium transition-all shadow-sm`,children:`Clear Filters`})]}),(0,F.jsx)(`div`,{className:`p-[1.5vw] max-h-[65vh] overflow-y-auto`,children:g().map(e=>{let r=v(e);return(0,F.jsxs)(`div`,{className:`mb-[2vw]`,children:[(0,F.jsxs)(`div`,{className:`bg-[#3d64bb] text-white px-[1vw] py-[1vw] rounded-[0.6vw] text-[1.1vw] font-semibold cursor-pointer flex justify-between items-center transition-all shadow-md`,onClick:()=>f(e),children:[(0,F.jsxs)(`span`,{className:`flex items-center gap-[0.8vw]`,children:[(0,F.jsx)(`span`,{className:`text-[1.3vw]`,children:(0,F.jsx)(`svg`,{className:`w-[1.3vw] h-[1.3vw]`,fill:`currentColor`,viewBox:`0 0 20 20`,children:(0,F.jsx)(`path`,{d:`M3 4a1 1 0 011-1h12a1 1 0 011 1v2a1 1 0 01-1 1H4a1 1 0 01-1-1V4zM3 10a1 1 0 011-1h6a1 1 0 011 1v6a1 1 0 01-1 1H4a1 1 0 01-1-1v-6zM14 9a1 1 0 00-1 1v6a1 1 0 001 1h2a1 1 0 001-1v-6a1 1 0 00-1-1h-2z`})})}),e]}),(0,F.jsx)(`svg`,{className:`w-[1.3vw] h-[1.3vw] transition-transform duration-300 ${c[e]?`rotate-180`:``}`,fill:`none`,stroke:`currentColor`,viewBox:`0 0 24 24`,children:(0,F.jsx)(`path`,{strokeLinecap:`round`,strokeLinejoin:`round`,strokeWidth:2.5,d:`M19 9l-7 7-7-7`})})]}),c[e]&&(0,F.jsx)(`div`,{className:`bg-white rounded-b-[0.6vw] border-2 border-gray-300 border-t-0 shadow-sm`,children:r.map(r=>{let i=`${e}-${r}`,a=m(t[e][r]||[]);return(0,F.jsxs)(`div`,{className:`p-[1vw] border-b-2 border-gray-200 last:border-b-0`,children:[(0,F.jsxs)(`div`,{className:`bg-[#41a5b5] text-white px-[1.3vw] py-[0.7vw] rounded-[0.5vw] text-[1vw] font-semibold cursor-pointer flex justify-between items-center transition-all shadow-sm`,onClick:()=>p(e,r),children:[(0,F.jsxs)(`span`,{className:`flex items-center gap-[0.6vw]`,children:[(0,F.jsx)(`span`,{className:`text-[1.1vw]`,children:(0,F.jsx)(`svg`,{className:`w-[1.1vw] h-[1.1vw]`,fill:`currentColor`,viewBox:`0 0 20 20`,children:(0,F.jsx)(`path`,{fillRule:`evenodd`,d:`M17.707 9.293a1 1 0 010 1.414l-7 7a1 1 0 01-1.414 0l-7-7A.997.997 0 012 10V5a3 3 0 013-3h5c.256 0 .512.098.707.293l7 7zM5 6a1 1 0 100-2 1 1 0 000 2z`,clipRule:`evenodd`})})}),r]}),(0,F.jsx)(`svg`,{className:`w-[1.1vw] h-[1.1vw] transition-transform duration-300 ${u[i]?`rotate-180`:``}`,fill:`none`,stroke:`currentColor`,viewBox:`0 0 24 24`,children:(0,F.jsx)(`path`,{strokeLinecap:`round`,strokeLinejoin:`round`,strokeWidth:2.5,d:`M19 9l-7 7-7-7`})})]}),u[i]&&(0,F.jsx)(`div`,{className:`mt-[1.2vw] overflow-x-auto`,children:a.length>0?(0,F.jsxs)(`table`,{className:`w-full border-collapse bg-white rounded-[0.6vw] overflow-hidden shadow-md border-2 border-gray-300`,children:[(0,F.jsx)(`thead`,{children:(0,F.jsxs)(`tr`,{className:`bg-slate-700 text-white`,children:[(0,F.jsx)(`th`,{className:`border border-gray-400 px-[1.2vw] py-[0.8vw] text-left text-[0.9vw] font-bold`,children:`S. No`}),(0,F.jsx)(`th`,{className:`border border-gray-400 px-[1.2vw] py-[0.8vw] text-left text-[0.9vw] font-bold`,children:`Company Name`}),(0,F.jsx)(`th`,{className:`border border-gray-400 px-[1.2vw] py-[0.8vw] text-left text-[0.9vw] font-bold`,children:`Order ID`}),(0,F.jsx)(`th`,{className:`border border-gray-400 px-[1.2vw] py-[0.8vw] text-left text-[0.9vw] font-bold`,children:`Label Qty`}),(0,F.jsx)(`th`,{className:`border border-gray-400 px-[1.2vw] py-[0.8vw] text-left text-[0.9vw] font-bold`,children:`Production Qty`}),(0,F.jsx)(`th`,{className:`border border-gray-400 px-[1.2vw] py-[0.8vw] text-left text-[0.9vw] font-bold`,children:`Artwork`}),(0,F.jsx)(`th`,{className:`border border-gray-400 px-[1.2vw] py-[0.8vw] text-left text-[0.9vw] font-bold`,children:`Payment Status`}),(0,F.jsx)(`th`,{className:`border border-gray-400 px-[1.2vw] py-[0.8vw] text-left text-[0.9vw] font-bold `,children:`View`})]})}),(0,F.jsx)(`tbody`,{children:a.map((e,t)=>(0,F.jsxs)(`tr`,{className:`${t%2==0?`bg-gray-50`:`bg-white`} hover:bg-blue-50 transition-colors`,children:[(0,F.jsx)(`td`,{className:`border border-gray-300 px-[1.2vw] py-[0.7vw] text-[0.85vw] text-gray-800 font-medium`,children:e.sNo}),(0,F.jsx)(`td`,{className:`border border-gray-300 px-[1.2vw] py-[0.7vw] text-[0.85vw] text-gray-800 font-semibold`,children:e.companyName}),(0,F.jsx)(`td`,{className:`border border-gray-300 px-[1.2vw] py-[0.7vw] text-[0.8vw] text-gray-600 font-mono`,children:e.orderId}),(0,F.jsx)(`td`,{className:`border border-gray-300 px-[1.2vw] py-[0.7vw] text-[0.85vw] text-gray-800 font-medium`,children:e.labelQty.toLocaleString()}),(0,F.jsx)(`td`,{className:`border border-gray-300 px-[1.2vw] py-[0.7vw] text-[0.85vw] text-gray-800 font-medium`,children:e.productionQty.toLocaleString()}),(0,F.jsx)(`td`,{className:`border border-gray-300 px-[1.2vw] py-[0.7vw] text-[0.8vw]`,children:(0,F.jsx)(`span`,{className:`px-[0.8vw] py-[0.3vw] rounded-[0.3vw] text-[0.8vw] font-bold ${e.artwork===`Approved`?`bg-green-100 text-green-600 border border-green-300`:e.artwork===`In Review`?`bg-blue-100 text-blue-600 border border-blue-300`:e.artwork===`Revision Required`?`bg-orange-100 text-orange-600 border border-orange-300`:`bg-yellow-100 text-yellow-600 border border-yellow-300`}`,children:e.artwork})}),(0,F.jsx)(`td`,{className:`border border-gray-300 px-[1.2vw] py-[0.7vw] text-[0.8vw]`,children:(0,F.jsx)(`span`,{className:`px-[0.8vw] py-[0.3vw] rounded-[0.3vw] text-[0.8vw] font-bold ${e.paymentStatus===`Paid`?`bg-green-100 text-green-600 border border-green-300`:e.paymentStatus===`Advance`?`bg-blue-100 text-blue-600 border border-blue-300`:e.paymentStatus===`Partial`?`bg-purple-100 text-purple-600 border border-purple-300`:`bg-red-100 text-red-600 border border-red-300`}`,children:e.paymentStatus})}),(0,F.jsx)(`td`,{className:`border border-gray-300 px-[1.2vw] py-[0.7vw] text-[0.8vw] text-center`,children:(0,F.jsx)(`button`,{className:`px-[1vw] py-[0.4vw] bg-[#388ce3] text-white rounded-[0.4vw] text-[0.8vw] font-semibold transition-all shadow-sm hover:shadow-md cursor-pointer`,children:`View`})})]},e.sNo))})]}):(0,F.jsxs)(`div`,{className:`bg-gray-50 rounded-[0.6vw] p-[2.5vw] text-center border-2 border-gray-300`,children:[(0,F.jsx)(`svg`,{className:`mx-auto w-[3vw] h-[3vw] text-gray-400 mb-[1vw]`,fill:`none`,stroke:`currentColor`,viewBox:`0 0 24 24`,children:(0,F.jsx)(`path`,{strokeLinecap:`round`,strokeLinejoin:`round`,strokeWidth:2,d:`M9.172 16.172a4 4 0 015.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z`})}),(0,F.jsxs)(`p`,{className:`text-[1vw] text-gray-600 font-semibold`,children:[`No company found matching "`,n,`"`]})]})})]},r)})})]},e)})})]})})};function Sl(){let{pathname:e}=He();return(0,_.useEffect)(()=>{let e=document.getElementById(`mainContent`);e&&e.scrollTo({top:0,behavior:`smooth`})},[e]),null}var Cl=()=>{let[e,t]=(0,_.useState)(``),[n,r]=(0,_.useState)(``),[i,a]=(0,_.useState)(!1);return(0,F.jsxs)(`div`,{className:`flex h-screen w-screen overflow-hidden bg-white font-sans`,children:[(0,F.jsxs)(`div`,{className:`w-[50vw] relative flex flex-col items-center justify-center`,children:[(0,F.jsx)(`div`,{className:`absolute -top-[6vw] right-[2vw] w-[12vw] h-[12vw] bg-[#1e73be] rounded-full`}),(0,F.jsx)(`div`,{className:`absolute -bottom-[6vw] -left-[2vw] w-[14vw] h-[14vw] bg-[#263895] rounded-full`}),(0,F.jsxs)(`div`,{className:`w-[28vw] z-10 text-center`,children:[(0,F.jsx)(`h1`,{className:`text-[2.5vw] font-bold text-black mb-[1.5vw]`,children:`LOGIN`}),(0,F.jsxs)(`p`,{className:`text-[0.9vw] font-medium text-gray-800 mb-[2.5vw]`,children:[`Hey Terra Tech Packs Team ,`,` `,(0,F.jsx)(`span`,{className:`text-[#00b5e2] font-bold`,children:`Welcome Back !`})]}),(0,F.jsxs)(`form`,{onSubmit:t=>{t.preventDefault(),console.log(`Login attempt:`,{username:e,password:n})},className:`flex flex-col gap-[1.2vw] w-full`,children:[(0,F.jsxs)(`div`,{className:`relative group`,children:[(0,F.jsx)(`div`,{className:`absolute left-[1vw] top-1/2 -translate-y-1/2 p-[0.4vw] bg-white rounded-full shadow-sm`,children:(0,F.jsx)(In,{className:`w-[1vw] h-[1vw] text-[#263895]`})}),(0,F.jsx)(`input`,{type:`text`,placeholder:`User Name`,className:`w-full pl-[3.5vw] pr-[1.5vw] py-[1vw] bg-gray-100 border-2 font-medium border-transparent rounded-[0.8vw] text-[1vw] text-gray-800 placeholder-gray-400 focus:bg-white focus:border-[#263895]/20 focus:outline-none transition-all duration-300`,value:e,onChange:e=>t(e.target.value)})]}),(0,F.jsxs)(`div`,{className:`relative group`,children:[(0,F.jsx)(`div`,{className:`absolute left-[1vw] top-1/2 -translate-y-1/2 p-[0.4vw] bg-white rounded-full shadow-sm`,children:(0,F.jsx)(Ln,{className:`w-[1vw] h-[1vw] text-[#263895]`})}),(0,F.jsx)(`input`,{type:i?`text`:`password`,placeholder:`Password`,className:`w-full pl-[3.5vw] pr-[3vw] py-[1vw] bg-gray-100 border-2 border-transparent rounded-[0.8vw] text-[1vw] font-medium text-gray-800 placeholder-gray-400 focus:bg-white focus:border-[#263895]/20 focus:outline-none transition-all duration-300`,value:n,onChange:e=>r(e.target.value)}),(0,F.jsx)(`button`,{type:`button`,onClick:()=>a(!i),className:`absolute right-[1.2vw] cursor-pointer top-1/2 -translate-y-1/2 text-gray-400 hover:text-[#263895] transition-colors`,children:i?(0,F.jsx)(Rn,{className:`w-[1.2vw] h-[1.2vw]`}):(0,F.jsx)(zn,{className:`w-[1.2vw] h-[1.2vw]`})})]}),(0,F.jsx)(`div`,{className:`mt-[1vw]`,children:(0,F.jsx)(on,{to:`/`,children:(0,F.jsx)(`button`,{type:`submit`,className:`w-full cursor-pointer bg-gradient-to-r from-[#263895] to-[#2485b8] text-white text-[1vw] font-semibold py-[1vw] rounded-[0.8vw] shadow-lg shadow-blue-900/20 hover:shadow-blue-900/40 hover:scale-[1.01] active:scale-[0.99] transition-all duration-200`,children:`Login`})})})]})]})]}),(0,F.jsxs)(`div`,{className:`w-[50vw] relative bg-gradient-to-br from-[#263895] to-[#2485b8] flex items-center justify-center overflow-hidden`,children:[(0,F.jsx)(`div`,{className:`absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[40vw] h-[40vw] border-[0.2vw] border-white/5 rounded-full pointer-events-none`}),(0,F.jsx)(`div`,{className:`absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[55vw] h-[55vw] border-[0.2vw] border-white/5 rounded-full pointer-events-none`}),(0,F.jsx)(`div`,{className:`absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[70vw] h-[70vw] border-[0.2vw] border-white/5 rounded-full pointer-events-none`}),(0,F.jsx)(`div`,{className:`absolute top-[10%] left-[80%] w-[30vw] h-[30vw] border-[0.2vw] border-white/10 rounded-full pointer-events-none blur-sm`}),(0,F.jsx)(`div`,{className:`absolute bottom-[10%] right-[80%] w-[40vw] h-[40vw] border-[0.2vw] border-white/5 rounded-full pointer-events-none`}),(0,F.jsx)(`div`,{className:`z-10`,children:(0,F.jsx)(`img`,{src:Bn,alt:`TerraTech Packs Logo`,className:`w-[27vw] `})})]})]})},wl=`iml_tracking_followups`,Tl=`iml_label_followups`,El=`iml_purchase_metadata`,Dl=e=>!e||typeof e!=`object`?``:`rgba(${e.r}, ${e.g}, ${e.b}, ${e.a})`,Ol=e=>!e||e.length===0?0:e.reduce((e,t)=>e+(parseInt(t.quantity.toString().replace(/,/g,``),10)||0),0),kl=e=>e&&parseInt(e.toString().replace(/,/g,``),10)||0,Al=()=>{let e=He(),t=Ge(),{entry:n,mode:r}=e.state||{},i=r===`tracking`,[a,o]=(0,_.useState)({company:``,contact:``,product:``,size:``,labelType:``,supplierName:``,lidColor:``,tubColor:``,reaminingQuantity:``,quantity:``,comment:``}),[s,c]=(0,_.useState)({company:``,contact:``,product:``,size:``,lidOrTub:`lid`,reaminingQuantity:``,quantity:``,comment:``}),[l,u]=(0,_.useState)([]),[d,f]=(0,_.useState)([]),[p,m]=(0,_.useState)(0);(0,_.useEffect)(()=>{if(n){let e=n.id;if(i){let t=localStorage.getItem(wl),r=(t?JSON.parse(t):{})[e]||[];u(r);let i=kl(n.quantity||n.qty)-Ol(r);m(i);let a=localStorage.getItem(El),s=(a?JSON.parse(a):{})[e]||{};o({company:n.company||``,contact:n.contact||``,product:n.product||``,size:n.size||``,labelType:s.labelType||n.labelType||``,supplierName:s.supplier||n.supplier||``,lidColor:typeof n.lidColor==`object`?Dl(n.lidColor):n.lidColor||``,tubColor:typeof n.tubColor==`object`?Dl(n.tubColor):n.tubColor||``,reaminingQuantity:i.toLocaleString(),quantity:``,comment:``})}else{let t=localStorage.getItem(Tl),r=(t?JSON.parse(t):{})[e]||[];f(r);let i=kl(n.quantity||n.qty)-Ol(r);m(i),c({company:n.company||``,contact:n.contact||``,product:n.product||``,size:n.size||``,lidOrTub:`lid`,reaminingQuantity:i.toLocaleString(),quantity:``,comment:``})}}},[n,i]);let h=e=>{let{name:t,value:n}=e.target;o(e=>({...e,[t]:n}))},g=e=>{let{name:t,value:n}=e.target;c(e=>({...e,[t]:n}))},v=()=>{if(!a.quantity||!a.comment){alert(`Please enter both Quantity and Comment`);return}let e=kl(a.quantity);if(e>p){alert(`Quantity cannot exceed remaining quantity: ${p.toLocaleString()}`);return}let t={date:new Date().toLocaleDateString(`en-GB`),quantity:a.quantity,comment:a.comment},r=[...l,t];u(r);let i=p-e;m(i);let s=n.id,c=localStorage.getItem(wl),d=c?JSON.parse(c):{};d[s]=r,localStorage.setItem(wl,JSON.stringify(d)),o(e=>({...e,quantity:``,comment:``,reaminingQuantity:i.toLocaleString()}))},y=()=>{if(!s.quantity||!s.comment){alert(`Please enter both Quantity and Comment`);return}let e=kl(s.quantity);if(e>p){alert(`Quantity cannot exceed remaining quantity: ${p.toLocaleString()}`);return}let t={date:new Date().toLocaleDateString(`en-GB`),lidOrTub:s.lidOrTub,quantity:s.quantity,comment:s.comment},r=[...d,t];f(r);let i=p-e;m(i);let a=n.id,o=localStorage.getItem(Tl),l=o?JSON.parse(o):{};l[a]=r,localStorage.setItem(Tl,JSON.stringify(l)),c(e=>({...e,quantity:``,comment:``,lidOrTub:`lid`,reaminingQuantity:i.toLocaleString()}))},b=()=>{if(i){let e=n.id,t=localStorage.getItem(El),r=t?JSON.parse(t):{};r[e]={labelType:a.labelType,supplier:a.supplierName},localStorage.setItem(El,JSON.stringify(r));let i=localStorage.getItem(`iml_purchase_entries`),o=(i?JSON.parse(i):[]).map(e=>e.id===n.id?{...e,labelType:a.labelType,supplier:a.supplierName,lidColor:a.lidColor,tubColor:a.tubColor}:e);localStorage.setItem(`iml_purchase_entries`,JSON.stringify(o)),alert(`Tracking sheet data saved successfully!`)}else alert(`Label quantity sheet data saved successfully!`)};return(0,F.jsxs)(`div`,{className:`p-[1vw] font-sans bg-gray-50 min-h-screen`,children:[(0,F.jsxs)(`div`,{className:`flex justify-between items-center mb-[1vw]`,children:[(0,F.jsx)(`h1`,{className:`text-[1.75vw] text-gray-800 font-bold`,children:i?`Tracking Sheet`:`Label Quantity Sheet`}),(0,F.jsxs)(`button`,{onClick:()=>{t(`/iml/purchaseManagement`,{state:{returnedFromSheet:r}})},className:`flex items-center gap-[0.4vw] px-[1.25vw] py-[0.7vw] text-[0.9vw] bg-gray-600 text-white rounded-md font-medium hover:bg-gray-700 transition-colors cursor-pointer`,children:[(0,F.jsx)(`svg`,{xmlns:`http://www.w3.org/2000/svg`,viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,strokeWidth:`2`,strokeLinecap:`round`,strokeLinejoin:`round`,className:`w-[0.9vw] h-[0.9vw]`,children:(0,F.jsx)(`path`,{d:`M15 18l-6-6 6-6`})}),(0,F.jsx)(`span`,{children:`Back`})]})]}),i&&(0,F.jsxs)(`div`,{className:`bg-white p-[1vw] rounded-lg shadow-sm border border-gray-200`,children:[(0,F.jsxs)(`div`,{className:`grid grid-cols-4 gap-[1vw] mb-[1vw]`,children:[(0,F.jsxs)(`div`,{children:[(0,F.jsx)(`label`,{className:`block mb-[0.5vw] text-[0.85vw] font-medium text-gray-700`,children:`Company Name`}),(0,F.jsx)(`input`,{type:`text`,name:`company`,value:a.company,disabled:!0,className:`w-full px-[0.7vw] py-[0.7vw] text-[0.9vw] border border-gray-300 rounded-md bg-gray-100 cursor-not-allowed`})]}),(0,F.jsxs)(`div`,{children:[(0,F.jsx)(`label`,{className:`block mb-[0.5vw] text-[0.85vw] font-medium text-gray-700`,children:`Contact Name`}),(0,F.jsx)(`input`,{type:`text`,name:`contact`,value:a.contact,disabled:!0,className:`w-full px-[0.7vw] py-[0.7vw] text-[0.9vw] border border-gray-300 rounded-md bg-gray-100 cursor-not-allowed`})]}),(0,F.jsxs)(`div`,{children:[(0,F.jsx)(`label`,{className:`block mb-[0.5vw] text-[0.85vw] font-medium text-gray-700`,children:`Product`}),(0,F.jsx)(`input`,{type:`text`,name:`product`,value:a.product,disabled:!0,className:`w-full px-[0.7vw] py-[0.7vw] text-[0.9vw] border border-gray-300 rounded-md bg-gray-100 cursor-not-allowed`})]}),(0,F.jsxs)(`div`,{children:[(0,F.jsx)(`label`,{className:`block mb-[0.5vw] text-[0.85vw] font-medium text-gray-700`,children:`Product Size`}),(0,F.jsx)(`input`,{type:`text`,name:`size`,value:a.size,disabled:!0,className:`w-full px-[0.7vw] py-[0.7vw] text-[0.9vw] border border-gray-300 rounded-md bg-gray-100 cursor-not-allowed`})]}),(0,F.jsxs)(`div`,{children:[(0,F.jsx)(`label`,{className:`block mb-[0.5vw] text-[0.85vw] font-medium text-gray-700`,children:`Label Type`}),(0,F.jsx)(`input`,{type:`text`,name:`labelType`,value:a.labelType,onChange:h,placeholder:`Enter label type`,className:`w-full px-[0.7vw] py-[0.7vw] text-[0.9vw] border border-gray-300 rounded-md outline-none focus:border-blue-600 transition-colors`})]}),(0,F.jsxs)(`div`,{children:[(0,F.jsx)(`label`,{className:`block mb-[0.5vw] text-[0.85vw] font-medium text-gray-700`,children:`Supplier Name`}),(0,F.jsx)(`input`,{type:`text`,name:`supplierName`,value:a.supplierName,onChange:h,placeholder:`Enter supplier name`,className:`w-full px-[0.7vw] py-[0.7vw] text-[0.9vw] border border-gray-300 rounded-md outline-none focus:border-blue-600 transition-colors`})]}),(0,F.jsxs)(`div`,{children:[(0,F.jsx)(`label`,{className:`block mb-[0.5vw] text-[0.85vw] font-medium text-gray-700`,children:`Lid Color`}),(0,F.jsx)(`input`,{type:`text`,name:`lidColor`,value:a.lidColor,onChange:h,placeholder:`Enter lid color`,className:`w-full px-[0.7vw] py-[0.7vw] text-[0.9vw] border border-gray-300 rounded-md outline-none focus:border-blue-600 transition-colors`})]}),(0,F.jsxs)(`div`,{children:[(0,F.jsx)(`label`,{className:`block mb-[0.5vw] text-[0.85vw] font-medium text-gray-700`,children:`Tub Color`}),(0,F.jsx)(`input`,{type:`text`,name:`tubColor`,value:a.tubColor,onChange:h,placeholder:`Enter tub color`,className:`w-full px-[0.7vw] py-[0.7vw] text-[0.9vw] border border-gray-300 rounded-md outline-none focus:border-blue-600 transition-colors`})]})]}),(0,F.jsxs)(`div`,{className:`max-h-[40vh] overflow-y-auto`,children:[(0,F.jsx)(`div`,{className:`border-t border-gray-300 pt-[1vw] mb-[1vw]`,children:(0,F.jsxs)(`div`,{className:`grid grid-cols-5 gap-[1.5vw]`,children:[(0,F.jsxs)(`div`,{children:[(0,F.jsx)(`label`,{className:`block mb-[0.5vw] text-[0.85vw] font-medium text-gray-700`,children:`Remaining Quantity`}),(0,F.jsx)(`input`,{type:`text`,name:`remaining_quantity`,value:a.reaminingQuantity,disabled:!0,placeholder:`Total quantity`,className:`w-full px-[0.7vw] py-[0.7vw] text-[0.9vw] border border-gray-300 rounded-md outline-none focus:border-blue-600 transition-colors cursor-not-allowed bg-gray-100`})]}),(0,F.jsxs)(`div`,{children:[(0,F.jsx)(`label`,{className:`block mb-[0.5vw] text-[0.85vw] font-medium text-gray-700`,children:`Quantity`}),(0,F.jsx)(`input`,{type:`text`,name:`quantity`,value:a.quantity,onChange:h,max:p,placeholder:`Enter quantity`,className:`w-full px-[0.7vw] py-[0.7vw] text-[0.9vw] border border-gray-300 rounded-md outline-none focus:border-blue-600 transition-colors`})]}),(0,F.jsxs)(`div`,{className:`col-span-2`,children:[(0,F.jsx)(`label`,{className:`block mb-[0.5vw] text-[0.85vw] font-medium text-gray-700`,children:`Comment`}),(0,F.jsx)(`input`,{type:`text`,name:`comment`,value:a.comment,onChange:h,placeholder:`Enter comment`,className:`w-full px-[0.7vw] py-[0.7vw] text-[0.9vw] border border-gray-300 rounded-md outline-none focus:border-blue-600 transition-colors`})]}),(0,F.jsxs)(`div`,{className:`col-span-1`,children:[(0,F.jsx)(`label`,{className:`block mb-[0.5vw] text-[0.85vw] font-medium text-gray-700 opacity-0 pointer-events-none select-none`,children:`submit button`}),(0,F.jsx)(`button`,{onClick:v,className:`text-[0.9vw] px-[0.78vw] py-[.7vw] h-auto bg-green-600 text-white rounded-md font-medium hover:bg-green-700 transition-colors cursor-pointer`,children:`Add Followup`})]})]})}),(0,F.jsxs)(`div`,{className:`mb-[2vw]`,children:[(0,F.jsx)(`h3`,{className:`text-[1.2vw] font-semibold text-gray-800 mb-[1vw]`,children:`Followup History`}),l.length>0?(0,F.jsx)(`div`,{className:`overflow-x-auto`,children:(0,F.jsxs)(`table`,{className:`w-full border-collapse text-[0.85vw]`,children:[(0,F.jsx)(`thead`,{children:(0,F.jsxs)(`tr`,{className:`bg-gray-100`,children:[(0,F.jsx)(`th`,{className:`px-[0.9vw] py-[0.9vw] text-left border border-gray-300 text-gray-700 font-semibold`,children:`Date`}),(0,F.jsx)(`th`,{className:`px-[0.9vw] py-[0.9vw] text-left border border-gray-300 text-gray-700 font-semibold`,children:`Quantity`}),(0,F.jsx)(`th`,{className:`px-[0.9vw] py-[0.9vw] text-left border border-gray-300 text-gray-700 font-semibold`,children:`Comments`})]})}),(0,F.jsx)(`tbody`,{children:l.map((e,t)=>(0,F.jsxs)(`tr`,{className:`hover:bg-gray-50`,children:[(0,F.jsx)(`td`,{className:`px-[0.9vw] py-[0.9vw] border border-gray-300 text-gray-900`,children:e.date}),(0,F.jsx)(`td`,{className:`px-[0.9vw] py-[0.9vw] border border-gray-300 text-gray-900`,children:e.quantity}),(0,F.jsx)(`td`,{className:`px-[0.9vw] py-[0.9vw] border border-gray-300 text-gray-900`,children:e.comment})]},t))})]})}):(0,F.jsx)(`p`,{className:`text-[0.9vw] text-gray-500`,children:`No followup history available.`})]})]}),(0,F.jsx)(`button`,{onClick:b,className:`px-[1.25vw] py-[0.55vw] text-[1vw] ml-auto mt-[.25vw] block bg-blue-600 text-white rounded-md font-semibold hover:bg-blue-700 transition-colors cursor-pointer`,children:`Submit`})]}),!i&&(0,F.jsxs)(`div`,{className:`bg-white px-[1.25vw] py-[1vw] rounded-lg shadow-sm border border-gray-200`,children:[(0,F.jsxs)(`div`,{className:`grid grid-cols-4 gap-[1.75vw] mb-[2vw]`,children:[(0,F.jsxs)(`div`,{children:[(0,F.jsx)(`label`,{className:`block mb-[0.5vw] text-[0.85vw] font-medium text-gray-700`,children:`Company Name`}),(0,F.jsx)(`input`,{type:`text`,name:`company`,value:s.company,disabled:!0,className:`w-full px-[0.7vw] py-[0.7vw] text-[0.9vw] border border-gray-300 rounded-md bg-gray-100 cursor-not-allowed`})]}),(0,F.jsxs)(`div`,{children:[(0,F.jsx)(`label`,{className:`block mb-[0.5vw] text-[0.85vw] font-medium text-gray-700`,children:`Contact Name`}),(0,F.jsx)(`input`,{type:`text`,name:`contact`,value:s.contact,disabled:!0,className:`w-full px-[0.7vw] py-[0.7vw] text-[0.9vw] border border-gray-300 rounded-md bg-gray-100 cursor-not-allowed`})]}),(0,F.jsxs)(`div`,{children:[(0,F.jsx)(`label`,{className:`block mb-[0.5vw] text-[0.85vw] font-medium text-gray-700`,children:`Product`}),(0,F.jsx)(`input`,{type:`text`,name:`product`,value:s.product,disabled:!0,className:`w-full px-[0.7vw] py-[0.7vw] text-[0.9vw] border border-gray-300 rounded-md bg-gray-100 cursor-not-allowed`})]}),(0,F.jsxs)(`div`,{children:[(0,F.jsx)(`label`,{className:`block mb-[0.5vw] text-[0.85vw] font-medium text-gray-700`,children:`Product Size`}),(0,F.jsx)(`input`,{type:`text`,name:`size`,value:s.size,disabled:!0,className:`w-full px-[0.7vw] py-[0.7vw] text-[0.9vw] border border-gray-300 rounded-md bg-gray-100 cursor-not-allowed`})]})]}),(0,F.jsxs)(`div`,{className:`max-h-[45vh] overflow-y-auto`,children:[(0,F.jsx)(`div`,{className:`border-t border-gray-300 pt-[1vw] mb-[1vw]`,children:(0,F.jsxs)(`div`,{className:`grid grid-cols-6 gap-[1.5vw]`,children:[(0,F.jsxs)(`div`,{children:[(0,F.jsx)(`label`,{className:`block mb-[0.5vw] text-[0.85vw] font-medium text-gray-700`,children:`Remaining Quantity`}),(0,F.jsx)(`input`,{type:`text`,name:`remaining_quantity`,value:s.reaminingQuantity,disabled:!0,placeholder:`Total quantity`,className:`w-full px-[0.7vw] py-[0.7vw] text-[0.9vw] border border-gray-300 rounded-md outline-none focus:border-blue-600 transition-colors cursor-not-allowed bg-gray-100`})]}),(0,F.jsxs)(`div`,{children:[(0,F.jsx)(`label`,{className:`block mb-[0.5vw] text-[0.85vw] font-medium text-gray-700`,children:`Lid or Tub`}),(0,F.jsxs)(`div`,{className:`flex gap-[1vw] items-center mt-[1vw]`,children:[(0,F.jsxs)(`label`,{className:`flex items-center gap-[0.3vw] cursor-pointer`,children:[(0,F.jsx)(`input`,{type:`radio`,name:`lidOrTub`,value:`lid`,checked:s.lidOrTub===`lid`,onChange:g,className:`cursor-pointer`}),(0,F.jsx)(`span`,{className:`text-[0.9vw]`,children:`Lid`})]}),(0,F.jsxs)(`label`,{className:`flex items-center gap-[0.3vw] cursor-pointer`,children:[(0,F.jsx)(`input`,{type:`radio`,name:`lidOrTub`,value:`tub`,checked:s.lidOrTub===`tub`,onChange:g,className:`cursor-pointer`}),(0,F.jsx)(`span`,{className:`text-[0.9vw]`,children:`Tub`})]})]})]}),(0,F.jsxs)(`div`,{children:[(0,F.jsx)(`label`,{className:`block mb-[0.5vw] text-[0.85vw] font-medium text-gray-700`,children:`Quantity`}),(0,F.jsx)(`input`,{type:`text`,name:`quantity`,value:s.quantity,onChange:g,max:p,placeholder:`Enter quantity`,className:`w-full px-[0.7vw] py-[0.7vw] text-[0.9vw] border border-gray-300 rounded-md outline-none focus:border-blue-600 transition-colors`})]}),(0,F.jsxs)(`div`,{className:`col-span-3`,children:[(0,F.jsx)(`label`,{className:`block mb-[0.5vw] text-[0.85vw] font-medium text-gray-700`,children:`Comment`}),(0,F.jsx)(`input`,{type:`text`,name:`comment`,value:s.comment,onChange:g,placeholder:`Enter comment`,className:`w-full px-[0.7vw] py-[0.7vw] text-[0.9vw] border border-gray-300 rounded-md outline-none focus:border-blue-600 transition-colors`})]}),(0,F.jsxs)(`div`,{className:`col-span-1`,children:[(0,F.jsx)(`label`,{className:`block mb-[0.5vw] text-[0.85vw] font-medium text-gray-700 opacity-0 pointer-events-none select-none`,children:`submit button`}),(0,F.jsx)(`button`,{onClick:y,className:`px-[1.5vw] py-[0.7vw] text-[0.9vw] bg-green-600 text-white rounded-md font-medium hover:bg-green-700 transition-colors cursor-pointer`,children:`Add Followup`})]})]})}),(0,F.jsxs)(`div`,{className:`mb-[2vw]`,children:[(0,F.jsx)(`h3`,{className:`text-[1.2vw] font-semibold text-gray-800 mb-[1vw]`,children:`Followup History`}),d.length>0?(0,F.jsx)(`div`,{className:`overflow-x-auto`,children:(0,F.jsxs)(`table`,{className:`w-full border-collapse text-[0.85vw]`,children:[(0,F.jsx)(`thead`,{children:(0,F.jsxs)(`tr`,{className:`bg-gray-100`,children:[(0,F.jsx)(`th`,{className:`px-[0.9vw] py-[0.9vw] text-left border border-gray-300 text-gray-700 font-semibold`,children:`Date`}),(0,F.jsx)(`th`,{className:`px-[0.9vw] py-[0.9vw] text-left border border-gray-300 text-gray-700 font-semibold`,children:`Lid or Tub`}),(0,F.jsx)(`th`,{className:`px-[0.9vw] py-[0.9vw] text-left border border-gray-300 text-gray-700 font-semibold`,children:`Quantity`}),(0,F.jsx)(`th`,{className:`px-[0.9vw] py-[0.9vw] text-left border border-gray-300 text-gray-700 font-semibold`,children:`Comments`})]})}),(0,F.jsx)(`tbody`,{children:d.map((e,t)=>(0,F.jsxs)(`tr`,{className:`hover:bg-gray-50`,children:[(0,F.jsx)(`td`,{className:`px-[0.9vw] py-[0.9vw] border border-gray-300 text-gray-900`,children:e.date}),(0,F.jsx)(`td`,{className:`px-[0.9vw] py-[0.9vw] border border-gray-300 text-gray-900 capitalize`,children:e.lidOrTub}),(0,F.jsx)(`td`,{className:`px-[0.9vw] py-[0.9vw] border border-gray-300 text-gray-900`,children:e.quantity}),(0,F.jsx)(`td`,{className:`px-[0.9vw] py-[0.9vw] border border-gray-300 text-gray-900`,children:e.comment})]},t))})]})}):(0,F.jsx)(`p`,{className:`text-[0.9vw] text-gray-500`,children:`No followup history available.`})]})]}),(0,F.jsx)(`button`,{onClick:b,className:`block ml-auto mt-[.25vw] px-[1.25vw] py-[0.55vw] text-[1vw] bg-blue-600 text-white rounded-md font-semibold hover:bg-blue-700 transition-colors cursor-pointer`,children:`Submit`})]})]})},jl={Round:[`120ml`,`250ml`,`300ml`,`500ml`,`1000ml`],"Round Square":[`450ml`,`500ml`],Rectangle:[`500ml`,`650ml`,`750ml`],"Sweet Box":[`250gms`,`500gms`],"Sweet Box TE":[`TE 250gms`,`TE 500gms`]},Ml={Round:{"120ml":{qty:`50,000`,colorTub:`TR / MW`,colorLid:`Yellow`,hasLid:!0,hasTub:!0},"250ml":{qty:`75,000`,colorTub:`White`,colorLid:`Blue`,hasLid:!0,hasTub:!0},"500ml":{qty:`100,000`,colorTub:`Clear`,colorLid:null,hasLid:!1,hasTub:!0}},"Round Square":{"450ml":{qty:`60,000`,colorTub:`Red`,colorLid:`Green`,hasLid:!0,hasTub:!0},"500ml":{qty:`80,000`,colorTub:null,colorLid:`Orange`,hasLid:!0,hasTub:!1}},Rectangle:{"500ml":{qty:`90,000`,colorTub:`Black`,colorLid:`White`,hasLid:!0,hasTub:!0},"750ml":{qty:`120,000`,colorTub:`Gray`,colorLid:null,hasLid:!1,hasTub:!0}},"Sweet Box":{"250gms":{qty:`40,000`,colorTub:`Pink`,colorLid:`Purple`,hasLid:!0,hasTub:!0},"500gms":{qty:`55,000`,colorTub:null,colorLid:`Gold`,hasLid:!0,hasTub:!1}},"Sweet Box TE":{"TE 250gms":{qty:`35,000`,colorTub:`Silver`,colorLid:`Bronze`,hasLid:!0,hasTub:!0},"TE 500gms":{qty:`45,000`,colorTub:`Copper`,colorLid:null,hasLid:!1,hasTub:!0}}},Nl=[`Ajanta`,`Supplier B`,`Supplier C`],Pl=[`Opaque`,`Transparent`],Fl=()=>{let[e,t]=(0,_.useState)(`Tracking Sheet`),[n,r]=(0,_.useState)({company:`Terra Tech Packs`,product:``,size:``,qty:``,colorTub:``,colorLid:``,hasLid:!1,hasTub:!1,supplier:``,poNumber:``,labelType:``,prodDate:``,comments:``}),[i,a]=(0,_.useState)({product:``,size:``,qty:``,comments:``}),[o,s]=(0,_.useState)([{id:1,product:`Round`,size:`250ml`,qty:`26,500`,comments:`Urgent delivery`,date:`25/11/2025`},{id:2,product:`Rectangle`,size:`500ml`,qty:`15,000`,comments:`Standard order`,date:`24/11/2025`},{id:3,product:`Sweet Box`,size:`250gms`,qty:`10,000`,comments:`Festival special`,date:`23/11/2025`}]),c=e=>{let t=e.target.value,i=jl[t]?.[0]||``,a=Ml[t]?.[i]||{};r({...n,product:t,size:i,qty:a.qty||``,colorTub:a.colorTub||``,colorLid:a.colorLid||``,hasLid:a.hasLid||!1,hasTub:a.hasTub||!1})},l=e=>{let t=e.target.value,i=Ml[n.product]?.[t]||{};r({...n,size:t,qty:i.qty||``,colorTub:i.colorTub||``,colorLid:i.colorLid||``,hasLid:i.hasLid||!1,hasTub:i.hasTub||!1})},u=e=>{r({...n,[e.target.name]:e.target.value})},d=e=>{let{name:t,value:n}=e.target;if(t===`product`){let e=jl[n]?.[0]||``;a({...i,product:n,size:e})}else a(t===`size`?{...i,size:n}:{...i,[t]:n})},f=()=>{i.product&&i.size&&i.qty&&(s([{id:o.length+1,...i,date:new Date().toLocaleDateString(`en-GB`)},...o]),a({product:``,size:``,qty:``,comments:``}))},p=e=>{t(e)};return(0,F.jsxs)(`div`,{className:`bg-[#F6F7FB] text-[#222] pb-[0.25vw] w-full`,children:[(0,F.jsxs)(`div`,{className:`flex items-center justify-between px-[2vw]`,children:[(0,F.jsx)(`h1`,{className:`text-[1.5vw] font-semibold`,children:`Purchase Details`}),(0,F.jsxs)(`div`,{className:`flex items-center gap-0 mt-[0.5vw] bg-blue-600 rounded-full p-[0.3vw]`,children:[(0,F.jsx)(`button`,{onClick:()=>p(`Tracking Sheet`),className:`px-[1.5vw] py-[0.8vw] rounded-full text-[.9vw] font-medium transition-all cursor-pointer ${e===`Tracking Sheet`?`bg-white text-[#5279F7]`:`bg-transparent text-white`}`,children:`Tracking Sheet`}),(0,F.jsx)(`button`,{onClick:()=>p(`Label Quantity`),className:`px-[1.5vw] py-[0.8vw] rounded-full text-[.9vw] font-medium transition-all cursor-pointer ${e===`Label Quantity`?`bg-white text-[#5279F7]`:`bg-transparent text-white`}`,children:`Label Quantity`})]})]}),e===`Tracking Sheet`&&(0,F.jsxs)(`div`,{className:`bg-white rounded-[0.8vw] mt-[1.5vw] w-[95%] mx-auto shadow-md`,children:[(0,F.jsx)(`div`,{className:`bg-blue-600 text-white text-[1.25vw] px-[1.5vw] py-[0.9vw] rounded-t-[0.8vw] font-medium`,children:`Purchase Details`}),(0,F.jsxs)(`form`,{className:`grid grid-cols-4 gap-[1.75vw] px-[1.5vw] pt-[1.5vw] text-[1.1vw]`,children:[(0,F.jsxs)(`div`,{children:[(0,F.jsx)(`label`,{className:`block mb-[0.5vw] text-[1vw] font-medium`,children:`Company Name`}),(0,F.jsx)(`input`,{name:`company`,value:n.company,className:`w-full border border-gray-300 rounded-[0.6vw] px-[0.85vw] py-[0.7vw] text-[.9vw] bg-gray-100 cursor-not-allowed`,disabled:!0})]}),(0,F.jsxs)(`div`,{children:[(0,F.jsx)(`label`,{className:`block mb-[0.5vw] text-[1vw] font-medium`,children:`Product Name`}),(0,F.jsxs)(`select`,{name:`product`,value:n.product,onChange:c,className:`w-full border border-gray-300 rounded-[0.6vw] px-[0.85vw] py-[0.7vw] text-[.9vw] focus:outline-none focus:border-[#5279F7] bg-white`,children:[(0,F.jsx)(`option`,{value:``,children:`Select Product`}),Object.keys(jl).map(e=>(0,F.jsx)(`option`,{value:e,children:e},e))]})]}),(0,F.jsxs)(`div`,{children:[(0,F.jsx)(`label`,{className:`block mb-[0.5vw] text-[1vw] font-medium`,children:`Size`}),(0,F.jsxs)(`select`,{name:`size`,value:n.size,onChange:l,className:`w-full border border-gray-300 rounded-[0.6vw] px-[0.85vw] py-[0.7vw] text-[.9vw] focus:outline-none focus:border-[#5279F7] bg-white`,disabled:!n.product,children:[(0,F.jsx)(`option`,{value:``,children:`Select Size`}),n.product&&jl[n.product]?.map(e=>(0,F.jsx)(`option`,{value:e,children:e},e))]})]}),(0,F.jsxs)(`div`,{children:[(0,F.jsx)(`label`,{className:`block mb-[0.5vw] text-[1vw] font-medium`,children:`Qty`}),(0,F.jsx)(`input`,{name:`qty`,value:n.qty,className:`w-full border border-gray-300 rounded-[0.6vw] px-[0.85vw] py-[0.7vw] text-[.9vw] bg-gray-100 cursor-not-allowed`,disabled:!0})]}),n.hasTub&&(0,F.jsxs)(`div`,{children:[(0,F.jsx)(`label`,{className:`block mb-[0.5vw] text-[1vw] font-medium`,children:`Color - Tub`}),(0,F.jsxs)(`div`,{className:`flex items-center gap-[1.2vw]`,children:[(0,F.jsx)(`input`,{name:`colorTub`,value:n.colorTub,className:`border border-gray-300 rounded-[0.6vw] px-[0.85vw] py-[0.7vw] text-[.9vw] flex-1 bg-gray-100 cursor-not-allowed`,disabled:!0}),(0,F.jsx)(`span`,{className:`w-[2.5vw] h-[2.5vw] rounded-full bg-gradient-conic from-red-200 via-green-200 to-blue-200 border-2 border-gray-300`}),(0,F.jsx)(`span`,{className:`w-[3vw] h-[2.5vw] bg-[#90EE90] rounded-[0.4vw] flex items-center justify-center font-bold text-black text-[0.8vw]`,children:`TUB`})]})]}),n.hasLid&&(0,F.jsxs)(`div`,{children:[(0,F.jsx)(`label`,{className:`block mb-[0.5vw] text-[1vw] font-medium`,children:`Color - Lid`}),(0,F.jsxs)(`div`,{className:`flex items-center gap-[1.2vw]`,children:[(0,F.jsx)(`input`,{name:`colorLid`,value:n.colorLid,className:`border border-gray-300 rounded-[0.6vw] px-[0.85vw] py-[0.7vw] text-[.9vw] flex-1 bg-gray-100 cursor-not-allowed`,disabled:!0}),(0,F.jsx)(`span`,{className:`w-[2.5vw] h-[2.5vw] rounded-full bg-gradient-conic from-yellow-200 via-orange-200 to-pink-200 border-2 border-gray-300`}),(0,F.jsx)(`span`,{className:`w-[3vw] h-[2.5vw] bg-[#FFD43B] rounded-[0.4vw] flex items-center justify-center font-bold text-black text-[0.8vw]`,children:`LID`})]})]}),(0,F.jsxs)(`div`,{children:[(0,F.jsx)(`label`,{className:`block mb-[0.5vw] text-[1vw] font-medium`,children:`Label Type`}),(0,F.jsxs)(`select`,{name:`labelType`,value:n.labelType,onChange:u,className:`w-full border border-gray-300 rounded-[0.6vw] px-[0.85vw] py-[0.7vw] text-[.9vw] focus:outline-none focus:border-[#5279F7] bg-white`,children:[(0,F.jsx)(`option`,{value:``,children:`Select Label Type`}),Pl.map(e=>(0,F.jsx)(`option`,{value:e,children:e},e))]})]}),(0,F.jsxs)(`div`,{children:[(0,F.jsx)(`label`,{className:`block mb-[0.5vw] text-[1vw] font-medium`,children:`Supplier Name`}),(0,F.jsxs)(`select`,{name:`supplier`,value:n.supplier,onChange:u,className:`w-full border border-gray-300 rounded-[0.6vw] px-[0.85vw] py-[0.7vw] text-[.9vw] focus:outline-none focus:border-[#5279F7] bg-white`,children:[(0,F.jsx)(`option`,{value:``,children:`Select Supplier`}),Nl.map(e=>(0,F.jsx)(`option`,{value:e,children:e},e))]})]}),(0,F.jsxs)(`div`,{children:[(0,F.jsx)(`label`,{className:`block mb-[0.5vw] text-[1vw] font-medium`,children:`PO Number`}),(0,F.jsx)(`input`,{name:`poNumber`,value:n.poNumber,onChange:u,className:`w-full border border-gray-300 rounded-[0.6vw] px-[0.85vw] py-[0.7vw] text-[.9vw] focus:outline-none focus:border-[#5279F7]`,placeholder:`Enter PO Number`})]}),(0,F.jsxs)(`div`,{children:[(0,F.jsx)(`label`,{className:`block mb-[0.5vw] text-[1vw] font-medium`,children:`Production Dateline`}),(0,F.jsx)(`input`,{name:`prodDate`,type:`date`,value:n.prodDate,onChange:u,className:`w-full border border-gray-300 rounded-[0.6vw] px-[0.85vw] py-[0.7vw] text-[.9vw] focus:outline-none focus:border-[#5279F7]`})]}),(0,F.jsxs)(`div`,{className:`col-span-4`,children:[(0,F.jsx)(`label`,{className:`block mb-[0.5vw] text-[1vw] font-medium`,children:`Add Comments`}),(0,F.jsx)(`textarea`,{name:`comments`,value:n.comments,onChange:u,rows:3,className:`w-full border border-gray-300 rounded-[0.6vw] px-[0.85vw] py-[0.7vw] text-[.9vw] focus:outline-none focus:border-[#5279F7] resize-none`,placeholder:`Type Here ........`})]})]}),(0,F.jsxs)(`div`,{className:`flex justify-end gap-[1vw] px-[2.5vw] py-[2vw]`,children:[(0,F.jsx)(`button`,{className:`px-[1.5vw] py-[0.75vw] rounded-[0.6vw] border-2 border-gray-300 bg-white text-[#5279F7] text-[.9vw] font-medium cursor-pointer hover:bg-gray-50 transition`,children:`Cancel`}),(0,F.jsx)(`button`,{className:`px-[1.5vw] py-[0.75vw] rounded-[0.6vw] bg-blue-600 text-white text-[.9vw] font-medium cursor-pointer hover:bg-[#3d5dd4] transition`,children:`Submit`})]})]}),e===`Label Quantity`&&(0,F.jsxs)(`div`,{className:`mt-[1.5vw] bg-[#F6F7FB] rounded-[0.8vw] w-[95%] mx-auto`,children:[(0,F.jsxs)(`div`,{className:`bg-white rounded-[0.8vw] shadow-md px-[2.5vw] py-[2vw] mb-[2vw]`,children:[(0,F.jsxs)(`div`,{className:`grid grid-cols-4 gap-[1.75vw] text-[1.1vw]`,children:[(0,F.jsxs)(`div`,{children:[(0,F.jsx)(`label`,{className:`block mb-[0.5vw] text-[1vw] font-medium`,children:`Product Name`}),(0,F.jsxs)(`select`,{name:`product`,value:i.product,onChange:d,className:`border border-gray-300 rounded-[0.6vw] px-[0.85vw] py-[0.7vw] text-[.85vw] w-full focus:outline-none focus:border-[#5279F7] bg-white`,children:[(0,F.jsx)(`option`,{value:``,children:`Select Product`}),Object.keys(jl).map(e=>(0,F.jsx)(`option`,{value:e,children:e},e))]})]}),(0,F.jsxs)(`div`,{children:[(0,F.jsx)(`label`,{className:`block mb-[0.5vw] text-[1vw] font-medium`,children:`Product Size`}),(0,F.jsxs)(`select`,{name:`size`,value:i.size,onChange:d,className:`border border-gray-300 rounded-[0.6vw] px-[0.85vw] py-[0.7vw] text-[.85vw] w-full focus:outline-none focus:border-[#5279F7] bg-white`,disabled:!i.product,children:[(0,F.jsx)(`option`,{value:``,children:`Select Size`}),i.product&&jl[i.product]?.map(e=>(0,F.jsx)(`option`,{value:e,children:e},e))]})]}),(0,F.jsxs)(`div`,{children:[(0,F.jsx)(`label`,{className:`block mb-[0.5vw] text-[1vw] font-medium`,children:`Enter Qty`}),(0,F.jsx)(`input`,{name:`qty`,value:i.qty,onChange:d,className:`border border-gray-300 rounded-[0.6vw] px-[0.85vw] py-[0.7vw] text-[.85vw] w-full focus:outline-none focus:border-[#5279F7]`,type:`text`,placeholder:`26,500`})]}),(0,F.jsxs)(`div`,{children:[(0,F.jsx)(`label`,{className:`block mb-[0.5vw] text-[1vw] font-medium`,children:`Add Comments`}),(0,F.jsx)(`input`,{name:`comments`,value:i.comments,onChange:d,className:`w-full border border-gray-300 rounded-[0.6vw] px-[0.85vw] py-[0.7vw] text-[.85vw] focus:outline-none focus:border-[#5279F7]`,placeholder:`Type Here ........`})]})]}),(0,F.jsx)(`div`,{className:`flex justify-end mt-[1.5vw]`,children:(0,F.jsx)(`button`,{onClick:f,className:`px-[1.5vw] py-[0.75vw] rounded-[0.6vw] bg-blue-600 text-white text-[.9vw] font-medium cursor-pointer hover:bg-[#3d5dd4] transition`,children:`Add Entry`})})]}),(0,F.jsxs)(`div`,{className:`bg-white rounded-[0.8vw] shadow-md px-[2.5vw] py-[2vw] mb-[2vw]`,children:[(0,F.jsx)(`h2`,{className:`text-[1.4vw] font-semibold mb-[1.5vw]`,children:`Label Quantity Entries`}),(0,F.jsx)(`div`,{className:`overflow-x-auto`,children:(0,F.jsxs)(`table`,{className:`w-full text-[.9vw]`,children:[(0,F.jsx)(`thead`,{className:`bg-blue-600 text-white`,children:(0,F.jsxs)(`tr`,{children:[(0,F.jsx)(`th`,{className:`px-[1vw] py-[0.8vw] text-left rounded-tl-[0.5vw]`,children:`Date`}),(0,F.jsx)(`th`,{className:`px-[1vw] py-[0.8vw] text-left`,children:`Product Name`}),(0,F.jsx)(`th`,{className:`px-[1vw] py-[0.8vw] text-left`,children:`Size`}),(0,F.jsx)(`th`,{className:`px-[1vw] py-[0.8vw] text-left`,children:`Quantity`}),(0,F.jsx)(`th`,{className:`px-[1vw] py-[0.8vw] text-left rounded-tr-[0.5vw]`,children:`Comments`})]})}),(0,F.jsx)(`tbody`,{children:o.map((e,t)=>(0,F.jsxs)(`tr`,{className:`${t%2==0?`bg-gray-50`:`bg-white`} border-b border-gray-200 hover:bg-blue-50 transition`,children:[(0,F.jsx)(`td`,{className:`px-[1vw] py-[0.9vw]`,children:e.date}),(0,F.jsx)(`td`,{className:`px-[1vw] py-[0.9vw]`,children:e.product}),(0,F.jsx)(`td`,{className:`px-[1vw] py-[0.9vw]`,children:e.size}),(0,F.jsx)(`td`,{className:`px-[1vw] py-[0.9vw]`,children:e.qty}),(0,F.jsx)(`td`,{className:`px-[1vw] py-[0.9vw]`,children:e.comments||`-`})]},e.id))})]})})]})]})]})},Y=`iml_production_entries`,Il=[{id:1,date:`15/12/2025`,company:`Murugan Industries`,product:`Round`,size:`750 ML Round`,noOfLabels:`50,000`,machineNumber:`02`,receivedBy:`Murali`,containerColor:`Blue`},{id:2,date:`14/12/2025`,company:`ABC Corp`,product:`Rectangle`,size:`500ml`,noOfLabels:`30,000`,machineNumber:`01`,receivedBy:`Praveen`,containerColor:`Red`},{id:3,date:`13/12/2025`,company:`Murugan Industries`,product:`Sweet Box`,size:`250gms`,noOfLabels:`25,000`,machineNumber:`03`,receivedBy:`Murali`,containerColor:`Green`}],X=({className:e})=>(0,F.jsx)(`svg`,{xmlns:`http://www.w3.org/2000/svg`,fill:`none`,viewBox:`0 0 24 24`,strokeWidth:2,stroke:`currentColor`,className:e,children:(0,F.jsx)(`path`,{strokeLinecap:`round`,strokeLinejoin:`round`,d:`m19.5 8.25-7.5 7.5-7.5-7.5`})}),Z=({className:e})=>(0,F.jsx)(`svg`,{xmlns:`http://www.w3.org/2000/svg`,fill:`none`,viewBox:`0 0 24 24`,strokeWidth:2,stroke:`currentColor`,className:e,children:(0,F.jsx)(`path`,{strokeLinecap:`round`,strokeLinejoin:`round`,d:`m4.5 15.75 7.5-7.5 7.5 7.5`})}),Q=e=>{let t=localStorage.getItem(`iml_production_followups`),n=(t?JSON.parse(t):{})[e]||[];return n.length===0?{date:null}:{date:n[n.length-1].date||null}},Ll=e=>!e&&e!==0?0:Number(String(e).replace(/,/g,``))||0,Rl=e=>{let t=localStorage.getItem(`iml_production_followups`),n=(t?JSON.parse(t):{})[e.id]||[],r=Ll(e.noOfLabels)-n.reduce((e,t)=>{let n=Ll(t.acceptedComponents),r=Ll(t.rejectedComponents),i=Ll(t.labelWastage);return e+n+r+i},0);return r>0?r:0},zl=()=>{let e=Ge(),[t,n]=(0,_.useState)([]),[r,i]=(0,_.useState)(``),[a,o]=(0,_.useState)(``),[s,c]=(0,_.useState)(``),[l,u]=(0,_.useState)({}),[d,f]=(0,_.useState)({}),[p,m]=(0,_.useState)(``),[h,g]=(0,_.useState)(``),v=()=>{n(Il),localStorage.setItem(Y,JSON.stringify(Il))};(0,_.useEffect)(()=>{let e=localStorage.getItem(Y);if(e){let t=JSON.parse(e);Array.isArray(t)&&t.length>0?n(t):v()}else v()},[]),(0,_.useEffect)(()=>{if(t.length>0){let e={},n={},r={};t.forEach(e=>{let t=e.product||`Uncategorized`;r[t]||(r[t]=new Set),r[t].add(e.size||`No Size`)}),Object.keys(r).forEach(t=>{e[t]=!0;let i=Array.from(r[t]).sort();if(i.length>0){let e=i[0];n[`${t}-${e}`]=!0}}),u(e),f(n)}},[t]);let y=t=>{e(`/iml/production-details`,{state:{entry:t}})},b=(0,_.useMemo)(()=>{let e=new Set;return t.forEach(t=>e.add(t.product)),Array.from(e).sort()},[t]),x=(0,_.useMemo)(()=>{let e=new Set;return t.forEach(t=>{(!a||t.product===a)&&e.add(t.size)}),Array.from(e).sort()},[t,a]),S=(0,_.useMemo)(()=>{let e=r.trim().toLowerCase();return t.filter(t=>{let n=!e||t.company.toLowerCase().includes(e),r=!a||t.product===a,i=!s||t.size===s,o=!0;if(p||h){let e=Q(t.id);if(e.date){let[t,n,r]=e.date.split(`/`),i=new Date(r,n-1,t);if(p){let e=new Date(p);e.setHours(0,0,0,0),o&&=i>=e}if(h){let e=new Date(h);e.setHours(23,59,59,999),o&&=i<=e}}else o=!1}return n&&r&&i&&o})},[t,r,a,s,p,h]),C=(0,_.useMemo)(()=>{let e={};return S.forEach(t=>{let n=t.product||`Uncategorized`,r=t.size||`No Size`;e[n]||(e[n]={}),e[n][r]||(e[n][r]=[]),e[n][r].push(t)}),e},[S]),w=Object.keys(C).length>0,T=e=>{u(t=>({...t,[e]:!t[e]}))},E=(e,t)=>{let n=`${e}-${t}`;f(e=>({...e,[n]:!e[n]}))};return(0,_.useEffect)(()=>{if(r||a||s){let e={},t={};Object.entries(C).forEach(([n,r])=>{e[n]=!0,Object.keys(r).forEach(e=>{let r=`${n}-${e}`;t[r]=!0})}),u(e),f(t)}},[r,a,s,C]),(0,F.jsxs)(`div`,{className:`p-[1vw] font-sans bg-gray-50 min-h-screen`,children:[(0,F.jsx)(`div`,{className:`flex justify-between items-center mb-[0.5vw]`,children:(0,F.jsx)(`h1`,{className:`text-[1.6vw] text-gray-800 font-bold m-0`,children:`Production Management`})}),(0,F.jsx)(`div`,{className:`bg-white px-[1.25vw] py-[1.1vw] rounded-lg shadow-sm border border-gray-200 mb-[1.25vw]`,children:(0,F.jsxs)(`div`,{className:`flex gap-[1vw] items-end`,children:[(0,F.jsxs)(`div`,{className:`flex-1 min-w-[12vw]`,children:[(0,F.jsx)(`label`,{className:`block mb-[0.5vw] text-[0.85vw] font-medium text-gray-700`,children:`Search by Company`}),(0,F.jsx)(`input`,{type:`text`,placeholder:`Enter company name...`,value:r,onChange:e=>i(e.target.value),className:`w-full px-[0.7vw] py-[0.65vw] text-[0.8vw] border border-gray-300 rounded-md outline-none focus:border-indigo-600 transition-colors`})]}),(0,F.jsxs)(`div`,{className:`flex-1 min-w-[10vw]`,children:[(0,F.jsx)(`label`,{className:`block mb-[0.5vw] text-[0.85vw] font-medium text-gray-700`,children:`Filter by Product`}),(0,F.jsxs)(`select`,{value:a,onChange:e=>{o(e.target.value),c(``)},className:`w-full px-[0.7vw] py-[0.65vw] text-[0.8vw] border border-gray-300 rounded-md outline-none bg-white cursor-pointer`,children:[(0,F.jsx)(`option`,{value:``,children:`All Products`}),b.map(e=>(0,F.jsx)(`option`,{value:e,children:e},e))]})]}),(0,F.jsxs)(`div`,{className:`flex-1 min-w-[8vw]`,children:[(0,F.jsx)(`label`,{className:`block mb-[0.5vw] text-[0.85vw] font-medium text-gray-700`,children:`Filter by Size`}),(0,F.jsxs)(`select`,{value:s,onChange:e=>c(e.target.value),className:`w-full px-[0.7vw] py-[0.65vw] text-[0.8vw] border border-gray-300 rounded-md outline-none bg-white cursor-pointer`,children:[(0,F.jsx)(`option`,{value:``,children:`All Sizes`}),x.map(e=>(0,F.jsx)(`option`,{value:e,children:e},e))]})]}),(0,F.jsxs)(`div`,{className:`flex-none w-[10vw]`,children:[(0,F.jsx)(`label`,{className:`block mb-[0.5vw] text-[0.85vw] font-medium text-gray-700`,children:`Start Date`}),(0,F.jsx)(`input`,{type:`date`,value:p,onChange:e=>m(e.target.value),className:`w-full px-[0.7vw] py-[0.65vw] text-[0.8vw] border border-gray-300 rounded-md outline-none focus:border-indigo-600 transition-colors`})]}),(0,F.jsxs)(`div`,{className:`flex-none w-[10vw]`,children:[(0,F.jsx)(`label`,{className:`block mb-[0.5vw] text-[0.85vw] font-medium text-gray-700`,children:`End Date`}),(0,F.jsx)(`input`,{type:`date`,value:h,onChange:e=>g(e.target.value),className:`w-full px-[0.7vw] py-[0.65vw] text-[0.8vw] border border-gray-300 rounded-md outline-none focus:border-indigo-600 transition-colors`})]}),(0,F.jsx)(`div`,{className:`flex-none`,children:(0,F.jsx)(`button`,{onClick:()=>{i(``),o(``),c(``),m(``),g(``)},className:`px-[1.2vw] py-[0.65vw] text-[0.8vw] bg-red-500 text-white rounded-md font-medium hover:bg-red-600 transition-colors cursor-pointer whitespace-nowrap`,children:`Clear Filters`})})]})}),w?(0,F.jsx)(`div`,{className:`max-h-[57vh] overflow-y-auto`,children:Object.keys(C).sort().map(e=>{let t=C[e],n=l[e];return(0,F.jsxs)(`div`,{className:`mb-[1.5vw] rounded-lg overflow-hidden bg-white shadow-sm border border-gray-300`,children:[(0,F.jsxs)(`div`,{onClick:()=>T(e),className:`px-[1vw] py-[0.5vw] bg-[#3d64bb] text-white text-[1.15vw] font-semibold cursor-pointer flex justify-between items-center transition-colors`,children:[(0,F.jsxs)(`div`,{className:`flex items-center gap-[0.1vw] text-[1vw]`,children:[(0,F.jsx)(`div`,{className:`w-[2.6vw] h-[2.6vw] bg-[#3d64bb] rounded-[0.5vw] flex items-center justify-center`,children:(0,F.jsx)(`svg`,{className:`w-[1.5vw] h-[1.5vw] text-white`,fill:`none`,stroke:`currentColor`,viewBox:`0 0 24 24`,children:(0,F.jsx)(`path`,{strokeLinecap:`round`,strokeLinejoin:`round`,strokeWidth:`2`,d:`M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4`})})}),(0,F.jsx)(`span`,{children:e}),(0,F.jsxs)(`span`,{className:`bg-white/20 px-[0.8vw] py-[0.3vw] rounded text-[0.85vw] font-medium ml-[.5vw]`,children:[Object.keys(t).length,` Size`,Object.keys(t).length>1?`s`:``]})]}),n?(0,F.jsx)(Z,{className:`w-[1.3vw] h-[1.3vw]`}):(0,F.jsx)(X,{className:`w-[1.3vw] h-[1.3vw]`})]}),n&&(0,F.jsx)(`div`,{className:`p-[0.5vw]`,children:Object.keys(t).sort().map(n=>{let r=t[n],i=`${e}-${n}`,a=d[i];return(0,F.jsxs)(`div`,{className:`mb-[0.8vw] mx-[.5vw] my-[.25vw] border border-gray-200 rounded-lg overflow-hidden bg-gray-50`,children:[(0,F.jsxs)(`div`,{onClick:()=>E(e,n),className:`px-[1vw] py-[0.8vw] bg-gray-200 text-gray-900 font-medium cursor-pointer flex justify-between items-center border border-gray-300 hover:bg-gray-200 transition-colors`,children:[(0,F.jsxs)(`div`,{className:`flex items-center gap-[0.6vw] text-[0.95vw]`,children:[(0,F.jsx)(`div`,{className:`w-[2.2vw] h-[2.2vw] bg-[#333333] rounded-[0.45vw] flex items-center justify-center`,children:(0,F.jsx)(`svg`,{className:`w-[1vw] h-[1vw] text-white`,fill:`none`,stroke:`currentColor`,viewBox:`0 0 24 24`,children:(0,F.jsx)(`path`,{strokeLinecap:`round`,strokeLinejoin:`round`,strokeWidth:`2`,d:`M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z`})})}),(0,F.jsx)(`span`,{children:n}),(0,F.jsxs)(`span`,{className:`bg-white text-gray-900 px-[0.7vw] py-[0.25vw] rounded text-[0.8vw] font-medium`,children:[r.length,` Entry`,r.length>1?`ies`:``]})]}),a?(0,F.jsx)(Z,{className:`w-[1.1vw] h-[1.1vw] text-gray-600`}):(0,F.jsx)(X,{className:`w-[1.1vw] h-[1.1vw] text-gray-600`})]}),a&&(0,F.jsx)(`div`,{className:`p-0`,children:(0,F.jsxs)(`table`,{className:`w-full border-collapse text-[0.85vw]`,children:[(0,F.jsx)(`thead`,{children:(0,F.jsxs)(`tr`,{className:`bg-gray-100`,children:[(0,F.jsx)(`th`,{className:`px-[0.9vw] py-[0.75vw] text-left border-b border-gray-200 text-gray-700 font-semibold text-[0.85vw]`,children:`S. No.`}),(0,F.jsx)(`th`,{className:`px-[0.9vw] py-[0.75vw] text-left border-b border-gray-200 text-gray-700 font-semibold text-[0.85vw]`,children:`Last Update Date`}),(0,F.jsx)(`th`,{className:`px-[0.9vw] py-[0.75vw] text-left border-b border-gray-200 text-gray-700 font-semibold text-[0.85vw]`,children:`Company Name`}),(0,F.jsx)(`th`,{className:`px-[0.9vw] py-[0.75vw] text-left border-b border-gray-200 text-gray-700 font-semibold text-[0.85vw]`,children:`No. of Labels`}),(0,F.jsx)(`th`,{className:`px-[0.9vw] py-[0.75vw] text-left border-b border-gray-200 text-gray-700 font-semibold text-[0.85vw]`,children:`Remaining Labels`}),(0,F.jsx)(`th`,{className:`px-[0.9vw] py-[0.75vw] text-center border-b border-gray-200 text-gray-700 font-semibold text-[0.85vw]`,children:`Actions`})]})}),(0,F.jsx)(`tbody`,{children:r.map((e,t)=>{let n=Q(e.id).date||`-`,r=Rl(e);return(0,F.jsxs)(`tr`,{className:`bg-white`,children:[(0,F.jsx)(`td`,{className:`px-[0.9vw] py-[0.75vw] whitespace-nowrap text-[.85vw] text-gray-900`,children:t+1}),(0,F.jsx)(`td`,{className:`px-[0.9vw] py-[0.75vw] whitespace-nowrap text-[.85vw] text-gray-900`,children:n}),(0,F.jsx)(`td`,{className:`px-[0.9vw] py-[0.75vw] text-[.85vw] border-b border-gray-100 text-gray-900`,children:e.company}),(0,F.jsx)(`td`,{className:`px-[0.9vw] py-[0.75vw] text-[.85vw] border-b border-gray-100 text-gray-900`,children:e.noOfLabels}),(0,F.jsx)(`td`,{className:`px-[0.9vw] py-[0.75vw] text-[.85vw] border-b border-gray-100 text-gray-900`,children:r.toLocaleString(`en-IN`)}),(0,F.jsx)(`td`,{className:`px-[0.9vw] py-[0.75vw] whitespace-nowrap text-sm`,children:(0,F.jsx)(`button`,{onClick:()=>y(e),className:`px-[1.2vw] py-[0.45vw] text-[0.8vw] border border-blue-600 text-blue-600 rounded-full font-bold hover:bg-blue-600 hover:text-white transition-colors cursor-pointer block mx-auto`,children:`View`})})]},e.id)})})]})})]},i)})})]},e)})}):(0,F.jsx)(`div`,{className:`bg-white p-[3vw] rounded-lg shadow-sm text-center`,children:(0,F.jsx)(`p`,{className:`text-[1.1vw] text-gray-500 m-0`,children:r||a||s?`No entries found matching your filters.`:`Create production entries to see them listed here.`})})]})},Bl=`iml_production_followups`,Vl=[`01`,`02`,`03`,`04`,`05`],Hl=[`Murali`,`Praveen`,`Kumar`,`Ravi`],Ul=[`Murugan`,`Praveen`,`Ravi`,`Kumar`],Wl=[`Murugan`,`Praveen`,`Ravi`,`Kumar`],Gl=e=>!e&&e!==0?0:Number(String(e).replace(/,/g,``))||0,Kl=e=>Gl(e).toLocaleString(`en-IN`),ql=()=>{let e=He(),t=Ge(),{entry:n}=e.state||{},[r,i]=(0,_.useState)({customerName:``,product:``,size:``,containerColor:``,machineNumber:``,noOfLabels:``,receivedBy:``}),[a,o]=(0,_.useState)({date:new Date().toISOString().split(`T`)[0],shift:`Day`,packingIncharge:``,acceptedComponents:``,rejectedComponents:``,labelWastage:`0`,approvedBy:``}),[s,c]=(0,_.useState)([]),[l,u]=(0,_.useState)(0),[d,f]=(0,_.useState)(!1);(0,_.useEffect)(()=>{if(n){let e=n.id,t=localStorage.getItem(Bl),r=(t?JSON.parse(t):{})[e]||[];r.map(e=>({...e,submitted:e.submitted??!0})),c(r),i({customerName:n.company||``,size:n.size||``,product:n.product||``,containerColor:n.containerColor||``,machineNumber:n.machineNumber||``,noOfLabels:n.noOfLabels||``,receivedBy:n.receivedBy||``});let a=localStorage.getItem(`iml_production_entries`);if(a){let t=JSON.parse(a).find(t=>t.id===e);t&&t.isSubmitted===!0?f(!0):f(!1)}else f(!1);let o=Gl(n.noOfLabels),s=r.reduce((e,t)=>{let n=Gl(t.acceptedComponents),r=Gl(t.rejectedComponents),i=Gl(t.labelWastage);return e+n+r+i},0);u(Math.max(o-s,0))}},[n]);let p=e=>{let{name:t,value:n}=e.target;i(e=>({...e,[t]:n}))},m=e=>{let{name:t,value:n}=e.target;o(e=>({...e,[t]:n}))},h=e=>{o(t=>({...t,shift:e}))},g=()=>{if(!a.acceptedComponents||!a.rejectedComponents||!a.packingIncharge||!a.approvedBy){alert(`Please fill all required fields`);return}let e={date:new Date().toLocaleDateString(`en-GB`),shift:a.shift,acceptedComponents:a.acceptedComponents,rejectedComponents:a.rejectedComponents,labelWastage:a.labelWastage||`0`,packingIncharge:a.packingIncharge,approvedBy:a.approvedBy,submitted:!1},t=[...s,e];c(t);let i=n.id,l=localStorage.getItem(Bl),d=l?JSON.parse(l):{};d[i]=t,localStorage.setItem(Bl,JSON.stringify(d));let f=Gl(r.noOfLabels||n.noOfLabels),p=t.reduce((e,t)=>{let n=Gl(t.acceptedComponents),r=Gl(t.rejectedComponents),i=Gl(t.labelWastage);return e+n+r+i},0),m=Math.max(f-p,0);u(m);let h=localStorage.getItem(`iml_production_entries`),g=(h?JSON.parse(h):[]).map(e=>e.id===i?{...e,remainingLabels:m}:e);localStorage.setItem(`iml_production_entries`,JSON.stringify(g)),o({date:new Date().toISOString().split(`T`)[0],shift:`Day`,packingIncharge:``,acceptedComponents:``,rejectedComponents:``,labelWastage:`0`,approvedBy:``})},v=()=>{t(`/iml/productionManagement`)},y=()=>{alert(`Production details submitted successfully!`);let e=n.id,t=s.map(e=>({...e,submitted:!0}));c(t);let r=localStorage.getItem(Bl),i=r?JSON.parse(r):{};i[e]=t,localStorage.setItem(Bl,JSON.stringify(i));let a=localStorage.getItem(`iml_production_entries`),o=(a?JSON.parse(a):[]).map(t=>t.id===e?{...t,isSubmitted:!0}:t);localStorage.setItem(`iml_production_entries`,JSON.stringify(o)),f(!0),v()},b=e=>{if(!window.confirm(`Are you sure you want to delete this entry?`))return;let t=n.id,i=s.filter((t,n)=>n!==e);c(i);let a=localStorage.getItem(Bl),o=a?JSON.parse(a):{};o[t]=i,localStorage.setItem(Bl,JSON.stringify(o));let l=Gl(r.noOfLabels||n.noOfLabels),d=i.reduce((e,t)=>{let n=Gl(t.acceptedComponents),r=Gl(t.rejectedComponents),i=Gl(t.labelWastage);return e+n+r+i},0),f=Math.max(l-d,0);u(f);let p=localStorage.getItem(`iml_production_entries`);if(p){let e=JSON.parse(p).map(e=>e.id===t?{...e,remainingLabels:f}:e);localStorage.setItem(`iml_production_entries`,JSON.stringify(e))}};return(0,F.jsxs)(`div`,{className:`p-[1vw] font-sans bg-gray-50 min-h-screen`,children:[(0,F.jsxs)(`div`,{className:`flex justify-between items-center mb-[.5vw]`,children:[(0,F.jsx)(`h1`,{className:`text-[1.6vw] text-gray-800 font-bold m-0`,children:`Production Details`}),(0,F.jsx)(`button`,{onClick:v,className:`px-[1vw] py-[0.45vw] text-[0.8vw] bg-gray-500 text-white rounded-md font-medium hover:bg-gray-600 transition-colors cursor-pointer`,children:` Back`})]}),(0,F.jsxs)(`div`,{className:`bg-white rounded-lg shadow-sm border border-gray-200 mb-[1.5vw]`,children:[(0,F.jsx)(`div`,{className:`bg-blue-600 text-white px-[.95vw] py-[0.85vw] text-[1vw] font-semibold rounded-t-lg`,children:`Customer Details`}),(0,F.jsx)(`div`,{className:`p-[1vw]`,children:(0,F.jsxs)(`div`,{className:`grid grid-cols-4 gap-[1vw]`,children:[(0,F.jsxs)(`div`,{children:[(0,F.jsx)(`label`,{className:`block mb-[0.5vw] text-[0.8vw] font-medium text-gray-700`,children:`Customer Name`}),(0,F.jsx)(`input`,{type:`text`,name:`customerName`,value:r.customerName,onChange:p,className:`w-full px-[0.75vw] py-[0.45vw] text-[0.8vw] border border-gray-300 rounded-md outline-none focus:border-indigo-600 bg-gray-50`,readOnly:!0})]}),(0,F.jsxs)(`div`,{children:[(0,F.jsx)(`label`,{className:`block mb-[0.5vw] text-[0.8vw] font-medium text-gray-700`,children:`Product`}),(0,F.jsx)(`input`,{type:`text`,name:`product`,value:r.product,onChange:p,className:`w-full px-[0.75vw] py-[0.45vw] text-[0.8vw] border border-gray-300 rounded-md outline-none focus:border-indigo-600 bg-gray-50`,readOnly:!0})]}),(0,F.jsxs)(`div`,{children:[(0,F.jsx)(`label`,{className:`block mb-[0.5vw] text-[0.8vw] font-medium text-gray-700`,children:`Size`}),(0,F.jsx)(`input`,{type:`text`,name:`size`,value:r.size,onChange:p,className:`w-full px-[0.75vw] py-[0.45vw] text-[0.8vw] border border-gray-300 rounded-md outline-none focus:border-indigo-600 bg-gray-50`,readOnly:!0})]}),(0,F.jsxs)(`div`,{children:[(0,F.jsx)(`label`,{className:`block mb-[0.5vw] text-[0.8vw] font-medium text-gray-700`,children:`Container Color`}),(0,F.jsx)(`input`,{type:`text`,name:`containerColor`,value:r.containerColor,onChange:p,className:`w-full px-[0.75vw] py-[0.45vw] text-[0.8vw] border border-gray-300 rounded-md outline-none focus:border-indigo-600`})]}),(0,F.jsxs)(`div`,{children:[(0,F.jsx)(`label`,{className:`block mb-[0.5vw] text-[0.8vw] font-medium text-gray-700`,children:`Machine Number`}),(0,F.jsxs)(`select`,{name:`machineNumber`,value:r.machineNumber,onChange:p,className:`w-full px-[0.75vw] py-[0.45vw] text-[0.8vw] border border-gray-300 rounded-md outline-none focus:border-indigo-600 bg-white cursor-pointer`,children:[(0,F.jsx)(`option`,{value:``,children:`Select Machine`}),Vl.map(e=>(0,F.jsx)(`option`,{value:e,children:e},e))]})]}),(0,F.jsxs)(`div`,{children:[(0,F.jsx)(`label`,{className:`block mb-[0.5vw] text-[0.8vw] font-medium text-gray-700`,children:`No. Of Labels`}),(0,F.jsx)(`input`,{type:`text`,name:`noOfLabels`,value:r.noOfLabels,onChange:p,className:`w-full px-[0.75vw] py-[0.45vw] text-[0.8vw] border border-gray-300 rounded-md outline-none focus:border-indigo-600 bg-gray-50`,readOnly:!0})]}),(0,F.jsxs)(`div`,{children:[(0,F.jsx)(`label`,{className:`block mb-[0.5vw] text-[0.8vw] font-medium text-gray-700`,children:`Remaining Labels`}),(0,F.jsx)(`input`,{type:`text`,value:Kl(l),readOnly:!0,className:`w-full px-[0.75vw] py-[0.45vw] text-[0.8vw] border border-gray-300 rounded-md outline-none bg-gray-50`})]}),(0,F.jsxs)(`div`,{children:[(0,F.jsx)(`label`,{className:`block mb-[0.5vw] text-[0.8vw] font-medium text-gray-700`,children:`Received By`}),(0,F.jsxs)(`select`,{name:`receivedBy`,value:r.receivedBy,onChange:p,className:`w-full px-[0.75vw] py-[0.45vw] text-[0.8vw] border border-gray-300 rounded-md outline-none focus:border-indigo-600 bg-white cursor-pointer`,children:[(0,F.jsx)(`option`,{value:``,children:`Select Person`}),Hl.map(e=>(0,F.jsx)(`option`,{value:e,children:e},e))]})]})]})})]}),(0,F.jsxs)(`div`,{className:`overflow-y-auto max-h-[35vh] `,children:[(0,F.jsxs)(`div`,{className:`bg-white rounded-lg shadow-sm border border-gray-200 mb-[.75vw]`,children:[(0,F.jsx)(`div`,{className:`bg-blue-600 text-white px-[.95vw] py-[0.85vw] text-[1vw] font-semibold rounded-tl-lg rounded-tr-lg`,children:`Add Entry`}),(0,F.jsxs)(`div`,{className:`p-[1vw]`,children:[(0,F.jsxs)(`div`,{className:`grid grid-cols-4 gap-[1.5vw]`,children:[(0,F.jsxs)(`div`,{children:[(0,F.jsx)(`label`,{className:`block mb-[0.5vw] text-[0.8vw] font-medium text-gray-700`,children:`Shift`}),(0,F.jsxs)(`div`,{className:`flex gap-[2vw] mt-[0.7vw]`,children:[(0,F.jsxs)(`label`,{className:`flex items-center gap-[0.5vw] cursor-pointer`,children:[(0,F.jsx)(`input`,{type:`radio`,name:`shift`,value:`Day`,checked:a.shift===`Day`,onChange:()=>h(`Day`),className:`w-[1vw] h-[1vw] cursor-pointer`}),(0,F.jsx)(`span`,{className:`text-[0.8vw] text-gray-700`,children:`Day`})]}),(0,F.jsxs)(`label`,{className:`flex items-center gap-[0.5vw] cursor-pointer`,children:[(0,F.jsx)(`input`,{type:`radio`,name:`shift`,value:`Night`,checked:a.shift===`Night`,onChange:()=>h(`Night`),className:`w-[1vw] h-[1vw] cursor-pointer`}),(0,F.jsx)(`span`,{className:`text-[0.8vw] text-gray-700`,children:`Night`})]})]})]}),(0,F.jsxs)(`div`,{children:[(0,F.jsx)(`label`,{className:`block mb-[0.5vw] text-[0.8vw] font-medium text-gray-700`,children:`Accepted Components`}),(0,F.jsx)(`input`,{type:`number`,name:`acceptedComponents`,value:a.acceptedComponents,onChange:m,className:`w-full px-[0.75vw] py-[0.45vw] text-[0.8vw] border border-gray-300 rounded-md outline-none focus:border-indigo-600`,placeholder:`Enter accepted components`})]}),(0,F.jsxs)(`div`,{children:[(0,F.jsx)(`label`,{className:`block mb-[0.5vw] text-[0.8vw] font-medium text-gray-700`,children:`Rejected Components`}),(0,F.jsx)(`input`,{type:`number`,name:`rejectedComponents`,value:a.rejectedComponents,onChange:m,className:`w-full px-[0.75vw] py-[0.45vw] text-[0.8vw] border border-gray-300 rounded-md outline-none focus:border-indigo-600`,placeholder:`Enter rejected components`})]}),(0,F.jsxs)(`div`,{children:[(0,F.jsx)(`label`,{className:`block mb-[0.5vw] text-[0.8vw] font-medium text-gray-700`,children:`Label Wastage`}),(0,F.jsx)(`input`,{type:`number`,name:`labelWastage`,value:a.labelWastage,onChange:m,className:`w-full px-[0.75vw] py-[0.45vw] text-[0.8vw] border border-gray-300 rounded-md outline-none focus:border-indigo-600`,placeholder:`Enter label wastage`})]}),(0,F.jsxs)(`div`,{children:[(0,F.jsx)(`label`,{className:`block mb-[0.5vw] text-[0.8vw] font-medium text-gray-700`,children:`Packing Incharge`}),(0,F.jsxs)(`select`,{name:`packingIncharge`,value:a.packingIncharge,onChange:m,className:`w-full px-[0.75vw] py-[0.45vw] text-[0.8vw] border border-gray-300 rounded-md outline-none focus:border-indigo-600 bg-white cursor-pointer`,children:[(0,F.jsx)(`option`,{value:``,children:`Select Incharge`}),Ul.map(e=>(0,F.jsx)(`option`,{value:e,children:e},e))]})]}),(0,F.jsxs)(`div`,{children:[(0,F.jsx)(`label`,{className:`block mb-[0.5vw] text-[0.8vw] font-medium text-gray-700`,children:`Approved By`}),(0,F.jsxs)(`select`,{name:`approvedBy`,value:a.approvedBy,onChange:m,className:`w-full px-[0.75vw] py-[0.45vw] text-[0.8vw] border border-gray-300 rounded-md outline-none focus:border-indigo-600 bg-white cursor-pointer`,children:[(0,F.jsx)(`option`,{value:``,children:`Select Approver`}),Wl.map(e=>(0,F.jsx)(`option`,{value:e,children:e},e))]})]})]}),(0,F.jsx)(`div`,{className:`flex justify-end gap-[1vw] mt-[.25vw]`,children:(0,F.jsxs)(`button`,{onClick:g,className:`px-[.9vw] py-[0.5vw] text-[0.8vw] bg-blue-700 text-white rounded-md font-medium hover:bg-[#4a6dd5] transition-colors cursor-pointer flex items-center gap-[0.5vw] cursor-pointer`,children:[(0,F.jsx)(`span`,{className:`text-[.9vw]`,children:`+`}),`Add`]})})]})]}),(0,F.jsx)(`div`,{className:`bg-white rounded-lg shadow-sm border border-gray-200 mb-[1.15vw]`,children:(0,F.jsx)(`div`,{className:`overflow-x-auto rounded-tl-lg rounded-tr-lg`,children:(0,F.jsxs)(`table`,{className:`w-full border-collapse`,children:[(0,F.jsx)(`thead`,{children:(0,F.jsxs)(`tr`,{className:`bg-gray-300 text-gray-900 `,children:[(0,F.jsx)(`th`,{className:`px-[1vw] py-[0.8vw] text-left text-[0.8vw] font-semibold border-r border-gray-400 w-[5vw]`,children:`S.no`}),(0,F.jsx)(`th`,{className:`px-[1vw] py-[0.8vw] text-left text-[0.8vw] font-semibold border-r border-gray-400`,children:`Date`}),(0,F.jsx)(`th`,{className:`px-[1vw] py-[0.8vw] text-left text-[0.8vw] font-semibold border-r border-gray-400`,children:`Shift Day / Night`}),(0,F.jsx)(`th`,{className:`px-[1vw] py-[0.8vw] text-left text-[0.8vw] font-semibold border-r border-gray-400`,children:`Accepted Components`}),(0,F.jsx)(`th`,{className:`px-[1vw] py-[0.8vw] text-left text-[0.8vw] font-semibold border-r border-gray-400`,children:`Rejected Components`}),(0,F.jsx)(`th`,{className:`px-[1vw] py-[0.8vw] text-left text-[0.8vw] font-semibold border-r border-gray-400`,children:`Labels Wastages`}),(0,F.jsx)(`th`,{className:`px-[1vw] py-[0.8vw] text-left text-[0.8vw] font-semibold border-r border-gray-400`,children:`Packing In charge`}),(0,F.jsx)(`th`,{className:`px-[1vw] py-[0.8vw] text-left text-[0.8vw] font-semibold border-r border-gray-400`,children:`Approved By`}),(0,F.jsx)(`th`,{className:`px-[1vw] py-[0.8vw] text-center text-[0.8vw] font-semibold`,children:`Action`})]})}),(0,F.jsx)(`tbody`,{children:s.length===0?(0,F.jsx)(`tr`,{children:(0,F.jsx)(`td`,{colSpan:`8`,className:`px-[1vw] py-[2vw] text-center text-[0.8vw] text-gray-500`,children:`No entries added yet. Add your first entry above.`})}):[...s].reverse().map((e,t)=>{let n=s.length-1-t;return(0,F.jsxs)(`tr`,{className:`border-b border-gray-200 hover:bg-gray-50`,children:[(0,F.jsx)(`td`,{className:`px-[1vw] py-[0.8vw] text-[0.8vw] text-gray-900 border-r border-gray-400 w-[5vw]`,children:t+1}),(0,F.jsx)(`td`,{className:`px-[1vw] py-[0.8vw] text-[0.8vw] text-gray-900 border-r border-gray-400`,children:e.date}),(0,F.jsx)(`td`,{className:`px-[1vw] py-[0.8vw] text-[0.8vw] text-gray-900 border-r border-gray-400`,children:e.shift}),(0,F.jsx)(`td`,{className:`px-[1vw] py-[0.8vw] text-[0.8vw] text-gray-900 border-r border-gray-400`,children:e.acceptedComponents}),(0,F.jsx)(`td`,{className:`px-[1vw] py-[0.8vw] text-[0.8vw] text-gray-900 border-r border-gray-400`,children:e.rejectedComponents}),(0,F.jsx)(`td`,{className:`px-[1vw] py-[0.8vw] text-[0.8vw] text-gray-900 border-r border-gray-400`,children:e.labelWastage||`-`}),(0,F.jsx)(`td`,{className:`px-[1vw] py-[0.8vw] text-[0.8vw] text-gray-900 border-r border-gray-400`,children:e.packingIncharge}),(0,F.jsx)(`td`,{className:`px-[1vw] py-[0.8vw] text-[0.8vw] text-gray-900 border-r border-gray-400`,children:e.approvedBy}),(0,F.jsx)(`td`,{className:`px-[1vw] py-[0.8vw] text-[0.8vw] text-gray-900 flex justify-center items-center`,children:e.submitted?(0,F.jsx)(`span`,{className:`text-[0.9vw] text-green-600`,children:``}):(0,F.jsx)(`button`,{onClick:()=>b(n),className:`px-[0.7vw] py-[0.25vw] text-[0.75vw] bg-red-500 text-white rounded-md font-medium hover:bg-red-600 transition-colors cursor-pointer`,children:`Delete`})})]},t)})})]})})})]}),(0,F.jsx)(`div`,{className:`flex justify-end`,children:(0,F.jsx)(`button`,{onClick:y,className:`mt-[.5vw] px-[1vw] py-[0.6vw] text-[1vw] bg-green-600 text-white rounded-md font-semibold hover:bg-green-700 transition-colors cursor-pointer`,children:`Submit`})})]})},Jl=`iml_inventory_entries`,Yl=[{id:1,date:`15/12/2025`,company:`Terra Tech Packs`,product:`Round`,size:`250ml`,qty:`26,500`,comments:`Ready for dispatch`},{id:2,date:`15/12/2025`,company:`ABC Industries`,product:`Rectangle`,size:`500ml`,qty:`15,000`,comments:`Hold for QC`},{id:3,date:`14/12/2025`,company:`Terra Tech Packs`,product:`Sweet Box`,size:`250gms`,qty:`10,000`,comments:`Festival stock`}],Xl=({className:e=``})=>(0,F.jsx)(`svg`,{className:e,xmlns:`http://www.w3.org/2000/svg`,fill:`none`,viewBox:`0 0 24 24`,strokeWidth:`2`,stroke:`currentColor`,children:(0,F.jsx)(`path`,{strokeLinecap:`round`,strokeLinejoin:`round`,d:`m19.5 8.25-7.5 7.5-7.5-7.5`})}),Zl=({className:e=``})=>(0,F.jsx)(`svg`,{className:e,xmlns:`http://www.w3.org/2000/svg`,fill:`none`,viewBox:`0 0 24 24`,strokeWidth:`2`,stroke:`currentColor`,children:(0,F.jsx)(`path`,{strokeLinecap:`round`,strokeLinejoin:`round`,d:`m4.5 15.75 7.5-7.5 7.5 7.5`})}),Ql=()=>{let e=Ge(),[t,n]=(0,_.useState)([]),[r,i]=(0,_.useState)(``),[a,o]=(0,_.useState)(``),[s,c]=(0,_.useState)(``),[l,u]=(0,_.useState)({}),[d,f]=(0,_.useState)({});(0,_.useEffect)(()=>{let e=localStorage.getItem(Jl);if(e)try{let t=JSON.parse(e);if(Array.isArray(t)&&t.length>0){n(t);return}}catch{}n(Yl),localStorage.setItem(Jl,JSON.stringify(Yl))},[]),(0,_.useEffect)(()=>{if(t.length===0)return;let e={},n={},r={};t.forEach(e=>{let t=e.product||`Uncategorized`;r[t]||(r[t]=new Set),r[t].add(e.size||`No Size`)}),Object.keys(r).forEach(t=>{e[t]=!0;let i=Array.from(r[t]).sort();if(i.length>0){let e=i[0];n[`${t}-${e}`]=!0}}),u(e),f(n)},[t]),(0,_.useEffect)(()=>{t.length!==0&&localStorage.setItem(Jl,JSON.stringify(t))},[t]);let p=t=>{e(`/iml/inventory-details`,{state:{entry:t}})},m=(0,_.useMemo)(()=>{let e=new Set;return t.forEach(t=>e.add(t.product||`Uncategorized`)),Array.from(e).sort()},[t]),h=(0,_.useMemo)(()=>{let e=new Set;return t.forEach(t=>{(!a||t.product===a)&&e.add(t.size||`No Size`)}),Array.from(e).sort()},[t,a]),g=(0,_.useMemo)(()=>{let e=r.trim().toLowerCase();return t.filter(t=>{let n=!e||(t.company||``).toLowerCase().includes(e),r=!a||t.product===a,i=!s||t.size===s;return n&&r&&i})},[t,r,a,s]),v=(0,_.useMemo)(()=>{let e={};return g.forEach(t=>{let n=t.product||`Uncategorized`,r=t.size||`No Size`;e[n]||(e[n]={}),e[n][r]||(e[n][r]=[]),e[n][r].push(t)}),e},[g]),y=Object.keys(v).length>0,b=e=>{u(t=>({...t,[e]:!t[e]}))},x=(e,t)=>{let n=`${e}-${t}`;f(e=>({...e,[n]:!e[n]}))};return(0,F.jsxs)(`div`,{className:`p-[1vw] font-sans bg-gray-50 min-h-screen`,children:[(0,F.jsxs)(`div`,{className:`flex justify-between items-center mb-[1vw]`,children:[(0,F.jsx)(`h1`,{className:`text-[1.75vw] text-gray-800 font-semibold m-0`,children:`Inventory Management`}),(0,F.jsx)(`span`,{className:`text-[1.1vw] text-gray-600`,children:`Final quantity for Billing & Dispatch`})]}),(0,F.jsxs)(`div`,{className:`flex gap-[1.2vw] mb-[1.25vw] flex-wrap bg-white px-[1vw] py-[1vw] rounded-lg shadow-sm border border-gray-200`,children:[(0,F.jsxs)(`div`,{className:`flex-1 min-w-[15vw]`,children:[(0,F.jsx)(`label`,{className:`block mb-[0.5vw] text-[0.85vw] font-medium text-gray-700`,children:`Search by Company`}),(0,F.jsx)(`input`,{type:`text`,placeholder:`Enter company name...`,value:r,onChange:e=>i(e.target.value),className:`w-full px-[0.7vw] py-[0.7vw] text-[0.9vw] border border-gray-300 rounded-md outline-none focus:border-indigo-600 transition-colors`})]}),(0,F.jsxs)(`div`,{className:`flex-1 min-w-[12vw]`,children:[(0,F.jsx)(`label`,{className:`block mb-[0.5vw] text-[0.85vw] font-medium text-gray-700`,children:`Filter by Product`}),(0,F.jsxs)(`select`,{value:a,onChange:e=>{o(e.target.value),c(``)},className:`w-full px-[0.7vw] py-[0.7vw] text-[0.9vw] border border-gray-300 rounded-md outline-none bg-white cursor-pointer`,children:[(0,F.jsx)(`option`,{value:``,children:`All Products`}),m.map(e=>(0,F.jsx)(`option`,{value:e,children:e},e))]})]}),(0,F.jsxs)(`div`,{className:`flex-1 min-w-[12vw]`,children:[(0,F.jsx)(`label`,{className:`block mb-[0.5vw] text-[0.85vw] font-medium text-gray-700`,children:`Filter by Size`}),(0,F.jsxs)(`select`,{value:s,onChange:e=>c(e.target.value),className:`w-full px-[0.7vw] py-[0.7vw] text-[0.9vw] border border-gray-300 rounded-md outline-none bg-white cursor-pointer`,children:[(0,F.jsx)(`option`,{value:``,children:`All Sizes`}),h.map(e=>(0,F.jsx)(`option`,{value:e,children:e},e))]})]}),(0,F.jsx)(`div`,{className:`flex-none self-end`,children:(0,F.jsx)(`button`,{onClick:()=>{i(``),o(``),c(``)},className:`px-[1.5vw] py-[0.7vw] text-[0.9vw] bg-red-500 text-white rounded-md font-medium hover:bg-red-600 transition-colors cursor-pointer`,children:`Clear Filters`})})]}),y?(0,F.jsx)(`div`,{className:`max-h-[50vh] overflow-y-auto`,children:Object.keys(v).sort().map(e=>{let t=v[e],n=l[e];return(0,F.jsxs)(`div`,{className:`mb-[1.5vw] rounded-lg overflow-hidden bg-white shadow-sm border border-gray-300`,children:[(0,F.jsxs)(`div`,{onClick:()=>b(e),className:`px-[1vw] py-[0.5vw] bg-[#3d64bb] text-white text-[1.15vw] font-semibold cursor-pointer flex justify-between items-center transition-colors`,children:[(0,F.jsxs)(`div`,{className:`flex items-center gap-[0.3vw]`,children:[(0,F.jsx)(`div`,{className:`w-[2.6vw] h-[2.6vw] flex items-center justify-center`,children:(0,F.jsx)(`svg`,{className:`w-[1.5vw] h-[1.5vw] text-white`,xmlns:`http://www.w3.org/2000/svg`,viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,strokeWidth:`2`,strokeLinecap:`round`,strokeLinejoin:`round`,children:(0,F.jsx)(`path`,{d:`M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4`})})}),(0,F.jsx)(`span`,{className:`text-[0.9vw]`,children:e}),(0,F.jsxs)(`span`,{className:`bg-white/20 px-[0.8vw] py-[0.2vw] rounded text-[0.85vw] font-medium ml-[0.15vw]`,children:[Object.keys(t).length,` Size`,Object.keys(t).length>1?`s`:``]})]}),n?(0,F.jsx)(Zl,{className:`w-[1.3vw] h-[1.3vw]`}):(0,F.jsx)(Xl,{className:`w-[1.3vw] h-[1.3vw]`})]}),n&&(0,F.jsx)(`div`,{className:`p-[0.5vw]`,children:Object.keys(t).sort().map(n=>{let r=t[n],i=`${e}-${n}`,a=d[i];return(0,F.jsxs)(`div`,{className:`mb-[0.8vw] mx-[0.75vw] my-[0.25vw] border border-gray-200 rounded-lg overflow-hidden bg-gray-50`,children:[(0,F.jsxs)(`div`,{onClick:()=>x(e,n),className:`px-[1.2vw] py-[0.8vw] bg-gray-200 text-gray-900 text-[1vw] font-medium cursor-pointer flex justify-between items-center border border-gray-300 hover:bg-gray-200 transition-colors`,children:[(0,F.jsxs)(`div`,{className:`flex items-center gap-[0.6vw] text-[0.95vw]`,children:[(0,F.jsx)(`div`,{className:`w-[2.2vw] h-[2.2vw] bg-[#333333] rounded-[0.45vw] flex items-center justify-center`,children:(0,F.jsx)(`svg`,{className:`w-[1vw] h-[1vw] text-white`,xmlns:`http://www.w3.org/2000/svg`,viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,strokeWidth:`2`,strokeLinecap:`round`,strokeLinejoin:`round`,children:(0,F.jsx)(`path`,{d:`M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z`})})}),(0,F.jsx)(`span`,{children:n}),(0,F.jsxs)(`span`,{className:`bg-white text-gray-900 px-[0.7vw] py-[0.25vw] rounded text-[0.8vw] font-medium`,children:[r.length,` Entry`,r.length>1?`ies`:``]})]}),a?(0,F.jsx)(Zl,{className:`w-[1.1vw] h-[1.1vw] text-gray-600`}):(0,F.jsx)(Xl,{className:`w-[1.1vw] h-[1.1vw] text-gray-600`})]}),a&&(0,F.jsx)(`div`,{className:`p-[0.25vw]`,children:(0,F.jsxs)(`table`,{className:`w-full border-collapse text-[0.85vw]`,children:[(0,F.jsx)(`thead`,{children:(0,F.jsxs)(`tr`,{className:`bg-gray-50`,children:[(0,F.jsx)(`th`,{className:`px-[0.9vw] py-[0.9vw] text-left border-b border-gray-200 text-gray-700 font-semibold`,children:`S. No.`}),(0,F.jsx)(`th`,{className:`px-[0.9vw] py-[0.9vw] text-left border-b border-gray-200 text-gray-700 font-semibold`,children:`Date`}),(0,F.jsx)(`th`,{className:`px-[0.9vw] py-[0.9vw] text-left border-b border-gray-200 text-gray-700 font-semibold`,children:`Company`}),(0,F.jsx)(`th`,{className:`px-[0.9vw] py-[0.9vw] text-left border-b border-gray-200 text-gray-700 font-semibold`,children:`Quantity`}),(0,F.jsx)(`th`,{className:`px-[0.9vw] py-[0.9vw] text-left border-b border-gray-200 text-gray-700 font-semibold`,children:`Comments`}),(0,F.jsx)(`th`,{className:`px-[0.9vw] py-[0.9vw] text-center border-b border-gray-200 text-gray-700 font-semibold`,children:`Actions`})]})}),(0,F.jsx)(`tbody`,{children:r.map((e,t)=>(0,F.jsxs)(`tr`,{className:`hover:bg-gray-50`,children:[(0,F.jsx)(`td`,{className:`px-[0.9vw] py-[0.8vw] border-b border-gray-100 text-gray-900`,children:t+1}),(0,F.jsx)(`td`,{className:`px-[0.9vw] py-[0.8vw] border-b border-gray-100 text-gray-900`,children:e.date||`-`}),(0,F.jsx)(`td`,{className:`px-[0.9vw] py-[0.8vw] border-b border-gray-100 text-gray-900`,children:e.company||`-`}),(0,F.jsx)(`td`,{className:`px-[0.9vw] py-[0.8vw] border-b border-gray-100 text-gray-900 font-medium`,children:e.qty||`-`}),(0,F.jsx)(`td`,{className:`px-[0.9vw] py-[0.8vw] border-b border-gray-100 text-gray-900`,children:e.comments||`-`}),(0,F.jsx)(`td`,{className:`px-[0.9vw] py-[0.8vw] border-b border-gray-100 text-center`,children:(0,F.jsx)(`button`,{onClick:()=>p(e),className:`px-[1.2vw] py-[0.45vw] text-[0.8vw] border border-blue-600 text-blue-600 rounded-full font-bold hover:bg-blue-600 hover:text-white transition-colors cursor-pointer`,children:`Verify & Send`})})]},e.id))})]})})]},i)})})]},e)})}):(0,F.jsx)(`div`,{className:`bg-white p-[3vw] rounded-lg shadow-sm text-center`,children:(0,F.jsx)(`p`,{className:`text-[1.1vw] text-gray-500 m-0`,children:`No inventory entries found. Once inventory is counted, entries will appear here.`})})]})},$l=`iml_inventory_followups`,eu=()=>{let e=He(),t=Ge(),{entry:n}=e.state||{},[r,i]=(0,_.useState)({company:``,product:``,size:``,countedQty:``,finalQty:``,remarks:``}),[a,o]=(0,_.useState)([]);(0,_.useEffect)(()=>{if(!n)return;let e=n.id;i(e=>({...e,company:n.company||``,product:n.product||``,size:n.size||``,countedQty:n.qty||``,finalQty:``,remarks:``}));let t=localStorage.getItem($l);o((t?JSON.parse(t):{})[e]||[])},[n]);let s=e=>{let{name:t,value:n}=e.target;i(e=>({...e,[t]:n}))},c=()=>{if(!r.finalQty||!r.remarks){alert(`Please enter both Final Quantity and Remarks`);return}let e={date:new Date().toLocaleDateString(`en-GB`),finalQty:r.finalQty,remarks:r.remarks},t=[...a,e];o(t);let s=n.id,c=localStorage.getItem($l),l=c?JSON.parse(c):{};l[s]=t,localStorage.setItem($l,JSON.stringify(l)),i(e=>({...e,finalQty:``,remarks:``})),alert(`Final quantity sent to Billing & Dispatch`)},l=()=>{t(`/iml/inventoryManagement`)};return(0,F.jsxs)(`div`,{className:`p-[1vw] font-sans bg-gray-50 min-h-screen`,children:[(0,F.jsxs)(`div`,{className:`flex justify-between items-center mb-[1vw]`,children:[(0,F.jsx)(`h1`,{className:`text-[1.75vw] text-gray-800 font-bold m-0`,children:`Inventory Verification`}),(0,F.jsxs)(`button`,{onClick:l,className:`flex items-center gap-[0.4vw] px-[1.25vw] py-[0.7vw] text-[0.9vw] bg-gray-600 text-white rounded-md font-medium hover:bg-gray-700 transition-colors cursor-pointer`,children:[(0,F.jsx)(`svg`,{xmlns:`http://www.w3.org/2000/svg`,viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,strokeWidth:`2`,strokeLinecap:`round`,strokeLinejoin:`round`,className:`w-[0.9vw] h-[0.9vw]`,children:(0,F.jsx)(`path`,{d:`M15 18l-6-6 6-6`})}),(0,F.jsx)(`span`,{children:`Back`})]})]}),(0,F.jsxs)(`div`,{className:`bg-white p-[1vw] rounded-lg shadow-sm border border-gray-200 mb-[1.5vw]`,children:[(0,F.jsxs)(`div`,{className:`grid grid-cols-4 gap-[1vw] mb-[1vw]`,children:[(0,F.jsxs)(`div`,{children:[(0,F.jsx)(`label`,{className:`block mb-[0.5vw] text-[0.85vw] font-medium text-gray-700`,children:`Company`}),(0,F.jsx)(`input`,{type:`text`,name:`company`,value:r.company,disabled:!0,className:`w-full px-[0.7vw] py-[0.7vw] text-[0.9vw] border border-gray-300 rounded-md bg-gray-100 cursor-not-allowed`})]}),(0,F.jsxs)(`div`,{children:[(0,F.jsx)(`label`,{className:`block mb-[0.5vw] text-[0.85vw] font-medium text-gray-700`,children:`Product`}),(0,F.jsx)(`input`,{type:`text`,name:`product`,value:r.product,disabled:!0,className:`w-full px-[0.7vw] py-[0.7vw] text-[0.9vw] border border-gray-300 rounded-md bg-gray-100 cursor-not-allowed`})]}),(0,F.jsxs)(`div`,{children:[(0,F.jsx)(`label`,{className:`block mb-[0.5vw] text-[0.85vw] font-medium text-gray-700`,children:`Size`}),(0,F.jsx)(`input`,{type:`text`,name:`size`,value:r.size,disabled:!0,className:`w-full px-[0.7vw] py-[0.7vw] text-[0.9vw] border border-gray-300 rounded-md bg-gray-100 cursor-not-allowed`})]}),(0,F.jsxs)(`div`,{children:[(0,F.jsx)(`label`,{className:`block mb-[0.5vw] text-[0.85vw] font-medium text-gray-700`,children:`Counted Quantity`}),(0,F.jsx)(`input`,{type:`text`,name:`countedQty`,value:r.countedQty,disabled:!0,className:`w-full px-[0.7vw] py-[0.7vw] text-[0.9vw] border border-gray-300 rounded-md bg-gray-100 cursor-not-allowed`})]})]}),(0,F.jsx)(`div`,{className:`border-t border-gray-300 pt-[1vw]`,children:(0,F.jsxs)(`div`,{className:`grid grid-cols-4 gap-[1.5vw] mb-[1vw]`,children:[(0,F.jsxs)(`div`,{children:[(0,F.jsx)(`label`,{className:`block mb-[0.5vw] text-[0.85vw] font-medium text-gray-700`,children:`Final Quantity for Billing`}),(0,F.jsx)(`input`,{type:`number`,name:`finalQty`,value:r.finalQty,onChange:s,placeholder:`Enter final quantity`,className:`w-full px-[0.7vw] py-[0.7vw] text-[0.9vw] border border-gray-300 rounded-md outline-none focus:border-blue-600 transition-colors`})]}),(0,F.jsxs)(`div`,{className:`col-span-2`,children:[(0,F.jsx)(`label`,{className:`block mb-[0.5vw] text-[0.85vw] font-medium text-gray-700`,children:`Remarks`}),(0,F.jsx)(`input`,{type:`text`,name:`remarks`,value:r.remarks,onChange:s,placeholder:`Enter remarks for Billing / Dispatch`,className:`w-full px-[0.7vw] py-[0.7vw] text-[0.9vw] border border-gray-300 rounded-md outline-none focus:border-blue-600 transition-colors`})]}),(0,F.jsxs)(`div`,{className:`col-span-1`,children:[(0,F.jsx)(`label`,{className:`block mb-[0.5vw] text-[0.85vw] font-medium text-gray-700 opacity-0 select-none`,children:`Add`}),(0,F.jsx)(`button`,{onClick:c,className:`px-[1.2vw] py-[0.7vw] text-[0.9vw] bg-green-600 text-white rounded-md font-medium hover:bg-green-700 transition-colors cursor-pointer`,children:`Send to Billing`})]})]})})]}),(0,F.jsxs)(`div`,{className:`bg-white p-[1vw] rounded-lg shadow-sm border border-gray-200 mb-[1.5vw]`,children:[(0,F.jsx)(`h3`,{className:`text-[1.2vw] font-semibold text-gray-800 mb-[1vw]`,children:`Dispatch Instruction History`}),a.length===0?(0,F.jsx)(`p`,{className:`text-[0.9vw] text-gray-500 m-0`,children:`No history available. Once you send final quantity, it will appear here.`}):(0,F.jsx)(`div`,{className:`overflow-x-auto`,children:(0,F.jsxs)(`table`,{className:`w-full border-collapse text-[0.85vw]`,children:[(0,F.jsx)(`thead`,{children:(0,F.jsxs)(`tr`,{className:`bg-gray-100`,children:[(0,F.jsx)(`th`,{className:`px-[0.9vw] py-[0.9vw] text-left border border-gray-300 text-gray-700 font-semibold`,children:`Date`}),(0,F.jsx)(`th`,{className:`px-[0.9vw] py-[0.9vw] text-left border border-gray-300 text-gray-700 font-semibold`,children:`Final Quantity`}),(0,F.jsx)(`th`,{className:`px-[0.9vw] py-[0.9vw] text-left border border-gray-300 text-gray-700 font-semibold`,children:`Remarks`})]})}),(0,F.jsx)(`tbody`,{children:a.map((e,t)=>(0,F.jsxs)(`tr`,{className:`hover:bg-gray-50`,children:[(0,F.jsx)(`td`,{className:`px-[0.9vw] py-[0.9vw] border border-gray-300 text-gray-900`,children:e.date}),(0,F.jsx)(`td`,{className:`px-[0.9vw] py-[0.9vw] border border-gray-300 text-gray-900`,children:e.finalQty}),(0,F.jsx)(`td`,{className:`px-[0.9vw] py-[0.9vw] border border-gray-300 text-gray-900`,children:e.remarks})]},t))})]})})]}),(0,F.jsx)(`div`,{className:`flex justify-end`,children:(0,F.jsx)(`button`,{onClick:()=>{alert(`Inventory verification data saved successfully!`),l()},className:`px-[1.25vw] py-[0.55vw] text-[1vw] bg-blue-600 text-white rounded-md font-semibold hover:bg-blue-700 transition-colors cursor-pointer`,children:`Submit`})})]})};function tu(){return(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(Sl,{}),`   `,(0,F.jsxs)(yt,{children:[(0,F.jsxs)(_t,{path:`/`,element:(0,F.jsx)(Kn,{}),children:[(0,F.jsx)(_t,{path:`iml/new-order`,element:(0,F.jsx)(cl,{})}),(0,F.jsx)(_t,{path:`iml/new-order2`,element:(0,F.jsx)(rl,{})}),(0,F.jsx)(_t,{path:`iml/purchaseManagement`,element:(0,F.jsx)(bl,{})}),(0,F.jsx)(_t,{path:`iml/purchase-details`,element:(0,F.jsx)(Al,{})}),(0,F.jsx)(_t,{path:`iml/purchase`,element:(0,F.jsx)(Fl,{})}),(0,F.jsx)(_t,{path:`iml/productionManagement`,element:(0,F.jsx)(zl,{})}),(0,F.jsx)(_t,{path:`iml/production-details`,element:(0,F.jsx)(ql,{})}),(0,F.jsx)(_t,{path:`iml/inventoryManagement`,element:(0,F.jsx)(Ql,{})}),(0,F.jsx)(_t,{path:`iml/inventory-details`,element:(0,F.jsx)(eu,{})}),(0,F.jsx)(_t,{path:`reports`,element:(0,F.jsx)(xl,{})})]}),(0,F.jsx)(_t,{path:`/login`,element:(0,F.jsx)(Cl,{})})]})]})}var nu=tu;g.createRoot(document.getElementById(`root`)).render((0,F.jsx)(nn,{basename:`/TTP_IML_1`,children:(0,F.jsx)(nu,{})}));